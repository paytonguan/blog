<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#000">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#000">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"paytonguan.github.io","root":"/blog/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","sidebar":"fadeIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="QuantumultX、Loon等。">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS网络代理工具的使用">
<meta property="og:url" content="https://paytonguan.github.io/blog/posts/iOS-Network-Proxy-Usage.html">
<meta property="og:site_name" content="Payton&#39;s blog">
<meta property="og:description" content="QuantumultX、Loon等。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://paytonguan.github.io/blog/posts/iOS-Network-Proxy-Usage/topic.jpg">
<meta property="article:published_time" content="2023-11-12T03:34:29.000Z">
<meta property="article:modified_time" content="2025-04-03T18:55:58.558Z">
<meta property="article:author" content="Payton">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://paytonguan.github.io/blog/posts/iOS-Network-Proxy-Usage/topic.jpg">

<link rel="canonical" href="https://paytonguan.github.io/blog/posts/iOS-Network-Proxy-Usage.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>iOS网络代理工具的使用 | Payton's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Payton's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Somewhere leisure.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://paytonguan.github.io/blog/posts/iOS-Network-Proxy-Usage.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Payton">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Payton's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          iOS网络代理工具的使用
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2023-11-12 11:34:29" itemprop="dateCreated datePublished" datetime="2023-11-12T11:34:29+08:00">2023-11-12</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-04-04 02:55:58" itemprop="dateModified" datetime="2025-04-04T02:55:58+08:00">2025-04-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/iOS/" itemprop="url" rel="index"><span itemprop="name">iOS</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>27k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>25 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="/blog/posts/iOS-Network-Proxy-Usage/topic.jpg"></p>
<p>QuantumultX、Loon等。</p>
<span id="more"></span>

<h1 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念"></a>基本概念</h1><h2 id="节点"><a href="#节点" class="headerlink" title="节点"></a>节点</h2><p>通常代表一个运行着某个协议程序（SS、SSR、V2ray、Trojan等）的代理服务器，通过代理服务器可以实现流量的中转。</p>
<h2 id="策略组与规则"><a href="#策略组与规则" class="headerlink" title="策略组与规则"></a>策略组与规则</h2><p>策略组可以包含节点或其他策略组，具有多种不同的策略类型。策略组是节点或其它策略组的集合，嵌套后最终必定会指向一个具体的节点。</p>
<p>策略组根据不同策略，分发规则传递过来的请求。规则决定了当一个请求进来时，如何通过匹配类型进行匹配，以及如何选用对应的策略。规则格式如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[匹配类型],[匹配关键字],[策略名称]</span><br><span class="line">// 如DOMAIN-SUFFIX,twimg.com,PROXY</span><br></pre></td></tr></table></figure>

<p>策略组必须绑定规则才能起作用。规则指定使用哪个策略组，而策略组根据具体需求选择其中某一个节点，结果即该规则指定的网站将被转发到该节点。</p>
<h2 id="重写"><a href="#重写" class="headerlink" title="重写"></a>重写</h2><p>即URL Rewrite。在接收到HTTP请求时，工具会使用请求的URL去寻找是否存在匹配的重写规则，若满足规则，则会替换或修改HTTP请求中的URL，或替换请求响应体。重写格式如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[正则表达式],[替换内容],[重写类型]</span><br><span class="line">// 如https?://(www.)?g.cn https://www.google.com 302</span><br><span class="line">// 表示匹配到g.cn或www.g.cn的URL会302重定向到https://www.google.com</span><br></pre></td></tr></table></figure>

<h2 id="MITM解密"><a href="#MITM解密" class="headerlink" title="MITM解密"></a>MITM解密</h2><p>Man-in-the-MiddleAttack的缩写，即中间人攻击。中间人攻击方式可以解密https的请求。工具会根据配置的hostname和信任的CA证书解密相应的https请求和响应，解密后可以配合Rule和URL Rewrite进行分流。</p>
<h2 id="Cron语句"><a href="#Cron语句" class="headerlink" title="Cron语句"></a>Cron语句</h2><p>格式如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[M（分钟，0-59）] [H（小时，0-23）] [D（天，1-31）] [m（月，1-12）] [d（星期，0-6，0为星期天)]</span><br></pre></td></tr></table></figure>

<p>特殊符号解释如下。</p>
<table>
<thead>
<tr>
<th>符号</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>*</td>
<td>所有取值范围的数字</td>
</tr>
<tr>
<td>&#x2F;</td>
<td>每（*&#x2F;5代表每5个单位）</td>
</tr>
<tr>
<td>-</td>
<td>从某个数字到某个数字</td>
</tr>
<tr>
<td>,</td>
<td>分开几个离散的数字</td>
</tr>
</tbody></table>
<p>举例如下。</p>
<table>
<thead>
<tr>
<th>语句</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>0 *&#x2F;2 * * *</td>
<td>每两个小时</td>
</tr>
<tr>
<td>0 23-7&#x2F;2,8 * * *</td>
<td>23点到7点之间每两个小时，8点</td>
</tr>
<tr>
<td>0 11 4 * 1-3</td>
<td>每月的4号和每星期周一到周三的11点</td>
</tr>
<tr>
<td>0 4 1 1 *</td>
<td>1月1日早上4点</td>
</tr>
<tr>
<td>* * * * *</td>
<td>每分钟</td>
</tr>
</tbody></table>
<p>可通过以下网站编辑cron语句。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://crontab.guru/</span><br><span class="line">https://tooltt.com/quartzcron/</span><br></pre></td></tr></table></figure>

<h2 id="配置文件"><a href="#配置文件" class="headerlink" title="配置文件"></a>配置文件</h2><p>网络调试工具用于配置自身相关设置的文件。一般包括节点、策略组、分流、重写、脚本、MITM解密等。一般而言，所有编辑都将对配置文件生效，分享配置文件即可分享本机的所有配置。</p>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><p>正则表达式是大小写敏感的。</p>
<table>
<thead>
<tr>
<th>语法</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>.</td>
<td>匹配除换行符以外的任意字符</td>
</tr>
<tr>
<td>|</td>
<td>或运算符，匹配符号前或后的字符</td>
</tr>
<tr>
<td>\</td>
<td>转义元字符（用于匹配保留字符，如[ ] ( ) { } . * + ? ^ $ \ |）</td>
</tr>
<tr>
<td><code>\&lt;</code></td>
<td>词首定位（<code>\&lt;love</code>）</td>
</tr>
<tr>
<td><code>\&gt;</code></td>
<td>词首定位（<code>love\&gt;</code>）</td>
</tr>
<tr>
<td>\w</td>
<td>匹配字母或数字或下划线或汉字</td>
</tr>
<tr>
<td>\W</td>
<td>匹配任意不是字母、数字、下划线、汉字的字符</td>
</tr>
<tr>
<td>\s</td>
<td>匹配任意的空白符</td>
</tr>
<tr>
<td>\S</td>
<td>匹配任意不是空白符的字符</td>
</tr>
<tr>
<td>\d</td>
<td>匹配数字</td>
</tr>
<tr>
<td>\D</td>
<td>匹配任意非数字的字符</td>
</tr>
<tr>
<td>\b</td>
<td>匹配单词的开始或结束</td>
</tr>
<tr>
<td>\B</td>
<td>匹配不是单词开头或结束的位置</td>
</tr>
<tr>
<td>\f</td>
<td>匹配一个换页符</td>
</tr>
<tr>
<td>\n</td>
<td>匹配一个换行符</td>
</tr>
<tr>
<td>\r</td>
<td>匹配一个回车符</td>
</tr>
<tr>
<td>\t</td>
<td>匹配一个制表符</td>
</tr>
<tr>
<td>\v</td>
<td>匹配一个垂直制表符</td>
</tr>
<tr>
<td>\p</td>
<td>匹配CR&#x2F;LF（等同于\r\n），用来匹配DOS行终止符</td>
</tr>
<tr>
<td><code>\(..\)</code></td>
<td>匹配稍后将要使用的字符的标签（<code>\(love\)able\1er</code>）</td>
</tr>
<tr>
<td>^</td>
<td>匹配字符串的开始</td>
</tr>
<tr>
<td>$</td>
<td>匹配字符串的结束</td>
</tr>
<tr>
<td>*</td>
<td>重复零次或更多次</td>
</tr>
<tr>
<td>+</td>
<td>重复一次或更多次</td>
</tr>
<tr>
<td>?</td>
<td>重复零次或一次</td>
</tr>
<tr>
<td>a|b</td>
<td>匹配a或b</td>
</tr>
<tr>
<td>*?</td>
<td>重复任意次，但尽可能少重复</td>
</tr>
<tr>
<td>+?</td>
<td>重复1次或更多次，但尽可能少重复</td>
</tr>
<tr>
<td>??</td>
<td>重复0次或1次，但尽可能少重复</td>
</tr>
<tr>
<td>{n}</td>
<td>重复n次（<code>x\&#123;m\&#125;</code>表示字符x重复出现m次）</td>
</tr>
<tr>
<td>{n,}</td>
<td>重复n次或更多次（<code>x\&#123;m,\&#125;</code>表示字符x重复出现m次以上）</td>
</tr>
<tr>
<td>{n,}?</td>
<td>重复n次以上，但尽可能少重复</td>
</tr>
<tr>
<td>{n,m}</td>
<td>重复n到m次（<code>x\&#123;m,n\&#125;</code>表示字符x重复出现m到n次）</td>
</tr>
<tr>
<td>{n,m}?</td>
<td>重复n到m次，但尽可能少重复</td>
</tr>
<tr>
<td>(exp)</td>
<td>匹配exp，并捕获文本到自动命名的组里（&#96;love(able</td>
</tr>
<tr>
<td>(..)(..)\1\2</td>
<td>标签匹配字符（<code>(love)able\1er</code>）</td>
</tr>
<tr>
<td>(?<name>exp)</td>
<td>匹配exp，并捕获文本到名称为name的组里，也可以写成(?’name’exp)</td>
</tr>
<tr>
<td>(?:exp)</td>
<td>匹配exp，不捕获匹配的文本，也不给此分组分配组号</td>
</tr>
<tr>
<td>(?&#x3D;exp)</td>
<td>匹配exp前面的位置（正先行断言）</td>
</tr>
<tr>
<td>(?&lt;&#x3D;exp)</td>
<td>匹配exp后面的位置（正后发断言）</td>
</tr>
<tr>
<td>(?!exp)</td>
<td>匹配后面跟的不是exp的位置（负先行断言）</td>
</tr>
<tr>
<td>(?&lt;!exp)</td>
<td>匹配前面不是exp的位置（负后发断言）</td>
</tr>
<tr>
<td><code>[ ]</code></td>
<td>匹配方括号内的任意字符（指定字符集）</td>
</tr>
<tr>
<td>[.]</td>
<td>匹配英文句号</td>
</tr>
<tr>
<td>[^x]</td>
<td>匹配除了x以外的任意字符</td>
</tr>
<tr>
<td>[^aeiou]</td>
<td>匹配除了aeiou这几个字母以外的任意字符</td>
</tr>
<tr>
<td>[a-z]</td>
<td>匹配a-z范围内的一个字符</td>
</tr>
<tr>
<td>[:alnum:]</td>
<td>字母与数字字符（<code>[[:alnum:]]+</code>）</td>
</tr>
<tr>
<td>[:alpha:]</td>
<td>字母字符，包括大小写（<code>[[:alpha:]]&#123;4&#125;</code>）</td>
</tr>
<tr>
<td>[:blank:]</td>
<td>空格与制表符（<code>[[:blank:]]*</code>）</td>
</tr>
<tr>
<td>[:digit:]</td>
<td>数字字母（<code>[[:digit:]]?</code>）</td>
</tr>
<tr>
<td>[:lower:]</td>
<td>小写字母（<code>[[:lower:]]&#123;5,&#125;</code>）</td>
</tr>
<tr>
<td>[:upper:]</td>
<td>大写字母（<code>[[:upper:]]+</code>）</td>
</tr>
<tr>
<td>[:punct:]</td>
<td>标点符号（<code>[[:punct:]]</code>）</td>
</tr>
<tr>
<td>[:space:]</td>
<td>包括换行符，回车等在内的所有空白（<code>[[:space:]]+</code>）</td>
</tr>
<tr>
<td>IgnoreCase</td>
<td>匹配时不区分大小写</td>
</tr>
<tr>
<td>Multiline</td>
<td>多行模式，更改^和<code>$</code>的含义，使它们分别在任意一行的行首和行尾匹配，而不仅仅在整个字符串的开头和结尾匹配。(在此模式下,$的精确含意是匹配\n之前的位置以及字符串结束前的位置)</td>
</tr>
<tr>
<td>Singleline</td>
<td>单行模式，更改.的含义，使它与每一个字符匹配（包括换行符\n）</td>
</tr>
<tr>
<td>IgnorePatternWhitespace</td>
<td>忽略空白，忽略表达式中的非转义空白并启用由#标记的注释</td>
</tr>
<tr>
<td>ExplicitCapture</td>
<td>显式捕获，仅捕获已被显式命名的组</td>
</tr>
<tr>
<td>i</td>
<td>忽略大小写</td>
</tr>
<tr>
<td>g</td>
<td>全局搜索</td>
</tr>
<tr>
<td>m</td>
<td>多行修饰符：锚点元字符^、$工作范围在每行的起始</td>
</tr>
</tbody></table>
<p>示例如下。</p>
<table>
<thead>
<tr>
<th>示例</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>the</td>
<td>匹配the</td>
</tr>
<tr>
<td>.ar</td>
<td>匹配一个任意字符后面跟着是a和r的字符串</td>
</tr>
<tr>
<td>[Tt]he</td>
<td>匹配the和The</td>
</tr>
<tr>
<td>ar[.]</td>
<td>匹配ar.</td>
</tr>
<tr>
<td>[^c]ar</td>
<td>匹配一个后面跟着ar的除了c的任意字符</td>
</tr>
<tr>
<td>[a-z]*</td>
<td>匹配一个行中所有以小写字母开头的字符串</td>
</tr>
<tr>
<td>\s<em>cat\s</em></td>
<td>匹配0或更多个空格开头和0或更多个空格结尾的cat字符串</td>
</tr>
<tr>
<td>c.+t</td>
<td>匹配以首字母c开头以t结尾，中间跟着至少一个字符的字符串</td>
</tr>
<tr>
<td>[T]?he</td>
<td>匹配字符串he和The</td>
</tr>
<tr>
<td>[0-9]{2,3}</td>
<td>匹配最少2位最多3位0~9的数字</td>
</tr>
<tr>
<td>[0-9]{2,}</td>
<td>匹配至少两位0~9的数字</td>
</tr>
<tr>
<td>[0-9]{3}</td>
<td>匹配3位数字</td>
</tr>
<tr>
<td>(at.)$</td>
<td>匹配以at.结尾的字符串</td>
</tr>
<tr>
<td>&#x2F;The&#x2F;gi</td>
<td>在全局搜索the和The（i表示忽略大小写，g表示全局搜索）</td>
</tr>
<tr>
<td>&#x2F;.(at)&#x2F;g</td>
<td>搜索任意字符（除了换行）+at，并返回全部结果</td>
</tr>
<tr>
<td>&#x2F;at(.)?$&#x2F;gm</td>
<td>表示小写字符a后跟小写字符t，末尾可选除换行符外任意字符，匹配每行的结尾</td>
</tr>
<tr>
<td>&#x2F;(.*at)&#x2F;</td>
<td>贪婪匹配模式</td>
</tr>
<tr>
<td>&#x2F;(.*?at)&#x2F;</td>
<td>惰性匹配模式</td>
</tr>
<tr>
<td>(c|g|p)ar</td>
<td>匹配car或gar或par</td>
</tr>
<tr>
<td>(T|t)he|car</td>
<td>匹配(T|t)he或car</td>
</tr>
<tr>
<td>.?</td>
<td>选择性匹配.</td>
</tr>
<tr>
<td>^(T|t)he</td>
<td>匹配以The或the开头的字符串</td>
</tr>
<tr>
<td>(T|t)he(?&#x3D;\sfat)</td>
<td>匹配The和the，且其后紧跟着（空格）fat</td>
</tr>
<tr>
<td>(T|t)he(?!\sfat)</td>
<td>匹配The和the，且其后不跟着（空格）fat</td>
</tr>
<tr>
<td>(?&lt;&#x3D;(T|t)he\s)(fat|mat)</td>
<td>匹配fat和mat，且其前跟着The或the</td>
</tr>
<tr>
<td>(?&lt;!(T|t)he\s)(cat)</td>
<td>匹配cat，且其前不跟着The或the</td>
</tr>
</tbody></table>
<h2 id="响应码"><a href="#响应码" class="headerlink" title="响应码"></a>响应码</h2><table>
<thead>
<tr>
<th>响应码</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>200</td>
<td>请求被正常处理</td>
</tr>
<tr>
<td>204</td>
<td>请求被受理，但没有资源可以返回</td>
</tr>
<tr>
<td>206</td>
<td>客户端只是请求资源的⼀部分，服务器只对请求的部分资源执⾏GET⽅法</td>
</tr>
<tr>
<td>301</td>
<td>永久性重定向</td>
</tr>
<tr>
<td>302</td>
<td>临时重定向</td>
</tr>
<tr>
<td>303</td>
<td>与302状态码有相似功能，只是它希望客户端在请求⼀个URI的时候，能通过GET⽅法重定向到另⼀个URI上</td>
</tr>
<tr>
<td>304</td>
<td>发送附带条件的请求时，条件不满足时返回，与重定向⽆关</td>
</tr>
<tr>
<td>307</td>
<td>临时重定向，与302类似，只是强制要求使⽤POST⽅法</td>
</tr>
<tr>
<td>400</td>
<td>请求报⽂语法有误，服务器⽆法识别</td>
</tr>
<tr>
<td>401</td>
<td>请求需要认证</td>
</tr>
<tr>
<td>403</td>
<td>请求的对应资源禁⽌被访问</td>
</tr>
<tr>
<td>404</td>
<td>服务器无法找到对应资源</td>
</tr>
<tr>
<td>500</td>
<td>服务器内部错误</td>
</tr>
<tr>
<td>503</td>
<td>服务器正忙</td>
</tr>
</tbody></table>
<h1 id="Quantumult"><a href="#Quantumult" class="headerlink" title="Quantumult"></a>Quantumult</h1><h2 id="基本操作"><a href="#基本操作" class="headerlink" title="基本操作"></a>基本操作</h2><h3 id="节点选择"><a href="#节点选择" class="headerlink" title="节点选择"></a>节点选择</h3><p>点击主页中下部的图标，可选择节点并进行延迟。在访问的网站没有被规则命中，而又需要以代理方式连接时，将选择此处被选中的节点。注意，延迟与网速并无直接关系。</p>
<p>主页右下角显示当前节点的信息。若出现五角星，代表该节点为中转节点。</p>
<h2 id="懒人配置"><a href="#懒人配置" class="headerlink" title="懒人配置"></a>懒人配置</h2><p>打开软件，选择设置-下载配置文件，导入以下配置。注意需要翻墙环境。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/lhie1/Rules/master/Quantumult/Quantumult.conf</span><br></pre></td></tr></table></figure>

<p>点击设置-HTTPS解密，打开开关并按照流程信任证书即可。</p>
<h2 id="节点-1"><a href="#节点-1" class="headerlink" title="节点"></a>节点</h2><p>Quantumult仅支持obfs的简单混淆，包括http和tls，不支持v2ray-plugin的混淆。<br>可直接点击设置-服务器添加单个节点，或点击设置-订阅添加订阅。</p>
<p>也可通过修改配置文件的方式，如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Sample Offline 01 = shadowsocks, 204.79.197.200, 80, chacha20, &quot;password&quot;, upstream-proxy=false, upstream-proxy-auth=false, obfs=http, obfs-host=&quot;bing.com&quot;</span><br><span class="line">Sample Offline 02 = shadowsocksr, 204.79.197.200, 80, aes-128-cfb, &quot;password&quot;, protocol=auth_chain_b, obfs=tls1.2_ticket_fastauth, obfs_param=&quot;bing.com&quot;</span><br><span class="line">Sample v2ray = vmess, 127.0.0.1, 443, none, &quot;dd56b429-39d5-3984-87ed-6811f34c3fd3&quot;, over-tls=false, certificate=1</span><br></pre></td></tr></table></figure>

<h2 id="规则分流"><a href="#规则分流" class="headerlink" title="规则分流"></a>规则分流</h2><h3 id="手动配置"><a href="#手动配置" class="headerlink" title="手动配置"></a>手动配置</h3><p>通过设置-订阅-<code>+</code>即可。保存后向左滑动条目并点击替换或增加以更新。</p>
<p>对于分流类型，可采用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/Pro.conf</span><br></pre></td></tr></table></figure>

<p>对于链接阻止类型，可采用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/Rejection.conf</span><br></pre></td></tr></table></figure>

<h2 id="策略组"><a href="#策略组" class="headerlink" title="策略组"></a>策略组</h2><h3 id="基本分类"><a href="#基本分类" class="headerlink" title="基本分类"></a>基本分类</h3><p>策略组类型如下。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>静态策略</td>
<td>策略结果由用户确定</td>
</tr>
<tr>
<td>延迟策略</td>
<td>选择策略组中延迟最低的节点进行连接</td>
</tr>
<tr>
<td>负载均衡策略</td>
<td>同一策略组的各服务器被轮流使用</td>
</tr>
<tr>
<td>环境策略</td>
<td>根据所处Wi-Fi的SSID或蜂窝网络环境，确定使用哪种策略组进行连接</td>
</tr>
</tbody></table>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>以下例说明策略组的使用方法。</p>
<p>假设有香港、新加坡、美国三个地区的节点组，其中每个地区的节点组可分为直连的当地主机节点组、上海-当地的IPLC节点组以及深圳-当地的IPLC节点组。根据需要，Youtube选用美国节点，HBO选用香港节点，Netflix任意选择，且选择节点组中最快的一个进行连接。此需要可以通过新建策略组来满足。</p>
<p>选择设置-策略，点击+号。由于需要根据速度选择节点，因此类型选择延迟策略。以建立香港直连节点组为例，填写名称并选择所有香港的直连节点，保存。同理建立上海-香港IPLC节点组和深圳-香港IPLC节点组（第三类节点组）。完成后建立静态策略的策略组，选择刚才新建好的三个策略组，由此可得到一个包含三个节点组的大节点组（第二类节点组）。</p>
<p>对于美国和新加坡也进行此操作，得到三个代表不同地区的大节点组。新建一个静态策略的策略组，选择这三个大节点组，从而得到一个综合所有节点组的超大节点组（第一类节点组）。示意如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">└── 总策略组（静态策略）</span><br><span class="line">    ├── 香港（静态策略）</span><br><span class="line">    │   ├── 直连节点（延迟策略）</span><br><span class="line">    │   ├── 上海-香港IPLC节点（延迟策略）</span><br><span class="line">    │   └── 深圳-香港IPLC节点（延迟策略）</span><br><span class="line">    ├── 新加坡（静态策略）</span><br><span class="line">    │   ├── 直连节点（延迟策略）</span><br><span class="line">    │   ├── 上海-新加坡IPLC节点（延迟策略）</span><br><span class="line">    │   └── 深圳-新加坡IPLC节点（延迟策略）</span><br><span class="line">    └── 美国（静态策略）</span><br><span class="line">        ├── 直连节点（延迟策略）</span><br><span class="line">        ├── 上海-美国IPLC节点（延迟策略）</span><br><span class="line">        └── 深圳-美国IPLC节点（延迟策略）</span><br></pre></td></tr></table></figure>

<p>在设置-订阅中左滑分流规则，选择替换。下滑找到Youtube专用节点，选择第二类的美国节点，找到HBO NOW&amp;GO专用节点，选择第二类的香港节点，找到Netflix专用节点，选择第一类的节点，保存即可。</p>
<h2 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h2><h3 id="手机连接WiFi时停止分流"><a href="#手机连接WiFi时停止分流" class="headerlink" title="手机连接WiFi时停止分流"></a>手机连接WiFi时停止分流</h3><p>编辑配置文件，在<code>[SUSPEND-SSID]</code>一项下输入Wi-Fi名称即可。</p>
<h1 id="QuantumultX"><a href="#QuantumultX" class="headerlink" title="QuantumultX"></a>QuantumultX</h1><h2 id="正版判断"><a href="#正版判断" class="headerlink" title="正版判断"></a>正版判断</h2><p>Quantumult X引入了防共享机制，版本号右侧有绿色√的即为正版。若为问号，则代表被检测到有共享账号行为。</p>
<p>若显示绿色问号，先删除TestFlight测试版，安装App Store最新版并运行，待版本信息显示为绿色√后再安装TestFlight测试版。</p>
<p>若显示红色问号，则证明为盗版。若为非正版，Rewrite和MitM功能将被限制。</p>
<p>关于共享验证，若不开启iCloud，则只能验证八台设备。若开启iCloud，则将有三个iCloud辅助验证名额。使用iCloud验证并无设备数量限制，以首次使用Quantumult X并开启iCloud功能的iCloud为准，注意App Store中的Apple ID与iCloud可以不一致。因此，若所有设备都使用同一个iCloud账号，则无数量限制。</p>
<h2 id="基本操作-1"><a href="#基本操作-1" class="headerlink" title="基本操作"></a>基本操作</h2><h3 id="三菱按钮"><a href="#三菱按钮" class="headerlink" title="三菱按钮"></a>三菱按钮</h3><p>长按三菱按钮可切换模式，左侧出现的更新按钮可一键更新所有节点。</p>
<h3 id="延迟测试"><a href="#延迟测试" class="headerlink" title="延迟测试"></a>延迟测试</h3><p>延迟测试可在主页面展开订阅，下拉即可。</p>
<p>也可以长按节点名，选择<code>网页响应测试</code>来测对应节点&#x2F;订阅的延迟，或者点按策略组图标。</p>
<h3 id="双排图标"><a href="#双排图标" class="headerlink" title="双排图标"></a>双排图标</h3><p>在主界面中，向右滑动策略组图标至最左端后，再次向右滑可变为小图标，再次向右滑可变为双排。</p>
<h3 id="隐藏VPN图标"><a href="#隐藏VPN图标" class="headerlink" title="隐藏VPN图标"></a>隐藏VPN图标</h3><p>点击三菱图标，选择其他设置，在VPN下开启<code>排除路由0.0.0.0/31</code>即可。</p>
<h3 id="网络活动日志模块"><a href="#网络活动日志模块" class="headerlink" title="网络活动日志模块"></a>网络活动日志模块</h3><p>在主界面中即可看到。该模块可以看到iOS所有网络请求。绿色小锁代表MitM命中域名，链接颜色变红则说明rewrite即重写规则规则生效。</p>
<p>可通过该模块完成抓包行为，也可检查节点、策略、分流、重写、MitM的配置是否起作用。</p>
<h3 id="注释符号"><a href="#注释符号" class="headerlink" title="注释符号"></a>注释符号</h3><p><code>;</code>、<code>//</code>、<code>#</code>在配置文件中为注释符号。</p>
<h3 id="开启iCloud"><a href="#开启iCloud" class="headerlink" title="开启iCloud"></a>开启iCloud</h3><p>点击三菱图标，选择其他设置，开启iCloud即可。</p>
<p>若未开启iCloud，则相关文件将存到我的iPhone&#x2F;Quantumult X目录，其中脚本将被放于Scripts文件夹。若开启，则变更为iCloud Drive&#x2F;Quantumult X目录。</p>
<h3 id="白色环形标志"><a href="#白色环形标志" class="headerlink" title="白色环形标志"></a>白色环形标志</h3><p>若主界面的策略组模块上有白色环形标志，则代表可以长按以添加或删除其中的节点。</p>
<h3 id="配置文件快速定位"><a href="#配置文件快速定位" class="headerlink" title="配置文件快速定位"></a>配置文件快速定位</h3><p>点击右上角的方向图标按钮，可快速定位到配置文件的不同部分。</p>
<h2 id="懒人配置-1"><a href="#懒人配置-1" class="headerlink" title="懒人配置"></a>懒人配置</h2><h3 id="通过链接"><a href="#通过链接" class="headerlink" title="通过链接"></a>通过链接</h3><p>点击三菱图标，选择配置文件中的导入，复制以下链接，点击确定。</p>
<p>找到MinM模块，点击生成证书，提示生成成功。点击安装证书并按照流程完成信任即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/nzw9314/QuantumultX/master/QuantumultX.conf</span><br></pre></td></tr></table></figure>

<h3 id="通过托管绑定"><a href="#通过托管绑定" class="headerlink" title="通过托管绑定"></a>通过托管绑定</h3><p>托管绑定的配置会自动与远端保持同步，更新时本地配置会被远端配置覆盖。</p>
<p>支持绑定远程、本地、iCloud配置文件。若绑定iCloud配置文件，则APP内所做的修改会立即生效到配置文件本身。</p>
<p>点击三菱图标，选择右上角的关联图标，填入配置链接或文件名。若引用iCloud配置文件，则需要将文件先放到iCloud Drive&#x2F;QuantumultX&#x2F;Profiles中，假设为QX01.txt，然后直接填写QX01.txt即可。</p>
<h3 id="通过URL-Scheme"><a href="#通过URL-Scheme" class="headerlink" title="通过URL Scheme"></a>通过URL Scheme</h3><p>按照以下JSON方式填写，其中server_remote填写节点订阅链接，filter_remote填写分流规则，rewrite_remote填写复写规则链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    &quot;server_remote&quot;: [</span><br><span class="line">        &quot;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server.txt, tag=Sample-01&quot;,</span><br><span class="line">        &quot;https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server-complete.txt, tag=Sample-02&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;filter_remote&quot;: [</span><br><span class="line">        &quot;https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Filter/Advertising.list, tag=去广告, enabled=true&quot;,</span><br><span class="line">        &quot;https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Filter/Apple.list, tag=Apple服务, enabled=true&quot;,</span><br><span class="line">        &quot;https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Filter/China.list, tag=国内网站, enabled=true&quot;,</span><br><span class="line">        &quot;https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Filter/DomesticMedia.list, tag=国内视频, enabled=true&quot;,</span><br><span class="line">        &quot;http://cloudcompute.lbyczf.com/x-rule-set?url=https://raw.githubusercontent.com/ConnersHua/Profiles/master/Surge/Ruleset/Media/Netflix.list, tag=📺Netflix, force-policy=📺 Netflix, enabled=true&quot;,</span><br><span class="line">        &quot;http://cloudcompute.lbyczf.com/x-rule-set?url=https://raw.githubusercontent.com/ConnersHua/Profiles/master/Surge/Ruleset/Media/YouTube.list, tag=🎬Youtube, force-policy=🎬 Youtube, enabled=true&quot;,</span><br><span class="line">        &quot;https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Filter/ForeignMedia.list, tag=国外视频, enabled=true&quot;,</span><br><span class="line">        &quot;https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Filter/Global.list, tag=国外网站, enabled=true&quot;,</span><br><span class="line">        &quot;https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Filter/Hijacking.list, tag=运营商劫持, enabled=true&quot;</span><br><span class="line">    ],</span><br><span class="line">    &quot;rewrite_remote&quot;: [</span><br><span class="line">        &quot; http://cloudcompute.lbyczf.com/quanx-rewrite, tag=Lhie1复写&quot;</span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>打开以下网站，复制以上代码并点击Encode，复制结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.urlencoder.org/</span><br></pre></td></tr></table></figure>

<p>将复制的结果加到如下格式，并在Safari打开该链接即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">quantumult-x:///update-configuration?remote-resource=[结果]</span><br></pre></td></tr></table></figure>

<h2 id="通用"><a href="#通用" class="headerlink" title="通用"></a>通用</h2><h3 id="SSID挂起"><a href="#SSID挂起" class="headerlink" title="SSID挂起"></a>SSID挂起</h3><p>指定在特定Wi-Fi环境下Quantumult X停止工作，只有<code>[task]</code>模块生效。示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">ssid_suspended_list = [Wi-Fi的SSID]</span><br></pre></td></tr></table></figure>

<h3 id="运行模式切换"><a href="#运行模式切换" class="headerlink" title="运行模式切换"></a>运行模式切换</h3><p>可根据网络自动切换分流&#x2F;直连&#x2F;全局代理等模式，示例如下。其表示4G网络与普通Wi-Fi下运行filter分流模式，asus-5g 则切换为全局直连模式，asus则为全局代理模式。该模式与手动切换直连&#x2F;全局代理等效，rewrite和task模块始终生效。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">running_mode_trigger=filter, filter, asus-5g:all_direct, asus: all_proxy</span><br></pre></td></tr></table></figure>

<h3 id="资源解析器"><a href="#资源解析器" class="headerlink" title="资源解析器"></a>资源解析器</h3><p>资源解析器可将任何格式的服务器订阅、规则、复写等资源转换成Quantumult X所支持的格式。</p>
<h4 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h4><p>在编辑文件中加入以下代码即可。</p>
<p>若提示没有自定义解析器，则长按右下角图标后点击左侧刷新按钮，更新资源，后台退出APP，直到出现解析器说明。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">resource_parser_url=https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/resource-parser.js</span><br></pre></td></tr></table></figure>

<h4 id="参数说明"><a href="#参数说明" class="headerlink" title="参数说明"></a>参数说明</h4><table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>in&#x2F;out</td>
<td>保留&#x2F;排除，多参数（逻辑或）用<code>+</code>连接，逻辑与用<code>.</code>连接</td>
<td></td>
</tr>
<tr>
<td>inhn&#x2F;outhn</td>
<td>主机名筛选</td>
<td></td>
</tr>
<tr>
<td>regex</td>
<td>利用正则表达式以筛选节点</td>
<td></td>
</tr>
<tr>
<td>emoji&#x3D;1&#x2F;2&#x2F;-1</td>
<td>添加或删除节点名中的emoji旗帜（国行设备用 emoji&#x3D;2）</td>
<td></td>
</tr>
<tr>
<td>udp&#x3D;1, tfo&#x3D;1</td>
<td>开启udp-relay及fast-open（默认关闭，此参数对源类型为QuanX&#x2F;Surge的链接无效）</td>
<td></td>
</tr>
<tr>
<td>rename</td>
<td>rename&#x3D;旧名@新名，以及<code>前缀@</code>，<code>@后缀</code>， 用<code>+</code>连接</td>
<td>rename&#x3D;香港@HK+[SS]@+@[1X]</td>
</tr>
<tr>
<td>delreg</td>
<td>利用正则表达式以删除节点名中的字段</td>
<td></td>
</tr>
<tr>
<td>replace</td>
<td>正则替换server中的内容，可用于重命名、更改加密方式等需求</td>
<td></td>
</tr>
<tr>
<td>cert&#x3D;0</td>
<td>跳过证书验证（vmess&#x2F;trojan），即强制tls-verification&#x3D;false</td>
<td></td>
</tr>
<tr>
<td>tls13&#x3D;1</td>
<td>开启tls13&#x3D;true（vmess&#x2F;trojan）</td>
<td></td>
</tr>
<tr>
<td>sort&#x3D;1&#x2F;-1&#x2F; x</td>
<td>根据节点名正序&#x2F;逆序&#x2F;随机排列</td>
<td></td>
</tr>
<tr>
<td>info&#x3D;1</td>
<td>开启通知提示流量信息（前提是原订阅链接有返回该信息），默认关闭</td>
<td></td>
</tr>
<tr>
<td>policy&#x3D;xx</td>
<td>分流规则专用，用于直接指定策略组或为Surge格式的rule-set生成策略组（默认Shawn策略组）</td>
<td></td>
</tr>
<tr>
<td>ntf&#x3D;1</td>
<td>打开资源解析器的提示通知（默认关闭），rewrite&#x2F;filter类型则会强制在out参数时开启通知提示被删除（禁用）的内容，以防止规则误删除</td>
<td></td>
</tr>
</tbody></table>
<h4 id="示例"><a href="#示例" class="headerlink" title="示例"></a>示例</h4><p>示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 远程订阅</span><br><span class="line">// 保留参数in=tls+ss，过滤参数out=http+2</span><br><span class="line">https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server-complete.txt#in=tls+ss&amp;out=http+2</span><br><span class="line"></span><br><span class="line">// 分流规则</span><br><span class="line">https://Advertising.list#policy=Shawn&amp;out=aweme</span><br></pre></td></tr></table></figure>

<h3 id="查询节点信息"><a href="#查询节点信息" class="headerlink" title="查询节点信息"></a>查询节点信息</h3><p>可通过JS脚本实现在主界面查询节点信息，在点击相应的节点时出现节点相关内容。代码放到配置文件的<code>[general]</code>下即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">;geo_location_checker用于节点页面的信息展示</span><br><span class="line">geo_location_checker=http://ip-api.com/json/?lang=zh-CN, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IP_API.js</span><br><span class="line">;geo_location_checker=http://api.ipstack.com/check?access_key=1c24147fb534e1a71cb35ff84de2d153&amp;language=zh&amp;output=json, https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IPInfo.js</span><br><span class="line">;geo_location_checker=http://ifconfig.co/json,https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IPConfig.js</span><br><span class="line">;geo_location_checker=http://extreme-ip-lookup.com/json/,https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/Scripts/IPCheck.js</span><br></pre></td></tr></table></figure>

<h3 id="设置关联图标"><a href="#设置关联图标" class="headerlink" title="设置关联图标"></a>设置关联图标</h3><p>设置profile_img_url参数可使关联成功后原关联图标出现图案。图片为108*108的png格式，PNG与png大小写敏感，地址可远程或本地。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">profile_img_url= https://raw.githubusercontent.com/KOP-XIAO/QuantumultX/master/img/dragonball/1.PNG</span><br></pre></td></tr></table></figure>

<h3 id="节点测试"><a href="#节点测试" class="headerlink" title="节点测试"></a>节点测试</h3><p>指定用于测试节点速度的网站。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">server_check_url=http://www.qualcomm.cn/generate_204</span><br></pre></td></tr></table></figure>

<h3 id="UDP端口白名单"><a href="#UDP端口白名单" class="headerlink" title="UDP端口白名单"></a>UDP端口白名单</h3><p>留空则默认为所有端口。不在白名单的端口将被丢弃。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">udp_whitelist=53, 123, 1900, 80-443</span><br></pre></td></tr></table></figure>

<h3 id="其它-1"><a href="#其它-1" class="headerlink" title="其它"></a>其它</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[general]</span><br><span class="line">;dns exclusion list中的域名将不使用fake-ip方式. 其它域名则全部采用fake-ip 及远程解析的模式</span><br><span class="line">;dns_exclusion_list=*.qq.com, qq.com</span><br><span class="line"></span><br><span class="line">;下列表中的内容将不经过QuantumultX的处理</span><br><span class="line">;excluded_routes=192.168.0.0/16, 172.16.0.0/12, 100.64.0.0/10, 10.0.0.0/8</span><br><span class="line">;icmp_auto_reply=true</span><br></pre></td></tr></table></figure>

<h2 id="节点-2"><a href="#节点-2" class="headerlink" title="节点"></a>节点</h2><p>对于订阅链接，Quantumult X支持流量使用统计。</p>
<h3 id="手动配置-1"><a href="#手动配置-1" class="headerlink" title="手动配置"></a>手动配置</h3><p>点击三菱图标，选择节点中的添加即可手动输入Shadowsocks节点。选择扫码或URI可导入Shadowsocks、ShadowsocksR或Quantumult X格式的Vmess、Trojan和Https节点。</p>
<p>选择节点中的引用，即可添加订阅。可使用远程订阅链接，也可以使用本地&#x2F;iCloud文件路径进行引用。</p>
<p>订阅文件格式与<code>[server_local]</code>模块下的写法一致，不包含<code>[server_local]</code>本身。注意必须是明文，不能进行base64加密。</p>
<p>也可通过修改配置文件的方式导入，格式如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">[server_local]</span><br><span class="line"># []表示可选项</span><br><span class="line"># SS</span><br><span class="line">shadowsocks=example.com:80, method=chacha20, password=pwd, obfs=http, obfs-host=bing.com, [obfs-uri=/resource/file], fast-open=false, udp-relay=false, [server_check_url=http://www.apple.com/generate_204], tag=Sample-A</span><br><span class="line"></span><br><span class="line"># SS+WS</span><br><span class="line">shadowsocks=example.com:80, method=aes-128-gcm, password=pwd, obfs=ws, [obfs-uri=/ws], fast-open=false, udp-relay=false, tag=Sample-E</span><br><span class="line"></span><br><span class="line"># SS+WS+TLS</span><br><span class="line">shadowsocks=example.com:443, method=aes-128-gcm, password=pwd, obfs=wss, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=Sample-G</span><br><span class="line"></span><br><span class="line"># SSR</span><br><span class="line">shadowsocks=example.com:443, method=chacha20, password=pwd, ssr-protocol=auth_chain_b, ssr-protocol-param=def, obfs=tls1.2_ticket_fastauth, obfs-host=bing.com, tag=Sample-D</span><br><span class="line"></span><br><span class="line"># Vmess</span><br><span class="line">vmess=example.com:80, method=aes-128-gcm, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, fast-open=false, udp-relay=false, tag=Sample-J</span><br><span class="line"></span><br><span class="line"># Vmess+WS</span><br><span class="line">vmess=example.com:80, method=chacha20-ietf-poly1305, password= 23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=ws-c.example.com, obfs=ws, obfs-uri=/ws, fast-open=false, udp-relay=false, tag=Sample-H</span><br><span class="line"></span><br><span class="line"># Vmess+WS+TLS</span><br><span class="line">vmess=ws-tls-b.example.com:443, method=chacha20-ietf-poly1305, password= 23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=ws-tls-b.example.com, obfs=wss, obfs-uri=/ws, tls-verification=true,fast-open=false, udp-relay=false, tag=Sample-I</span><br><span class="line"></span><br><span class="line"># Vmess+over TLS</span><br><span class="line">vmess=example.com:443, method=none, password=23ad6b10-8d1a-40f7-8ad0-e3e35cd32291, obfs-host=vmess-over-tls.example.com, obfs=over-tls, tls-verification=true, fast-open=false, udp-relay=false, tag=Sample-L</span><br><span class="line"></span><br><span class="line"># Http</span><br><span class="line">http=http.example.com:80, username=name, password=pwd, fast-open=false, udp-relay=false, tag=http</span><br><span class="line"></span><br><span class="line"># Https</span><br><span class="line">http=https.example.com:443, username=name, password=pwd, over-tls=true, tls-verification=true, tls-host=example.com, fast-open=false, udp-relay=false, tag=http-tls</span><br><span class="line"></span><br><span class="line"># Trojan+TLS</span><br><span class="line">trojan=192.168.1.1:443, password=pwd, over-tls=true, [tls-host=example.com], tls-verification=true, fast-open=false, udp-relay=false, tag=trojan-tls</span><br><span class="line"></span><br><span class="line">[server_remote]</span><br><span class="line"># 远程订阅</span><br><span class="line">https://raw.githubusercontent.com/crossutility/Quantumult-X/master/server.txt, tag=example1, enabled=true</span><br><span class="line"># 本地文件</span><br><span class="line">server.txt, tag=example2, enabled=true</span><br></pre></td></tr></table></figure>

<h3 id="分组图标"><a href="#分组图标" class="headerlink" title="分组图标"></a>分组图标</h3><p>在配置文件中找到要添加图标的订阅链接，添加img-url参数即可，示例如下。注意图标格式必须为png，且分辨率必须为<code>108*108</code>像素。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">img-url=https://raw.githubusercontent.com/Koolson/Qure/master/IconSet/IPLC.png</span><br></pre></td></tr></table></figure>

<h2 id="策略组-1"><a href="#策略组-1" class="headerlink" title="策略组"></a>策略组</h2><h3 id="基本分类-1"><a href="#基本分类-1" class="headerlink" title="基本分类"></a>基本分类</h3><p>Quantumult X支持的策略组类型如下。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Static</td>
<td>静态策略组</td>
<td>可以嵌套其它所有类型的策略组，需手动选择路线&#x2F;子策略组（需至少配置一个节点）</td>
</tr>
<tr>
<td>Available</td>
<td>健康检查策略组</td>
<td>只可直接套用节点，不可嵌套其它策略组，自动选择第一个可用的节点（需至少配置两个节点）</td>
</tr>
<tr>
<td>Round-Robin</td>
<td>轮询策略组</td>
<td>只能直接套用节点，不可以嵌套其它策略组，按网络请求轮流使用所有节点（需至少配置两个节点）</td>
</tr>
<tr>
<td>SSID</td>
<td>SSID策略组</td>
<td>可以套用其它类型的策略组，根据网络&#x2F;Wi-Fi切换节点&#x2F;策略</td>
</tr>
</tbody></table>
<h3 id="手动配置-2"><a href="#手动配置-2" class="headerlink" title="手动配置"></a>手动配置</h3><p>在节点订阅列表中右滑，选择更多，即可将该订阅链接内所有节点直接绑定生成一个新策略组。支持生成static静态策略、available健康检查策略、round-robin负载均衡策略。该方式生成的策略组将与订阅链接绑定，节点也跟随订阅链接改变。也可通过配置文件的方式生成，在<code>[server-remote]</code>中填写即可，示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[server-remote]</span><br><span class="line"># 生成Hong Kong的策略组, 类型是static, 由as-policy决定</span><br><span class="line">https://xxxx.server.com, tag=Hong Kong, as-policy=static, enabled=true</span><br></pre></td></tr></table></figure>

<p>若需要直接创建策略组，可直接编辑配置文件。示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">[policy]</span><br><span class="line"># 静态策略组</span><br><span class="line">static=policy-name-1, Sample-A, Sample-B, Sample-C</span><br><span class="line"></span><br><span class="line"># 可用性策略组</span><br><span class="line">available=policy-name-2, Sample-A, Sample-B, Sample-C</span><br><span class="line"></span><br><span class="line"># 轮询策略组</span><br><span class="line">round-robin=policy-name-3, Sample-A, Sample-B, Sample-C</span><br><span class="line"></span><br><span class="line"># SSID策略组</span><br><span class="line"># ssid=组名,4g下默认策略,Wi-Fi下默认策略,wifi-A:策略A,wifi-B:策略B</span><br><span class="line">ssid = SSID Group, HK Group, HK Group, ASUS_5G:MO Group, AMG-5G:direct</span><br></pre></td></tr></table></figure>

<p>直接创建策略组时，还可以通过正则表达式参数，将订阅&#x2F;节点的一部分添加到策略组中，支持static静态策略、available健康检查策略、round-robin负载均衡策略。当筛选结果为空时，将自动设为直连模式。注意，若生成available健康检查策略组，则仅可包含一个节点，不可再混搭节点或其余策略组。</p>
<p>正则表达式参数说明如下。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>resource-tag-regex</td>
<td>根据订阅名（tag）来筛选节点</td>
</tr>
<tr>
<td>server-tag-regex</td>
<td>根据节点名来筛选节点</td>
</tr>
</tbody></table>
<p>常用正则表达式如下。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>(A).*(B)</code></td>
<td>既有A又有B</td>
</tr>
<tr>
<td>(A)|(B)</td>
<td>有A或B</td>
</tr>
<tr>
<td><code>^((?!A).)*$</code></td>
<td>不含A</td>
</tr>
<tr>
<td><code>(?!.*(A)).*(B)</code></td>
<td>没有A，有B</td>
</tr>
</tbody></table>
<p>示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[policy]</span><br><span class="line">static=policy-name, resource-tag-regex=^sample, server-tag-regex=^example</span><br></pre></td></tr></table></figure>

<h3 id="分组图标-1"><a href="#分组图标-1" class="headerlink" title="分组图标"></a>分组图标</h3><p>配置文件中相关配置末尾添加<code>img-url=</code>参数即可，与节点添加分组图标方法一致。</p>
<h2 id="规则分流-1"><a href="#规则分流-1" class="headerlink" title="规则分流"></a>规则分流</h2><h3 id="基本分类-2"><a href="#基本分类-2" class="headerlink" title="基本分类"></a>基本分类</h3><p>Quantumult X支持的分流策略如下。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>HOST</td>
<td>完整域名匹配</td>
<td>limbopro.xyz</td>
</tr>
<tr>
<td>HOST-SUFFIX</td>
<td>域名后缀匹配</td>
<td></td>
</tr>
<tr>
<td>HOST-KEYWORD</td>
<td>域名关键字匹配</td>
<td>limboppro</td>
</tr>
<tr>
<td>USER-AGENT</td>
<td>浏览器用户代理匹配</td>
<td>*abc?</td>
</tr>
<tr>
<td>IP-CIDR</td>
<td>无类别域间路由</td>
<td>192.168.x.x</td>
</tr>
<tr>
<td>GEOIP</td>
<td>GeoIP数据库IP匹配</td>
<td>参数填US，则为美国IP数据库匹配，所有美国IP匹配该规则则执行</td>
</tr>
</tbody></table>
<h3 id="手动配置-3"><a href="#手动配置-3" class="headerlink" title="手动配置"></a>手动配置</h3><p>对于单条分流规则，可点击三菱按钮，选择分流中的添加即可。也可以在网络请求记录中找到对应记录，点击右上角漏斗符号直接添加。</p>
<p>对于订阅，可点击三菱按钮，选择分流中的引用，点击+号即可添加。注意，对于同一请求的不同规则，在配置文件中位置较上的分流规则优先生效。</p>
<p>对于规则类型，可采用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/lhie1/Rules/master/Quantumult/QuantumultX.conf</span><br><span class="line">https://raw.githubusercontent.com/shigalin/Config/master/QuantumultX.conf</span><br></pre></td></tr></table></figure>

<p>对于规则类型，可采用以下链接。注意需开启策略偏好，并选择REJECT，否则将不会替换原有策略组，而自动创建新的策略组。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/AdRule.list</span><br><span class="line">https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/AdRuleTest.list</span><br></pre></td></tr></table></figure>

<p>配置文件的相关内容如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[filter_remote]</span><br><span class="line"># 可使用force-policy来强制使用策略偏好，参数为要替换的策略组名</span><br><span class="line"># 远程订阅</span><br><span class="line">https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Filter/Advertising.list, tag=去广告, enabled=true</span><br><span class="line"></span><br><span class="line"># 本地文件</span><br><span class="line">advertising.txt, tag=🚦去广告，forcr-policy=reject, enabled=true</span><br></pre></td></tr></table></figure>

<h2 id="重写-1"><a href="#重写-1" class="headerlink" title="重写"></a>重写</h2><h3 id="手动配置-4"><a href="#手动配置-4" class="headerlink" title="手动配置"></a>手动配置</h3><p>对于本地重写，点击三菱图标，选择重写-添加即可。对于订阅，则选择重写-引用-<code>+</code>，复制链接并点击确定即可。</p>
<p>对于脚本类型，可采用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/Js.conf</span><br></pre></td></tr></table></figure>

<p>对于去广告类型，可采用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/NobyDa/Script/master/QuantumultX/Rewrite_lhie1.conf</span><br></pre></td></tr></table></figure>

<p>配置文件的相关内容如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">[rewrite_remote]</span><br><span class="line"># 远程链接</span><br><span class="line">https://raw.githubusercontent.com/ConnersHua/Profiles/master/Quantumult/X/Rewrite.conf, tag=神机复写规则，enabled=true</span><br><span class="line"></span><br><span class="line"># 本地/iCloud引用</span><br><span class="line">rewrite.txt, tag=本地复写, enabled=true</span><br><span class="line"></span><br><span class="line">[rewrite_local]</span><br><span class="line">^http://example\.com/resource1/1/ url reject</span><br><span class="line">^http://example\.com/resource1/2/ url reject-img</span><br></pre></td></tr></table></figure>

<h3 id="脚本类型说明"><a href="#脚本类型说明" class="headerlink" title="脚本类型说明"></a>脚本类型说明</h3><h4 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h4><p>重写功能可对特定链接调用脚本，从而实现去广告、破解VIP等功能。配置文件的相关内容如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">[rewrite_remote]</span><br><span class="line"># 远程链接</span><br><span class="line"># 匹配网址 url 复写类型 脚本文件</span><br><span class="line">http://example\.com/resource5/ url script-response-body https://raw.githubusercontent.com/crossutility/Quantumult-X/master/sample-rewrite-with-script.js</span><br><span class="line"></span><br><span class="line">[rewrite_local]</span><br><span class="line"># 本地文件</span><br><span class="line">http://example\.com/resource5/ url script-response-body script_name.js</span><br></pre></td></tr></table></figure>

<h4 id="查看"><a href="#查看" class="headerlink" title="查看"></a>查看</h4><p>在主界面选择重写规则，搜索response-body即可查看所有脚本类型的重写。</p>
<h2 id="任务"><a href="#任务" class="headerlink" title="任务"></a>任务</h2><h3 id="手动配置-5"><a href="#手动配置-5" class="headerlink" title="手动配置"></a>手动配置</h3><p>Quantumult X暂时不支持远程订阅任务脚本，即没有<code>[task_remote]</code>模块。因此需要将每一条任务脚本写到配置文件，但脚本的路径可以为本地或远程。</p>
<p>在配置文件中手动添加<code>[task_local]</code>模块，并按照格式填写即可，示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[task_local]</span><br><span class="line"># 远程脚本</span><br><span class="line"># * * * * *为cron语句</span><br><span class="line">* * * * * http://example.com/name.js, tag=京东签到</span><br><span class="line"></span><br><span class="line"># 本地文件</span><br><span class="line">* * * * * name.js, tag=京东签到</span><br></pre></td></tr></table></figure>

<p>如果是签到类task任务，一般还需要先获取对应的cookie。脚本内一般会有使用说明。</p>
<h3 id="批量添加"><a href="#批量添加" class="headerlink" title="批量添加"></a>批量添加</h3><p>点击三菱按钮，进入<code>构造请求</code>，点击右上角的第一个按钮后点击<code>+</code>号，输入仓库地址后即可选择要添加的任务。</p>
<h3 id="分组图标-2"><a href="#分组图标-2" class="headerlink" title="分组图标"></a>分组图标</h3><p>配置文件中相关配置末尾添加<code>img-url=</code>参数即可，与节点添加分组图标方法一致。</p>
<h1 id="Loon"><a href="#Loon" class="headerlink" title="Loon"></a>Loon</h1><h2 id="懒人配置-2"><a href="#懒人配置-2" class="headerlink" title="懒人配置"></a>懒人配置</h2><h3 id="通过链接-1"><a href="#通过链接-1" class="headerlink" title="通过链接"></a>通过链接</h3><p>打开软件，选择配置-编辑-从URL下载，导入以下配置。注意需要翻墙环境。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/nzw9314/Loon/master/Loon.conf</span><br></pre></td></tr></table></figure>

<p>在MITM生成安装新的CA证书，进入设备设置-通用-描述文件安装证书，在设置-通用-关于本机-证书信任设置中信任证书，然后即可开启连接开关。</p>
<h3 id="通过捷径"><a href="#通过捷径" class="headerlink" title="通过捷径"></a><del>通过捷径</del></h3><p>已失效。</p>
<details>
<summary></summary>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.icloud.com/shortcuts/5ba2ec8d144a4be188b9037498bbdd26</span><br></pre></td></tr></table></figure>
</details>

<h2 id="节点-3"><a href="#节点-3" class="headerlink" title="节点"></a>节点</h2><h3 id="手动配置-6"><a href="#手动配置-6" class="headerlink" title="手动配置"></a>手动配置</h3><p>Loon支持Shadowsocks、ShadowsocksR和Vmess。可通过手动填写、扫描二维码或添加订阅的方式导入节点，也可以通过修改配置文件的方式导入，格式如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">[Proxy]</span><br><span class="line"># SS</span><br><span class="line"># 节点名称=协议,服务器地址,服务器端口,加密协议,密码</span><br><span class="line">1 = Shadowsocks, 1.2.3.4, 443, aes-128-gcm, &quot;password&quot;</span><br><span class="line">2 = Shadowsocks, 1.2.3.4, 443, aes-128-gcm, &quot;password&quot;</span><br><span class="line"></span><br><span class="line"># SSR</span><br><span class="line"># 节点名称=协议,地址,端口,加密方式,密码,协议类型,&#123;协议参数&#125;,混淆类型,&#123;混淆参数&#125;</span><br><span class="line">3 = ShadowsocksR, 1.2.3.4, 443, aes-256-cfb,&quot;password&quot;,auth_aes128_md5,&#123;&#125;,tls1.2_ticket_auth,&#123;&#125;</span><br><span class="line">4 = ShadowsocksR, 1.2.3.4, 10076, aes-128-cfb,&quot;password&quot;,auth_aes128_md5,&#123;&#125;,tls1.2_ticket_auth,&#123;&#125;</span><br><span class="line"></span><br><span class="line"># vmess</span><br><span class="line"># 节点名称=协议,服务器地址,端口,加密方式,UUID,传输方式:(tcp/ws),path:websocket握手header中的path,host:websocket握手header中的path,over-tls:是否tls,tls-name:远端服务器域名,skip-cert-verify:是否跳过证书校验（默认否）</span><br><span class="line">5 = vmess,1.2.3.4,10086,aes-128-gcm,&quot;uuid&quot;,transport:ws,path:/,host:icloud.com,over-tls:true,tls-name:youtTlsServerName.com,skip-cert-verify:false</span><br><span class="line"></span><br><span class="line"># http</span><br><span class="line"># 不支持username/password</span><br><span class="line">ProxyHTTP = http, 1.2.3.4, 8888</span><br><span class="line"></span><br><span class="line">[Remote Proxy]</span><br><span class="line"># 订阅节点</span><br><span class="line"># 别名=订阅URL</span><br><span class="line">Subs = https://example/server-complete.txt</span><br></pre></td></tr></table></figure>

<h3 id="节点筛选"><a href="#节点筛选" class="headerlink" title="节点筛选"></a>节点筛选</h3><p>筛选类型如下。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>NodeSelect</td>
<td>节点选择</td>
</tr>
<tr>
<td>NameKeyword</td>
<td>关键词筛选</td>
</tr>
<tr>
<td>NameRegex</td>
<td>正则筛选</td>
</tr>
</tbody></table>
<p>对于正则筛选，一般可采用以下正则表达式。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>(?=.*A)^(?=.*B)^.*$</code></td>
<td>既有A又有B</td>
</tr>
<tr>
<td>(A)|(B)</td>
<td>有A或B</td>
</tr>
<tr>
<td><code>^((?!A).)*$ </code></td>
<td>不含A</td>
</tr>
<tr>
<td><code>(?=.*A)^((?!B).)^*$</code></td>
<td>有A，没有B</td>
</tr>
</tbody></table>
<h2 id="策略组-2"><a href="#策略组-2" class="headerlink" title="策略组"></a>策略组</h2><h3 id="基本分类-3"><a href="#基本分类-3" class="headerlink" title="基本分类"></a>基本分类</h3><p>策略组由策略类型和子策略构成。策略组会根据策略类型选出流量最终使用的节点。一个策略组可以包含任何单个节点、订阅节点、策略组、内置策略。</p>
<p>Loon支持的策略组如下。</p>
<table>
<thead>
<tr>
<th>策略组名称</th>
<th>策略组类型</th>
<th>策略组类型分组</th>
<th>说明</th>
<th>示例</th>
</tr>
</thead>
<tbody><tr>
<td>手动选择</td>
<td>select</td>
<td>自定义</td>
<td>在节点列表手动选择一个节点或策略组</td>
<td>PROXY &#x3D; select,Auto,1,2,3,4,Subs</td>
</tr>
<tr>
<td>延迟测试</td>
<td>url-test</td>
<td>自定义</td>
<td>向提供的url发出http header请求，根据返回结果选择测速最快的节点，默认间隔 600s，测速超时时间5s，为避免资源浪费，建议节点数不要过多（不支持嵌套策略组，且只支持单个节点和远端节点，其他会被忽略）</td>
<td>Auto&#x3D;url-test,1,2,3,4,Subs,url&#x3D;<a target="_blank" rel="noopener" href="http://bing.com/,interval=600">http://bing.com/,interval=600</a></td>
</tr>
<tr>
<td>可用测试</td>
<td>fallback</td>
<td>自定义</td>
<td>向提供的url发出http header请求，根据返回结果选择第一个可用的节点</td>
<td>Fallback&#x3D;fallback,1,2,3,4,Subs,url&#x3D;<a target="_blank" rel="noopener" href="http://bing.com/,interval=600">http://bing.com/,interval=600</a></td>
</tr>
<tr>
<td>网络类型</td>
<td>ssid</td>
<td>自定义</td>
<td>根据网络类型或路由器名称选择节点或策略组</td>
<td>SSID&#x3D;ssid,default&#x3D;PROXY,cellular&#x3D;DIRECT,”SSID名称”&#x3D;PROXY</td>
</tr>
<tr>
<td>直连</td>
<td>DIRECT</td>
<td>内置</td>
<td>不进行代理</td>
<td>所有流量不通过代理</td>
</tr>
<tr>
<td>拒绝</td>
<td>REJECT</td>
<td>内置</td>
<td>阻止请求进行</td>
<td>通常用作去广告</td>
</tr>
</tbody></table>
<h3 id="手动配置-7"><a href="#手动配置-7" class="headerlink" title="手动配置"></a>手动配置</h3><p>可通过主界面的策略组添加，也可通过修改配置文件的方式添加。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">[Proxy Group]</span><br><span class="line"># 基于用户UI选择</span><br><span class="line">PROXY = select,Auto,1,2,3,4,Subs</span><br><span class="line"></span><br><span class="line"># url-test</span><br><span class="line">Auto = url-test,1,2,3,4,Subs,url = http://bing.com/,interval = 600</span><br><span class="line"></span><br><span class="line"># fallback</span><br><span class="line">Fallback = fallback,1,2,3,4,Subs,url = http://bing.com/,interval = 600</span><br><span class="line"></span><br><span class="line"># 别名 = ssid,默认 = 策略组名,蜂窝 = 策略， ssid名称 = 策略组名</span><br><span class="line">SSID = ssid, default = PROXY, cellular = DIRECT, &quot;DivineEngine&quot; = PROXY</span><br><span class="line"></span><br><span class="line"># 广告模式</span><br><span class="line">Advertising = select,REJECT,DIRECT</span><br><span class="line"></span><br><span class="line"># 白名单模式PROXY，黑名单模式DIRECT</span><br><span class="line">Final = select,PROXY,DIRECT</span><br></pre></td></tr></table></figure>

<h2 id="规则分流-2"><a href="#规则分流-2" class="headerlink" title="规则分流"></a>规则分流</h2><h3 id="基本分类-4"><a href="#基本分类-4" class="headerlink" title="基本分类"></a>基本分类</h3><p>Loon支持的规则如下。</p>
<table>
<thead>
<tr>
<th>匹配名称</th>
<th>匹配类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>基于域名后缀</td>
<td>DOMAIN-SUFFIX</td>
<td></td>
</tr>
<tr>
<td>基于域名完整匹配</td>
<td>DOMAIN</td>
<td></td>
</tr>
<tr>
<td>基于域名关键字</td>
<td>DOMAIN-KEYWORD</td>
<td></td>
</tr>
<tr>
<td>基于用户代理串</td>
<td>USER-AGENT</td>
<td>根据 Http 的 user-agent 值来进行匹配，支持带有*，？的通配符匹配</td>
</tr>
<tr>
<td>基于URL正则</td>
<td>URL-REGEX</td>
<td></td>
</tr>
<tr>
<td>基于请求IP范围</td>
<td>IP-CIDR</td>
<td>通常用作局域网匹配</td>
</tr>
<tr>
<td>基于IP定位国家编码</td>
<td>GEOIP</td>
<td>CN中国</td>
</tr>
<tr>
<td>兜底匹配</td>
<td>FINAL</td>
<td>如果没有匹配的规则，默认使用的匹配</td>
</tr>
</tbody></table>
<p>Loon支持的策略类型如下。</p>
<table>
<thead>
<tr>
<th>策略类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>DIRECT</td>
<td>直连，即所有流量不通过代理</td>
</tr>
<tr>
<td>Proxy</td>
<td>走特定的策略组，可为[Proxy Group]或[Proxy] 中的自定值</td>
</tr>
<tr>
<td>REJECT</td>
<td>拒绝，通常用作去广告</td>
</tr>
</tbody></table>
<h3 id="远程配置"><a href="#远程配置" class="headerlink" title="远程配置"></a>远程配置</h3><p>通过配置-订阅规则即可。</p>
<h3 id="手动配置-8"><a href="#手动配置-8" class="headerlink" title="手动配置"></a>手动配置</h3><p>通过配置-单个规则进行添加即可，也可在配置文件中手动添加。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[Rule]</span><br><span class="line"># 本地规则</span><br><span class="line"># 规则类型,域名(部分类型可省略),策略</span><br><span class="line"># 可选项:force-remote-dns(Default:false),no-resolve</span><br><span class="line">DOMAIN,google.com,PROXY</span><br><span class="line"># GeoIP为中国的走直连</span><br><span class="line">GEOIP,CN,DIRECT</span><br><span class="line"># 兜底策略使用Final策略组</span><br><span class="line">FINAL,Final</span><br><span class="line"></span><br><span class="line">[Remote Rule]</span><br><span class="line"># 远程规则</span><br><span class="line"># URL,策略</span><br><span class="line"># 以下地址将使用PROXY策略组</span><br><span class="line">https://raw.githubusercontent.com/Loon0x00/LoonExampleConfig/master/Rule/ExampleRule.list,PROXY</span><br></pre></td></tr></table></figure>

<h3 id="规则测试"><a href="#规则测试" class="headerlink" title="规则测试"></a>规则测试</h3><p>可通过此功能确认某个域名命中了哪个规则。</p>
<h2 id="重写-2"><a href="#重写-2" class="headerlink" title="重写"></a>重写</h2><h3 id="基本分类-5"><a href="#基本分类-5" class="headerlink" title="基本分类"></a>基本分类</h3><p>Loon支持的重写规则如下。</p>
<table>
<thead>
<tr>
<th>重写名称</th>
<th>重写类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>替换host字段</td>
<td>header</td>
<td>请求头中匹配的host字段将会被替换内容所替换</td>
</tr>
<tr>
<td>拒绝请求</td>
<td>reject</td>
<td></td>
</tr>
<tr>
<td>返回302响应</td>
<td>302</td>
<td></td>
</tr>
<tr>
<td>返回307响应</td>
<td>307</td>
<td></td>
</tr>
</tbody></table>
<h2 id="脚本"><a href="#脚本" class="headerlink" title="脚本"></a>脚本</h2><h3 id="手动配置-9"><a href="#手动配置-9" class="headerlink" title="手动配置"></a>手动配置</h3><p>Loon原生支持surge脚本。点击本地脚本-<code>+</code>即可写脚本。点击所有脚本-<code>+</code>，脚本类型选择cron，即可设置自动运行脚本。支持本地脚本或远程脚本。</p>
<p>配置文件中与脚本相关的配置如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[Script]</span><br><span class="line">enable = true  </span><br><span class="line"></span><br><span class="line"># 类型 值（http-request/response为正则表达式，corn为cron表达式） 参数</span><br><span class="line"># http-request ^https?:\/\/(www.)?(example)\.com script-path=localscript.js</span><br><span class="line"># http-response ^https?:\/\/(www.)?(example)\.com script-path=https://example.com/loon.js timeout=10 requires-body = true</span><br><span class="line"># cron &quot;0 8 * * *&quot; script-path=cron.js</span><br></pre></td></tr></table></figure>

<p>各参数含义如下。</p>
<table>
<thead>
<tr>
<th>参数</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>script-path</td>
<td>脚本路径，可以是本地脚本地址（暂不支持文件夹）或者远程的URL地址</td>
</tr>
<tr>
<td>requires-body</td>
<td>true表示允许修改request和response body的值，默认值为false</td>
</tr>
<tr>
<td>timeout</td>
<td>执行脚本的最长超时时间，单位为秒</td>
</tr>
</tbody></table>
<h3 id="脚本编写"><a href="#脚本编写" class="headerlink" title="脚本编写"></a>脚本编写</h3><h4 id="http-request"><a href="#http-request" class="headerlink" title="http-request"></a>http-request</h4><p>表示处理请求的脚本，通过该脚本可以修改http请求。该脚本必须使用<code>$done(&#123;参数&#125;)</code>传参结束，参数可以为空，或为修改后的headers&#x2F;body。示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 添加本地脚本，命名为hello-request.js</span><br><span class="line"># 脚本中可用变量为</span><br><span class="line"># $request.url</span><br><span class="line"># $request.headers</span><br><span class="line"># $request.body</span><br><span class="line">let headers = $request.headers;</span><br><span class="line">headers[&#x27;X-Modified-By&#x27;] = &#x27;Loon&#x27;;</span><br><span class="line"></span><br><span class="line">$done(&#123;headers&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="http-response"><a href="#http-response" class="headerlink" title="http-response"></a>http-response</h4><p>与http-request基本相同，主要区别为http-response表示处理请求响应。示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 脚本中可用变量为</span><br><span class="line"># $request.url</span><br><span class="line"># $request.headers</span><br><span class="line"># $request.body</span><br><span class="line"># $response.headers</span><br><span class="line"># $response.body</span><br><span class="line">let headers = $response.headers;</span><br><span class="line">headers[&#x27;X-Modified-By&#x27;] = &#x27;Loon&#x27;;</span><br><span class="line"></span><br><span class="line">$done(&#123;headers&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="cron"><a href="#cron" class="headerlink" title="cron"></a>cron</h4><p>表示定期执行脚本。Loon支持两种类型的cron表达式，如下。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>格式</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>5位（精确到分）</td>
<td><code>&lt;Minute&gt; &lt;Hour&gt; &lt;Day_of_the_Month&gt; &lt;Month_of_the_Year&gt; &lt;Day_of_the_Week&gt;</code></td>
<td>分、时、日、月、周</td>
</tr>
<tr>
<td>6位（精确到秒）</td>
<td><code>&lt;Seconds&gt;&lt;Minute&gt; &lt;Hour&gt; &lt;Day_of_the_Month&gt; &lt;Month_of_the_Year&gt; &lt;Day_of_the_Week&gt;</code></td>
<td>秒、分、时、日、月、周</td>
</tr>
</tbody></table>
<p>示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 新建一个本地脚本命名为hello-cron.js，复制下方内容</span><br><span class="line"># 配置文件[Script]添加cron &quot;* * * * *&quot; script-path=hello-cron.js</span><br><span class="line"># 启动Loon，每隔一分钟可看到通知栏提醒</span><br><span class="line"></span><br><span class="line">$notification.post(&quot;这是主标题&quot;，&quot;这是副标题&quot;, &quot;hello-cron!&quot;);</span><br><span class="line"></span><br><span class="line">console.log(&quot;【调试一下】hello-cron&quot;);</span><br></pre></td></tr></table></figure>

<h3 id="公共API"><a href="#公共API" class="headerlink" title="公共API"></a>公共API</h3><p>目前支持如下API。</p>
<table>
<thead>
<tr>
<th>API</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td><code>$httpClient.get(url/options&lt;Object&gt;, callback&lt;Function&gt;)</code></td>
<td></td>
</tr>
<tr>
<td><code>$httpClient.post(url/options&lt;Object&gt;, callback&lt;Function&gt;)</code></td>
<td></td>
</tr>
<tr>
<td><code>$notification.post(&#39;title&lt;String&gt;&#39;, &#39;subTitle&lt;String&gt;&#39;,&#39;body&lt;String&gt;&#39;)</code></td>
<td>通知栏提醒</td>
</tr>
<tr>
<td><code>console.log(&#39;String&#39;)</code></td>
<td>打印日志</td>
</tr>
<tr>
<td><code>$persistentStore.write(&#39;data&lt;String&gt;&#39;, &#39;key&lt;String&gt;&#39;)</code></td>
<td>数据持久化写入，只允许字符串</td>
</tr>
<tr>
<td><code>$persistentStore.read(&#39;key&lt;String&gt;&#39;)</code></td>
<td>获取存放的数据</td>
</tr>
</tbody></table>
<p>$httpClient.get传参为URL的示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$httpClient.get(&#x27;https://example.com/index&#x27;, function(result)&#123; console.log(result);&#125;);</span><br></pre></td></tr></table></figure>

<p>$httpClient.get传参为object的示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">var params = &#123;</span><br><span class="line">    url:&quot;https://api.example.com/post&quot;,</span><br><span class="line">    header: &#123;</span><br><span class="line">        Host:&quot;api.example.com&quot;,</span><br><span class="line">        Content-Type: &quot;application/json&quot;</span><br><span class="line">    &#125;,</span><br><span class="line">    body:&quot;string&quot;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">$httpClient.get(param, function(result)&#123; console.log(result);&#125;);</span><br></pre></td></tr></table></figure>

<h2 id="优先级"><a href="#优先级" class="headerlink" title="优先级"></a>优先级</h2><h3 id="配置文件-1"><a href="#配置文件-1" class="headerlink" title="配置文件"></a>配置文件</h3><p>最新版本默认从上往下。</p>
<h3 id="规则"><a href="#规则" class="headerlink" title="规则"></a>规则</h3><p>本地规则高于远程规则。</p>
<p>DOMAIN-SUFFIX、DOMAIN、DOMAIN-KEYWORD、USER-AGENT按照在配置文件中的位置，通过自上而下的顺序匹配，满足优先匹配。URL-REGEX、IP-CIDR、GEOIP在最后校验。</p>
<h3 id="策略组-3"><a href="#策略组-3" class="headerlink" title="策略组"></a>策略组</h3><p>界面上的排序对于策略组功能无影响。</p>
<h3 id="重写-3"><a href="#重写-3" class="headerlink" title="重写"></a>重写</h3><p>本地重写高于远程重写。</p>
<p>根据正则表达式在配置文件中的位置，通过自上而下的顺序匹配，满足优先匹配。</p>
<h2 id="URL-Schemes"><a href="#URL-Schemes" class="headerlink" title="URL Schemes"></a>URL Schemes</h2><p>Loon支持的URL Schemes如下。</p>
<table>
<thead>
<tr>
<th>URL Schemes</th>
<th>作用                                s</th>
</tr>
</thead>
<tbody><tr>
<td>loon:&#x2F;&#x2F;switch</td>
<td>开启或关闭Loon</td>
</tr>
<tr>
<td>loon:&#x2F;&#x2F;editconfig</td>
<td>打开Loon配置文件</td>
</tr>
<tr>
<td>loon:&#x2F;&#x2F;requestLists</td>
<td>打开最近请求</td>
</tr>
<tr>
<td>loon:&#x2F;&#x2F;dnsRequests</td>
<td>打开DNS</td>
</tr>
<tr>
<td>loon:&#x2F;&#x2F;LogLists</td>
<td>打开日志</td>
</tr>
<tr>
<td>loon:&#x2F;&#x2F;import?sub&#x3D;url</td>
<td>导入配置，url为urlencode之后的字符串（如loon:&#x2F;&#x2F;import?sub&#x3D;https%3A%2F%2Floon.now.sh%2Flazy-config%2Fdefault）</td>
</tr>
</tbody></table>
<h1 id="Shadowrocket"><a href="#Shadowrocket" class="headerlink" title="Shadowrocket"></a>Shadowrocket</h1><p>可在手机上打开以下链接下载。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://ltribe.lanzous.com/igUjnm6m6de</span><br></pre></td></tr></table></figure>

<h2 id="基本操作-2"><a href="#基本操作-2" class="headerlink" title="基本操作"></a>基本操作</h2><h3 id="开启代理共享"><a href="#开启代理共享" class="headerlink" title="开启代理共享"></a>开启代理共享</h3><p>选择设置-代理-代理共享-启用共享。其它设备与该手机连接到同一Wi-Fi下后，在系统设置中进入Wi-Fi详情，开启Wi-Fi的HTTP代理，类型选择手动，地址和端口填写Shadowrocket中提供的值即可。</p>
<h3 id="场景使用"><a href="#场景使用" class="headerlink" title="场景使用"></a>场景使用</h3><p>场景配置无法写入配置文件。</p>
<p>场景的使用可以使网络环境变化时（更改Wi-Fi或改成蜂窝数据）使用代理或直连模式。在主界面点击全局路由-设置-场景，新建一个场景，填写Wi-Fi的SSID并选择路由模式即可。</p>
<h3 id="自动选择最快节点"><a href="#自动选择最快节点" class="headerlink" title="自动选择最快节点"></a>自动选择最快节点</h3><p>点击全局路由-分组，新增分组并选择服务器。完成后返回，打开<code>启用回退</code>即可。</p>
<h2 id="懒人配置-3"><a href="#懒人配置-3" class="headerlink" title="懒人配置"></a>懒人配置</h2><p>打开软件，选择配置-添加配置，导入以下配置。注意需要翻墙环境。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/w37fhy/QuantumultX/master/shadowrocket_diy.conf</span><br></pre></td></tr></table></figure>

<p>点击远程配置中导入的链接，选择使用配置，等待文件下载到本地。下载到本地后点击本地文件中对应的配置，选择编辑配置-HTTPS解密，打开并按照流程信任证书即可。</p>
<h2 id="节点-4"><a href="#节点-4" class="headerlink" title="节点"></a>节点</h2><p>与其它软件不同的是，Shadowrocket的配置文件中不包含节点信息，节点信息被独立为一个json文件。</p>
<p>通过首页的+号即可添加配置，支持Shadowsocks、ShadowsocksR、Vmess等，也可添加订阅。配置好节点后，可通过数据-导出节点生成json文件。需要导入节点信息时，点击数据-导入节点，选择json文件即可。</p>
<h2 id="规则分流-3"><a href="#规则分流-3" class="headerlink" title="规则分流"></a>规则分流</h2><h3 id="手动配置-10"><a href="#手动配置-10" class="headerlink" title="手动配置"></a>手动配置</h3><p>进入配置-<code>+</code>即可配置。</p>
<p>对于分流类型，可采用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/ConnersHua/Profiles/master/Shadow/Pro.conf</span><br></pre></td></tr></table></figure>

<p>对于去广告类型，可采用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/h2y/Shadowrocket-ADBlock-Rules/master/sr_top500_whitelist_ad.conf</span><br></pre></td></tr></table></figure>


<h1 id="Kitsunebi"><a href="#Kitsunebi" class="headerlink" title="Kitsunebi"></a>Kitsunebi</h1><h2 id="节点-5"><a href="#节点-5" class="headerlink" title="节点"></a>节点</h2><p>在服务器-<code>+</code>即可添加，支持Vmess、Shadowsocks和SOCKS。</p>
<h2 id="规则分流-4"><a href="#规则分流-4" class="headerlink" title="规则分流"></a>规则分流</h2><h3 id="手动配置-11"><a href="#手动配置-11" class="headerlink" title="手动配置"></a>手动配置</h3><p>点击高级-规则集，点击右边的i，修改URL为远程规则集并存储即可。</p>
<p>可使用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/aileiys/Kitsunebi/master/Kitsunebi.conf</span><br></pre></td></tr></table></figure>

<h1 id="Surge"><a href="#Surge" class="headerlink" title="Surge"></a>Surge</h1><h2 id="破解"><a href="#破解" class="headerlink" title="破解"></a>破解</h2><p>越狱后下载以下插件并安装即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://wws.lanzous.com/tp/i0Ge2dh3oeb</span><br></pre></td></tr></table></figure>

<h2 id="懒人配置-4"><a href="#懒人配置-4" class="headerlink" title="懒人配置"></a>懒人配置</h2><p>点击左上角下拉菜单，选择从URL下载配置，复制以下链接并确定即可。完成后若菜单栏出现策略组，则成功。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://raw.githubusercontent.com/nzw9314/Surge/master/Surge_Basic.conf</span><br></pre></td></tr></table></figure>

<h2 id="节点-6"><a href="#节点-6" class="headerlink" title="节点"></a>节点</h2><h3 id="手动配置-12"><a href="#手动配置-12" class="headerlink" title="手动配置"></a>手动配置</h3><p>在主界面点击代理服务器，选择添加代理即可添加单个节点，选择新的策略组并勾选使用外部代理列表则可添加订阅。也可直接修改配置文件，在<code>[proxy]</code>模块下填写即可。</p>
<p>完成后点击外部资源，下拉到底部并点击立即更新。</p>
<p>对于订阅，Surge无法直接添加订阅节点到proxy模块，应当在现有策略组中添加外部代理列表以添加订阅，在需要引用订阅节点的策略组后添加<code>policy-path=[订阅链接]</code>参数即可。注意每个策略组只能绑定一个订阅，对于多订阅则需要先整合为一个订阅链接，或通过一个策略组包含多个订阅策略组的形式。</p>
<p>订阅文件格式与<code>[proxy]</code>模块下的写法一致，不包含<code>[proxy]</code>本身。注意必须是明文，不能进行base64加密。</p>
<h3 id="切换"><a href="#切换" class="headerlink" title="切换"></a>切换</h3><p>点击策略组，进入相应策略组，选择需要切换的节点即可。</p>
<h2 id="策略组-4"><a href="#策略组-4" class="headerlink" title="策略组"></a>策略组</h2><p>新建策略组时，在策略组类型中可选择模式，类型和含义与Loon基本一致。</p>
<h2 id="规则分流-5"><a href="#规则分流-5" class="headerlink" title="规则分流"></a>规则分流</h2><h3 id="匹配过程"><a href="#匹配过程" class="headerlink" title="匹配过程"></a>匹配过程</h3><p>如果一个使用域名的请求遇到了一个IP类型规则（IP-CIDR&#x2F;IP-CIDR6&#x2F;GEOIP）且该规则不带有 no-resolve选项，那么将触发DNS查询。</p>
<p>所以应将所有非IP类规则置于规则的顶部，将IP类规则置于尾部，避免并不需要进行本地DNS查询的请求产生额外的DNS查询。</p>
<h2 id="脚本-1"><a href="#脚本-1" class="headerlink" title="脚本"></a>脚本</h2><p>可通过分析-脚本编辑器打开已有脚本进行编辑。</p>
<h2 id="DNS"><a href="#DNS" class="headerlink" title="DNS"></a>DNS</h2><p>在主页面点击DNS服务器即可编辑。</p>
<p>如果经常使用的网络没有DNS劫持问题，配置为使用系统DNS配置并追加223.5.5.5和114.114.114.114作为冗余。如果经常使用的网络存在DNS劫持问题，配置为仅使用223.5.5.5和114.114.114.114。</p>
<h1 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h1><h2 id="Quantumult的使用方法"><a href="#Quantumult的使用方法" class="headerlink" title="Quantumult的使用方法"></a>Quantumult的使用方法</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://xingkaixin.me/2019/05/01/How-to-use-Quantumult/</span><br></pre></td></tr></table></figure>

<h2 id="Quantumult-X不完全教程"><a href="#Quantumult-X不完全教程" class="headerlink" title="Quantumult X不完全教程"></a>Quantumult X不完全教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https://www.notion.so/Quantumult-X-1d32ddc6e61c4892ad2ec5ea47f00917#8c6f0c7cc5174f34903b1aa7c010fb64</span><br><span class="line">https://merlinblog.xyz/wiki/quanx.html</span><br><span class="line">https://limbopro.xyz/archives/11115.html</span><br><span class="line">https://limbopro.xyz/archives/3846.html</span><br></pre></td></tr></table></figure>

<h2 id="QuantumultX-x2F-QuantumultX-Profiles-conf"><a href="#QuantumultX-x2F-QuantumultX-Profiles-conf" class="headerlink" title="QuantumultX&#x2F;QuantumultX_Profiles.conf"></a>QuantumultX&#x2F;QuantumultX_Profiles.conf</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/KOP-XIAO/QuantumultX/blob/master/QuantumultX_Profiles.conf</span><br></pre></td></tr></table></figure>

<h2 id="Quantumult-X-x2F-sample-conf"><a href="#Quantumult-X-x2F-sample-conf" class="headerlink" title="Quantumult-X&#x2F;sample.conf"></a>Quantumult-X&#x2F;sample.conf</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/crossutility/Quantumult-X/blob/master/sample.conf</span><br></pre></td></tr></table></figure>



<h2 id="Shadowrocket使用教程"><a href="#Shadowrocket使用教程" class="headerlink" title="Shadowrocket使用教程"></a>Shadowrocket使用教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://laob.me/2300/</span><br></pre></td></tr></table></figure>

<h2 id="Loon不完全教程"><a href="#Loon不完全教程" class="headerlink" title="Loon不完全教程"></a>Loon不完全教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.notion.so/Loon-f0a98c39f5224c09b281c79837380431</span><br></pre></td></tr></table></figure>

<h2 id="Surge使用教程"><a href="#Surge使用教程" class="headerlink" title="Surge使用教程"></a>Surge使用教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://merlinblog.xyz/wiki/surge.html</span><br></pre></td></tr></table></figure>

<h2 id="关于策略组的理解"><a href="#关于策略组的理解" class="headerlink" title="关于策略组的理解"></a>关于策略组的理解</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Fndroid/jsbox_script/wiki/%E5%85%B3%E4%BA%8E%E7%AD%96%E7%95%A5%E7%BB%84%E7%9A%84%E7%90%86%E8%A7%A3</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/posts/Android-Advanced-Guide.html" rel="prev" title="Android高级使用指南">
      <i class="fa fa-chevron-left"></i> Android高级使用指南
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/posts/iOS-URL-Scheme-Guide.html" rel="next" title="iOS URL Scheme指南">
      iOS URL Scheme指南 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5"><span class="nav-text">基本概念</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E7%82%B9"><span class="nav-text">节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E7%BB%84%E4%B8%8E%E8%A7%84%E5%88%99"><span class="nav-text">策略组与规则</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%86%99"><span class="nav-text">重写</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MITM%E8%A7%A3%E5%AF%86"><span class="nav-text">MITM解密</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Cron%E8%AF%AD%E5%8F%A5"><span class="nav-text">Cron语句</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-text">配置文件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="nav-text">正则表达式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%93%8D%E5%BA%94%E7%A0%81"><span class="nav-text">响应码</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Quantumult"><span class="nav-text">Quantumult</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C"><span class="nav-text">基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8A%82%E7%82%B9%E9%80%89%E6%8B%A9"><span class="nav-text">节点选择</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%87%92%E4%BA%BA%E9%85%8D%E7%BD%AE"><span class="nav-text">懒人配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E7%82%B9-1"><span class="nav-text">节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E5%88%86%E6%B5%81"><span class="nav-text">规则分流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE"><span class="nav-text">手动配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E7%BB%84"><span class="nav-text">策略组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%88%86%E7%B1%BB"><span class="nav-text">基本分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E5%AE%83"><span class="nav-text">其它</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E6%9C%BA%E8%BF%9E%E6%8E%A5WiFi%E6%97%B6%E5%81%9C%E6%AD%A2%E5%88%86%E6%B5%81"><span class="nav-text">手机连接WiFi时停止分流</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#QuantumultX"><span class="nav-text">QuantumultX</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%AD%A3%E7%89%88%E5%88%A4%E6%96%AD"><span class="nav-text">正版判断</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C-1"><span class="nav-text">基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%B8%89%E8%8F%B1%E6%8C%89%E9%92%AE"><span class="nav-text">三菱按钮</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BB%B6%E8%BF%9F%E6%B5%8B%E8%AF%95"><span class="nav-text">延迟测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%8C%E6%8E%92%E5%9B%BE%E6%A0%87"><span class="nav-text">双排图标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%90%E8%97%8FVPN%E5%9B%BE%E6%A0%87"><span class="nav-text">隐藏VPN图标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E6%B4%BB%E5%8A%A8%E6%97%A5%E5%BF%97%E6%A8%A1%E5%9D%97"><span class="nav-text">网络活动日志模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B3%A8%E9%87%8A%E7%AC%A6%E5%8F%B7"><span class="nav-text">注释符号</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%90%AFiCloud"><span class="nav-text">开启iCloud</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BD%E8%89%B2%E7%8E%AF%E5%BD%A2%E6%A0%87%E5%BF%97"><span class="nav-text">白色环形标志</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%BF%AB%E9%80%9F%E5%AE%9A%E4%BD%8D"><span class="nav-text">配置文件快速定位</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%87%92%E4%BA%BA%E9%85%8D%E7%BD%AE-1"><span class="nav-text">懒人配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E9%93%BE%E6%8E%A5"><span class="nav-text">通过链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E6%89%98%E7%AE%A1%E7%BB%91%E5%AE%9A"><span class="nav-text">通过托管绑定</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87URL-Scheme"><span class="nav-text">通过URL Scheme</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%9A%E7%94%A8"><span class="nav-text">通用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#SSID%E6%8C%82%E8%B5%B7"><span class="nav-text">SSID挂起</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E6%A8%A1%E5%BC%8F%E5%88%87%E6%8D%A2"><span class="nav-text">运行模式切换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%B5%84%E6%BA%90%E8%A7%A3%E6%9E%90%E5%99%A8"><span class="nav-text">资源解析器</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0"><span class="nav-text">添加</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8F%82%E6%95%B0%E8%AF%B4%E6%98%8E"><span class="nav-text">参数说明</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A4%BA%E4%BE%8B"><span class="nav-text">示例</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E8%AF%A2%E8%8A%82%E7%82%B9%E4%BF%A1%E6%81%AF"><span class="nav-text">查询节点信息</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%85%B3%E8%81%94%E5%9B%BE%E6%A0%87"><span class="nav-text">设置关联图标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8A%82%E7%82%B9%E6%B5%8B%E8%AF%95"><span class="nav-text">节点测试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#UDP%E7%AB%AF%E5%8F%A3%E7%99%BD%E5%90%8D%E5%8D%95"><span class="nav-text">UDP端口白名单</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E5%AE%83-1"><span class="nav-text">其它</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E7%82%B9-2"><span class="nav-text">节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-1"><span class="nav-text">手动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%9B%BE%E6%A0%87"><span class="nav-text">分组图标</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E7%BB%84-1"><span class="nav-text">策略组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%88%86%E7%B1%BB-1"><span class="nav-text">基本分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-2"><span class="nav-text">手动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%9B%BE%E6%A0%87-1"><span class="nav-text">分组图标</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E5%88%86%E6%B5%81-1"><span class="nav-text">规则分流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%88%86%E7%B1%BB-2"><span class="nav-text">基本分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-3"><span class="nav-text">手动配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%86%99-1"><span class="nav-text">重写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-4"><span class="nav-text">手动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC%E7%B1%BB%E5%9E%8B%E8%AF%B4%E6%98%8E"><span class="nav-text">脚本类型说明</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-text">配置</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8B"><span class="nav-text">查看</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%BB%E5%8A%A1"><span class="nav-text">任务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-5"><span class="nav-text">手动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%B9%E9%87%8F%E6%B7%BB%E5%8A%A0"><span class="nav-text">批量添加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%86%E7%BB%84%E5%9B%BE%E6%A0%87-2"><span class="nav-text">分组图标</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Loon"><span class="nav-text">Loon</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%87%92%E4%BA%BA%E9%85%8D%E7%BD%AE-2"><span class="nav-text">懒人配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E9%93%BE%E6%8E%A5-1"><span class="nav-text">通过链接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E6%8D%B7%E5%BE%84"><span class="nav-text">通过捷径</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E7%82%B9-3"><span class="nav-text">节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-6"><span class="nav-text">手动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%8A%82%E7%82%B9%E7%AD%9B%E9%80%89"><span class="nav-text">节点筛选</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E7%BB%84-2"><span class="nav-text">策略组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%88%86%E7%B1%BB-3"><span class="nav-text">基本分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-7"><span class="nav-text">手动配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E5%88%86%E6%B5%81-2"><span class="nav-text">规则分流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%88%86%E7%B1%BB-4"><span class="nav-text">基本分类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%9C%E7%A8%8B%E9%85%8D%E7%BD%AE"><span class="nav-text">远程配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-8"><span class="nav-text">手动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E6%B5%8B%E8%AF%95"><span class="nav-text">规则测试</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%87%8D%E5%86%99-2"><span class="nav-text">重写</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E5%88%86%E7%B1%BB-5"><span class="nav-text">基本分类</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC"><span class="nav-text">脚本</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-9"><span class="nav-text">手动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC%E7%BC%96%E5%86%99"><span class="nav-text">脚本编写</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#http-request"><span class="nav-text">http-request</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#http-response"><span class="nav-text">http-response</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#cron"><span class="nav-text">cron</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%AC%E5%85%B1API"><span class="nav-text">公共API</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-text">优先级</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-1"><span class="nav-text">配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%A7%84%E5%88%99"><span class="nav-text">规则</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E7%BB%84-3"><span class="nav-text">策略组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%87%8D%E5%86%99-3"><span class="nav-text">重写</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#URL-Schemes"><span class="nav-text">URL Schemes</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Shadowrocket"><span class="nav-text">Shadowrocket</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E6%93%8D%E4%BD%9C-2"><span class="nav-text">基本操作</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%BC%80%E5%90%AF%E4%BB%A3%E7%90%86%E5%85%B1%E4%BA%AB"><span class="nav-text">开启代理共享</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%BA%E6%99%AF%E4%BD%BF%E7%94%A8"><span class="nav-text">场景使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%80%89%E6%8B%A9%E6%9C%80%E5%BF%AB%E8%8A%82%E7%82%B9"><span class="nav-text">自动选择最快节点</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%87%92%E4%BA%BA%E9%85%8D%E7%BD%AE-3"><span class="nav-text">懒人配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E7%82%B9-4"><span class="nav-text">节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E5%88%86%E6%B5%81-3"><span class="nav-text">规则分流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-10"><span class="nav-text">手动配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Kitsunebi"><span class="nav-text">Kitsunebi</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E7%82%B9-5"><span class="nav-text">节点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E5%88%86%E6%B5%81-4"><span class="nav-text">规则分流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-11"><span class="nav-text">手动配置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Surge"><span class="nav-text">Surge</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A0%B4%E8%A7%A3"><span class="nav-text">破解</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%87%92%E4%BA%BA%E9%85%8D%E7%BD%AE-4"><span class="nav-text">懒人配置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8A%82%E7%82%B9-6"><span class="nav-text">节点</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%89%8B%E5%8A%A8%E9%85%8D%E7%BD%AE-12"><span class="nav-text">手动配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%87%E6%8D%A2"><span class="nav-text">切换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AD%96%E7%95%A5%E7%BB%84-4"><span class="nav-text">策略组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%84%E5%88%99%E5%88%86%E6%B5%81-5"><span class="nav-text">规则分流</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8C%B9%E9%85%8D%E8%BF%87%E7%A8%8B"><span class="nav-text">匹配过程</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%84%9A%E6%9C%AC-1"><span class="nav-text">脚本</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DNS"><span class="nav-text">DNS</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%95%99%E7%A8%8B"><span class="nav-text">参考教程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Quantumult%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-text">Quantumult的使用方法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Quantumult-X%E4%B8%8D%E5%AE%8C%E5%85%A8%E6%95%99%E7%A8%8B"><span class="nav-text">Quantumult X不完全教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#QuantumultX-x2F-QuantumultX-Profiles-conf"><span class="nav-text">QuantumultX&#x2F;QuantumultX_Profiles.conf</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Quantumult-X-x2F-sample-conf"><span class="nav-text">Quantumult-X&#x2F;sample.conf</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Shadowrocket%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B"><span class="nav-text">Shadowrocket使用教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Loon%E4%B8%8D%E5%AE%8C%E5%85%A8%E6%95%99%E7%A8%8B"><span class="nav-text">Loon不完全教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Surge%E4%BD%BF%E7%94%A8%E6%95%99%E7%A8%8B"><span class="nav-text">Surge使用教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E4%BA%8E%E7%AD%96%E7%95%A5%E7%BB%84%E7%9A%84%E7%90%86%E8%A7%A3"><span class="nav-text">关于策略组的理解</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Payton"
      src="/blog/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Payton</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-comments"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Payton</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">2m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">30:28</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
