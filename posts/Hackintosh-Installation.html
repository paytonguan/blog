<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#000">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#000">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"paytonguan.github.io","root":"/blog/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","sidebar":"fadeIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="本文以macOS Mojave为例进行说明，包含内容较多，主要适合较新主板的安装。">
<meta property="og:type" content="article">
<meta property="og:title" content="黑苹果的安装与配置">
<meta property="og:url" content="https://paytonguan.github.io/blog/posts/Hackintosh-Installation.html">
<meta property="og:site_name" content="Payton&#39;s blog">
<meta property="og:description" content="本文以macOS Mojave为例进行说明，包含内容较多，主要适合较新主板的安装。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://paytonguan.github.io/blog/posts/Hackintosh-Installation/topic.jpg">
<meta property="og:image" content="https://paytonguan.github.io/blog/posts/Hackintosh-Installation/i2c-touchpad.jpg">
<meta property="article:published_time" content="2019-11-26T06:24:16.000Z">
<meta property="article:modified_time" content="2025-04-03T18:55:58.592Z">
<meta property="article:author" content="Payton">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://paytonguan.github.io/blog/posts/Hackintosh-Installation/topic.jpg">

<link rel="canonical" href="https://paytonguan.github.io/blog/posts/Hackintosh-Installation.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>黑苹果的安装与配置 | Payton's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Payton's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Somewhere leisure.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://paytonguan.github.io/blog/posts/Hackintosh-Installation.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Payton">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Payton's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          黑苹果的安装与配置
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2019-11-26 14:24:16" itemprop="dateCreated datePublished" datetime="2019-11-26T14:24:16+08:00">2019-11-26</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-04-04 02:55:58" itemprop="dateModified" datetime="2025-04-04T02:55:58+08:00">2025-04-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Mac/" itemprop="url" rel="index"><span itemprop="name">Mac</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>133k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>2:01</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="/blog/posts/Hackintosh-Installation/topic.jpg"></p>
<p>本文以macOS Mojave为例进行说明，包含内容较多，主要适合较新主板的安装。</p>
<span id="more"></span>

<h1 id="记录硬件配置"><a href="#记录硬件配置" class="headerlink" title="记录硬件配置"></a>记录硬件配置</h1><p>在Windows下，右键点击此电脑，选择管理-设备管理器，得到设备清单。在某设备上点击属性-详细信息，在属性下拉栏选择硬件ID，记录下VID和PID。VID即Vendor ID，指供应商ID，在Windows下以<code>VID_</code>显示。PID即Device ID，指设备ID，在Windows下以<code>PID_</code>显示。</p>
<p>可通过以下链接查询设备名称与PID的关系。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># Intel</span><br><span class="line">http://pci-ids.ucw.cz/read/PC/8086</span><br><span class="line"></span><br><span class="line"># AMD</span><br><span class="line">http://pci-ids.ucw.cz/read/PC/1022</span><br><span class="line"></span><br><span class="line"># Nvidia</span><br><span class="line">http://pci-ids.ucw.cz/read/PC/10de</span><br></pre></td></tr></table></figure>

<p>Mac对Intel CPU基本兼容，对AMD CPU需要进一步处理。本教程仅讨论Intel CPU的情况。</p>
<p>对于笔记本，主要记录显卡、声卡、网卡、键盘、触控板和蓝牙的型号。以本机为例，型号为华硕FL8000U，硬件基本信息如下。需要注意的是，BIOS类型应为UEFI。</p>
<table>
<thead>
<tr>
<th></th>
<th>型号</th>
<th>Device ID</th>
<th>Vendor ID</th>
</tr>
</thead>
<tbody><tr>
<td>CPU</td>
<td>Intel Core i7-8550U（Kaby-Lake）</td>
<td>&#x2F;</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>核心显卡</td>
<td>Intel UHD Graphics 620</td>
<td>5917</td>
<td>8086</td>
</tr>
<tr>
<td>独立显卡</td>
<td>NVIDIA GeForce 940MX</td>
<td>134D</td>
<td>10DE</td>
</tr>
<tr>
<td>声卡</td>
<td>Realtek ALC 294</td>
<td>0294</td>
<td>10EC</td>
</tr>
<tr>
<td>有线网卡</td>
<td>Realtek RTL8111</td>
<td>&#x2F;</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>无线网卡</td>
<td>Atheros AR9565</td>
<td>0036</td>
<td>168C</td>
</tr>
<tr>
<td>键盘</td>
<td>PS2键盘</td>
<td>&#x2F;</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>触摸板</td>
<td>I2C触摸板</td>
<td>&#x2F;</td>
<td>&#x2F;</td>
</tr>
<tr>
<td>蓝牙</td>
<td>Atheros Bluetooth 4.0</td>
<td>3018</td>
<td>04CA</td>
</tr>
</tbody></table>
<h1 id="硬盘分区"><a href="#硬盘分区" class="headerlink" title="硬盘分区"></a>硬盘分区</h1><p>由于macOS只能以EFI方式引导，因此需确保分区表为GPT格式。</p>
<p>可在Windows下打开DiskGenius，确认分区表为GUID格式，若不是，则在硬盘上单击右键，选择<code>转换分区表类型为GUID格式</code>。</p>
<p>确保硬盘有一个200-300M的EFI分区，若没有则需要新建，一般新建到硬盘最前部。提前备份EFI内的文件至U盘，防止安装Mac时引导丢失。为Mac的安装划出50G以上的分区，格式化为APFS。</p>
<p>若用Mac进行格式化，则格式化为GUID分区表时会自动生成一个200MB的EFI分区。</p>
<h1 id="引导器下载"><a href="#引导器下载" class="headerlink" title="引导器下载"></a>引导器下载</h1><p>黑苹果需要特殊的引导器进行引导。此处使用Clover，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 普通版</span><br><span class="line">https://github.com/Dids/clover-builder/releases</span><br><span class="line">https://sourceforge.net/projects/cloverefiboot/</span><br><span class="line"></span><br><span class="line"># 特别版</span><br><span class="line">https://github.com/chris1111/CloverBootloader/releases</span><br><span class="line">https://drive.google.com/drive/folders/0B661P9Kp9bPAdUViMVFYRW9KWFE</span><br></pre></td></tr></table></figure>

<p>建议下载pkg或ISO版本，其中对于ISO版本，可用解压软件打开，提取Clover启动所需要的完整EFI文件夹，以便于后续安装。该文件夹的目录层级如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">└── EFI</span><br><span class="line">   ├── Boot</span><br><span class="line">   └── CLOVER</span><br><span class="line">        ├── ACPI</span><br><span class="line">        ├── drivers</span><br><span class="line">        ├── ...</span><br><span class="line">        ├── CLOVERX64.efi</span><br><span class="line">        └── config.plist</span><br></pre></td></tr></table></figure>

<h1 id="安装盘制作"><a href="#安装盘制作" class="headerlink" title="安装盘制作"></a>安装盘制作</h1><p>此处以Majove 10.14.3为例。插入容量大于8G的U盘，提前备份好U盘资料。以下方式选其一即可。</p>
<h2 id="黑果小兵"><a href="#黑果小兵" class="headerlink" title="黑果小兵"></a>黑果小兵</h2><p>通过以下链接下载，镜像带引导。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.daliansky.net/categories/%E4%B8%8B%E8%BD%BD/%E9%95%9C%E5%83%8F/</span><br></pre></td></tr></table></figure>

<p>若为Windows，且下载的镜像为带引导的dmg格式，则以管理员身份打开TransMac，在插入的U盘上点击右键，选择Restore with Disk Image，点击Yes以抹掉资料，选择dmg镜像，等待写入完成。也可通过Etcher完成以上操作。</p>
<p>由于黑果小兵的安装盘已带引导器，故可以直接进行安装步骤。</p>
<h2 id="macrecovery"><a href="#macrecovery" class="headerlink" title="macrecovery"></a>macrecovery</h2><p>注意，该方法只可获取恢复分区，安装系统时需要互联网连接。</p>
<p>以Windows为例，下载OpenCore，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/OpenCorePkg</span><br></pre></td></tr></table></figure>

<p>解压后打开命令提示符，路径切换到解压文件夹内的Utilities&#x2F;macrecovery，然后通过以下命令进行下载。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"># Lion</span><br><span class="line">python macrecovery.py -b Mac-2E6FAB96566FE58C -m 00000000000F25Y00 download</span><br><span class="line">python macrecovery.py -b Mac-C3EC7CD22292981F -m 00000000000F0HM00 download</span><br><span class="line"></span><br><span class="line"># Mountain Lion</span><br><span class="line">python macrecovery.py -b Mac-7DF2A3B5E5D671ED -m 00000000000F65100 download</span><br><span class="line"></span><br><span class="line"># Mavericks</span><br><span class="line">python macrecovery.py -b Mac-F60DEB81FF30ACF6 -m 00000000000FNN100 download</span><br><span class="line"></span><br><span class="line"># Yosemite</span><br><span class="line">python macrecovery.py -b Mac-E43C1C25D4880AD6 -m 00000000000GDVW00 download</span><br><span class="line"></span><br><span class="line"># El Capitan</span><br><span class="line">python macrecovery.py -b Mac-FFE5EF870D7BA81A -m 00000000000GQRX00 download</span><br><span class="line"></span><br><span class="line"># Sierra</span><br><span class="line">python macrecovery.py -b Mac-77F17D7DA9285301 -m 00000000000J0DX00 download</span><br><span class="line"></span><br><span class="line"># High Sierra</span><br><span class="line">python macrecovery.py -b Mac-7BA5B2D9E42DDD94 -m 00000000000J80300 download</span><br><span class="line">python macrecovery.py -b Mac-BE088AF8C5EB4FA2 -m 00000000000J80300 download</span><br><span class="line"></span><br><span class="line"># Mojave</span><br><span class="line">python macrecovery.py -b Mac-7BA5B2DFE22DDD8C -m 00000000000KXPG00 download</span><br><span class="line"></span><br><span class="line"># Catalina</span><br><span class="line">python macrecovery.py -b Mac-00BE6ED71E35EB86 -m 00000000000000000 download</span><br><span class="line"></span><br><span class="line"># Big Sur</span><br><span class="line">python macrecovery.py -b Mac-E43C1C25D4880AD6 -m 00000000000000000 download</span><br></pre></td></tr></table></figure>

<p>完成后将USB格式化为GUID分区表下的FAT32。在USB根目录新建文件夹，名称为<code>com.apple.recovery.boot</code>，并将下载好的BaseSystem&#x2F;RecoveryImage文件放入文件夹内。</p>
<p>下载完成后将获得BaseSystem或RecoveryImage文件。将USB格式化为FAT32，在根目录新建名为com.apple.recovery.boot的文件夹并复制下载内容至该文件夹，注意.dmg和.chunklist文件都要复制。然后复制从Clover提取的EFI文件夹到根目录，保持与com.apple.recovery.boot文件夹同级。</p>
<h2 id="GibMacOS"><a href="#GibMacOS" class="headerlink" title="GibMacOS"></a>GibMacOS</h2><p>对于10.13及以上系统，可在Mac环境下通过GibMacOS下载原版镜像，注意不带引导。运行gibMacOS.command即可，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/corpnewt/gibMacOS</span><br></pre></td></tr></table></figure>

<p>对于Big Sur，下载后在Mac下打开installAssistant.pkg，安装到当前系统盘，即可在应用程序中找到安装包程序。对于Catalina及更早版本，则应当运行BuildmacOSInstallApp.command以得到安装包，然后将安装包拖入应用程序文件夹。</p>
<p>将USB进行分区，分区表为GUID，创建一个大小为200-300MB的EFI分区，剩余空间则用于安装程序。</p>
<p>打开终端并输入以下命令，注意将MyVolume替换为USB磁盘名称。完成后复制从Clover提取的EFI文件夹到EFI磁盘。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 以Mojave为例</span><br><span class="line">sudo /Applications/Install\ macOS\ Mojave.app/Contents/Resources/createinstallmedia --volume /Volumes/MyVolume</span><br></pre></td></tr></table></figure>

<p>若为Windows，则通过MakeInstall.bat进行制作，注意该脚本将默认创建MBR引导。</p>
<details>
<summary>【进阶】用BaseSystem.dmg制作安装盘</summary>

<p>不适用于High Sierra及以上系统。</p>
<p>BaseSystem.dmg可在安装包上点击右键，选择显示包内容，然后进入&#x2F;Contents&#x2F;Shared Support&#x2F;即可找到。复制到桌面后，打开终端并输入以下命令以制作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># disk1s2为USB设备路径，按照实际情况更改</span><br><span class="line">sudo asr restore -source ~/Desktop/BaseSystem.dmg -target /dev/disk1s2 --erase</span><br></pre></td></tr></table></figure>
</details>

<h2 id="其他方式"><a href="#其他方式" class="headerlink" title="其他方式"></a>其他方式</h2><h3 id="官方下载"><a href="#官方下载" class="headerlink" title="官方下载"></a>官方下载</h3><p>通过以下链接，通过App Store下载。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://apps.apple.com/cn/app/macos-mojave/id1398502828?mt=12</span><br></pre></td></tr></table></figure>

<p>也可通过以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">链接 / https://cloud.189.cn/t/FFvIV3aeQZRz</span><br><span class="line">提取码 / ps0j</span><br></pre></td></tr></table></figure>

<h3 id="InstallInstallMacOS"><a href="#InstallInstallMacOS" class="headerlink" title="InstallInstallMacOS"></a>InstallInstallMacOS</h3><p>适用于在Mac环境下下载，打开终端并输入以下命令即可得到dmg文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir ~/macOS-installer &amp;&amp; cd ~/macOS-installer &amp;&amp; curl -O https://raw.githubusercontent.com/munki/macadmin-scripts/main/installinstallmacos.py &amp;&amp; sudo python installinstallmacos.py</span><br></pre></td></tr></table></figure>

<h1 id="BIOS设置"><a href="#BIOS设置" class="headerlink" title="BIOS设置"></a>BIOS设置</h1><h2 id="全局设置"><a href="#全局设置" class="headerlink" title="全局设置"></a>全局设置</h2><p>有AHCI的均选<code>AHCI</code>，开启支持UEFI启动。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>本机BIOS地址</th>
<th>设定值</th>
<th>设置</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Fast Boot</td>
<td>0xF7A</td>
<td>0x0</td>
<td>Disabled</td>
<td>快速启动</td>
</tr>
<tr>
<td>Secure Boot</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>安全启动</td>
</tr>
<tr>
<td>CFG Lock</td>
<td>0x527</td>
<td>0x0</td>
<td>Disabled</td>
<td>CFG锁（MSR 0xE2写入保护）</td>
</tr>
<tr>
<td>Vt-d</td>
<td>0x7EC</td>
<td>0x0</td>
<td>Disabled</td>
<td>直接I&#x2F;O访问的VT虚拟化技术</td>
</tr>
<tr>
<td>CSM</td>
<td>0x1032</td>
<td>0x0</td>
<td>Disabled</td>
<td>兼容性支持模块（如果看到乱码则启用）</td>
</tr>
<tr>
<td>Intel SGX</td>
<td>0x5DC</td>
<td>0x0</td>
<td>Disabled</td>
<td>Intel架构新扩展</td>
</tr>
<tr>
<td>IO Serial Port</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>串行端口，打开可能会引起睡眠死机问题</td>
</tr>
<tr>
<td>LAN&#x2F;WLAN switching</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>LAN&#x2F;WLAN切换</td>
</tr>
<tr>
<td>Extended Idle Power States</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>扩展空闲电源状态</td>
</tr>
<tr>
<td>Wake on LAN&#x2F;WLAN&#x2F;WWAN</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>LAN&#x2F;WLAN&#x2F;WWAN唤醒</td>
</tr>
<tr>
<td>Wake on USB</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>USB唤醒</td>
</tr>
<tr>
<td>Firewire&#x2F;IEEE 1394</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>火线&#x2F;IEEE 1394设备</td>
</tr>
<tr>
<td>USB 3.0</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>安装好系统后可以开启</td>
</tr>
<tr>
<td>TMP&#x2F;Security Chips&#x2F;Security modules</td>
<td></td>
<td></td>
<td>Disabled</td>
<td>安全模块</td>
</tr>
<tr>
<td>VT-x</td>
<td>&#x2F;</td>
<td>&#x2F;</td>
<td>Enabled</td>
<td>英特尔虚拟化技术</td>
</tr>
<tr>
<td>Above 4G decoding</td>
<td>0x7ED</td>
<td>0x1</td>
<td>Enabled</td>
<td>大于4G地址空间解码</td>
</tr>
<tr>
<td>Hyper Threading</td>
<td>0x4F0</td>
<td>0x1</td>
<td>Enabled</td>
<td>处理器超线程</td>
</tr>
<tr>
<td>Execute Disable Bit</td>
<td>0x4E9</td>
<td>0x1</td>
<td>Enabled</td>
<td>执行禁止位</td>
</tr>
<tr>
<td>EHCI Hand-off</td>
<td>0x2</td>
<td>0x1</td>
<td>Enabled</td>
<td>接手EHCI控制</td>
</tr>
<tr>
<td>XHCI Hand-off</td>
<td>0x1B</td>
<td>0x1</td>
<td>Enabled</td>
<td>接手XHCI控制</td>
</tr>
<tr>
<td>USB Hand-off</td>
<td></td>
<td></td>
<td>Enabled</td>
<td>接手USB控制（打开后则无需ReleaseUsbOwnership&#x2F;Fixownership）</td>
</tr>
<tr>
<td>Launch Hotkeys without Fn keypress</td>
<td></td>
<td></td>
<td>Enabled</td>
<td>对于Skylake和KabyLake平台</td>
</tr>
<tr>
<td>USB Legacy support</td>
<td></td>
<td></td>
<td>Enable</td>
<td>旧版USB支持</td>
</tr>
<tr>
<td>OS type</td>
<td>&#x2F;</td>
<td>&#x2F;</td>
<td>Windows 8.1&#x2F;10</td>
<td>操作系统类型Windows 8.1&#x2F;10</td>
</tr>
<tr>
<td>Controller Mode</td>
<td></td>
<td></td>
<td>AHCI mode</td>
<td>硬盘模式</td>
</tr>
<tr>
<td>Thunderbolt Support</td>
<td></td>
<td></td>
<td>Disabled</td>
<td></td>
</tr>
<tr>
<td>Intel Platform Trust</td>
<td></td>
<td></td>
<td>Disabled</td>
<td></td>
</tr>
<tr>
<td>Portable Device Charging Mode</td>
<td></td>
<td></td>
<td>Disabled</td>
<td></td>
</tr>
<tr>
<td>Thunderbolt Security Level</td>
<td></td>
<td></td>
<td>Legacy Mode</td>
<td></td>
</tr>
<tr>
<td>HPET Support</td>
<td></td>
<td></td>
<td>Enabled</td>
<td></td>
</tr>
<tr>
<td>HPET Mode</td>
<td></td>
<td></td>
<td>64-bit mode</td>
<td></td>
</tr>
<tr>
<td>ACPI Suspend Type</td>
<td></td>
<td></td>
<td>S3(STR)</td>
<td></td>
</tr>
<tr>
<td>Parallel Port</td>
<td></td>
<td></td>
<td>Disabled</td>
<td></td>
</tr>
<tr>
<td>Serial Port</td>
<td></td>
<td></td>
<td>Disabled</td>
<td></td>
</tr>
</tbody></table>
<h2 id="显卡设置"><a href="#显卡设置" class="headerlink" title="显卡设置"></a>显卡设置</h2><p>若有Nvidia&#x2F;AMD的显卡，则主显示器应设置为PEG或PCIE，并禁用与Intel显卡有关的选项（Hybrid Graphics&#x2F;Dual Graphics&#x2F;DVMT size等）。</p>
<p>若有Intel的显卡，则将DVMT设置为64MB或更大，将MAX TOLUD设置为Dynamic。</p>
<h1 id="安装系统"><a href="#安装系统" class="headerlink" title="安装系统"></a>安装系统</h1><p>BIOS中启动顺序把UEFI启动的U盘设为第一，在弹出的Clover界面选择Boot OS X Install from Install macOS Majove，稍等片刻进入安装界面。</p>
<details>
<summary>【注意】关于安全启动</summary>

<p>不要打开安全启动进行安装，因为Mac将使用安装程序生成的随机值进行个性化设置。由于随机值不同，将无法再用安全启动引导到系统。</p>
</details>

<p>在macOS实用工具中选择<code>磁盘工具</code>，点击左侧按钮选择<code>显示所有设备</code>，选择之前分好的Mac安装盘，点击抹掉，并选择格式为APFS。返回安装界面，选择刚才格式化好的盘进行安装，等待安装完成。</p>
<p>重启时需继续从U盘启动，Clover界面中选择macOS的安装盘，进入欢迎界面后注意用户密码不能为空且跳过iCloud设置。正常进入黑苹果桌面后不要登录iCloud、iMessage、FaceTime。</p>
<p>若在跑代码的过程中发生错误，则根据常见问题进行排除。</p>
<h1 id="引导本地系统"><a href="#引导本地系统" class="headerlink" title="引导本地系统"></a>引导本地系统</h1><h2 id="Clover安装"><a href="#Clover安装" class="headerlink" title="Clover安装"></a>Clover安装</h2><p>在Mac下打开Clover的pkg安装包，同意协议后点击自定，勾选安装在Clover到EFI分区、UEFI Drivers。</p>
<p>安装完成后使用Clover Configurator挂载EFI分区，并打开EFI&#x2F;CLOVER&#x2F;kexts，只留Others文件夹，其余删除。打开Others文件夹，只留VirtualSMC.kext、WhatEverGreen.kext和Lilu.kext。</p>
<p>然后打开EFI&#x2F;CLOVER&#x2F;DRIVER64UEFI，删除SMCHelper-64.efi并复制VirtualSMC.efi到此目录下。</p>
<p>目录层级如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">├── ACPI</span><br><span class="line">├── CLOVERX64.efi</span><br><span class="line">├── config.plist</span><br><span class="line">├── drivers</span><br><span class="line">│   └── UEFI</span><br><span class="line">│       ├── ApfsDriverLoader.efi</span><br><span class="line">│       ├── AudioDxe.efi</span><br><span class="line">│       ├── DataHubDxe.efi</span><br><span class="line">│       ├── FSInject.efi</span><br><span class="line">│       ├── HFSPlus.efi</span><br><span class="line">│       ├── OpenRuntime.efi</span><br><span class="line">│       └── VirtualSmc.efi</span><br><span class="line">├── kexts</span><br><span class="line">    └── Other</span><br><span class="line">        ├── Lilu.kext</span><br><span class="line">        ├── VirtualSMC.kext</span><br><span class="line">        └── WhateverGreen.kext</span><br></pre></td></tr></table></figure>

<h2 id="Clover配置"><a href="#Clover配置" class="headerlink" title="Clover配置"></a>Clover配置</h2><p>用Clover Configurator打开config.plist，按下列设置进行修改。</p>
<h3 id="ACPI"><a href="#ACPI" class="headerlink" title="ACPI"></a>ACPI</h3><p>将Fixs下所有选项取消勾选（1和2两个页面的选项都要取消），并添加以下更名补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Comment: change _DSM to XDSM</span><br><span class="line">Find: 5F44534D</span><br><span class="line">Replace: 5844534D</span><br></pre></td></tr></table></figure>

<h3 id="Boot"><a href="#Boot" class="headerlink" title="Boot"></a>Boot</h3><p>Arguments下勾选Verbose（-v）、nv_disable&#x3D;1、dart&#x3D;0，其余不勾选。</p>
<h3 id="Grpahics"><a href="#Grpahics" class="headerlink" title="Grpahics"></a>Grpahics</h3><p>取消勾选Inject Intel、Inject EDID。</p>
<h3 id="Devices"><a href="#Devices" class="headerlink" title="Devices"></a>Devices</h3><p>在Audio的Inject下拉菜单选择No，把下方Arbitrary、Properties和Add Properties所有内容删掉。</p>
<h2 id="进入系统"><a href="#进入系统" class="headerlink" title="进入系统"></a>进入系统</h2><p>退出Clover Configurator，保存更改后拔出U盘并重启，在BIOS下应当多出一项UEFI OS，进入后选择macOS安装盘启动。此时已完成Clover引导器的安装，可以脱离U盘引导。</p>
<p>若Windows引导丢失，将备份好的EFI&#x2F;BOOT中的Microsoft文件夹复制到EFI分区中的EFI&#x2F;BOOT，与Clover文件夹同级即可。</p>
<h1 id="驱动修补"><a href="#驱动修补" class="headerlink" title="驱动修补"></a>驱动修补</h1><p>Mac的驱动以Kernel Extensions（kexts）形式存在。系统的kexts存放于&#x2F;System&#x2F;Library&#x2F;Extentions（SLE）或&#x2F;Library&#x2F;Extentions（LE），其中SLE为系统kexts的主要放置路径，LE为系统拓展kexts放置路径。kexts内部的dsYM是签名文件，仅用于调试目的。</p>
<p>一般不建议修改SLE或LE目录。若需将驱动装入SLE或LE，可通过Kext Utility（在Catalina下需先解锁系统分区）或Hackintool。以Hackintool为例，在Hackintool的<code>工具</code>选项卡下点击下方的小屋按钮即可。</p>
<h2 id="显卡"><a href="#显卡" class="headerlink" title="显卡"></a>显卡</h2><p>默认情况下，Mac对没有提供驱动程序的任何GPU都将运行非常基本的驱动程序，称为VESA驱动程序，提供了最少的显示输出，但在该情况下无法与这些设备正确交互。为了解决这个问题，需要让Mac认为显卡是一个通用的PCIe设备，或完全关闭显卡。</p>
<p>注意，VGA在Mac中不可使用。驱动显卡前确保kexts文件夹内有Lilu.kext和WhateverGreen.kext。</p>
<h3 id="选择显卡"><a href="#选择显卡" class="headerlink" title="选择显卡"></a>选择显卡</h3><p>在DSDT的PCI0设备目录下，Intel显卡拥有关键字<code>Name (_ADR, 0x00010000)</code>。Mac原生支持Intel显卡，但需要进行缓冲帧修补。</p>
<p>对于笔记本而言，如果独显不与核显绑定，即独显本身可以独立工作，则不需要屏蔽独显，可从BIOS层面关闭核显，并寻找独显驱动。该情况能够存在的必要条件是MUX芯片存在，但大多数笔记本电脑都没有该芯片。包含该芯片的笔记本列表可参照以下表格。</p>
<table>
<thead>
<tr>
<th>设备</th>
<th>CPU</th>
<th>dGPU直通</th>
<th>iGPU直通</th>
<th>eGPU直通</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>Razer Blade 15 (2018 Basic)</td>
<td>Intel Core i7-8750H</td>
<td>GTX 1060 Mobile with Max-Q design (6GB)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>Intel UHD Graphics 630</br>Windows下大概能工作；Linux下大概能工作</td>
<td>GTX 970</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>支持TB3 eGPU</td>
</tr>
<tr>
<td>Gigabyte P35X v4</td>
<td>Intel Core i7-5700HQ</td>
<td>GTX 980M (8GB)</br>Windows下工作；Linux下未知</td>
<td>Intel HD Graphics 5600</br>Windows下工作；Linux下未知</td>
<td></td>
<td>需要修改的UEFI&#x2F;BIOS（禁用Secure Boot）</td>
</tr>
<tr>
<td>MSI GF72 8RE-032</td>
<td>Intel Core i7-8750H</td>
<td>GTX 1060 Mobile (6GB)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>Intel UHD Graphics 630</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>HP Pavilion G6-2348SG</td>
<td>Intel Core i7 3632QM</td>
<td>AMD Radeon HD 7670M</br>Windows下不可能；Linux下不可能</td>
<td>Intel HD Graphics 4000</br>Windows下不支持4代及更早的Intel CPU；Linux下不支持4代及更早的Intel CPU</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ASUS TUF Gaming FX505DY</td>
<td>AMD Ryzen 5 3550H</td>
<td>AMD Radeon RX 560X (4GB)</br>Windows下工作，但AMD驱动会遇到43错误；Linux下能工作</td>
<td>AMD Radeon Vega 8</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ASUS ROG G751JY</td>
<td>Intel Core i7-4710HQ</td>
<td>GTX 980M (4GB)</br>Windows下不可能；Linux下不可能</td>
<td>Intel HD Graphics 4600</br>Windows下不支持4代及更早的Intel CPU；Linux下不支持4代及更早的Intel CPU</td>
<td></td>
<td>iGPU被禁用，且没有UEFI选项开启</td>
</tr>
<tr>
<td>ASUS G752VS-BA329T</td>
<td>Intel Core i7-7700HQ</td>
<td>GTX 1070 Mobile (8GB)</br>Windows下不可能；Linux下不可能</td>
<td>Intel UHD Graphics 630</br>Windows下不可能；Linux下不可能</td>
<td></td>
<td>iGPU被禁用，且没有UEFI选项开启</td>
</tr>
<tr>
<td>ASUS ROG G551JW</td>
<td>Intel Core i7-4720HQ</td>
<td>GTX 960M (2GB&#x2F;4GB DDR3)</br>Windows下工作；Linux下未知</td>
<td>Intel HD Graphics 4600</br>Windows下不支持4代及更早的Intel CPU；Linux下不支持4代及更早的Intel CPU</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ASUS G751JM</td>
<td>Intel Core i7-4710HQ</td>
<td>GTX 860M (2GB)</br>Windows下工作；Linux下未知</td>
<td>Intel HD Graphics 4600</br>Windows下不支持4代及更早的Intel CPU；Linux下不支持4代及更早的Intel CPU</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ASUS X550VX</td>
<td>Intel Core i5-6300HQ</td>
<td>GTX 950M (2GB)</br>Windows下工作；Linux下未知</td>
<td>Intel HD Graphics 530</br>Windows下未知；Linux下未知</td>
<td></td>
<td></td>
</tr>
<tr>
<td>MSI GS63VR 7RF REV:1.0</td>
<td>Intel Core i7-7700HQ</td>
<td>GTX 1060 Mobile (6GB)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下能工作</td>
<td>Intel HD Graphics 630</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>MSI GS60-040XFR</td>
<td>Intel Core i7-4720HQ</td>
<td>GTX 970M (3GB)</br>Windows下工作；Linux下未知</td>
<td>Intel HD Graphics 4600</br>Windows下不支持4代及更早的Intel CPU；Linux下不支持4代及更早的Intel CPU</td>
<td></td>
<td></td>
</tr>
<tr>
<td>MSI GS60 2PC</td>
<td>Intel Core i7-4720HQ</td>
<td>GTX 860M (2GB)</br>Windows下工作；Linux下未知</td>
<td>Intel HD Graphics 4600</br>Windows下不支持4代及更早的Intel CPU；Linux下不支持4代及更早的Intel CPU</td>
<td></td>
<td></td>
</tr>
<tr>
<td>MSI GT70 2PE Dominator Pro</td>
<td>Intel Core i7-4800MQ</td>
<td>GTX 880M (GDDR5 8GB&#x2F;4GB)</br>Windows下工作；Linux下大概能工作</td>
<td>Intel HD Graphics 4600 </br>Windows下不支持4代及更早的Intel CPU；Linux下不支持4代及更早的Intel CPU</td>
<td></td>
<td>dGPU直通需要SeaBIOS而不是UEFI（OVMF）</td>
</tr>
<tr>
<td>Gigabyte Aero 14</td>
<td>Intel Core™ i7-7700HQ</td>
<td>GTX 1050 Ti (4GB)</br>Windows下工作；Linux下未知</td>
<td>Intel HD Graphics 630</br>Windows下工作；Linux下未知</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Gigabyte Aero 15X v8</td>
<td>Intel Core i7-8750H</td>
<td>GTX 1070 with Max-Q design (8GB)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下能工作</td>
<td>Intel UHD Graphics 630</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Lenovo ThinkPad P51</td>
<td>Intel Core i7-7700HQ</td>
<td>NVIDIA Quadro M1200 (4GB)</br>Windows下未知；Linux下能工作</td>
<td>Intel UHD Graphics 630</br>Windows下未知；Linux下能工作</td>
<td></td>
<td>可使用Intel GVT-g以使两张卡同时通过，Bumblebee可在访客模式下使用</td>
</tr>
<tr>
<td>Lenovo Legion Y7000</td>
<td>Intel Core i7-8750H</td>
<td>GTX 1060 Mobile (6GB)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>Intel UHD Graphics 630</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Dell XPS 15 9550</td>
<td>Intel Core i7-6700HQ</td>
<td>GTX 960M (2GB)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>Intel HD Graphics 530</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Dell XPS 15 9570</td>
<td>Intel Core i7-8750H</td>
<td>GTX 1050Ti (4GB)</br>Windows下工作；Linux下大概能工作</td>
<td>Intel UHD Graphics 630</br>Windows下工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>Dell Precision 7510</td>
<td>Intel Xeon E3-1200 v5</td>
<td>Nvidia Quadro M2000M</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>Intel HD Graphics P530</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>OVERPOWERED Gaming Laptop 15+</td>
<td>Intel Core i7-8750H</td>
<td>GTX 1060 (6GB)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>Intel UHD Graphics 630</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>CLEVO P950ER</td>
<td>Intel Core i7-8750H</td>
<td>GTX 1070 with Max-Q design (8GB)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>Intel UHD Graphics 630</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
<tr>
<td>XMG P505 (Clevo P650SG)</td>
<td>Intel Core i7-4720HQ</td>
<td>GTX 970M (4GB)</br>Windows下工作，但某些应用只能在RDP下运行；Linux下大概能工作</td>
<td>Intel HD Graphics 4600</br>Windows下不支持4代及更早的Intel CPU；Linux下不支持4代及更早的Intel CPU</td>
<td></td>
<td>需要Nvidia驱动(353.82)以在Windows 10下运行</td>
</tr>
<tr>
<td>CLEVO N957TP6</td>
<td>Unknown (Intel)</td>
<td>Unknown (Nvidia)</br>Windows下工作，但Nvidia驱动会遇到43错误；Linux下大概能工作</td>
<td>Unknown</br>Windows下大概能工作；Linux下大概能工作</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>可使用以下脚本进行判断。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/T-vK/MobilePassThrough</span><br></pre></td></tr></table></figure>

<p>若没有该芯片，由于Mac不支持双显卡切换技术，为使显卡正常，需要屏蔽独显。大多数笔记本上的双显卡切换是让集显承担图像输出任务，所以不能屏蔽集显，屏蔽会导致黑屏。</p>
<p>可以通过外接显示器判断独显是否独立。外接显示器后在桌面右键，打开NVIDIA控制面板，然后看是否可以调节数字振动这类设置。如果可以，说明此独显可以被独立驱动。</p>
<p>对于本机而言，由于BIOS中有External Gfx Card Primary Display Configuration，理论上可以屏蔽核显以驱动独显。考虑到BIOS中的设置会影响其他系统，此处采用屏蔽Nvidia独显而驱动Intel核显的方案。</p>
<p>对于旧版Mac的独显，可尝试通过purge-wrangler驱动，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/mayankk2308/purge-wrangler</span><br></pre></td></tr></table></figure>

<h3 id="查找设备路径"><a href="#查找设备路径" class="headerlink" title="查找设备路径"></a>查找设备路径</h3><p>设备路径描述了设备在所有硬件中的具体位置，为类似<code>_SB.PCI0.PEG0.PEGP</code>的形式。</p>
<h4 id="通过gfxutil"><a href="#通过gfxutil" class="headerlink" title="通过gfxutil"></a>通过gfxutil</h4><p>下载<code>gfxutil</code>后打开终端，并切换到gfxutil所在路径，执行以下命令以输出显卡设备路径。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// 独显</span><br><span class="line">gfxutil -f GFX0</span><br><span class="line"></span><br><span class="line">// 核显</span><br><span class="line">gfxutil -f IGPU</span><br></pre></td></tr></table></figure>

<h4 id="通过Windows"><a href="#通过Windows" class="headerlink" title="通过Windows"></a>通过Windows</h4><p>打开Windows下的设备管理器，在独显设备上右键单击<code>属性</code>，在详细信息标签卡下拉菜单选择<code>BIOS设备名称</code>即可。</p>
<h4 id="通过ACPI表"><a href="#通过ACPI表" class="headerlink" title="通过ACPI表"></a>通过ACPI表</h4><p>在Clover引导界面按下<code>F4</code>，进入系统后打开EFI&#x2F;CLOVER&#x2F;ACPI&#x2F;origin，可得到本机所有ACPI文件。复制到任一位置后打开终端，切换到复制到的位置并执行以下命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">grep -l _OFF *.aml</span><br><span class="line">grep -l _INI *.aml</span><br></pre></td></tr></table></figure>

<p>检查输出并记录两个输出中均存在的文件。打开这些文件并查找_OFF方法，如果这个方法在PowerShell宏中（即由PowerShell大括号括住），则舍弃。找到独立的_OFF方法并记录其设备路径即可。</p>
<h3 id="驱动Nvidia显卡"><a href="#驱动Nvidia显卡" class="headerlink" title="驱动Nvidia显卡"></a>驱动Nvidia显卡</h3><p>Nvidia显卡一般免驱，部分显卡打开Inject Nvidia即可驱动成功。对于未受支持的显卡，则需要安装Nvidia WebDriver。此驱动最新版只适用于10.13，因此需要进行修补。</p>
<p>可使用Benjamin-Dobell的脚本，仓库如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Benjamin-Dobell/nvidia-update</span><br></pre></td></tr></table></figure>

<p>在终端输入以下命令以启动安装脚本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://raw.githubusercontent.com/Benjamin-Dobell/nvidia-update/master/nvidia-update.sh</span><br><span class="line">chmod 755 nvidia-update.sh</span><br><span class="line">./nvidia-update.sh -f</span><br></pre></td></tr></table></figure>

<p>安装完成后重启，在系统设置中已经能够看到Nvidia控制面板。若未驱动，则需要在Clover的System Parameters下勾选NvidiaWeb。</p>
<p>若为笔记本，独显通常不可驱动。若为台式机，在Catalina上独显无法开启硬件加速。若该显卡正常驱动，可安装WebDriver和CUDA Driver获得更好的体验，下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># WebDriver</span><br><span class="line">https://gfe.nvidia.com/mac-update</span><br><span class="line">https://www.nvidia.com/download/driverResults.aspx/149652/</span><br><span class="line">https://www.nvidia.com/download/driverResults.aspx/125379/en-us</span><br><span class="line">https://www.insanelymac.com/forum/topic/324195-nvidia-web-driver-updates-for-macos-high-sierra-update-nov-13-2020/</span><br><span class="line"></span><br><span class="line"># WebDriver Manager</span><br><span class="line">https://hackintosher.com/forums/attachments/webdrivermanager-2-9-4-zip.1289/</span><br><span class="line"></span><br><span class="line"># CUDA Driver</span><br><span class="line">https://www.nvidia.com/en-us/drivers/cuda/mac-driver-archive/</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】旧版Nvidia GPU用于Mojave/Catalina</summary>

<p>部分旧版GPU最多仅支持到High Sierra，可通过修改系统文件的方式实现驱动。下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.insanelymac.com/forum/topic/339035-pre-release-macos-catalina/page/21/?tab=comments#comment-2677545</span><br></pre></td></tr></table></figure>

<p>需要替换以下文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"># Frameworks</span><br><span class="line">/System/Library/Frameworks/CoreDisplay.framework</span><br><span class="line">/System/Library/Frameworks/OpenGL.framework</span><br><span class="line">/System/Library/PrivateFrameworks/SkyLight.framework</span><br><span class="line">/System/Library/PrivateFrameworks/GPUSupport.framework</span><br><span class="line"></span><br><span class="line"># Patched Catalina Kexts</span><br><span class="line">/System/Library/Extensions/IOHIDFamily.kext</span><br><span class="line">/System/Library/Extensions/IOSurface.kext </span><br><span class="line"></span><br><span class="line"># nVidia Kexts from 10.13.6 for Legacy Tesla Cards</span><br><span class="line">/System/Library/Extensions/GeForceGA.bundle</span><br><span class="line">/System/Library/Extensions/GeForceTesla.kext</span><br><span class="line">/System/Library/Extensions/GeForceTeslaGLDriver.bundle</span><br><span class="line">/System/Library/Extensions/GeForceTeslaVADriver.bundle</span><br><span class="line">/System/Library/Extensions/IOGraphicsFamily.kext</span><br><span class="line">/System/Library/Extensions/IONDRVSupport.kext</span><br><span class="line">/System/Library/Extensions/NVDANV50HalTesla.kext</span><br><span class="line">/System/Library/Extensions/NVDAResmanTesla.kext</span><br></pre></td></tr></table></figure>

<p>并删除以下内容。删除后修复权限并重建缓存即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">/System/Library/UserEventPlugins/com.apple.telemetry.plugin</span><br></pre></td></tr></table></figure>
</details>

<details>
<summary>【进阶】OC引导</summary>

<p>OpenCore需添加EFI字符串。在配置文件添加以下设备即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line">&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;</span><br><span class="line">&lt;plist version=&quot;1.0&quot;&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;[DEVICEPATH]&lt;/key&gt;</span><br><span class="line">    &lt;dict&gt;</span><br><span class="line">        &lt;key&gt;@0,compatible&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;NVDA,NVMac&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;@0,device_type&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;display&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;@0,name&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;NVDA,Display-A&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;@1,compatible&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;NVDA,NVMac&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;@1,device_type&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;display&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;@1,name&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;NVDA,Display-B&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;NVCAP&lt;/key&gt;</span><br><span class="line">        &lt;data&gt;</span><br><span class="line">        [OUTPUTS]</span><br><span class="line">        &lt;/data&gt;</span><br><span class="line">        &lt;key&gt;NVPM&lt;/key&gt;</span><br><span class="line">        &lt;data&gt;</span><br><span class="line">        AQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA==</span><br><span class="line">        &lt;/data&gt;</span><br><span class="line">        &lt;key&gt;VRAM,totalsize&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;[MEMORYSIZE]&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;device_type&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;NVDA,GeForce&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;model&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;[MODELNAME]&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;name&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;NVDA,Parent&lt;/string&gt;</span><br><span class="line">        &lt;key&gt;rom-revision&lt;/key&gt;</span><br><span class="line">        &lt;string&gt;0x302e3176&lt;/string&gt;</span><br><span class="line">    &lt;/dict&gt;</span><br><span class="line">    &lt;/dict&gt;</span><br><span class="line">&lt;/plist&gt;</span><br></pre></td></tr></table></figure>

<p>注意需根据以下内容替换。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>内容</th>
</tr>
</thead>
<tbody><tr>
<td>[DEVICEPATH]</td>
<td>设备路径</td>
</tr>
<tr>
<td>[MODELNAME]</td>
<td>设备名称</td>
</tr>
<tr>
<td>[MEMORYSIZE]</td>
<td>32 - 0x02000000</br>64 - 0x04000000</br>128 - 0x08000000</br>256 - 0x10000000</br>320 - 0x14000000</br>512 - 0x20000000</br>640 - 0x28000000</br>768 - 0x30000000</br>1024 - 0x40000000</td>
</tr>
<tr>
<td>[OUTPUTS]</td>
<td>DVI-I &#x2F; DVI-I - BAAAAAAAAwAMAAAAAAAABwAAAAA&#x3D;</br>VGA &#x2F; DVI-I  - BAAAAAAAAQAGAAAAAAAAAAAAAAA&#x3D;</br>DVI-I &#x2F; VGA - BAAAAAAAAwAEAAAAAAAABwAAAAA&#x3D;</td>
</tr>
</tbody></table>
</details>

<h3 id="驱动Intel显卡"><a href="#驱动Intel显卡" class="headerlink" title="驱动Intel显卡"></a>驱动Intel显卡</h3><p>Intel显卡位于地址0x00020000，在DSDT中可通过搜索<code>Name (_ADR, 0x00020000)</code>定位到显卡。</p>
<p>打开Hackintool，在缓冲帧菜单项选择macOS 10.14，在IntelGen菜单项选择显卡的次代。本机为Intel HD Graphics 620，选择Kaby Lake。然后选择PlatformID，本机选择0×59160000。具体对应架构和PlatformID参见附录。</p>
<p>点击应用补丁选项卡，进行以下设置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 通用</span><br><span class="line">选择设备属性，勾选自动侦测变化、全部、接口、基本显存、EDID、图形卡、音频、PCI设备</span><br><span class="line"></span><br><span class="line"># Advenced</span><br><span class="line">勾选将DP映射到HDMI、使用英特尔HDMI、修复热插拔重启、HDMI无限循环修复、仿冒声卡ID、显存2048MB、启用HDMI20（4K）、缓冲帧接口数限制：3</span><br><span class="line">勾选仿冒图形卡ID，选择对应显卡设备</span><br></pre></td></tr></table></figure>

<p>点击Generate Patch生成显卡驱动补丁。点击File-Export-Clover config.plist，路径选择EFI&#x2F;CLOVER并确认替换。注意，Hackintool会将原来的config.plist和生成的补丁进行合成，替换以后的config.plist为原有基础上添加了显卡补丁的配置文件，原有配置文件则被备份为config-backup.plist。</p>
<details>
<summary>【进阶】DeviceProperties中显卡设备参数含义</summary>

<p>framebuffer-unifiedmem用于设置显存参数，可随意设置，仅在系统设置中显示，无实际作用。注意，UHD630经测试最高只能修改到4080MB，再往上会变成0MB。</p>
</details>

<h3 id="驱动AMD显卡"><a href="#驱动AMD显卡" class="headerlink" title="驱动AMD显卡"></a>驱动AMD显卡</h3><p>AMD显卡大部分免驱，部分需要通过伪装ID的方式驱动。</p>
<details>
<summary>【进阶】伪装ID</summary>

<p>部分GPU需要将其欺骗为其它显卡以正常工作。列表如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">R9 290/390</span><br><span class="line">R9 280/380</span><br><span class="line">R7 270/370</span><br><span class="line">R9 260/360</span><br><span class="line">R7 250</span><br><span class="line">R7 240</span><br></pre></td></tr></table></figure>

<p>以R9 390为例，最接近的可驱动卡为390X，可得vendor ID为1002，device ID为67B0。仅需将device ID进行处理，结果如下，注意遵循小端规则。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;device-id&quot;,</span><br><span class="line">Buffer (0x04)</span><br><span class="line">&#123;</span><br><span class="line">     0xB0, 0x67, 0x00, 0x00</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>下载以下文件并用MaciASL打开。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/decompiled/SSDT-GPU-SPOOF.dsl.zip</span><br></pre></td></tr></table></figure>

<p>将以下内容修改为显卡的设备路径。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">External (_SB_.PCI0, DeviceObj)</span><br><span class="line">External (_SB_.PCI0.PEG0.PEGP, DeviceObj)</span><br></pre></td></tr></table></figure>

<p>然后将前面修改过的device ID放入该SSDT中。同时修改model，该部分仅为装饰性作用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;model&quot;,</span><br><span class="line">Buffer ()</span><br><span class="line">&#123;</span><br><span class="line">    &quot;AMD Radeon R9 390&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>另存为aml文件后放置在Clover的ACPI&#x2F;patched即可。</p>
</details>

<p>可尝试PyVega以实现超频和电压调整。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/corpnewt/PyVega</span><br></pre></td></tr></table></figure>

<h3 id="禁用显卡"><a href="#禁用显卡" class="headerlink" title="禁用显卡"></a>禁用显卡</h3><p>必须在BIOS中关闭CSM，才可使以下方法工作。</p>
<h4 id="通过添加引导标志"><a href="#通过添加引导标志" class="headerlink" title="通过添加引导标志"></a>通过添加引导标志</h4><p>保证Whatevergreen存在，在Clover引导标志中添加<code>-wegnoegpu</code>。此方法不能保证始终正常工作。</p>
<h4 id="通过添加独显设备并禁用"><a href="#通过添加独显设备并禁用" class="headerlink" title="通过添加独显设备并禁用"></a>通过添加独显设备并禁用</h4><p>注意，进入该设备路径的其它设备也将获得这些属性，从而失效，即会禁用同一品牌的所有显卡，也会禁用开普勒GPU。其它PCIe驱动器也可用此法禁用。</p>
<p>查找到独显设备路径，对于Nvidia一般为<code>\_SB.PCI0.PEG0.PEGP</code>，对于AMD一般为<code>\_SB.PCI0.PEGP.DGFX</code>。找到后在Clover的Device-Add Properties下添加该独显路径，并填写以下内容。</p>
<p>对于Nvidia显卡采用以下内容。</p>
<table>
<thead>
<tr>
<th>Device</th>
<th>Key</th>
<th>Value</th>
<th>Disabled</th>
<th>Value Type</th>
</tr>
</thead>
<tbody><tr>
<td>NVidia</td>
<td>name</td>
<td>23646973706C6179</td>
<td>False</td>
<td>DATA</td>
</tr>
<tr>
<td>NVidia</td>
<td>IOName</td>
<td>#display</td>
<td>False</td>
<td>STRING</td>
</tr>
<tr>
<td>NVidia</td>
<td>class-code</td>
<td>FFFFFFFF</td>
<td>False</td>
<td>DATA</td>
</tr>
</tbody></table>
<p>对于AMD显卡则采用以下内容。</p>
<table>
<thead>
<tr>
<th>Device</th>
<th>Key</th>
<th>Value</th>
<th>Disabled</th>
<th>Value Type</th>
</tr>
</thead>
<tbody><tr>
<td>ATI</td>
<td>name</td>
<td>23646973706C6179</td>
<td>False</td>
<td>DATA</td>
</tr>
<tr>
<td>ATI</td>
<td>IOName</td>
<td>#display</td>
<td>False</td>
<td>STRING</td>
</tr>
<tr>
<td>ATI</td>
<td>class-code</td>
<td>FFFFFFFF</td>
<td>False</td>
<td>DATA</td>
</tr>
<tr>
<td>ATI</td>
<td>vendor-id</td>
<td>FFFF0000</td>
<td>False</td>
<td>DATA</td>
</tr>
<tr>
<td>ATI</td>
<td>device-id</td>
<td>FFFF0000</td>
<td>False</td>
<td>DATA</td>
</tr>
</tbody></table>
<h4 id="通过SSDT"><a href="#通过SSDT" class="headerlink" title="通过SSDT"></a>通过SSDT</h4><p>查找到独显设备路径后，打开MaciASL并新建文件，复制以下代码并将<code>_SB.PCI0.PEG0.PEGP</code>修改为所找到的设备路径，保存为aml文件并放到EFI&#x2F;CLOVER&#x2F;ACPI&#x2F;hotpatch，然后添加change _DSM to XDSM更名补丁。</p>
<p>对于Nvidia显卡采用以下SSDT。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;&quot;, &quot;SSDT&quot;, 2, &quot;hack&quot;, &quot;spoof&quot;, 0)</span><br><span class="line">&#123;</span><br><span class="line">    Method(_SB.PCI0.PEG0.PEGP._DSM, 4)</span><br><span class="line">    &#123;</span><br><span class="line">        If (!Arg2) &#123; Return (Buffer() &#123; 0x03 &#125; ) &#125;</span><br><span class="line">        Return (Package()</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;, Buffer() &#123; &quot;#display&quot; &#125;,</span><br><span class="line">            &quot;IOName&quot;, &quot;#display&quot;,</span><br><span class="line">            &quot;class-code&quot;, Buffer() &#123; 0xFF, 0xFF, 0xFF, 0xFF &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于AMD显卡采用以下SSDT。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;&quot;, &quot;SSDT&quot;, 2, &quot;hack&quot;, &quot;spoof&quot;, 0)</span><br><span class="line">&#123;</span><br><span class="line">    Method(_SB.PCI0.PEG0.PEGP._DSM, 4)</span><br><span class="line">    &#123;</span><br><span class="line">        If (!Arg2) &#123; Return (Buffer() &#123; 0x03 &#125; ) &#125;</span><br><span class="line">        Return (Package()</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;, Buffer() &#123; &quot;#display&quot; &#125;,</span><br><span class="line">            &quot;IOName&quot;, &quot;#display&quot;,</span><br><span class="line">            &quot;class-code&quot;, Buffer() &#123; 0xFF, 0xFF, 0xFF, 0xFF &#125;,</span><br><span class="line">            &quot;vendor-id&quot;, Buffer() &#123; 0xFF, 0xFF, 0,  0 &#125;,</span><br><span class="line">            &quot;device-id&quot;, Buffer() &#123; 0xFF, 0xFF, 0, 0 &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>通用版SSDT如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;&quot;, &quot;SSDT&quot;, 2, &quot;DRTNIA&quot;, &quot;spoof&quot;, 0x00000000)</span><br><span class="line">&#123;</span><br><span class="line">    External (_SB_.PCI0.PEG0.PEGP, DeviceObj)</span><br><span class="line"></span><br><span class="line">    Method (_SB.PCI0.PEG0.PEGP._DSM, 4, NotSerialized)</span><br><span class="line">    &#123;</span><br><span class="line">        If ((!Arg2 || !_OSI (&quot;Darwin&quot;)))</span><br><span class="line">        &#123;</span><br><span class="line">            Return (Buffer (One)</span><br><span class="line">            &#123;</span><br><span class="line">                 0x03</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Return (Package (0x0A)</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;name&quot;, </span><br><span class="line">            Buffer (0x09)</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;#display&quot;</span><br><span class="line">            &#125;, </span><br><span class="line"></span><br><span class="line">            &quot;IOName&quot;, </span><br><span class="line">            &quot;#display&quot;, </span><br><span class="line">            &quot;class-code&quot;, </span><br><span class="line">            Buffer (0x04)</span><br><span class="line">            &#123;</span><br><span class="line">                 0xFF, 0xFF, 0xFF, 0xFF</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>仓库如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/decompiled/SSDT-GPU-DISABLE.dsl.zip</span><br></pre></td></tr></table></figure>

<h3 id="屏蔽独显"><a href="#屏蔽独显" class="headerlink" title="屏蔽独显"></a>屏蔽独显</h3><p>查找到独显设备路径后，打开MaciASL并新建文件，复制以下代码并将<code>_SB.PCI0.PEG0.PEGP</code>修改为所找到的设备路径，保存为aml文件并放到EFI&#x2F;CLOVER&#x2F;ACPI&#x2F;hotpatch。</p>
<details>
<summary>【进阶】禁用原理</summary>

<p>该SSDT通过调用显卡设备中的<code>_OFF</code>方法实现屏蔽独显。</p>
</details>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/decompiled/SSDT-dGPU-Off.dsl.zip</span><br></pre></td></tr></table></figure>

<p>对于部分显卡，该方法无法使其正常关闭，则可通过发送D3 state的方式使显卡处于最低耗能状态。使用以下SSDT即可，操作同上。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/decompiled/SSDT-NoHybGfx.dsl.zip</span><br></pre></td></tr></table></figure>

<h3 id="屏幕亮度"><a href="#屏幕亮度" class="headerlink" title="屏幕亮度"></a>屏幕亮度</h3><h4 id="启用调节"><a href="#启用调节" class="headerlink" title="启用调节"></a>启用调节</h4><p>对于笔记本，可使用BrightnessKeys.kext，链接如下，</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/BrightnessKeys</span><br></pre></td></tr></table></figure>

<p>对于台式机，打开Maciasl，新建文件并复制以下内容，保存为SSDT-PNLF.aml并放入Clover的ACPI&#x2F;patched下。</p>
<p>对于Coffee Lake及更新CPU，使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/AcpiSamples/Source/SSDT-PNLFCFL.dsl</span><br></pre></td></tr></table></figure>

<p>其它使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/AcpiSamples/Source/SSDT-PNLF.dsl</span><br></pre></td></tr></table></figure>

<p>或以下内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;&quot;, &quot;SSDT&quot;, 2, &quot;hack&quot;, &quot;_PNLF&quot;, 0x00000000)</span><br><span class="line">&#123;</span><br><span class="line">    External (_SB_.PCI0.IGPU, DeviceObj)</span><br><span class="line">    External (RMCF.BKLT, IntObj)</span><br><span class="line">    External (RMCF.FBTP, IntObj)</span><br><span class="line">    External (RMCF.GRAN, IntObj)</span><br><span class="line">    External (RMCF.LEVW, IntObj)</span><br><span class="line">    External (RMCF.LMAX, IntObj)</span><br><span class="line"></span><br><span class="line">    Scope (_SB.PCI0.IGPU)</span><br><span class="line">    &#123;</span><br><span class="line">        OperationRegion (RMP3, PCI_Config, Zero, 0x14)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Device (_SB.PCI0.IGPU.PNLF)</span><br><span class="line">    &#123;</span><br><span class="line">        Name (_ADR, Zero)</span><br><span class="line">        Name (_HID, EisaId (&quot;APP0002&quot;))</span><br><span class="line">        Name (_CID, &quot;backlight&quot;)</span><br><span class="line">        Name (_UID, Zero)</span><br><span class="line">        Name (_STA, 0x0B)</span><br><span class="line">        Field (^RMP3, AnyAcc, NoLock, Preserve)</span><br><span class="line">        &#123;</span><br><span class="line">            Offset (0x02), </span><br><span class="line">            GDID,   16, </span><br><span class="line">            Offset (0x10), </span><br><span class="line">            BAR1,   32</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        OperationRegion (RMB1, SystemMemory, (BAR1 &amp; 0xFFFFFFFFFFFFFFF0), 0x000E1184)</span><br><span class="line">        Field (RMB1, AnyAcc, Lock, Preserve)</span><br><span class="line">        &#123;</span><br><span class="line">            Offset (0x48250), </span><br><span class="line">            LEV2,   32, </span><br><span class="line">            LEVL,   32, </span><br><span class="line">            Offset (0x70040), </span><br><span class="line">            P0BL,   32, </span><br><span class="line">            Offset (0xC2000), </span><br><span class="line">            GRAN,   32, </span><br><span class="line">            Offset (0xC8250), </span><br><span class="line">            LEVW,   32, </span><br><span class="line">            LEVX,   32, </span><br><span class="line">            Offset (0xE1180), </span><br><span class="line">            PCHL,   32</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Method (_INI, 0, NotSerialized)</span><br><span class="line">        &#123;</span><br><span class="line">            Local4 = One</span><br><span class="line">            If (CondRefOf (\RMCF.BKLT))</span><br><span class="line">            &#123;</span><br><span class="line">                Local4 = \RMCF.BKLT</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            If ((Zero == (One &amp; Local4)))</span><br><span class="line">            &#123;</span><br><span class="line">                Return (Zero)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Local0 = ^GDID</span><br><span class="line">            Local2 = Ones</span><br><span class="line">            If (CondRefOf (\RMCF.LMAX))</span><br><span class="line">            &#123;</span><br><span class="line">                Local2 = \RMCF.LMAX</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Local3 = Zero</span><br><span class="line">            If (CondRefOf (\RMCF.FBTP))</span><br><span class="line">            &#123;</span><br><span class="line">                Local3 = \RMCF.FBTP</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            If ((Zero == Local3))</span><br><span class="line">            &#123;</span><br><span class="line">                If ((Ones != Match (Package (0x10)</span><br><span class="line">                                &#123;</span><br><span class="line">                                    0x010B, </span><br><span class="line">                                    0x0102, </span><br><span class="line">                                    0x0106, </span><br><span class="line">                                    0x1106, </span><br><span class="line">                                    0x1601, </span><br><span class="line">                                    0x0116, </span><br><span class="line">                                    0x0126, </span><br><span class="line">                                    0x0112, </span><br><span class="line">                                    0x0122, </span><br><span class="line">                                    0x0152, </span><br><span class="line">                                    0x0156, </span><br><span class="line">                                    0x0162, </span><br><span class="line">                                    0x0166, </span><br><span class="line">                                    0x016A, </span><br><span class="line">                                    0x46, </span><br><span class="line">                                    0x42</span><br><span class="line">                                &#125;, MEQ, Local0, MTR, Zero, Zero)))</span><br><span class="line">                &#123;</span><br><span class="line">                    Local3 = One</span><br><span class="line">                &#125;</span><br><span class="line">                Else</span><br><span class="line">                &#123;</span><br><span class="line">                    Local3 = 0x02</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            If ((One == Local3))</span><br><span class="line">            &#123;</span><br><span class="line">                If ((Ones == Local2))</span><br><span class="line">                &#123;</span><br><span class="line">                    Local2 = 0x0710</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Local1 = (^LEVX &gt;&gt; 0x10)</span><br><span class="line">                If (!Local1)</span><br><span class="line">                &#123;</span><br><span class="line">                    Local1 = Local2</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                If ((Local2 != Local1))</span><br><span class="line">                &#123;</span><br><span class="line">                    Local0 = ((^LEVL * Local2) / Local1)</span><br><span class="line">                    Local3 = (Local2 &lt;&lt; 0x10)</span><br><span class="line">                    If ((Local2 &gt; Local1))</span><br><span class="line">                    &#123;</span><br><span class="line">                        ^LEVX = Local3</span><br><span class="line">                        ^LEVL = Local0</span><br><span class="line">                    &#125;</span><br><span class="line">                    Else</span><br><span class="line">                    &#123;</span><br><span class="line">                        ^LEVL = Local0</span><br><span class="line">                        ^LEVX = Local3</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            ElseIf ((0x02 == Local3))</span><br><span class="line">            &#123;</span><br><span class="line">                If ((Ones == Local2))</span><br><span class="line">                &#123;</span><br><span class="line">                    If ((Ones != Match (Package (0x16)</span><br><span class="line">                                    &#123;</span><br><span class="line">                                        0x0D26, </span><br><span class="line">                                        0x0A26, </span><br><span class="line">                                        0x0D22, </span><br><span class="line">                                        0x0412, </span><br><span class="line">                                        0x0416, </span><br><span class="line">                                        0x0A16, </span><br><span class="line">                                        0x0A1E, </span><br><span class="line">                                        0x0A1E, </span><br><span class="line">                                        0x0A2E, </span><br><span class="line">                                        0x041E, </span><br><span class="line">                                        0x041A, </span><br><span class="line">                                        0x0BD1, </span><br><span class="line">                                        0x0BD2, </span><br><span class="line">                                        0x0BD3, </span><br><span class="line">                                        0x1606, </span><br><span class="line">                                        0x160E, </span><br><span class="line">                                        0x1616, </span><br><span class="line">                                        0x161E, </span><br><span class="line">                                        0x1626, </span><br><span class="line">                                        0x1622, </span><br><span class="line">                                        0x1612, </span><br><span class="line">                                        0x162B</span><br><span class="line">                                    &#125;, MEQ, Local0, MTR, Zero, Zero)))</span><br><span class="line">                    &#123;</span><br><span class="line">                        Local2 = 0x0AD9</span><br><span class="line">                    &#125;</span><br><span class="line">                    ElseIf ((Ones != Match (Package (0x04)</span><br><span class="line">                                    &#123;</span><br><span class="line">                                        0x3E9B, </span><br><span class="line">                                        0x3EA5, </span><br><span class="line">                                        0x3E92, </span><br><span class="line">                                        0x3E91</span><br><span class="line">                                    &#125;, MEQ, Local0, MTR, Zero, Zero)))</span><br><span class="line">                    &#123;</span><br><span class="line">                        Local2 = 0xFFFF</span><br><span class="line">                    &#125;</span><br><span class="line">                    Else</span><br><span class="line">                    &#123;</span><br><span class="line">                        Local2 = 0x056C</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                If ((Zero == (0x02 &amp; Local4)))</span><br><span class="line">                &#123;</span><br><span class="line">                    Local5 = 0xC0000000</span><br><span class="line">                    If (CondRefOf (\RMCF.LEVW))</span><br><span class="line">                    &#123;</span><br><span class="line">                        If ((Ones != \RMCF.LEVW))</span><br><span class="line">                        &#123;</span><br><span class="line">                            Local5 = \RMCF.LEVW</span><br><span class="line">                        &#125;</span><br><span class="line">                    &#125;</span><br><span class="line"></span><br><span class="line">                    ^LEVW = Local5</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                If ((0x04 &amp; Local4))</span><br><span class="line">                &#123;</span><br><span class="line">                    If (CondRefOf (\RMCF.GRAN))</span><br><span class="line">                    &#123;</span><br><span class="line">                        ^GRAN = \RMCF.GRAN</span><br><span class="line">                    &#125;</span><br><span class="line">                    Else</span><br><span class="line">                    &#123;</span><br><span class="line">                        ^GRAN = Zero</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                Local1 = (^LEVX &gt;&gt; 0x10)</span><br><span class="line">                If (!Local1)</span><br><span class="line">                &#123;</span><br><span class="line">                    Local1 = Local2</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                If ((Local2 != Local1))</span><br><span class="line">                &#123;</span><br><span class="line">                    Local0 = ((((^LEVX &amp; 0xFFFF) * Local2) / Local1) | </span><br><span class="line">                        (Local2 &lt;&lt; 0x10))</span><br><span class="line">                    ^LEVX = Local0</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            If ((Local2 == 0x0710))</span><br><span class="line">            &#123;</span><br><span class="line">                _UID = 0x0E</span><br><span class="line">            &#125;</span><br><span class="line">            ElseIf ((Local2 == 0x0AD9))</span><br><span class="line">            &#123;</span><br><span class="line">                _UID = 0x0F</span><br><span class="line">            &#125;</span><br><span class="line">            ElseIf ((Local2 == 0x056C))</span><br><span class="line">            &#123;</span><br><span class="line">                _UID = 0x10</span><br><span class="line">            &#125;</span><br><span class="line">            ElseIf ((Local2 == 0x07A1))</span><br><span class="line">            &#123;</span><br><span class="line">                _UID = 0x11</span><br><span class="line">            &#125;</span><br><span class="line">            ElseIf ((Local2 == 0x1499))</span><br><span class="line">            &#123;</span><br><span class="line">                _UID = 0x12</span><br><span class="line">            &#125;</span><br><span class="line">            ElseIf ((Local2 == 0xFFFF))</span><br><span class="line">            &#123;</span><br><span class="line">                _UID = 0x13</span><br><span class="line">            &#125;</span><br><span class="line">            Else</span><br><span class="line">            &#123;</span><br><span class="line">                _UID = 0x63</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>重启电脑后进入系统偏好设置-显示器，若出现亮度调节滑块则已成功。</p>
<p>完成后可通过NativeDisplayBrightness，实现通过F1&#x2F;F2控制显示器亮度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Bensge/NativeDisplayBrightness</span><br></pre></td></tr></table></figure>

<p>也可尝试IntelBacklight，或ACPIBacklight。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/RehabMan/OS-X-Intel-Backlight</span><br><span class="line">https://github.com/RehabMan/OS-X-ACPI-Backlight</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】DSDT PNLF补丁</summary>

<p>对于SandyBridge和IvyBridge如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">into_all device label PNLF remove_entry;</span><br><span class="line">into scope label _SB insert</span><br><span class="line">begin</span><br><span class="line">Device (PNLF)\n</span><br><span class="line">        &#123;\n</span><br><span class="line">            Name (_HID, EisaId (&quot;APP0002&quot;))  // _HID: Hardware ID\n</span><br><span class="line">            Name (_CID, &quot;backlight&quot;)  // _CID: Compatible ID\n</span><br><span class="line">            Name (_UID, 0x0E)  // _UID: Unique ID\n</span><br><span class="line">            Name (_STA, 0x0B)  // _STA: Status\n</span><br><span class="line">        &#125;\n</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>对于Haswell和Broadwell如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">into_all device label PNLF remove_entry;</span><br><span class="line">into scope label _SB insert</span><br><span class="line">begin</span><br><span class="line">Device (PNLF)\n</span><br><span class="line">        &#123;\n</span><br><span class="line">            Name (_HID, EisaId (&quot;APP0002&quot;))  // _HID: Hardware ID\n</span><br><span class="line">            Name (_CID, &quot;backlight&quot;)  // _CID: Compatible ID\n</span><br><span class="line">            Name (_UID, 0x0F)  // _UID: Unique ID\n</span><br><span class="line">            Name (_STA, 0x0B)  // _STA: Status\n</span><br><span class="line">        &#125;\n</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>对于SkyLake和Kabylake如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">into_all device label PNLF remove_entry;</span><br><span class="line">into scope label _SB insert</span><br><span class="line">begin</span><br><span class="line">Device (PNLF)\n</span><br><span class="line">        &#123;\n</span><br><span class="line">            Name (_HID, EisaId (&quot;APP0002&quot;))  // _HID: Hardware ID\n</span><br><span class="line">            Name (_CID, &quot;backlight&quot;)  // _CID: Compatible ID\n</span><br><span class="line">            Name (_UID, 0x10)  // _UID: Unique ID\n</span><br><span class="line">            Name (_STA, 0x0B)  // _STA: Status\n</span><br><span class="line">        &#125;\n</span><br><span class="line">end</span><br></pre></td></tr></table></figure>

<p>对于Coffeelake、WhiskeyLake、CometLake和Ice Lake如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">into_all device label PNLF remove_entry;</span><br><span class="line">into scope label _SB insert</span><br><span class="line">begin</span><br><span class="line">Device (PNLF)\n</span><br><span class="line">        &#123;\n</span><br><span class="line">            Name (_HID, EisaId (&quot;APP0002&quot;))  // _HID: Hardware ID\n</span><br><span class="line">            Name (_CID, &quot;backlight&quot;)  // _CID: Compatible ID\n</span><br><span class="line">            Name (_UID, 0x13)  // _UID: Unique ID\n</span><br><span class="line">            Name (_STA, 0x0B)  // _STA: Status\n</span><br><span class="line">        &#125;\n</span><br><span class="line">end</span><br></pre></td></tr></table></figure>
</details>

<details>
<summary>【进阶】DSDT的相关代码</summary>

<p>LMAX变量代表PWM背光最大值，示例如下。若设置为0则在引导时使用BIOS寄存器值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Name(LMAX, 0x56c)</span><br></pre></td></tr></table></figure>
</details>

<h4 id="亮度恢复"><a href="#亮度恢复" class="headerlink" title="亮度恢复"></a>亮度恢复</h4><p>AppleBacklight.kext将当前亮度级别存储在NVRAM中，以便在重新启动后进行恢复。</p>
<p>为了使恢复正常工作，必须正确实施NVRAM。且Clover的配置文件中，SystemParameters-BacklightLevel不应设值，ACPI-DSDT-Fixes-AddPNLF应关闭</p>
<p>若电脑有环境光传感器，则可能会对亮度恢复造成干扰。可在DSDT中通过查找<code>ACPI0008</code>检查是否存在光传感器。若有，则可通过编辑其_STA方法禁用，示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Device (ALSD)</span><br><span class="line">&#123;</span><br><span class="line">    Name (_HID, &quot;ACPI0008&quot;)  // _HID: Hardware ID</span><br><span class="line">    Method (_STA, 0, NotSerialized)  // _STA: Status</span><br><span class="line">    &#123;</span><br><span class="line">        Return (0)</span><br><span class="line">    &#125;</span><br><span class="line">...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="效果检验"><a href="#效果检验" class="headerlink" title="效果检验"></a>效果检验</h3><p>重启后显卡正常情况下已经驱动，Dock栏变为半透明。</p>
<p>点击左上角苹果按钮，选择关于本机，若图形卡一栏显示2048MB而不是7MB，则核显驱动成功。在系统报告-图形卡中若不能看到所屏蔽的独显，则独显屏蔽成功。点击核显，若有<code>Metal:    支持，功能集macOS GPUFamily2 v1</code>字样，则metal支持打开成功。</p>
<p>显卡驱动后需检验显卡硬件加速（QE&#x2F;CI）是否已经打开。如果能够运行象棋游戏、屏幕保护程序正常工作、Grapher能看到三维图像、截屏功能正常，则硬件加速已打开。</p>
<p>也可使用VDADecoderChecker或VideoProc检测。对于VideoProc，打开应用后进入<code>设置</code>，点击<code>硬件加速引擎</code>旁边的<code>选项</code>，查看检测结果即可。VideoProc下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.videoproc.com/</span><br></pre></td></tr></table></figure>

<p>对于VDADecoderChecker，下载链接如下。双击即可进行检查。若不正常，需保证iGPU注入正确，若无效则尝试更改SMBIOS。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/cylonbrain/VDADecoderCheck</span><br><span class="line">https://i.applelife.ru/2019/05/451893_10.12_VDADecoderChecker.zip</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】对于Catalina及更高版本</summary>

<p>由于默认情况下不显示来自AppleGVA的调试信息，因此需要在系统日志查看结果。在终端输入以下命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.AppleGVA enableSyslog -boolean true</span><br><span class="line">log stream --style compact --predicate &#x27;eventMessage CONTAINS &quot;GVA&quot;&#x27;</span><br></pre></td></tr></table></figure>

<p>输入后开启VDADecoderChecker。完成后输入以下命令禁用AppleGVA调试。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults delete com.apple.AppleGVA enableSyslog</span><br></pre></td></tr></table></figure>
</details>

<details>
<summary>【进阶】Big Sur中的错误</summary>

<p>若出现VDADecoderCreate failed. err: -12473错误，在有AMD独显的情况下，可在终端输入以下命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">defaults write com.apple.AppleGVA gvaForceAMDAVCDecode -boolean yes</span><br></pre></td></tr></table></figure>
</details>

<h3 id="DRM支持"><a href="#DRM支持" class="headerlink" title="DRM支持"></a>DRM支持</h3><p>若未开启DRM，则Apple TV+、Amazon Prime、Netflix将无法正常观看。开启DRM需要支持的dGPU。</p>
<details>
<summary>【进阶】其它系统支持性</summary>

<p>对于Big Sur和Safari 14，系统不再提供软件DRM支持与传统硬件DRM支持，WhatEverGreen目前未提供DRM支持。在Catalina中，对于Intel，Haswell及更新的核显不提供DRM支持。</p>
<p>iGPU的DRM中断通过WhatEverGreen修复，在10.12.2及更低系统起作用。</p>
</details>

<p>DRM类型如下。</p>
<table>
<thead>
<tr>
<th>类型</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>FairPlay 1.x</td>
<td>基于软件的DRM，用于支持旧版Mac</td>
</tr>
<tr>
<td>FairPlay 2.x&#x2F;3.x</td>
<td>基于硬件的DRM，用于Netflix和Amazon Prime，需Polaris+的AMD GPU以保证工作</td>
</tr>
<tr>
<td>FairPlay 4.x</td>
<td>混合DRM，用于AppleTV+，需无iGPU (Xeon)或有Polaris+的AMD GPU以保证工作</td>
</tr>
</tbody></table>
<p>首先通过VDADecoderChecker保证硬件正常工作。然后通过以下视频检查各DRM类型。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># FairPlay 1.x</span><br><span class="line">https://drive.google.com/file/d/12pQ5FFpdHdGOVV6jvbqEq2wmkpMKxsOF/view</span><br><span class="line"></span><br><span class="line"># FairPlay 2.x/3.x</span><br><span class="line"># 播放预告片</span><br><span class="line">https://www.amazon.com/Spider-Man-Far-Home-Tom-Holland/dp/B07TP6D1DP</span><br><span class="line"></span><br><span class="line"># FairPlay 4.x</span><br><span class="line">打开Apple TV+并观看任意预告片</span><br></pre></td></tr></table></figure>

<p>根据以下列表设置SMBIOS，并添加启动参数或添加设备属性即可。以<code>shikigva=80</code>为例，设备属性如下。注意应当仅对一个显卡注入shikigva属性，否则WhatEverGreen将使用它首先找到的任何内容，并且不能保证一致。</p>
<table>
<thead>
<tr>
<th>Properties Key</th>
<th>Properties Value</th>
<th>Value Type</th>
</tr>
</thead>
<tbody><tr>
<td>shikigva</td>
<td>80</td>
<td>Number</td>
</tr>
</tbody></table>
<p>注意，IQSV代表英特尔快速同步视频。这仅在iGPU存在并启用且设置正确时才有效。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/WhateverGreen/blob/master/Manual/FAQ.Chart.md</span><br></pre></td></tr></table></figure>

<h3 id="显示修复"><a href="#显示修复" class="headerlink" title="显示修复"></a>显示修复</h3><p>若出现屏幕花屏，可以尝试将DVI换为HDMI，或注入EDID。</p>
<h4 id="平滑字体"><a href="#平滑字体" class="headerlink" title="平滑字体"></a>平滑字体</h4><p>在终端输入以下命令即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 开启</span><br><span class="line">defaults write -g CGFontRenderingFontSmoothingDisabled -bool NO</span><br><span class="line"></span><br><span class="line"># 设置字体样式</span><br><span class="line"># 3为最粗，1为最细</span><br><span class="line">defaults -currentHost write -globalDomain AppleFontSmoothing -int 3</span><br><span class="line">// defaults -currentHost write -globalDomain AppleFontSmoothing -int 2</span><br><span class="line">// defaults -currentHost write -globalDomain AppleFontSmoothing -int 1</span><br><span class="line"></span><br><span class="line"># 关闭</span><br><span class="line">defaults write -g CGFontRenderingFontSmoothingDisabled -bool YES</span><br></pre></td></tr></table></figure>

<h4 id="Hidpi"><a href="#Hidpi" class="headerlink" title="Hidpi"></a>Hidpi</h4><p>HiDPI即High Dots Per Inch，用四个硬件像素渲染一个图像像素。开启Hidpi可使显示更清晰。</p>
<h5 id="通过脚本"><a href="#通过脚本" class="headerlink" title="通过脚本"></a>通过脚本</h5><p>在终端下输入以下命令打开一键HiDPI脚本，安装以获得原生屏幕缩放体验。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sh -c &quot;$(curl -fsSL https://raw.githubusercontent.com/xzhih/one-key-hidpi/master/hidpi.sh)&quot;</span><br><span class="line"></span><br><span class="line"># 或以下命令</span><br><span class="line">bash -c &quot;$(curl -fsSL https://gitee.com/kirainmoe/static-files/raw/master/hidpi.sh)&quot;</span><br></pre></td></tr></table></figure>

<h5 id="通过RDM"><a href="#通过RDM" class="headerlink" title="通过RDM"></a>通过RDM</h5><p>打开DarwinDumper，只勾选EDID，点击左侧的Run，会在桌面生成EDID文件夹。下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mac.softpedia.com/get/Utilities/DarwinDumper.shtml</span><br></pre></td></tr></table></figure>

<p>下载FixEDID，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/andyvand/FixEDID</span><br></pre></td></tr></table></figure>

<p>打开并点击Open EDID binary file，选择桌面文件夹的EDID&#x2F;EDID.bin。选择对应显示比例的显示器，此处为Apple MacBook Pro Display（16:10）。</p>
<p>在右侧输入想设置的分辨率，点击Add Resolutions添加分辨率，点击Make在桌面生成文件。参考分辨率如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">3840×2160</span><br><span class="line">3200×1800</span><br><span class="line">2880×1620</span><br><span class="line">2560×1600</span><br><span class="line">2560×1440</span><br><span class="line">1920×1080</span><br><span class="line">1820×1200</span><br><span class="line">1680×1050</span><br><span class="line">1600×900</span><br><span class="line">1440×810</span><br><span class="line">1440×900</span><br><span class="line">1440×810</span><br><span class="line">1344×1008</span><br><span class="line">1344×756</span><br><span class="line">1280×960</span><br><span class="line">1280×800</span><br><span class="line">1280×720</span><br><span class="line">1024×768</span><br><span class="line">1024×576</span><br><span class="line">960×600</span><br><span class="line">960×540</span><br><span class="line">840×525</span><br><span class="line">840×524</span><br><span class="line">800×600</span><br><span class="line">800×450</span><br><span class="line">720×450</span><br><span class="line">640×480</span><br></pre></td></tr></table></figure>

<p>将桌面的DisplayVendorID-xxx放到&#x2F;System&#x2F;Library&#x2F;Displays&#x2F;Contents&#x2F;Resources&#x2F;Overrides。安装<code>RDM</code>并重启电脑，即可在RDM看到需要的分辨率，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://avi.alkalay.net/software/RDM/RDM-2.2.dmg</span><br></pre></td></tr></table></figure>

<h5 id="通过手动设置"><a href="#通过手动设置" class="headerlink" title="通过手动设置"></a>通过手动设置</h5><details>
<summary>【进阶】对于Big Sur</summary>

<p>该方法适用于Big Sur，将最后生成的文件放置于&#x2F;Library&#x2F;Displays&#x2F;Contents&#x2F;Resources&#x2F;Overrides即可。</p>
<p>具体可在终端使用以下命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">sudo mkdir -p /Library/Displays/Contents/Resources/Overrides/</span><br><span class="line"></span><br><span class="line"># DisplayProductID-413c和DisplayVendorID-10ac根据显示器自行修改</span><br><span class="line">sudo cp ~/Downloads/DisplayProductID-413c.plist /Library/Displays/Contents/Resources/Overrides/DisplayVendorID-10ac/DisplayProductID-413</span><br></pre></td></tr></table></figure>
</details>

<p>打开终端并输入以下命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo defaults write /Library/Preferences/com.apple.windowserver.plist DisplayResolutionEnabled -bool true</span><br><span class="line">ioreg -lw0 | grep IODisplayPrefsKey</span><br></pre></td></tr></table></figure>

<p>输出类似如下信息，其中所有外部监视器由AppleDisplay标识，内部监视器由AppleBacklightDisplay标识。在行末可识别出DisplayVendorID和DisplayProductID，此处为<code>10ac</code>和<code>d06e</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&quot;IODisplayPrefsKey&quot; = &quot;IOService:/AppleACPIPlatformExpert/PCI0@0/AppleACPIPCI/IGPU@2/AppleIntelFramebuffer@2/display0/AppleDisplay-10ac-d06e&quot;</span><br></pre></td></tr></table></figure>

<p>打开以下网页并输入刚才得到的DisplayVendorID和DisplayProductID，DisplayProductName可以随意。注意一个分辨率需填写两个Scale Resolutions，其中第一个是原分辨率，另一个是长宽均为两倍后的分辨率，如添加1920×1080，则需填入3840×2160和1920×1080。注意相近的分辨率将会被系统过滤。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://codeclou.github.io/Display-Override-PropertyList-File-Parser-and-Generator-with-HiDPI-Support-For-Scaled-Resolutions/</span><br></pre></td></tr></table></figure>

<p>调整完成后下载plist文件，去掉扩展名并放在DisplayVendorID-10ac文件夹，其中10ac更改为自己的VendorID。将文件夹复制到&#x2F;System&#x2F;Library&#x2F;Displays&#x2F;Contents&#x2F;Resources&#x2F;Overrides并重启即可。</p>
<h4 id="注入EDID"><a href="#注入EDID" class="headerlink" title="注入EDID"></a>注入EDID</h4><p>注入EDID可修复笔记本显示器内屏黑屏或花屏的问题。若前面选择采用Hidpi一键脚本，则无需进行此步。</p>
<h5 id="通过patch-edid-rb"><a href="#通过patch-edid-rb" class="headerlink" title="通过patch-edid.rb"></a>通过patch-edid.rb</h5><p>打开终端并输入以下命令以下载脚本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">curl -O https://gist.github.com/ejdyksen/8302862/raw/patch-edid.rb</span><br></pre></td></tr></table></figure>

<p>打开脚本文件并查找<code>AppleDisplay</code>，其代表外接显示器，若为内接显示器则需修改为<code>AppleBacklightDisplay</code>。然后继续在终端输入以下命令以运行并生成配置文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo ruby patch-edid.rb</span><br></pre></td></tr></table></figure>

<p>将生成的配置文件复制到&#x2F;System&#x2F;Library&#x2F;Displays&#x2F;Contents&#x2F;Resources&#x2F;Overrides&#x2F;DisplayVendorID-xxx（对于El Capitan及以前版本为&#x2F;System&#x2F;Library&#x2F;Displays&#x2F;Overrides&#x2F;DisplayVendorID-xxx），若已存在配置文件，则将两个文件的内容合并，重启即可。</p>
<h5 id="通过Clover"><a href="#通过Clover" class="headerlink" title="通过Clover"></a>通过Clover</h5><p>在终端分别输入以下命令并记录其输出。其中第一个输出为EDID信息，另外两个分别为屏幕设备的VendorID和ProductID。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ioreg -lw0 | grep -i &quot;IODisplayEDID&quot; | sed -e &#x27;s/.*&lt;//&#x27; -e &#x27;s/&gt;//&#x27;</span><br><span class="line">ioreg -l | grep &quot;DisplayVendorID&quot;</span><br><span class="line">ioreg -l | grep &quot;DisplayProductID&quot;</span><br></pre></td></tr></table></figure>

<p>打开Clover的config.plist，切换到Graphics，将三者分别粘贴到对应的位置，注意VendorID和ProductID需要转换为十六进制。勾选<code>Inject EDID</code>，保存并重启即可。</p>
<h5 id="通过Hackintool"><a href="#通过Hackintool" class="headerlink" title="通过Hackintool"></a>通过Hackintool</h5><p>打开Hackintool，进入显示器，选择要编辑的显示器，可添加或修复监视器范围，以及修改分辨率。</p>
<p>点击导出，将DisplayVendorID-x和Icons.plist复制到&#x2F;System&#x2F;Library&#x2F;Displays&#x2F;Contents&#x2F;Resources&#x2F;Overrides（对于El Capitan及以前版本为&#x2F;System&#x2F;Library&#x2F;Displays&#x2F;Overrides）即可。</p>
<p>也可将DisplayEDID-x-x.kext复制到Clover的kexts文件夹。</p>
<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="部分iGPU唤醒中断"><a href="#部分iGPU唤醒中断" class="headerlink" title="部分iGPU唤醒中断"></a>部分iGPU唤醒中断</h4><p>Apple对AppleGraphicsPowerManagement.kext中进行的修改导致。需要添加启动参数igfxonln&#x3D;1以强制所有显示器联机。</p>
<h4 id="NVMe内核崩溃"><a href="#NVMe内核崩溃" class="headerlink" title="NVMe内核崩溃"></a>NVMe内核崩溃</h4><p>部分配备iGPU的系统（Sandy Lake&#x2F;Coffee Lake等）可能会导致系统在低功耗状态下不稳定。需要添加启动参数forceRenderStandby&#x3D;0以禁用RC6渲染待机。</p>
<h4 id="Ice-Lake笔记本出现panic，为Cannot-allow-DC9-without-disallowing-DC6"><a href="#Ice-Lake笔记本出现panic，为Cannot-allow-DC9-without-disallowing-DC6" class="headerlink" title="Ice Lake笔记本出现panic，为Cannot allow DC9 without disallowing DC6"></a>Ice Lake笔记本出现panic，为Cannot allow DC9 without disallowing DC6</h4><p>状态转换问题，需要添加启动参数-noDC9或-nodisplaysleepDC6。</p>
<h4 id="带有AMD-dGPU的4k显示器无法随机唤醒"><a href="#带有AMD-dGPU的4k显示器无法随机唤醒" class="headerlink" title="带有AMD dGPU的4k显示器无法随机唤醒"></a>带有AMD dGPU的4k显示器无法随机唤醒</h4><p>AGDC设置引起。在配置文件中定位到该设备的设备属性，添加以下项即可。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>类型</th>
<th>内容</th>
</tr>
</thead>
<tbody><tr>
<td>CFG,CFG_USE_AGDC</td>
<td>Data</td>
<td>00</td>
</tr>
</tbody></table>
<h2 id="有线网卡"><a href="#有线网卡" class="headerlink" title="有线网卡"></a>有线网卡</h2><p>几乎所有的有线网卡都受支持。</p>
<h3 id="Realtek"><a href="#Realtek" class="headerlink" title="Realtek"></a>Realtek</h3><p>Realtek L8200A不受支持。</p>
<p>以Realtek RTL8111有线网卡为例，网络上寻找对应驱动的kext，并放入Clover的kexts&#x2F;Others即可驱动。</p>
<p>驱动后进入系统偏好设置-网络，可看到有线网卡。或点击左上角苹果按钮，选择关于本机-系统报告…，在<code>以太网卡</code>中可以看到有线网卡。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># Realtek RTL810X（RTL8101E/8102E/8103E/8401E/8105E/8402/8106E/8106EUS）</span><br><span class="line">http://www.insanelymac.com/forum/topic/296190-driver-for-realteks-rtl810x-fast-ethernet-series</span><br><span class="line"></span><br><span class="line"># Realtek RTL8111X/8168X（X=无/B/C/D/E/F/G）[Gigabit Ethernet]</span><br><span class="line">http://www.insanelymac.com/forum/topic/287161-new-driver-for-realtek-rtl8111</span><br><span class="line">https://github.com/Mieze/RTL8111_driver_for_OS_X</span><br><span class="line">https://code.google.com/p/os-x-realtek-network/downloads/list</span><br><span class="line">https://github.com/SergeySlice/RealtekLANv3</span><br><span class="line">http://lnx2mac.blogspot.com/p/realtekrtl81xx-osx-driver.html</span><br><span class="line"></span><br><span class="line"># Realtek RTL8125 [2.5Gb Ethernet]</span><br><span class="line">https://github.com/Mieze/LucyRTL8125Ethernet</span><br><span class="line"></span><br><span class="line"># Realtek RTL8100</span><br><span class="line">https://github.com/Mieze/RealtekRTL8100</span><br></pre></td></tr></table></figure>

<h3 id="Intel"><a href="#Intel" class="headerlink" title="Intel"></a>Intel</h3><p>Intel有线网卡驱动下载链接如下。不支持Intel I225 2.5Gb NIC、Intel I225 2.5Gb NIC、Intel 10Gb server NICs、Mellanox and Qlogic server NICs。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"># 新版，支持82578LM/82578LC/82578DM/82578DC/82579LM/82579V/I217LM/I217V/I218LM/I218V/I218LM2/I218V2/I218LM3/I219V/I219LM/I219V2/I219LM2/I219LM2</span><br><span class="line">https://github.com/Mieze/IntelMausiEthernet</span><br><span class="line">https://github.com/acidanthera/IntelMausi</span><br><span class="line"></span><br><span class="line"># 旧版</span><br><span class="line">https://github.com/chris1111/AppleIntelE1000e</span><br><span class="line"></span><br><span class="line"># 支持82575/82576/82580/dh89xxcc/i350/i210/i211</span><br><span class="line">https://www.tonymacx86.com/resources/appleigb.323/</span><br><span class="line"></span><br><span class="line"># 支持I211/I350</span><br><span class="line">https://github.com/khronokernel/SmallTree-I211-AT-patch</span><br><span class="line"></span><br><span class="line"># 支持I211</span><br><span class="line">https://github.com/suxiaogang/asrock-deskmini-110-hackintosh/tree/master/EFI/CLOVER/kexts/Other/Backup/SmallTree-Intel-211-AT-PCIe-GBE.kext</span><br><span class="line">https://cdn.discordapp.com/attachments/390417931659378688/556912824228773888/SmallTree-Intel-211-AT-PCIe-GBE.kext.zip</span><br><span class="line"></span><br><span class="line"># 支持82546EB/82545EM/82546EB/82545GM/82571EB</span><br><span class="line">https://small-tree.com/smalltreeintel8254x-3-9-0-dmg/</span><br><span class="line"></span><br><span class="line"># 支持82598EB/82599EB/82599ES</span><br><span class="line">https://small-tree.com/smalltreeintel8259x-3-5-0-dmg/</span><br></pre></td></tr></table></figure>

<p>Intel i225-V需要欺骗为被支持的i225LM，具体为在Clover的设备属性下添加路径<code>PciRoot(0x0)/Pci(0x1C,0x1)/Pci(0x0,0x0)</code>，其中具有键device-id，类型为Data，值为F2150000。完成欺骗后通过AppleIntelI210Ethernet驱动即可。若出现panic，则设备路径应改为类似<code>PciRoot(0x0)/Pci(0x1C,0x4)/Pci(0x0,0x0)</code>。</p>
<h3 id="Broadcom"><a href="#Broadcom" class="headerlink" title="Broadcom"></a>Broadcom</h3><p>对于BCM5722 NetXtreme&#x2F;NetLink，可用BCM5722D，链接如下。适用于10.6及更高版本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/chris1111/BCM5722D</span><br></pre></td></tr></table></figure>

<p>其它则需要FakePCIID+FakePCIID_BCM57XX_as_BCM57765。</p>
<h3 id="AMD"><a href="#AMD" class="headerlink" title="AMD"></a>AMD</h3><p>I211-AT驱动下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/khronokernel/SmallTree-I211-AT-patch/releases</span><br></pre></td></tr></table></figure>

<h3 id="Atheros"><a href="#Atheros" class="headerlink" title="Atheros"></a>Atheros</h3><p>Atheros有线网卡驱动下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># Qualcomm Atheros E2200</span><br><span class="line"># 支持AR816x/AR817x/Killer E220x/Killer E2400/Killer E2500</span><br><span class="line">https://github.com/Mieze/AtherosE2200Ethernet</span><br><span class="line"></span><br><span class="line"># Qualcomm Atheros AR813x/815x</span><br><span class="line">https://github.com/al3xtjames/AtherosL1cEthernet</span><br><span class="line"></span><br><span class="line"># Atheros(R) AR81(31/32/51/52/61/62/71/72) PCI-E</span><br><span class="line"># 适用于10.7-10.8</span><br><span class="line">https://www.insanelymac.com/forum/topic/284119-experimental-atheros-ar813132515261627172-driver-for-107108/</span><br></pre></td></tr></table></figure>

<p>也可尝试使用ALXEthernet。</p>
<h3 id="Aquantia"><a href="#Aquantia" class="headerlink" title="Aquantia"></a>Aquantia</h3><p>Aquantia有线网卡驱动下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.insanelymac.com/forum/topic/330614-aquantia-10-gb-ethernet-support-thread-10132-upwards/</span><br><span class="line">https://www.insanelymac.com/forum/topic/330614-marvell-aquantia-10-gb-ethernet-support-thread/</span><br></pre></td></tr></table></figure>

<h3 id="无实际网卡"><a href="#无实际网卡" class="headerlink" title="无实际网卡"></a>无实际网卡</h3><p>因为Mac App Store、iCloud、FaceTime和iMessage的正常工作要求在en0处具有内置以太网，因此，若无有线网卡，需将NullEthernet.kext放到Clover的kexts以模拟出一个有线网卡设备。下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://bitbucket.org/RehabMan/os-x-null-ethernet/downloads/</span><br></pre></td></tr></table></figure>

<h3 id="网络端口重置"><a href="#网络端口重置" class="headerlink" title="网络端口重置"></a>网络端口重置</h3><p>若以太网端口不在en0，则需进入网络偏好设置，删除所有接口并应用。</p>
<p>然后删除<code>/Library/Preferences/SystemConfiguration/NetworkInterfaces.plist</code>，重新启动后进入网络偏好设置，重新添加网络端口。</p>
<h3 id="有线网卡内建"><a href="#有线网卡内建" class="headerlink" title="有线网卡内建"></a>有线网卡内建</h3><p>在Clover的Devices选项卡中选择Properties，添加一个新设备，路径为通过Hackintool找到的有线网卡设备，并添加条目built-in，数值为01，类型为DATA，重启即可。</p>
<p>如果用的是NullEthernet.kext，则打开Maciasl，复制以下内容并保存为SSDT-RMNE.aml，然后放入Clover的ACPI&#x2F;patched中即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;&quot;, &quot;SSDT&quot;, 2, &quot;RehabM&quot;, &quot;RMNE&quot;, 0x00001000)</span><br><span class="line">&#123;</span><br><span class="line">    Device (RMNE)</span><br><span class="line">    &#123;</span><br><span class="line">        Name (_ADR, Zero)</span><br><span class="line">        Name (_HID, &quot;NULE0000&quot;)</span><br><span class="line">        Name (MAC, Buffer (0x06)</span><br><span class="line">        &#123;</span><br><span class="line">             0x11, 0x22, 0x33, 0x44, 0x55, 0x66</span><br><span class="line">        &#125;)</span><br><span class="line">        Method (_DSM, 4, NotSerialized)</span><br><span class="line">        &#123;</span><br><span class="line">            If ((Arg2 == Zero))</span><br><span class="line">            &#123;</span><br><span class="line">                Return (Buffer (One)</span><br><span class="line">                &#123;</span><br><span class="line">                     0x03</span><br><span class="line">                &#125;)</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Return (Package (0x0A)</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;built-in&quot;, </span><br><span class="line">                Buffer (One)</span><br><span class="line">                &#123;</span><br><span class="line">                     0x00</span><br><span class="line">                &#125;, </span><br><span class="line"></span><br><span class="line">                &quot;IOName&quot;, </span><br><span class="line">                &quot;ethernet&quot;, </span><br><span class="line">                &quot;name&quot;, </span><br><span class="line">                Buffer (0x09)</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;ethernet&quot;</span><br><span class="line">                &#125;, </span><br><span class="line"></span><br><span class="line">                &quot;model&quot;, </span><br><span class="line">                Buffer (0x15)</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;RM-NullEthernet-1001&quot;</span><br><span class="line">                &#125;, </span><br><span class="line"></span><br><span class="line">                &quot;device_type&quot;, </span><br><span class="line">                Buffer (0x09)</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;ethernet&quot;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="免驱卡"><a href="#免驱卡" class="headerlink" title="免驱卡"></a>免驱卡</h3><p>免驱卡列表如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">## Aquantia Series</span><br><span class="line"># AppleEthernetAquantiaAqtion.kext</span><br><span class="line"># 可能需要在Linux/Windows更新固件，保证Mac支持</span><br><span class="line">pci1d6a,1    = Aquantia AQC107</span><br><span class="line">pci1d6a,d107 = Aquantia AQC107</span><br><span class="line">pci1d6a,7b1  = Aquantia AQC107</span><br><span class="line">pci1d6a,80b1 = Aquantia AQC107</span><br><span class="line">pci1d6a,87b1 = Aquantia AQC107</span><br><span class="line">pci1d6a,88b1 = Aquantia AQC107</span><br><span class="line">pci1d6a,89b1 = Aquantia AQC107</span><br><span class="line">pci1d6a,91b1 = Aquantia AQC107</span><br><span class="line">pci1d6a,92b1 = Aquantia AQC107</span><br><span class="line">pci1d6a,c0   = Aquantia AQC113</span><br><span class="line">pci1d6a,4c0  = Aquantia AQC113</span><br><span class="line"></span><br><span class="line">## Intel Series</span><br><span class="line"># AppleIntel8254XEthernet.kext</span><br><span class="line">pci8086,1096 = Intel 80003ES2LAN</span><br><span class="line">pci8086,100f = Intel 82545EM</span><br><span class="line">pci8086,105e = Intel 82571EB/82571GB</span><br><span class="line"></span><br><span class="line"># AppleIntelI210Ethernet.kext</span><br><span class="line">pci8086,1533 = Intel I210</span><br><span class="line">pci8086,15f2 = Intel I225LM (Added in macOS 10.15)</span><br><span class="line"></span><br><span class="line"># Intel82574L.kext</span><br><span class="line">pci8086,104b = Intel 82566DC</span><br><span class="line">pci8086,10f6 = Intel 82574L</span><br><span class="line"></span><br><span class="line">## Broadcom Series</span><br><span class="line"># AppleBCM5701Ethernet.kext</span><br><span class="line">pci14e4,1684 = Broadcom BCM5764M</span><br><span class="line">pci14e4,16b0 = Broadcom BCM57761</span><br><span class="line">pci14e4,16b4 = Broadcom BCM57765</span><br><span class="line">pci14e4,1682 = Broadcom BCM57762</span><br><span class="line">pci14e4,1686 = Broadcom BCM57766</span><br></pre></td></tr></table></figure>

<h2 id="无线网卡"><a href="#无线网卡" class="headerlink" title="无线网卡"></a>无线网卡</h2><h3 id="Atheros-1"><a href="#Atheros-1" class="headerlink" title="Atheros"></a>Atheros</h3><p>本机无线网卡为Atheros AR9565，可用驱动由corecapture.kext、CoreCaptureResponder.kext和IO80211Family.kext组成，下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.mediafire.com/file/2rjm76vro8ha28l/9565.zip/file</span><br></pre></td></tr></table></figure>

<p>对于macOS 10.14，把它们放入Clover的kexts中，重启电脑后无线网卡可用。</p>
<details>
<summary>【进阶】更高版本系统</summary>

<p>上述kexts在Catalina中需要放到SLE才能正常工作，在Big Sur中已不适用。Big Sur中需要使用HS80211Family.kext和AirPortAtheros40.kext，下载网站如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.longzc.cn/index.php/archives/330</span><br></pre></td></tr></table></figure>

<p>在Catalina中，也可尝试以下kexts。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/tj320442/AR9565-DW1707-macOS-10.15-Catalina</span><br><span class="line">https://gitee.com/i320442/AR9565_DW1707/tree/master</span><br></pre></td></tr></table></figure>
</details>

<p>对于AR946X（AR9462&amp;AR9463）、AR9485、AR9565，也可尝试ATH9KFixup。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/chunnann/ATH9KFixup</span><br><span class="line">https://www.olarila.com/topic/9229-guide-wifi-atheros-ar9565-ar9462-ar9463-ar9485-on-mojave-and-catalina/</span><br></pre></td></tr></table></figure>

<p>对于AR242x、AR542x、AR5416、AR5418、AR9280-AR5BHB92、AR9285-AR5B95、AR9287-AR5B97、AR9380-AR5BXB112，可尝试High Sierra的IO80211Family。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/khronokernel/IO80211-Patches/blob/main/10.13.6-High-Sierra-Kexts/IO80211HighSierra.kext.zip</span><br></pre></td></tr></table></figure>

<details>
<summary>【过时】低版本系统</summary>

<p>对于AR5B95&#x2F;195&#x2F;97&#x2F;197，在High Sierra中可用以下kext。下载后解压并将kexts&#x2F;ProbookAtheros.kext放置到引导器即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/RehabMan/HP-ProBook-4x30s-DSDT-Patch/archive/master.zip</span><br></pre></td></tr></table></figure>
</details>

<h3 id="Intel-1"><a href="#Intel-1" class="headerlink" title="Intel"></a>Intel</h3><p>可尝试Itlwm，支持10.13及更高版本。注意应当使用itlwm.kext或AirportItlwm.kext，两者不能同时使用。推荐使用itlwm.kext。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/OpenIntelWireless/itlwm</span><br></pre></td></tr></table></figure>

<p>支持列表如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://openintelwireless.github.io/itlwm/Compat.html</span><br></pre></td></tr></table></figure>

<p>该kexts会使Intel无线网卡识别为有线网卡，因此需要配合HeliPort客户端使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/OpenIntelWireless/HeliPort</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】使用AirportItlwm</summary>

<p>若使用AirportItlwm，则需要开启安全启动，具体可查看黑苹果的进阶操作中OpenCore的相关处理方法。</p>
</details>

<h3 id="Broadcom-1"><a href="#Broadcom-1" class="headerlink" title="Broadcom"></a>Broadcom</h3><p>可尝试AirportBrcmFixup，适用于10.10及更高版本，链接如下。</p>
<p>对于DW1820A&#x2F;DW1830&#x2F;DW1560，需添加启动参数brcmfx-country&#x3D;#a和brcmfx-aspm。安装前先于BIOS中禁用WLAN&#x2F;WIFI和Bluetooth，待安装系统成功后再行开启。</p>
<p>对于DW1820A，还需要在config.plist添加以下设备属性。如果想体验Sidecar&#x2F;Apple Watch解锁功能，compatible可为pci14e4,43a0或者pci14e4,4353，以便驱动AirPortDriverBrcmNIC并开启相应功能。</p>
<table>
<thead>
<tr>
<th>Properties Key</th>
<th>Properties Value</th>
<th>Value Type</th>
</tr>
</thead>
<tbody><tr>
<td>AAPL,slot-name</td>
<td>WLAN</td>
<td>STRING</td>
</tr>
<tr>
<td>compatible</td>
<td>pci14e4,4353</td>
<td>STRING</td>
</tr>
<tr>
<td>device_type</td>
<td>Airport Extreme</td>
<td>STRING</td>
</tr>
<tr>
<td>model</td>
<td>DW1820A (BCM4350) 802.11ac Wireless</td>
<td>STRING</td>
</tr>
<tr>
<td>name</td>
<td>Airport</td>
<td>STRING</td>
</tr>
</tbody></table>
<p>如果插上网卡后进入系统直接卡住，可添加引导参数-brcmfxoff以暂时跳过网卡驱动的加载。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/AirportBrcmFixup</span><br></pre></td></tr></table></figure>

<details>
<summary>【注意】BCM94350ZAE芯片组</summary>

<p>BCM94350ZAE芯片组在macOS中不正确支持电源管理，因此需要通过属性注入禁用。在引导器的设备部分添加无线网卡设备，并添加以下属性。</p>
<table>
<thead>
<tr>
<th>属性</th>
<th>类型</th>
<th>值</th>
</tr>
</thead>
<tbody><tr>
<td>pci-aspm-default</td>
<td>Data</td>
<td>00</td>
</tr>
</tbody></table>
</details>

<details>
<summary>【进阶】AirportBrcmFixup与BrcmWLFixup</summary>

<p>BrcmWLFixup已被整合到AirportBrcmFixup。</p>
</details>

<details>
<summary>【进阶】OC引导</summary>

<p>对于OpenCore，kext注入顺序为AirportBrcmFixup-AirportBrcmFixup&#x2F;Contents&#x2F;Plugins&#x2F;AirPortBrcm4360_Injector-AirportBrcmFixup&#x2F;Contents&#x2F;Plugins&#x2F;AirPortBrcmNIC_Injector。</p>
</details>

<p>对于BCM94352z&#x2F;DW1560，需使用AirportBrcmFixup和BrcmPatchRAM。BrcmPatchRAM链接如下。该方法适用于10.11至10.14系统。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/BrcmPatchRAM</span><br></pre></td></tr></table></figure>

<p>若蓝牙失效，则将BrcmFirmwareData.kext、BrcmPatchRAM2.kext、AirportBrcmFixup.kext复制到&#x2F;Library&#x2F;Extensions目录下，以解决睡眠唤醒后可能引起的蓝牙失效的问题。重启前需要重建系统的缓存。</p>
<p>也可尝试BroadcomWiFiInjector。</p>
<details>
<summary>【进阶】OC引导</summary>

<p>对于OpenCore，kext注入顺序为Injector-Data-RAM。</p>
</details>

<h3 id="Realtek-1"><a href="#Realtek-1" class="headerlink" title="Realtek"></a>Realtek</h3><p>对于RTL8192CU，可采用以下链接。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://drive.google.com/file/d/1ZtdMqlvKBbHULJhl1u9omuLOy6j0vx48/view</span><br></pre></td></tr></table></figure>

<h3 id="免驱卡-1"><a href="#免驱卡-1" class="headerlink" title="免驱卡"></a>免驱卡</h3><p>列表如下。</p>
<table>
<thead>
<tr>
<th>无线网卡型号</th>
<th>蓝牙型号</th>
<th>连接器型号</th>
<th>使用的Mac产品型号</th>
</tr>
</thead>
<tbody><tr>
<td>BCM943602CDP</td>
<td>20703A1</td>
<td>U.FL Connector</td>
<td>iMac16,x</br>iMac17,1</br>iMac18,x</td>
</tr>
<tr>
<td>BCM94360CD</td>
<td>20702B0</td>
<td>U.FL Connector</td>
<td>iMac14,x</br>iMac15,x</br>MacPro6,1</td>
</tr>
<tr>
<td>BCM94331CD</td>
<td>BRCM20702（05AC:828b）</td>
<td>U.FL Connector</td>
<td>iMac13,x</td>
</tr>
<tr>
<td>BCM94360CS2</td>
<td>BRCM20702（05AC:821f）</td>
<td>MHF4 Connector</td>
<td>MacBookAir5,x</br>MacBookAir6,x</br>MacBookAir7,x</td>
</tr>
<tr>
<td>BCM943224PCIEBT</td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>BCM943602CS</td>
<td>20703A1</td>
<td>MHF4 Connector</td>
<td>MacBookPro12,x</td>
</tr>
<tr>
<td>BCM94360CS</td>
<td>20702B0</td>
<td>MHF4 Connector</td>
<td>Macmini7,x</br>MacBookPro11,x</td>
</tr>
<tr>
<td>BCM94360CSAX</td>
<td>BRCM20702（05AC:828c）</td>
<td>MHF4 Connector</td>
<td>MacBookPro10,x</td>
</tr>
<tr>
<td>BCM94350</td>
<td>4350C1</td>
<td>MHF4 Connector</td>
<td>MacBook8,1</td>
</tr>
<tr>
<td>BCM94350</td>
<td>20703A2</td>
<td>MHF4 Connector</td>
<td>MacBookPro13,x</td>
</tr>
<tr>
<td>BCM94350</td>
<td>4350</td>
<td>MHF4 Connector</td>
<td>MacBookPro14,x</td>
</tr>
<tr>
<td>BCM4364</td>
<td>4364B0</td>
<td></td>
<td>iMac19,x</br>Macmini8,1</br>MacBookPro15,x</br>iMacPro1,1 - 4364</br>MacPro7,1- 4364B3</td>
</tr>
<tr>
<td>BCM4355</td>
<td></td>
<td></td>
<td>MacBookAir8,1</td>
</tr>
<tr>
<td><strong>以下为传统无线网卡</strong></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>BCM4328</td>
<td></td>
<td></td>
<td>iMac5,1-9,1</br>MacBook3,1-4,1</br>MacBookAir1,1-2,1</td>
</tr>
<tr>
<td>BCM4321</td>
<td></td>
<td></td>
<td>MacPro2,1</br>Macmini4,1</td>
</tr>
<tr>
<td>BCM4322</td>
<td></td>
<td></td>
<td>MacBook5,1</br>MacBookPro5,1 and 7,1</br>MacBookAir3,1-5,1</br>MacPro5,1</td>
</tr>
<tr>
<td>BCM43224</td>
<td></td>
<td></td>
<td>MacBook6,1</br>MacBookPro6,1</td>
</tr>
<tr>
<td>BCM4331</td>
<td></td>
<td></td>
<td>Macmini5,x</br>MacBookPro8,x-10,x</td>
</tr>
<tr>
<td>AR242X&#x2F;AR542X</td>
<td></td>
<td></td>
<td>MacBook1,1</br>Macmini1,1-2,1</td>
</tr>
<tr>
<td>AR5418</td>
<td></td>
<td></td>
<td>MacBook2,1</td>
</tr>
<tr>
<td>AR928X</td>
<td></td>
<td></td>
<td>iMac10,1-11,x</br>MacPro3,1</td>
</tr>
<tr>
<td>AR93XX</td>
<td></td>
<td></td>
<td>iMac12,x</td>
</tr>
</tbody></table>
<h4 id="其它"><a href="#其它" class="headerlink" title="其它"></a>其它</h4><p>对于MT7610，可使用以下kext。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://d86o2zu8ugzlg.cloudfront.net/mediatek-craft/drivers/MT7612_7610U_D5.0.1.25_SDK1.0.2.18_UI5.0.0.27_20151209.zip</span><br></pre></td></tr></table></figure>

<p>对于RT5370，可使用以下kext。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://d86o2zu8ugzlg.cloudfront.net/mediatek-craft/drivers/RTUSB_D2870-4.2.9.2_UI-4.0.9.6_2013_11_29.zip</span><br></pre></td></tr></table></figure>

<h3 id="替代方法"><a href="#替代方法" class="headerlink" title="替代方法"></a>替代方法</h3><p>对于无解的网卡，可以更换网卡、购买黑苹果USB网卡或者将手机作为热点。</p>
<p>USB网卡可尝试以下驱动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/chris1111/WirelessAdapterCloverBigSur</span><br><span class="line">https://github.com/chris1111/Wireless-USB-Adapter-Clover</span><br><span class="line">https://github.com/chris1111/Wireless-USB-OC-Big-Sur-Adapter</span><br><span class="line">https://github.com/chris1111/USB-Wireless-Utility</span><br><span class="line">https://github.com/chris1111/WIFI-Dlink-Catalina-Panel-V2</span><br></pre></td></tr></table></figure>

<p>对于iPhone用户，将手机接入电脑，手机开启个人热点功能，即可使用手机热点。对于Android用户，可安装<code>hoRNDIS</code>，然后将手机连接到电脑，开启安卓手机的USB网络共享即可。下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/jwise/HoRNDIS</span><br></pre></td></tr></table></figure>

<h2 id="声卡"><a href="#声卡" class="headerlink" title="声卡"></a>声卡</h2><h3 id="通过AppleALC驱动"><a href="#通过AppleALC驱动" class="headerlink" title="通过AppleALC驱动"></a>通过AppleALC驱动</h3><h4 id="寻找Layout-ID"><a href="#寻找Layout-ID" class="headerlink" title="寻找Layout ID"></a>寻找Layout ID</h4><p>保证系统SLE下有AppleHDA.kext，在Clover的kexts文件夹中放入AppleALC.kext。注意，该kext不能与VoodooHDA、RealtekALC、CloverALC、HDA Blocker、HDAEnabler1&#x2F;2&#x2F;3共用。下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/AppleALC/releases</span><br></pre></td></tr></table></figure>

<p>打开Hackintool，切换到Audio，通过下拉列表可查看该硬件支持的Layout ID。在启动参数中添加以下参数，其中#为所查询到的Layout ID之一。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alcid=#</span><br></pre></td></tr></table></figure>

<p>若为Windows&#x2F;Linux与macOS双引导，则打开Clover的config.plist，在Devices选项卡勾选Audio项下的ResetHDA选项。</p>
<p>重启后检查声卡是否被驱动，可在终端运行以下命令。若三者都存在，则驱动成功。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">kextstat | grep -E &quot;AppleHDA|AppleALC|Lilu&quot;</span><br></pre></td></tr></table></figure>

<p>若无声，则可更换不同的Layout ID。本机使用的Layout ID为12。打开IORegistryExplorer并搜索HDEF，若存在该设备，其下有AppleHDAController，右侧属性中的alc-layout-id不是修补前默认的07000000，且包含AppleHDAInput设备，则AppleALC已成功修补。</p>
<p>如果睡眠后机器无声，则还需要在Clover的kexts中放入CodecCommander.kext。注意，尽管Hackintool提示该kexts已被合并到AppleALC中，但不放置时仍会出现问题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Sniki/EAPD-Codec-Commander</span><br></pre></td></tr></table></figure>

<h4 id="写入Layout-ID"><a href="#写入Layout-ID" class="headerlink" title="写入Layout ID"></a>写入Layout ID</h4><p>确保该Layout ID可用后，可将该配置写入Clover的配置文件中。打开Hackintool，切换到Audio，通过下拉列表选择Layout ID。切换到Intel-Patch，选择Devices&#x2F;Properties，勾选Auto Detect Changes、Audio，点击Generate Patch生成声卡驱动补丁。完成后保存以替换。</p>
<p>也可手动生成设备信息。打开Clover的config.plist，在Devices选项卡下选择Properties。</p>
<p>先在左侧栏添加声卡的设备路径。可在Hackintool中查找，也可通过gfxutil，命令如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">gfxutil -f HDEF</span><br><span class="line">gfxutil -f HDAS</span><br><span class="line">gfxutil -f HDAU</span><br></pre></td></tr></table></figure>

<p>然后右侧栏添加以下条目即可。</p>
<table>
<thead>
<tr>
<th>Properties Key</th>
<th>Properties Value</th>
<th>Value Type</th>
</tr>
</thead>
<tbody><tr>
<td>alc-layout-id</td>
<td>21</td>
<td>NUMBER</td>
</tr>
<tr>
<td>hda-gfx</td>
<td>onboard-1</td>
<td>STRING</td>
</tr>
<tr>
<td>AAPL,slot-name</td>
<td>Internal</td>
<td>STRING</td>
</tr>
</tbody></table>
<details>
<summary>【进阶】十进制与十六进制</summary>

<p>若将alc-layout-id设置为Data类型，则为十六进制模式，且遵循小端规则。如256为FF010000。</p>
</details>

<h4 id="实现顺序"><a href="#实现顺序" class="headerlink" title="实现顺序"></a>实现顺序</h4><p>对于AppleALC，指定Layout ID的优先级顺序为启动参数<code>alcid=#</code>-&gt;配置文件Device Properties中的alc-layout-id属性（仅适用Apple硬件）-&gt;配置文件Device Properties中的layout-id属性（适用Apple&#x2F;非Apple硬件）。</p>
<h4 id="常见问题-1"><a href="#常见问题-1" class="headerlink" title="常见问题"></a>常见问题</h4><details>
<summary>【进阶】对于OC</summary>

<h5 id="同一布局在Clover起作用而OpenCore不起作用"><a href="#同一布局在Clover起作用而OpenCore不起作用" class="headerlink" title="同一布局在Clover起作用而OpenCore不起作用"></a>同一布局在Clover起作用而OpenCore不起作用</h5><p>一般是由于IRQ冲突，可尝试使用SSDTTime中的SSDT-HPET热补丁，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/corpnewt/SSDTTime</span><br></pre></td></tr></table></figure>

<h5 id="10-15中由于电源状态更改导致的kernel-panic"><a href="#10-15中由于电源状态更改导致的kernel-panic" class="headerlink" title="10.15中由于电源状态更改导致的kernel panic"></a>10.15中由于电源状态更改导致的kernel panic</h5><p>在OpenCore的配置文件中设置Kernel-Quirks-PowerTimeoutKernelPanic为True。</p>
</details>

<h5 id="AppleALC工作不一致"><a href="#AppleALC工作不一致" class="headerlink" title="AppleALC工作不一致"></a>AppleALC工作不一致</h5><p>由于硬件没有及时初始化，可能会导致没有声音输出。添加以下启动参数即可，注意ALC延迟不能超过3000毫秒。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alcdelay=1000</span><br></pre></td></tr></table></figure>

<p>或在设备属性中添加以下项。</p>
<table>
<thead>
<tr>
<th>Properties Key</th>
<th>Properties Value</th>
<th>Value Type</th>
</tr>
</thead>
<tbody><tr>
<td>alc-delay</td>
<td>1000</td>
<td>NUMBER</td>
</tr>
</tbody></table>
<h5 id="双声卡时无声"><a href="#双声卡时无声" class="headerlink" title="双声卡时无声"></a>双声卡时无声</h5><p>需要让AppleALC忽略外部音频控制器。在外部音频控制器的设备属性中添加以下项即可。</p>
<table>
<thead>
<tr>
<th>Properties Key</th>
<th>Properties Value</th>
<th>Value Type</th>
</tr>
</thead>
<tbody><tr>
<td>external-audio</td>
<td>01</td>
<td>Data</td>
</tr>
</tbody></table>
<h5 id="从Windows重启到Mac后无声"><a href="#从Windows重启到Mac后无声" class="headerlink" title="从Windows重启到Mac后无声"></a>从Windows重启到Mac后无声</h5><p>可添加启动参数<code>alctsel=1</code>，或在设备属性中添加以下项。</p>
<table>
<thead>
<tr>
<th>Properties Key</th>
<th>Properties Value</th>
<th>Value Type</th>
</tr>
</thead>
<tbody><tr>
<td>alctsel</td>
<td>01000000</td>
<td>Data</td>
</tr>
</tbody></table>
<h3 id="通过VoodooHDA驱动"><a href="#通过VoodooHDA驱动" class="headerlink" title="通过VoodooHDA驱动"></a>通过VoodooHDA驱动</h3><p>在AMD上运行AppleALC可能会不起作用，则可使用VoodooHDA。下载kext并放到Clover中即可，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://sourceforge.net/projects/voodoohda/</span><br><span class="line">https://github.com/chris1111/VoodooHDA-2.9.2-Clover-V14/releases</span><br></pre></td></tr></table></figure>

<h3 id="插孔检测"><a href="#插孔检测" class="headerlink" title="插孔检测"></a>插孔检测</h3><p>使用JackFix即可，支持ResetHDA和3.5mm耳机接口类型切换。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/fewtarius/jackfix</span><br></pre></td></tr></table></figure>

<h2 id="键盘与鼠标"><a href="#键盘与鼠标" class="headerlink" title="键盘与鼠标"></a>键盘与鼠标</h2><h3 id="驱动"><a href="#驱动" class="headerlink" title="驱动"></a>驱动</h3><p>对于一般的PS2键盘，在Clover的kexts放入<code>VoodooPS2Controller.kext</code>，重启即可驱动。下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 10.11及以上系统</span><br><span class="line">https://bitbucket.org/RehabMan/os-x-voodoo-ps2-controller/downloads/</span><br><span class="line"></span><br><span class="line"># 10.6及以上系统</span><br><span class="line">https://github.com/acidanthera/VoodooPS2</span><br></pre></td></tr></table></figure>

<p>对于MSI GK-701键盘，可用以下kext。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/osy/GK701HIDDevice</span><br></pre></td></tr></table></figure>

<h3 id="键位映射"><a href="#键位映射" class="headerlink" title="键位映射"></a>键位映射</h3><p>安装<code>Karabiner Elements</code>，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/pqrs-org/Karabiner-Elements</span><br></pre></td></tr></table></figure>

<p>打开后选择Complex Modifications，点击Add rule-Import more rules from the Internet，在网页中搜索并安装<code>PC-Style Shortcuts</code>、<code>PC-Style Modifiers</code>、<code>Adobe Photoshop</code>，并在添加的类别上点击Enable All，完成键位映射调整。</p>
<h2 id="USB"><a href="#USB" class="headerlink" title="USB"></a>USB</h2><p>USB3端口为九针，USB2端口为四针。</p>
<h3 id="端口限制解除补丁"><a href="#端口限制解除补丁" class="headerlink" title="端口限制解除补丁"></a>端口限制解除补丁</h3><p>macOS规定USB端口的数量应少于15个，其中一个USB3.0的接口应按两个端口的配额计算。若端口数量大于15个，可能会导致系统无法启动，需用以下kexts补丁解除，在引导器的config.plist中添加即可。</p>
<p>注意，完成以下端口定制后，应当及时取消该补丁。</p>
<h4 id="El-Capitan"><a href="#El-Capitan" class="headerlink" title="El Capitan"></a>El Capitan</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Comment: change 15 port limit to 26</span><br><span class="line">Name: AppleUSBXHCIPCI</span><br><span class="line">Find: 83BD8CFE FFFF10</span><br><span class="line">Replace: 83BD8CFE FFFF1B</span><br></pre></td></tr></table></figure>

<h4 id="Sierra"><a href="#Sierra" class="headerlink" title="Sierra"></a>Sierra</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Comment: Port limit increase</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCI</span><br><span class="line">Find: 83BD74FF FFFF10</span><br><span class="line">Replace: 83BD74FF FFFF1B</span><br></pre></td></tr></table></figure>

<p>或使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Comment: change 15 port limit to 26</span><br><span class="line">Name: AppleUSBXHCIPCI</span><br><span class="line">Find: 83BD74FF FFFF10</span><br><span class="line">Replace: 83BD74FF FFFF1B</span><br></pre></td></tr></table></figure>

<h4 id="High-Sierra"><a href="#High-Sierra" class="headerlink" title="High Sierra"></a>High Sierra</h4><p>对于10.13.6，应使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Comment: USB 10.13.6+ by PMHeart</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCI</span><br><span class="line">Find: 837D880F 0F83A704 0000</span><br><span class="line">Replace: 837D880F 90909090 9090</span><br></pre></td></tr></table></figure>

<p>对于10.13.4-10.13.5，应使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Comment: USB 10.13.4+ by PMHeart</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCI</span><br><span class="line">Find: 837D940F 0F839704 0000</span><br><span class="line">Replace: 837D940F 90909090 9090</span><br></pre></td></tr></table></figure>

<p>对于10.13-10.13.3，应使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Comment: change 15 port limit to 24</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCIPCI</span><br><span class="line">Find: 837D8C10</span><br><span class="line">Replace: 837D8C1B</span><br></pre></td></tr></table></figure>

<h4 id="Mojave"><a href="#Mojave" class="headerlink" title="Mojave"></a>Mojave</h4><p>对于10.14.5-10.14.6，应使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">Comment: USB Port Limit Patch 1 PMHeart/DalianSky</span><br><span class="line">Name: com.apple.iokit.IOUSBHostFamily</span><br><span class="line">Find: 83FB0F0F</span><br><span class="line">Replace: 83FB3F0F</span><br><span class="line"></span><br><span class="line">Comment: USB Port Limit Patch 2 PMHeart/DalianSky</span><br><span class="line">Name: com.apple.iokit.IOUSBHostFamily</span><br><span class="line">Find: 83E30FD3</span><br><span class="line">Replace: 83E33FD3</span><br><span class="line"></span><br><span class="line">Comment: USB Port Limit Patch 3 PMHeart/DalianSky</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCI</span><br><span class="line">Find: 83FB0F0F</span><br><span class="line">Replace: 83FB3F0F</span><br><span class="line"></span><br><span class="line">Comment: USB Port Limit Patch 4 PMHeart/DalianSky</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCI</span><br><span class="line">Find: 83FF0F0F</span><br><span class="line">Replace: 83FF3F0F</span><br></pre></td></tr></table></figure>

<p>对于10.14.4，应使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Comment: USB Port Limit Patch 1 ©PMHeart</span><br><span class="line">Name: com.apple.iokit.IOUSBHostFamily</span><br><span class="line">Find: 83FB0F0F 870B0400 00</span><br><span class="line">Replace: 83FB3F0F 870B0400 00</span><br><span class="line"></span><br><span class="line">Comment: USB Port Limit Patch 2 ©PMHeart</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCI</span><br><span class="line">Find: 4183FF0F 0F839404 0000</span><br><span class="line">Replace: 4183FF3F 0F839404 0000</span><br><span class="line"></span><br><span class="line">Comment: USB Port Limit Patch 3 ©PMHeart</span><br><span class="line">Name: com.apple.iokit.IOUSBHostFamily</span><br><span class="line">Find: 83E30FD3 E34109DF</span><br><span class="line">Replace: 83E33FD3 E34109DF</span><br></pre></td></tr></table></figure>

<p>对于10.14-10.14.3，应使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Comment: Port limit increase (Ricky)</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCI</span><br><span class="line">Find: 83FB0F0F 838F0400 00</span><br><span class="line">Replace: 83FB0F90 90909090 90</span><br></pre></td></tr></table></figure>

<h4 id="Catalina"><a href="#Catalina" class="headerlink" title="Catalina"></a>Catalina</h4><p>对于10.15-10.15.1，应使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Comment: USB port limit patch #1 10.15.x modify by DalianSky(credit ydeng)</span><br><span class="line">Name: com.apple.iokit.IOUSBHostFamily</span><br><span class="line">Find: 83FB0F0F</span><br><span class="line">Replace: 83FB3F0F</span><br><span class="line"></span><br><span class="line">Comment: USB Port limit patch #2 10.15.x modify by DalianSky</span><br><span class="line">Name: com.apple.driver.usb.AppleUSBXHCI</span><br><span class="line">Find: 83F90F0F</span><br><span class="line">Replace: 83F93F0F</span><br></pre></td></tr></table></figure>

<h3 id="端口定制"><a href="#端口定制" class="headerlink" title="端口定制"></a>端口定制</h3><p>在Clover下放置USBInjectAll.kext，下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://bitbucket.org/RehabMan/os-x-usb-inject-all/downloads/</span><br></pre></td></tr></table></figure>

<p>确保cofig.pilst的ACPI更名中已应用EHC1-&gt;EH01、EHC2-&gt;EH02以及XHCI&#x2F;XHC1-&gt;XHC_补丁。然后通过以下方法之一处理。</p>
<details>
<summary>【进阶】USBInjectAll适用范围及驱动原理</summary>

<p>USBInjectAll在桌面版Skylake及更新平台上无需使用，但在Coffee Lake及更旧平台的笔记本上则推荐使用。AsRock主板也推荐使用。注意，该kext完全不支持AMD CPU，需要10.11及以上版本。</p>
<p>USBInjectAll.kext以数据驱动方式进行编码。在kext代码本身中没有任何硬编码，所有数据都包含在Info.plist中。USBInjectAll.kext启动时，会在EH01&#x2F;EH02&#x2F;XHC或连接到EH01&#x2F;EH02端口1的内部集线器上进行匹配，查询Info.plist中与它所连接的设备相关的配置数据，并注入找到的数据。</p>
</details>

<h4 id="通过Hackintool-1"><a href="#通过Hackintool-1" class="headerlink" title="通过Hackintool"></a>通过Hackintool</h4><p>打开Hackintool，点击USB，确保芯片组已被正确识别。把所有端口删除后刷新，然后分别取USB3与USB2的可移动设备对每一个接口进行插拔，每插拔一次设备将出现一个条目的改变，记录对应端口名称及USB类型，如下表所示。注意，TypeC接口需要正反各插拔一次。</p>
<p>注意，USB2（HSxx）占用一条USB线路，USB3、TypeC、TypeC+Sw（SSxx）占用两条USB线路。Mac最多支持占用15条USB线路，若超过则需要取舍。</p>
<table>
<thead>
<tr>
<th>设备类型</th>
<th>端口类型</th>
</tr>
</thead>
<tbody><tr>
<td>永久连接设备的USB端口（如蓝牙）</td>
<td>Internal</td>
</tr>
<tr>
<td>与USB3端口相连的HSxx端口（USB2）</td>
<td>USB3</td>
</tr>
<tr>
<td>内部集线器（通常连接到端口PR11和PR21）</td>
<td>Internal</td>
</tr>
<tr>
<td>TypeC正反插端口一致</td>
<td>TypeC+Sw</td>
</tr>
<tr>
<td>TypeC正反插端口不一致</td>
<td>TypeC</td>
</tr>
</tbody></table>
<p>完成后导出，将SSDT-EC.aml、SSDT-UIAC.aml和SSDT-USBX.aml放到Clover的ACPI&#x2F;patched下。或将SSDT-EC.aml和USBPorts.kext分别放置到ACPI&#x2F;patched和kexts&#x2F;Other下。若放置的是SSDT，则需保留USBInjectAll.kext，若为SSDT+kext则需删除。</p>
<p>重启后若需检测是否成功，可插入USB3.0设备，通过系统报告查看速率是否为5G&#x2F;s。或使用IOregistryExplorer，搜索XHC，可查看所有端口是否都已正常工作。</p>
<h4 id="通过USBMap"><a href="#通过USBMap" class="headerlink" title="通过USBMap"></a>通过USBMap</h4><p>打开终端并运行以下命令以打开脚本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/corpnewt/USBMap</span><br><span class="line">cd USBMap</span><br><span class="line">chmod +x USBMap.command</span><br></pre></td></tr></table></figure>

<p>脚本打开后会核查USBInjectAll是否被正确加载、USB控制器是否被正确识别。脚本需要USBInjectAll的版本在0.70以上。若已完成放置但无法识别，则可能还需要XHCI_unsupported.kext。</p>
<p>若端口数量大于15个，则需要应用端口解除补丁或在脚本主菜单上选择<code>S. Exclude SSxx Ports</code>或<code>H. Exclude HSxx Ports</code>端口以禁用SSxx（一般为USB3.0）或HSxx（一般为USB2.0）端口，完成后重启。若需要取消禁用，则选择<code>C. Clear Exclusions</code>。</p>
<p>选择<code>D. Discover Ports</code>，脚本将读取默认USB列表。依次将每个端口用USB设备插拔，过程与使用Hackintool相同。每发现新的端口会有提示，直接忽略即可。完成后按<code>Q</code>并回车，返回主菜单。</p>
<p>选择<code>P. Edit Plist &amp; Create SSDT/Kext</code>，可以看到刚才所识别的结果。需根据实际情况修改端口类型，数字代号与端口类型对应关系如下。设置要求与使用Hackintool一致。</p>
<table>
<thead>
<tr>
<th>数字</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>0 (0x0)</td>
<td>（USB2.0）Type A connector</td>
</tr>
<tr>
<td>1</td>
<td>Mini-AB connector</td>
</tr>
<tr>
<td>2</td>
<td>ExpressCard</td>
</tr>
<tr>
<td>3 (0x3)</td>
<td>（USB3.0）USB 3 Standard-A connector</td>
</tr>
<tr>
<td>4</td>
<td>USB 3 Standard-B connector</td>
</tr>
<tr>
<td>5</td>
<td>USB 3 Micro-B connector</td>
</tr>
<tr>
<td>6</td>
<td>USB 3 Micro-AB connector</td>
</tr>
<tr>
<td>7</td>
<td>USB 3 Power-B connector</td>
</tr>
<tr>
<td>8</td>
<td>Type C connector - USB2-only</td>
</tr>
<tr>
<td>9 (0x9)</td>
<td>（TypeC+Sw）Type C connector - USB2 and SS with Switch</td>
</tr>
<tr>
<td>10</td>
<td>Type C connector - USB2 and SS without Switch</td>
</tr>
<tr>
<td>11-254</td>
<td>Reserved</td>
</tr>
<tr>
<td>255 (0xFF)</td>
<td>（Internal）Proprietary connector</td>
</tr>
</tbody></table>
<p>若需要将编号为5和7的端口改为USB2.0接口，则输入以下命令并回车。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">// T表示现在要更改端口的类型（Type），0表示端口类型</span><br><span class="line">T:5,7:0</span><br></pre></td></tr></table></figure>

<p>也可直接用plist编辑器打开脚本编辑，一般在用户目录&#x2F;USBMap&#x2F;Scripts中。</p>
<p>设置完成后可选择<code>K. Build USBMap.kext</code>或<code>S. Build SSDT-UIAC</code>，其中第一种需把生成的kext复制到Clover的kexts目录下且删除USBInjectAll，而第二种需把生成的SSDT复制到Clover的ACPI&#x2F;patched下且保留USBInjectAll。推荐第二种。</p>
<p>注意，在按下创建SSDT之前，可以调节SSDT的形式，默认为三个SSDT，可设置为一个SSDT。生成的所有文件都在USBMap&#x2F;Results中。</p>
<h4 id="通过SSDT-1"><a href="#通过SSDT-1" class="headerlink" title="通过SSDT"></a>通过SSDT</h4><p>打开IORegistryExplorer并查找XHC、EHC、EUSB或USBE，查看端口情况。</p>
<p>若设备不为XHC&#x2F;EHC，则需要先在Clover中写入重命名。以设备为XHC1为例，需要change XHC1 to XHC_重命名，即58484331-&gt;5848435F。</p>
<p>打开MaciASL并新建文件，复制以下代码模版。其中8086_a12f需替换为USB总线的<code>VendorID_DeviceID</code>，可在关于本机-硬件报告的USB一项查看，如Device ID为0xa2af，Vendor ID为0x8086，则应当修改为8086_a2af。</p>
<p>“ports”以下的大括号需填写所有的端口，其中数字255表示Internal，10表示正反插时端口不同的USBC，9表示正反插时端口相同的USBC，3表示USB3，0表示USB2。</p>
<p><code>&quot;port&quot;, Buffer() &#123; 0xNN, 0, 0, 0 &#125;,</code>中的0xNN表示端口地址，可在IORegistryExplorer中点击相应端口并查找Data，查看port一项即可。<code>&quot;port-count&quot;, Buffer() &#123; 0xNN, 0, 0, 0&#125;,</code>中的0xNN应当修改为使用的最高SS端口地址。</p>
<p>注意，SS端口的地址开始于最后一个HS端口地址之外。因此HS地址为<code>0x01，0，0，0</code>的物理USB端口将在<code>0x11，0，0，0</code>处具有等效的SS端口。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;SSDT-USB.aml&quot;, &quot;SSDT&quot;, 1, &quot;sample&quot;, &quot;USBFix&quot;, 0x00003000)</span><br><span class="line">&#123;</span><br><span class="line">    Device(UIAC)</span><br><span class="line">    &#123;</span><br><span class="line">        Name(_HID, &quot;UIA00000&quot;)</span><br><span class="line">        Name(RMCF, Package()</span><br><span class="line">        &#123;</span><br><span class="line">            // 修改为VendorID_DeviceID</span><br><span class="line">            // 以下填写所有的端口</span><br><span class="line">            &quot;8086_a12f&quot;, Package()</span><br><span class="line">            &#123;</span><br><span class="line">                // 0xNN修改为使用的最高SS端口地址</span><br><span class="line">                &quot;port-count&quot;, Buffer() &#123; 0xNN, 0, 0, 0&#125;,</span><br><span class="line">                &quot;ports&quot;, Package()</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;HS01&quot;, Package()</span><br><span class="line">                    &#123;</span><br><span class="line">                        // 0-USB2，3-USB3，255-Internal</span><br><span class="line">                        &quot;UsbConnector&quot;, 255,</span><br><span class="line">                        // 0xNN修改为该端口地址</span><br><span class="line">                        &quot;port&quot;, Buffer() &#123; 0xNN, 0, 0, 0 &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line"></span><br><span class="line">                    &quot;SS01&quot;, Package()</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;UsbConnector&quot;, 3,</span><br><span class="line">                        &quot;port&quot;, Buffer() &#123; 0xNN, 0, 0, 0 &#125;,</span><br><span class="line">                    &#125;,</span><br><span class="line">                &#125;,</span><br><span class="line">            &#125;,</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>完成后保存文件为SSDT_USB.aml，并放置在引导器的ACPI部分。重启系统后打开IORegistryExplorer，检查端口是否正确显示，其中小三角形表示插入的设备。</p>
<details>
<summary>【进阶】对于ASUS 100系列的处理</summary>

<p>该系列主板也可不使用USBInjectAll，直接使用SSDT。提取主机SSDT并打开包含xh_rvp的文件，开头修改为如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;SSDT-4&quot;, &quot;SSDT&quot;, 2, &quot;INTEL&quot;, &quot;xh_rvp08&quot;, 0x00000000)</span><br></pre></td></tr></table></figure>

<p>在<code>Name (USSD, Package (0x10)</code>下定义了所有的端口，其中每一行代表一个端口，One表示启用，Zero表示禁用。同理，在<code>Name (UHSD, Package (0x10)</code>下，One表示活动，Zero表示非活动。</p>
<p>禁用端口需要修改_UPC的返回值。以HS11为例，源代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Scope (\_SB.PCI0.XHC.RHUB.HS11)</span><br><span class="line">        &#123;</span><br><span class="line">            Method (_UPC, 0, NotSerialized)  // _UPC: USB Port Capabilities</span><br><span class="line">            &#123;</span><br><span class="line">                Return (GUPC (One))</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Method (_PLD, 0, NotSerialized)  // _PLD: Physical Location of Device</span><br><span class="line">            &#123;</span><br><span class="line">                Return (GPLD (DerefOf (Index (UHSD, 0x0A)), 0x0B))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>修改如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Scope (\_SB.PCI0.XHC.RHUB.HS11)</span><br><span class="line">        &#123;</span><br><span class="line">            Method (_UPC, 0, NotSerialized)  // _UPC: USB Port Capabilities</span><br><span class="line">            &#123;</span><br><span class="line">                Return (GUPC (Zero))</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            Method (_PLD, 0, NotSerialized)  // _PLD: Physical Location of Device</span><br><span class="line">            &#123;</span><br><span class="line">                Return (GPLD (DerefOf (Index (UHSD, 0x0A)), 0x0B))</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<p>完成后保存SSDT为SSDT-4.aml，放置到Clover的ACPI&#x2F;patched目录下。Clover需要将该SSDT与当前的SSDT合并，并将修改部分替换，该工作被称为Automerge。在r4428及更新版本，Automerge已被正确设置，在旧版本则需要以文本方式打开config.plist，并添加以下内容。</p>
<p>若放置了USBInjectAll，则将其删除。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;ACPI&lt;/key&gt;</span><br><span class="line">    &lt;dict&gt;</span><br><span class="line">        &lt;key&gt;AutoMerge&lt;/key&gt;</span><br><span class="line">        &lt;true/&gt;</span><br><span class="line">        &lt;key&gt;DSDT&lt;/key&gt;</span><br><span class="line">        &lt;dict&gt;</span><br><span class="line">...</span><br></pre></td></tr></table></figure>
</details>

<h3 id="修复唤醒断线"><a href="#修复唤醒断线" class="headerlink" title="修复唤醒断线"></a>修复唤醒断线</h3><p>在Clover的kexts文件夹放入USBPower.kext，下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.xjn819.com/wp-content/uploads/2019/10/USBPower.kext_.zip</span><br></pre></td></tr></table></figure>

<p>在kext上右键选择显示包内容，打开Contents&#x2F;Info.plist，展开IOKitPersonalities_x86_64，将iMac19,1改成正在使用的机型，保存并重启即可。</p>
<h3 id="修复USB导致的关机"><a href="#修复USB导致的关机" class="headerlink" title="修复USB导致的关机"></a>修复USB导致的关机</h3><p>下载以下文件，放置到引导器的ACPI&#x2F;hotpatch部分即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/khronokernel/Opencore-Vanilla-Desktop-Guide/blob/master/extra-files/FixShutdown-USB-SSDT.dsl</span><br></pre></td></tr></table></figure>

<h2 id="蓝牙"><a href="#蓝牙" class="headerlink" title="蓝牙"></a>蓝牙</h2><h3 id="Atheros-2"><a href="#Atheros-2" class="headerlink" title="Atheros"></a>Atheros</h3><p>本机蓝牙为与无线网卡Atheros AR9565共建的Bluetooth 4.0。打开以下链接并下载，直接放到Clover的kexts文件夹即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/zxystd/AthBluetoothFirmware</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】OC引导</summary>

<p>对于OpenCore，放置到Kexts文件夹后需要在config.plist中添加对应条目，注意Ath3kBTInjector必须加载在Ath3kBT后面。</p>
</details>

<h3 id="Intel-2"><a href="#Intel-2" class="headerlink" title="Intel"></a>Intel</h3><p>可尝试IntelBluetoothFirmware，支持10.13及更高版本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/OpenIntelWireless/IntelBluetoothFirmware</span><br></pre></td></tr></table></figure>

<h3 id="Broadcom-2"><a href="#Broadcom-2" class="headerlink" title="Broadcom"></a>Broadcom</h3><p>对于USB蓝牙，可尝试BrcmPatchRAM。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/BrcmPatchRAM</span><br></pre></td></tr></table></figure>

<p>对于DW1820A，可使用以下kexts。如果蓝牙睡眠唤醒后无法工作，需要添加引导参数bpr_probedelay&#x3D;100、bpr_initialdelay&#x3D;300、bpr_postresetdelay&#x3D;300。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 10.14及以下</span><br><span class="line">https://images.daliansky.net/d/YmBXVA8q/blog/DW1820A/DW1820A_BT_for_Mojave_v2.5.5.zip</span><br><span class="line"></span><br><span class="line"># 10.15及以上</span><br><span class="line">https://images.daliansky.net/d/YmBXVA8q/blog/DW1820A/DW1820A_BT_for_Catalina_and_BigSur_v2.5.5.zip</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】OC引导</summary>

<p>对于OpenCore，kext注入顺序为BrcmBluetoothInjector-BrcmFirmwareData-BrcmPatchRAM3。</p>
</details>

<h3 id="启用蓝牙关闭按钮"><a href="#启用蓝牙关闭按钮" class="headerlink" title="启用蓝牙关闭按钮"></a><del>启用蓝牙关闭按钮</del></h3><p>已过时。</p>
<details>
<summary></summary>

<p>找到SLE下的IOBluetoothFamily.kext，复制到桌面后右键单击显示包内容，进入Contents&#x2F;PlugIns，在BroadcomBluetoothHostControllerUSBTransport.kext上右键单击显示包内容，打开Contents&#x2F;info.plist。用搜索功能搜索2652，修改idProduct和idVendor为自己的ID，注意需进行进制转换。从Windows上得到的是十六进制，需转换为十进制，可利用下面的进制转换工具。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://tool.oschina.net/hexconvert/</span><br></pre></td></tr></table></figure>

<p>将修改好的IOBluetoothFamily.kext用Kext Utility进行安装，重启即可。注意，此法可以实现蓝牙关闭，但需要从Windows重启进入Mac后才可用。</p>
</details>

<h3 id="冷启动与热启动"><a href="#冷启动与热启动" class="headerlink" title="冷启动与热启动"></a>冷启动与热启动</h3><p>冷启动指从关机状态下进入系统，热启动指从一个系统重启至另一个系统。</p>
<p>少数蓝牙设备中嵌入了蓝牙所需的固件，因此它们开机即可直接使用。但是许多设备依靠固件上载器才能正常运行，此过程中，系统启动蓝牙设备的电源，固件上传器检测到该设备已打开电源，然后将固件发送（上传）到缓冲区中。</p>
<p>由于Mac无法加载相关蓝牙固件，即使设备被正确识别，也无法与任何其他外围设备配对。热启动时，Windows&#x2F;Linux已完成固件上传，重启时缓冲区固件仍存在，因此蓝牙能够起作用。而冷启动时将重置蓝牙设备，导致上载固件的丢失。</p>
<h3 id="蓝牙无法驱动的替代方案"><a href="#蓝牙无法驱动的替代方案" class="headerlink" title="蓝牙无法驱动的替代方案"></a>蓝牙无法驱动的替代方案</h3><p>可通过Linux虚拟机完成蓝牙固件上传操作。</p>
<p>从Clover的kexts文件夹删除BrcmPatchRAM.kext和BTFirmwareUploader.kext。以Ubuntu为例，下载镜像后打开Vmware Fusion，新建虚拟机并选择Ubuntu系统，CD&#x2F;DVD驱动器选择刚才的镜像，完成配置。</p>
<p>关闭虚拟机，切换到虚拟机设置页。选择<code>USB和蓝牙</code>首选项，取消选中<code>与Linux共享蓝牙设备</code>，列表中将出现一个蓝牙设备。返回主界面并点击<code>启动磁盘</code>，选择CD&#x2F;DVD为启动项，退出设置并启动虚拟机。</p>
<p>镜像引导成功后，选择<code>试用Ubuntu</code>。待开机完成后，点击虚拟机的蓝牙选项以将蓝牙设备连接至Ubuntu。等待4-5秒钟后取消蓝牙连接，固件已由虚拟机上传完成，蓝牙将正常运行。关闭虚拟机，VMware将保存计算机状态，只要不让机器进入睡眠或重启状态，就可以使用蓝牙。</p>
<p>如果在睡眠&#x2F;重新启动后失去了蓝牙功能，重新打开虚拟机，连接再断开蓝牙即可。</p>
<p>也可通过以下TinyCore虚拟机，使用方法同Ubuntu。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://drive.google.com/file/d/1Ydm7Hd0d5XOKQkb02EMpm-6E-WQFiMkh/view</span><br></pre></td></tr></table></figure>

<h2 id="传感器"><a href="#传感器" class="headerlink" title="传感器"></a>传感器</h2><p>在Clover的kexts下放入VirtualSMC包内的<code>SMCLightSensor.kext</code>、<code>SMCProcessor.kext</code>和<code>SMCSuperIO.kext</code>即可。</p>
<h2 id="电池"><a href="#电池" class="headerlink" title="电池"></a>电池</h2><details>
<summary>【进阶】对于Big Sur</summary>

<p>Big Sur可能已经无须进行以下修补。</p>
</details>

<h3 id="环境配置"><a href="#环境配置" class="headerlink" title="环境配置"></a>环境配置</h3><p>在Clover的kexts中放入VirtualSMC包的SMCBatteryManager.kext。打开Maciasl，若出现错误提示，则检查Clover的config.plist，Acpi-Fixs下所有选项都应取消勾选。若仍然不行，则换另一个版本的MaciASL。</p>
<h3 id="修改DSDT"><a href="#修改DSDT" class="headerlink" title="修改DSDT"></a>修改DSDT</h3><h4 id="查找字段"><a href="#查找字段" class="headerlink" title="查找字段"></a>查找字段</h4><p>打开MaciASL，正常情况下自动打开系统的DSDT。搜索<code>EmbeddedControl</code>。可能会有一到多个，注意包含EC字样的那一个，记住其名称，本机为<code>EC0R</code>。</p>
<p>搜索<code>Field ([EC名称]</code>，本机为<code>Field (EC0R</code>。查看Field里所有大于8的元素，全部进行记录后，逐个搜索它们的名字。若查找结果只有一处，表明此变量仅被定义但未被使用，因此可以将此字段从记录结果中删除，否则将此字段保留。记录时需注明每个字段的对应位数（16位&#x2F;32位&#x2F;大于32位）。</p>
<p>点击<code>Patch</code>，复制下列代码，确认下面Change(s)处的数字不为零后点击<code>Apply</code>-<code>Close</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 添加B1B2方法，用于16位字段拆分</span><br><span class="line">into method label B1B2 remove_entry;</span><br><span class="line">into definitionblock code_regex . insert</span><br><span class="line">begin</span><br><span class="line">Method (B1B2, 2, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">Return(Or(Arg0, ShiftLeft(Arg1, 8)))\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line"># 添加B1B4方法，用于32位字段拆分</span><br><span class="line">into method label B1B4 remove_entry;</span><br><span class="line">into definitionblock code_regex . insert</span><br><span class="line">begin</span><br><span class="line">Method (B1B4, 4, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">	Store(Arg3, Local0)\n</span><br><span class="line">	Or(Arg2, ShiftLeft(Local0, 8), Local0)\n</span><br><span class="line">	Or(Arg1, ShiftLeft(Local0, 8), Local0)\n</span><br><span class="line">	Or(Arg0, ShiftLeft(Local0, 8), Local0)\n</span><br><span class="line">	Return(Local0)\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<details>
<summary>【拓展】方法原理</summary>

<p>对于B1B2，Arg0和Arg1为拆分后的两个8位寄存器。取Arg0作为低8位，将Arg1运用左移运算变成16位数据，此时它的的低8位全是0，再运用或运算拼接成完整的16位数据。B1B4同理。</p>
</details>

<details>
<summary>【进阶】其它方法</summary>

<p>W16B方法如下，将拆分后的两个8位寄存器Arg0和Arg1合并后写入到Arg2。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Method (W16B, 3, NotSerialized)</span><br><span class="line">&#123;</span><br><span class="line">    Arg0 = Arg2</span><br><span class="line">    Arg1 = (Arg2 &gt;&gt; 0x08)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>

<p>16&#x2F;32位的字段需要拆分成多个8位的字段，而大于32位的字段需要修改其偏移地址。</p>
<details>
<summary>【提示】注意事项</summary>

<p>如果某个寄存器被全局定义过，例如在根路径<code>\</code>或<code>\_SB</code>路径下的Field里面有相同名字的寄存器，那么搜索该寄存器被调用情况时应注意区分此处的调用是不是EC下的这一个，如果不是，说明此处调用使用的是全局定义，对EC没有影响，不需要记录下来。</p>
</details>

<h4 id="16-x2F-32位字段处理"><a href="#16-x2F-32位字段处理" class="headerlink" title="16&#x2F;32位字段处理"></a>16&#x2F;32位字段处理</h4><p>对于16&#x2F;32位的字段，需要拆分成2&#x2F;4个8位字段。</p>
<p>以<code>HWAK, 16</code>为例。这是个16位的字段，可以拆分成两个8位的字段，分别命名为<code>AK00</code>和<code>AK01</code>。命名可以随意，但是要确保命名为4个字符，且这个命名没有出现过，如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">// 拆分前</span><br><span class="line">HWAK, 16</span><br><span class="line"></span><br><span class="line">// 拆分后</span><br><span class="line">AK00, 8</span><br><span class="line">AK01, 8</span><br></pre></td></tr></table></figure>

<p>然后需要写出以下类似正则表达式的代码，以替换DSDT里的字段。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">into device label EC code_regex HWAK,\s+16, replace_matched begin AK00,8,AK01,8, end;</span><br></pre></td></tr></table></figure>

<p>相关含义解释如下，内容均根据自己的DSDT代码替换。</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>EC</td>
<td>搜索EmbeddedControl，在其上方的Device（不是Field里的参数）</td>
</tr>
<tr>
<td>HWAK,\s+16,</td>
<td>拆分前的字段（<code>\s+</code>表示多个空格，故此句含义为搜索HWAK, 16,）</td>
</tr>
<tr>
<td>AK00,8,AK01,8,</td>
<td>拆分后的字段</td>
</tr>
</tbody></table>
<p>把写好的正则表达式复制到Patch里，在中间的Before&#x2F;After和下面的Patch&#x2F;Change两个地方都显示内容后，点击Apply-Close即完成一个变量的替换。</p>
<p>再以<code>SBCH, 32</code>为例。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">// 拆分前</span><br><span class="line">SBCH, 32</span><br><span class="line"></span><br><span class="line">// 拆分后</span><br><span class="line">CH00, 8</span><br><span class="line">CH01, 8</span><br><span class="line">CH02, 8</span><br><span class="line">CH03, 8</span><br></pre></td></tr></table></figure>

<p>正则表达式如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">into device label EC code_regex SBCH,\s+32 replace_matched begin CH00,8,CH01,8,CH02,8,CH03,8 end;</span><br></pre></td></tr></table></figure>

<p>注意，所替换的<code>AK00,8,AK01,8,</code>逗号前后均无空格。若所替换的字段为列表中的最后一个，则Patch时会提示0 change(s)，此时应该把正则表达式中的<code>XSN1,\s+16,</code>改为<code>XSN1,\s+16</code>，因最后一个字段没有逗号。</p>
<p>点击Compile，此时会出现报错，除Errors以外的不需要理会。对于报错内容为Object does not exist的情况，主要是替换字段名后，没有替换访问该字段的位置所导致。</p>
<p>双击报错信息以定位至错误位置，向上检索以找到该段代码包含在哪个method里。</p>
<p>对于16位的字段，使用下面的正则表达式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">into method label \_WAK code_regex \(HWAK, replaceall_matched begin (B1B2(AK00,AK01), end;</span><br></pre></td></tr></table></figure>

<p>相关含义解释如下，内容均根据自己的DSDT代码替换。注意，名字首位为<code>_</code>时，需要手动添加起始符<code>\</code>，如<code>_WAK</code>应写为<code>\_WAK</code>。</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td><code>\_WAK</code></td>
<td>代码对应的method</td>
</tr>
<tr>
<td><code>\(HWAK,</code></td>
<td>替换前的字段</td>
</tr>
<tr>
<td>(B1B2(AK00,AK01),</td>
<td>替换后的字段</td>
</tr>
</tbody></table>
<p>对于32位的字段则使用下列表达式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">into method label GBIF code_regex \(SBCH, replaceall_matched begin (B1B4(CH00,CH01,CH02,CH03), end;</span><br></pre></td></tr></table></figure>

<p>若出现<code>\_SB.PCI0.LPC.EC.HWAK</code>调用的特殊情况，修改替换字段即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">into method label \_WAK code_regex \(\\\_SB.PCI0.LPC.EC.HWAK replaceall_matched begin \(\\_SB.B1B2(\\_SB.PCI0.LPC.EC.AK00, \\_SB.PCI0.LPC.EC.AK01) end;</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】16/32位寄存器拆分读取/写入</summary>

<p>修改16位寄存器拆分读取的语法如下，其中Arg0、Arg1为拆分后的两个8位寄存器名称。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">B1B2 (Arg0, Arg1)</span><br></pre></td></tr></table></figure>

<p>示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改前</span><br><span class="line">If ((^^PCI0.LPCB.EC0.BADC &lt; 0x0C80))</span><br><span class="line"></span><br><span class="line"># 修改后</span><br><span class="line">If ((B1B2 (^^PCI0.LPCB.EC0.ADC0, ^^PCI0.LPCB.EC0.ADC1) &lt; 0x0C80))</span><br></pre></td></tr></table></figure>

<p>修改16位寄存器拆分写入的语法如下，其中Arg0、Arg1为拆分后的两个8位寄存器名称，Arg2为被写入的数值或数据对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">W16B (Arg0, Arg1，Arg2)</span><br></pre></td></tr></table></figure>

<p>示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改前</span><br><span class="line">SMW0 = Arg3</span><br><span class="line"></span><br><span class="line"># 修改后</span><br><span class="line">W16B (MW00, MW01, Arg3)</span><br></pre></td></tr></table></figure>

<p>修改32位寄存器拆分读取的语法如下，其中Arg0、Arg1、Arg2、Arg3为拆分后的四个8位寄存器名称。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">B1B4 (Arg0, Arg1, Arg2, Arg3)</span><br></pre></td></tr></table></figure>

<p>示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 修改前</span><br><span class="line">If ((B1CH == 0x0050694C))</span><br><span class="line"></span><br><span class="line"># 修改后</span><br><span class="line">If ((B1B4 (BC0H, BC1H, BC2H, BC3H) == 0x0050694C))</span><br></pre></td></tr></table></figure>

<p>修改32位寄存器读取的语法如下，其中Offset为原寄存器的偏移量，Length为原寄存器的长度。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">RECB (Offset, Length)</span><br></pre></td></tr></table></figure>

<p>示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"># 原始定义</span><br><span class="line">Offset (0x8F),</span><br><span class="line">B1MA,   64,</span><br><span class="line"></span><br><span class="line"># 修改前</span><br><span class="line">IFMN = B1MA</span><br><span class="line"></span><br><span class="line"># 修改后</span><br><span class="line">IFMN = RECB (0x8F, 0x40)</span><br></pre></td></tr></table></figure>

<p>修改32位以上寄存器写入的语法如下，其中Offset为原寄存器的偏移量，Length为原寄存器的长度，Obj为被写入的值或者数据对象。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">WECB (Offset, Length, Obj)</span><br></pre></td></tr></table></figure>

<p>示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"># 原始定义</span><br><span class="line">Offset (0x18),</span><br><span class="line">SMPR,   8,</span><br><span class="line">SMST,   8,</span><br><span class="line">SMAD,   8,</span><br><span class="line">SMCM,   8,</span><br><span class="line">SMD0,   256,</span><br><span class="line"></span><br><span class="line"># 修改前</span><br><span class="line">SMD0 = FB4</span><br><span class="line"></span><br><span class="line"># 修改后</span><br><span class="line">WECB (0x1C, 0x0100, FB4) // 0x1C=0x18+0x04</span><br></pre></td></tr></table></figure>

</details>

<h4 id="超过32位字段处理"><a href="#超过32位字段处理" class="headerlink" title="超过32位字段处理"></a>超过32位字段处理</h4><p>先Patch下面的两段代码，其中H_EC改成计算机的Device。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">// 改的字段挨着左括号时所用代码（读操作）</span><br><span class="line">into method label RE1B parent_label H_EC remove_entry;</span><br><span class="line">into method label RECB parent_label H_EC remove_entry;</span><br><span class="line"></span><br><span class="line">into device label H_EC insert</span><br><span class="line">begin</span><br><span class="line">Method (RE1B, 1, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">	OperationRegion(ERAM, EmbeddedControl, Arg0, 1)\n</span><br><span class="line">	Field(ERAM, ByteAcc, NoLock, Preserve) &#123; BYTE, 8 &#125;\n</span><br><span class="line">	Return(BYTE)\n</span><br><span class="line">&#125;\n</span><br><span class="line">Method (RECB, 2, Serialized)\n</span><br><span class="line">// Arg0 - offset in bytes from zero-based EC\n</span><br><span class="line">// Arg1 - size of buffer in bits\n</span><br><span class="line">&#123;\n</span><br><span class="line">	ShiftRight(Arg1, 3, Arg1)\n</span><br><span class="line">	Name(TEMP, Buffer(Arg1) &#123; &#125;)\n</span><br><span class="line">	Add(Arg0, Arg1, Arg1)\n</span><br><span class="line">	Store(0, Local0)\n</span><br><span class="line">	While (LLess(Arg0, Arg1))\n</span><br><span class="line">	&#123;\n</span><br><span class="line">	Store(RE1B(Arg0), Index(TEMP, Local0))\n</span><br><span class="line">	Increment(Arg0)\n</span><br><span class="line">	Increment(Local0)\n</span><br><span class="line">	&#125;\n</span><br><span class="line">	Return(TEMP)\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">// 改的字段挨着右括号时所用代码（写操作）</span><br><span class="line">into method label WE1B parent_label H_EC remove_entry;</span><br><span class="line">into method label WECB parent_label H_EC remove_entry;</span><br><span class="line">into device label H_EC insert</span><br><span class="line">begin</span><br><span class="line">Method (WE1B, 2, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">	OperationRegion(ERAM, EmbeddedControl, Arg0, 1)\n</span><br><span class="line">	Field(ERAM, ByteAcc, NoLock, Preserve) &#123; BYTE, 8 &#125;\n</span><br><span class="line">	Store(Arg1, BYTE)\n</span><br><span class="line">&#125;\n</span><br><span class="line">Method (WECB, 3, Serialized)\n</span><br><span class="line">// Arg0 - offset in bytes from zero-based EC\n</span><br><span class="line">// Arg1 - size of buffer in bits\n</span><br><span class="line">// Arg2 - value to write\n</span><br><span class="line">&#123;\n</span><br><span class="line">	ShiftRight(Add(Arg1,7), 3, Arg1)\n</span><br><span class="line">	Name(TEMP, Buffer(Arg1) &#123; &#125;)\n</span><br><span class="line">	Store(Arg2, TEMP)\n</span><br><span class="line">	Add(Arg0, Arg1, Arg1)\n</span><br><span class="line">	Store(0, Local0)\n</span><br><span class="line">	While (LLess(Arg0, Arg1))\n</span><br><span class="line">	&#123;\n</span><br><span class="line">	WE1B(Arg0, DerefOf(Index(TEMP, Local0)))\n</span><br><span class="line">	Increment(Arg0)\n</span><br><span class="line">	Increment(Local0)\n</span><br><span class="line">	&#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<details>
<summary>【拓展】方法原理</summary>

<p>对于左括号的代码如下。对于RECB，Arg0是原寄存器的偏移量（即Offset），Arg1是原寄存器的长度。对于RE1B，Arg0是偏移量。</p>
<p>RECB通过Arg1确定需要拆分的8位寄存器个数，通过While循环及偏移量自增方法调用RE1B从Field中循环读取出每个8位数据，并拼接成原始寄存器定义长度的数据返回结果。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">Method (RE1B, 1, NotSerialized)</span><br><span class="line">&#123;</span><br><span class="line">    OperationRegion (ERM2, EmbeddedControl, Arg0, One) // 作用域为EmbeddedControl，Arg0定义起始偏移量</span><br><span class="line">    Field (ERM2, ByteAcc, NoLock, Preserve)</span><br><span class="line">    &#123;</span><br><span class="line">        BYTE,   8 // 指定一个8位寄存器映射对应区域数据</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Return (BYTE) // 返回结果</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Method (RECB, 2, Serialized)</span><br><span class="line">&#123;</span><br><span class="line">    Arg1 = ((Arg1 + 0x07) &gt;&gt; 0x03) // 计算Arg1除8并向上取整，位移运算更快</span><br><span class="line">    Name (TEMP, Buffer (Arg1)&#123;&#125;) // 初始化作为返回值的Buffer</span><br><span class="line">    Arg1 += Arg0 // 加上偏移量，即循环终止值</span><br><span class="line">    Local0 = Zero // 定义Buffer索引为0</span><br><span class="line">    While ((Arg0 &lt; Arg1)) // 进行循环，循环次数为初次计算的Arg1</span><br><span class="line">    &#123;</span><br><span class="line">        TEMP [Local0] = RE1B (Arg0) // 调用RE1B依次返回8位数据</span><br><span class="line">        Arg0++ // 偏移量自增</span><br><span class="line">        Local0++ // 索引自增</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Return (TEMP) // 返回最终结果</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>对于右括号的代码如下。对于WECB，Arg0是原寄存器的偏移量（即Offset），Arg1是原寄存器的长度，Arg2为被写入的数据或对象。对于WE1B，Arg0是偏移量，Arg1为从Buffer取出的一个字节数据（即8位长度数据）。</p>
<p>WECB通过Arg1确定需要拆分的8位寄存器个数，创建Buffer对象将Arg2转化为若干个字节的数据（一个字节等于8位），通过While循环以及偏移量自增方法调用WE1B，向Field中循环写入每个8位数据。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">Method (WE1B, 2, NotSerialized)</span><br><span class="line">&#123;</span><br><span class="line">    OperationRegion (ERM2, EmbeddedControl, Arg0, One) // EmbeddedControl为EC作用域，Arg0定义起始偏移量</span><br><span class="line">    Field (ERM2, ByteAcc, NoLock, Preserve)</span><br><span class="line">    &#123;</span><br><span class="line">        BYTE,   8 // 指定一个8位寄存器映射对应区域数据</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    BYTE = Arg1 // 将Arg1通过寄存器间接写入对应区域</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Method (WECB, 3, Serialized)</span><br><span class="line">&#123;</span><br><span class="line">    Arg1 = ((Arg1 + 0x07) &gt;&gt; 0x03) // 计算Arg1除8并向上取整，位移运算更快</span><br><span class="line">    Name (TEMP, Buffer (Arg1)&#123;&#125;) // 初始化作为写入值的Buffer</span><br><span class="line">    TEMP = Arg2 // 将被写入的数据或对象赋值给TEMP</span><br><span class="line">    Arg1 += Arg0 // 加上偏移量，即循环终止值</span><br><span class="line">    Local0 = Zero // 定义Buffer索引为0</span><br><span class="line">    While ((Arg0 &lt; Arg1)) // 进行循环，循环次数为初次计算的Arg1</span><br><span class="line">    &#123;</span><br><span class="line">        WE1B (Arg0, DerefOf (TEMP [Local0])) // 调用WE1B依次写入8位数据</span><br><span class="line">        Arg0++ // 偏移量自增</span><br><span class="line">        Local0++ // 索引自增</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>有些笔记本的EC使用SystemMemory作用域，则EC、RE1B和WE1B的Field起始偏移量也需要加上原始定义数值，可参照如下所示代码进行修改。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Scope (_SB.PCI0.LPCB.EC0)</span><br><span class="line">&#123;</span><br><span class="line">    OperationRegion (ERAX, SystemMemory, 0xFE708300, 0x0100)</span><br><span class="line">    Field (ERAX, ByteAcc, Lock, Preserve)</span><br><span class="line">    &#123;</span><br><span class="line">    ···</span><br><span class="line">    Method (RE1B, 1, NotSerialized)</span><br><span class="line">    &#123;</span><br><span class="line">        Local0 = (0xFE708300 + Arg0)</span><br><span class="line">        OperationRegion (ERM2, SystemMemory, Local0, One)</span><br></pre></td></tr></table></figure>
</details>

<p>计算大于32位字段的偏移量，逢八进一，从起始值往下算。以下面的代码为例子。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Offset (0x04),</span><br><span class="line">	CMCM,   8, // 0x04</span><br><span class="line">	CMD1,   8, // 0x05=0x04+1（8位是1字节）</span><br><span class="line">	CMD2,   8, // 0x06</span><br><span class="line">	CMD3,   8, // 0x07</span><br><span class="line">	Offset (0x18), // 这里空了一些，按开头所给出的偏移量计算</span><br><span class="line">	Offset (0x19),</span><br><span class="line">	SMST,   8, // 0x19</span><br><span class="line">	MBMN,   80, // 0x1A</span><br><span class="line">	MBPN,   96, // 0x25=0x1A（上一个的起始地址）+A（80/8=10，上一个占了10个字节，16进制表示即为A）+1</span><br><span class="line">	GPB1,   8, // 0x32=0x25+C（96位占了12个字节，16进制表示即为C）+1</span><br><span class="line">	GPB2,   8, // 0x33</span><br><span class="line">	GPB3,   8, // 0x34</span><br><span class="line">	GPB4,   8, // 0x35</span><br></pre></td></tr></table></figure>

<p>搜索DSDT中该字段被调用的地方。不同于16&#x2F;32位字段的处理，超过32位的字段只需用偏移量和该字段位数代替字段本身。</p>
<p>若所替换字段挨着左括号，需要使用RECB，即处理读操作。以<code>Store(MBMN, XXXX) </code>改为<code>Store(RECB(0x1A, 80), XXXX)</code>为例，利用下列正则表达式进行替换，Patch即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">into method label XXXX code_regex \(SBMN, replaceall_matched begin (RECB(0xA0,128), end;</span><br></pre></td></tr></table></figure>

<p>相关含义解释如下，内容均根据自己的DSDT代码替换。</p>
<table>
<thead>
<tr>
<th>内容</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>XXXX</td>
<td>代码对应的method</td>
</tr>
<tr>
<td><code>\(SBMN,</code></td>
<td>替换前的字段</td>
</tr>
<tr>
<td>(RECB(0xA0,128),</td>
<td>替换后的字段，其中0xA0为所计算出来的偏移量，128为位数</td>
</tr>
</tbody></table>
<p>若所替换字段挨着右括号，需要使用WECB，即处理写操作。以<code>Store (Arg3, \_SB.PCI0.LPCB.EC0.SMD0)</code>改为<code>Store (Arg3, \_SB.PCI0.LPCB.EC0.WECB(0x1C,264,Arg3)</code>为例，则利用下列正则表达式进行替换。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">into method label SMRW code_regex Store\s\(Arg3,\s\\_SB.PCI0.LPCB.EC0.SMD0\) replaceall_matched begin \\_SB.PCI0.LPCB.EC0.WECB(0x1C,264,Arg3) end;</span><br></pre></td></tr></table></figure>

<h4 id="应用修改"><a href="#应用修改" class="headerlink" title="应用修改"></a>应用修改</h4><p>再次点击Compile，确认无Error后，点击菜单File-Save As，类型选ACPI Machine Language Binary，名称为DSDT.aml。保存后复制到CLOVER&#x2F;ACPI&#x2F;patched，重启即可。</p>
<h3 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h3><h4 id="正则表达式写法"><a href="#正则表达式写法" class="headerlink" title="正则表达式写法"></a>正则表达式写法</h4><p>16位和32位的区别在于，16位会调用B1B2方法，而32位会调用B1B4方法。因此正则表达式的基本格式如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">// 16位字段</span><br><span class="line">into method label [代码对应method] code_regex [替换前的字段，需要包含逗号] replaceall_matched begin (B1B2[替换后的字段，需要包含逗号] end;</span><br><span class="line"></span><br><span class="line">// 32位字段</span><br><span class="line">into method label [代码对应method] code_regex [替换前的字段，需要包含逗号] replaceall_matched begin (B1B4[替换后的字段，需要包含逗号] end;</span><br><span class="line"></span><br><span class="line">// 特殊字段的处理（把整个地址复制进去即可）</span><br><span class="line">B1B2(特殊字段1，特殊字段2)</span><br><span class="line">B1B4(特殊字段1，特殊字段2，特殊字段3，特殊字段4)</span><br></pre></td></tr></table></figure>

<h4 id="补丁结构"><a href="#补丁结构" class="headerlink" title="补丁结构"></a>补丁结构</h4><p>将前面所有Patch过的代码放到一起，即称为本机的电量补丁，示例如下。</p>
<p>注意，前面所有通过正则表达式的操作，其实可以直接在原文件上修改，而不必通过Patch的方式。通过Patch方式主要是便于补丁整合与传播。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">// 字段拆分</span><br><span class="line">into device label EC0 code_regex B0C3,\s+16, replace_matched begin C3HG,8,C3HF,8, end;</span><br><span class="line">into device label EC0 code_regex B0SN,\s+16, replace_matched begin BSVN,8,BSVM,8, end;</span><br><span class="line">into device label EC0 code_regex B1SN,\s+16 replace_matched begin SBUY,8,SBUP,8 end;</span><br><span class="line"></span><br><span class="line">// 替换调用方法</span><br><span class="line">into method label _BIX code_regex \(B0C3, replaceall_matched begin (B1B2(C3HG,C3HF), end;</span><br><span class="line">into method label BIFA code_regex \(B0SN, replaceall_matched begin (B1B2(BSVN,BSVM), end;</span><br><span class="line">into method label BIFA code_regex \(B1SN, replaceall_matched begin (B1B2(SBUY,SBUP), end;</span><br><span class="line"></span><br><span class="line">// 数据处理方法</span><br><span class="line">into method label B1B2 remove_entry;</span><br><span class="line">into definitionblock code_regex . insert</span><br><span class="line">begin</span><br><span class="line">Method (B1B2, 2, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">Return(Or(Arg0, ShiftLeft(Arg1, 8)))\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<h4 id="Mutex置零检查及修复"><a href="#Mutex置零检查及修复" class="headerlink" title="Mutex置零检查及修复"></a>Mutex置零检查及修复</h4><h5 id="检查"><a href="#检查" class="headerlink" title="检查"></a>检查</h5><p>有些机器的Mutex（互斥体，用于处理多线程同步）对象的SyncLevel（同步等级）不为0，这种情况下macOS无法正常执行多线程同步，造成的结果是电池状态等可能无法获取（如果电池相关的Method处于不同的同步等级，在macOS下会造成数据获取的异常，出现0%的情况），此时应打上Mutex置0补丁来解决。</p>
<p>绝大多数笔记本ACPI的Mutex都是默认置0的，但是一些联想品牌的笔记本往往有几个Mutex的SyncLevel并不是0。因此，在完成电池补丁后应检查Mutex是否属于这种情况。</p>
<p>在DSDT中搜索Mutex，看出现的几个对象的SyncLevel是否为0即可。</p>
<h5 id="修复"><a href="#修复" class="headerlink" title="修复"></a>修复</h5><p>可通过ACPI更名的方式。以Mutex (BATM, 0x07)为例，先转换BATM为十六进制代码，得到42 41 54 4D。在前后加上完整定义的十六进制代码，最终得到01 42 41 54 4D 07，其中01代表Mutex，07代表SyncLevel的0x07。目的是使Mutex对象置0，因此更名如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Comment: Set Mutex BATM, 0x07 to 0x0</span><br><span class="line">Find: 01424154 4D07</span><br><span class="line">Repalce: 01424154 4D00</span><br></pre></td></tr></table></figure>

<p>也可通过Fix Mutex with non-zero SyncLevel补丁。打开MaciASL，点击Patch，在左侧资源树中选择<code>_RehabMan Laptop</code>-<code>[sys]Fix Mutex with non-zero SyncLevel</code>，点击Apply-Close即可。</p>
<p>若没有该资源，则需要在偏好设置中添加补丁来源。常见补丁来源如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br></pre></td><td class="code"><pre><span class="line"># _RehabMan Laptop</span><br><span class="line">http://raw.github.com/RehabMan/Laptop-DSDT-Patch/master</span><br><span class="line"></span><br><span class="line"># _OS-X-ACPI-Debug</span><br><span class="line">http://raw.github.com/RehabMan/OS-X-ACPI-Debug/master</span><br><span class="line"></span><br><span class="line"># _VoodooI2C-Patches</span><br><span class="line">http://raw.github.com/alexandred/VoodooI2C-Patches/master</span><br><span class="line"></span><br><span class="line"># Sourceforge</span><br><span class="line">http://maciasl.sourceforge.net</span><br><span class="line"></span><br><span class="line"># Gigabyte</span><br><span class="line">http://maciasl.sourceforge.net/pjalm/gigabyte</span><br><span class="line"></span><br><span class="line"># ASUS</span><br><span class="line">http://maciasl.sourceforge.net/pjalm/asus</span><br><span class="line"></span><br><span class="line"># Audio HDMI 5 Series</span><br><span class="line">https://raw.github.com/toleda/audio_hdmi_5series/master</span><br><span class="line"></span><br><span class="line"># Audio HDMI HD3000/Sandy Bridge/6 Series</span><br><span class="line">https://raw.github.com/toleda/audio_hdmi_hd3000/master</span><br><span class="line"></span><br><span class="line"># Audio HDMI HD4000/Ivy Bridge/7 Series</span><br><span class="line">https://raw.github.com/toleda/audio_hdmi_hd4000/master</span><br><span class="line"></span><br><span class="line"># Audio HDMI UEFI Audio dsdt edits - Desktop/Laptop/Intel NUC</span><br><span class="line">https://raw.github.com/toleda/audio_hdmi_uefi/master</span><br><span class="line"></span><br><span class="line"># Audio Realtek ALC injection</span><br><span class="line">https://raw.github.com/toleda/audio_ALCInjection/master</span><br><span class="line"></span><br><span class="line"># Airport PCIe Half Mini</span><br><span class="line">https://raw.github.com/toleda/airport_pcie-hm/master</span><br><span class="line"></span><br><span class="line"># Audio HDMI HD4600/Haswell/8 Series</span><br><span class="line">https://raw.github.com/toleda/audio_hdmi_8series/master</span><br><span class="line"></span><br><span class="line"># PJALM General</span><br><span class="line">http://pjalm.info/repos/general/</span><br><span class="line"></span><br><span class="line"># PJALM Graphics</span><br><span class="line">http://pjalm.info/repos/graphics/</span><br><span class="line"></span><br><span class="line"># PJALM Intel Series 6</span><br><span class="line">http://pjalm.info/repos/intel6/</span><br><span class="line"></span><br><span class="line"># PJALM Intel Series 7</span><br><span class="line">http://pjalm.info/repos/intel7/</span><br><span class="line"></span><br><span class="line"># PJALM ASUS</span><br><span class="line">http://pjalm.info/repos/asus/</span><br><span class="line"></span><br><span class="line"># PJALM Gigabyte</span><br><span class="line">http://pjalm.info/repos/gigabyte/</span><br><span class="line"></span><br><span class="line"># PJALM MSI</span><br><span class="line">http://pjalm.info/repos/msi/</span><br><span class="line"></span><br><span class="line"># PJALM ASRock</span><br><span class="line">http://pjalm.info/repos/asrock/</span><br><span class="line"></span><br><span class="line"># PJALM Zotac</span><br><span class="line">http://pjalm.info/repos/zotac/</span><br><span class="line"></span><br><span class="line"># Gigabyte</span><br><span class="line">http://www.tonymacx86.com/DSDT/</span><br><span class="line"></span><br><span class="line"># HP ProBook 4x30s</span><br><span class="line">https://raw.githubusercontent.com/RehabMan/HP-ProBook-4x30s-DSDT-Patch/master</span><br><span class="line"></span><br><span class="line"># HP Probook patch</span><br><span class="line">http://raw.github.com/RehabMan/HP-ProBook-4x30s-DSDT-Patch/master</span><br></pre></td></tr></table></figure>

<h4 id="充电-x2F-放电状态的逻辑错误"><a href="#充电-x2F-放电状态的逻辑错误" class="headerlink" title="充电&#x2F;放电状态的逻辑错误"></a>充电&#x2F;放电状态的逻辑错误</h4><p>某些华硕笔记本电脑的DSDT存在逻辑错误，容量达到100％（电池充满电）时，_BST返回错误的状态。使用以下补丁程序即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">into method label FBST code_regex If\s\(CHGS\s\(Zero\)\)[\s]+\&#123;[\s]+Store\s\(0x02,\sLocal0\)[\s]+\&#125;[\s]+Else[\s]+\&#123;[\s]+Store\s\(One,\sLocal0\)[\s]+\&#125; replaceall_matched begin</span><br><span class="line">If (CHGS (Zero))\n</span><br><span class="line">&#123;\n</span><br><span class="line">Store (0x02, Local0)\n</span><br><span class="line">&#125;\n</span><br><span class="line">Else\n</span><br><span class="line">&#123;\n</span><br><span class="line">Store (Zero, Local0)\n</span><br><span class="line">&#125;</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<h2 id="触控板"><a href="#触控板" class="headerlink" title="触控板"></a>触控板</h2><p>以下的所有操作对软件版本均有要求。MaciASL需为RehabMan编译版，IORegistryExplorer需为2.1版本。</p>
<h3 id="判断触控板类型"><a href="#判断触控板类型" class="headerlink" title="判断触控板类型"></a>判断触控板类型</h3><p>在Windows下打开设备管理器，若在人体学输入设备下存在I2C HID设备，则一般为I2C HID触摸板。查看触摸板设备的属性，若显示位置是<code>在 I2C HID设备 上</code>，则得证。否则触控板一般为PS2类型。</p>
<h3 id="PS2触控板"><a href="#PS2触控板" class="headerlink" title="PS2触控板"></a>PS2触控板</h3><p>用VoodooPS2Controller.kext驱动即可。</p>
<h3 id="I2C触控板"><a href="#I2C触控板" class="headerlink" title="I2C触控板"></a>I2C触控板</h3><h4 id="记录IRQ"><a href="#记录IRQ" class="headerlink" title="记录IRQ"></a>记录IRQ</h4><p>在Windows下打开设备管理器，在<code>I2C HID设备</code>上右键选择属性，点击详细信息，选择<code>位置路径</code>并记录。然后切换到资源选项卡，记录IRQ后面的数字，该数字代表的是APIC Pin。本机示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// IRQ</span><br><span class="line">0x0000006D (109)</span><br><span class="line"></span><br><span class="line">// 位置路径，其中ETPD为触控板BIOS名称</span><br><span class="line">ACPI(_SB_)#ACPI(PCI0)#ACPI(I2C1)#ACPI(ETPD)</span><br></pre></td></tr></table></figure>

<p>也可在Mac下查看APIC Pin。打开IORegistryExplorer，右上角搜索触控板BIOS名称，本机即为ETPD，在详细页中记录IOInterruptSpecifiers的值即可。</p>
<h4 id="确定工作原理"><a href="#确定工作原理" class="headerlink" title="确定工作原理"></a>确定工作原理</h4><p>I2C触控板均用VoodooI2C驱动，支持轮询模式或中断模式。</p>
<p>轮询模式是Voodoo的安全模式，每隔一个特定的时间扫描一次触摸板的状态，然后改变鼠标指针坐标。中断模式是触摸板在Windows&#x2F;Linux等其他系统的正常工作方式。</p>
<p>在DSDT中定义如下。</p>
<table>
<thead>
<tr>
<th>定义</th>
<th>含义</th>
<th>适用范围</th>
<th>效率</th>
<th>驱动难度</th>
</tr>
</thead>
<tbody><tr>
<td>APIC中断</td>
<td>使用APIC控制器</td>
<td>无IOInterruptSpecifier，或APIC Pin&lt;2F</td>
<td>最高</td>
<td>能否以该模式驱动由硬件决定</td>
</tr>
<tr>
<td>GPIO中断</td>
<td>DSDT在SBFG中存在有效GPIO Pin，CRS方法中返回(SBFB,SBFG)，并应用启用GPIO控制器的补丁</td>
<td>有IOInterruptSpecifier且APIC Pin&gt;2F</td>
<td>较高</td>
<td>较难</td>
</tr>
<tr>
<td>轮询</td>
<td>CRS方法中只返回SBFB或者(SBFB,SBFI)</td>
<td>&#x2F;</td>
<td>较低</td>
<td>较易</td>
</tr>
</tbody></table>
<p>也就是说，对于原始DSDT，以APIC Pin为判断依据，若小于2F则默认使用APIC中断，若大于2F则默认使用GPIO控制器。但由于GPIO控制器默认不工作，因此系统会采用轮询模式，如下图所示。</p>
<p><img src="/blog/posts/Hackintosh-Installation/i2c-touchpad.jpg"></p>
<details>
<summary>【进阶】DSDT中的相关代码</summary>

<p>找到触摸板的相关代码后，查看SBFI方法，该方法用于实现APIC中断。该方法中的数值即为APIC Pin，当APIC Pin大于2F时，可判断为轮询模式。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Name (SBFI, ResourceTemplate ()</span><br><span class="line">&#123;</span><br><span class="line">    Interrupt (ResourceConsumer, Level, ActiveLow, ExclusiveAndWake, ,, _Y25)</span><br><span class="line">    &#123;</span><br><span class="line">        0x00000000,</span><br><span class="line">    &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>查看SBFB方法，该方法可被轮询或中断调用。部分DSDT中不含SBFB而含I2CM，两者基本一致，I2CM相比SBFB具有更多的内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Name (SBFB, ResourceTemplate ()</span><br><span class="line">&#123;</span><br><span class="line">    I2cSerialBusV2 (0x004C, ControllerInitiated, 0x00061A80,</span><br><span class="line">        AddressingMode7Bit, &quot;\\_SB.PCI0.I2C1&quot;,</span><br><span class="line">        0x00, ResourceConsumer, _Y2A, Exclusive,</span><br><span class="line">        )</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>查看SBFG方法，该方法中的数值即为GpioInt，用于中断处理。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Name (SBFG, ResourceTemplate ()</span><br><span class="line">&#123;</span><br><span class="line">    GpioInt (Level, ActiveLow, ExclusiveAndWake, PullDefault, 0x0000,</span><br><span class="line">        &quot;\\_SB.PCI0.GPI0&quot;, 0x00, ResourceConsumer, ,</span><br><span class="line">        )</span><br><span class="line">        &#123;   // Pin list</span><br><span class="line">            0x0000</span><br><span class="line">        &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>
</details>

<h4 id="轮询模式驱动"><a href="#轮询模式驱动" class="headerlink" title="轮询模式驱动"></a>轮询模式驱动</h4><p>下载VoodooI2C，按照以下规则将驱动放入Clover的kexts中（一个核心驱动+一个目标驱动）并重启。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># 必放核心驱动</span><br><span class="line">VoodooI2C.kext</span><br><span class="line"></span><br><span class="line"># 根据情况选择目标驱动</span><br><span class="line">VoodooI2CELAN.kext - ELAN触摸板</span><br><span class="line">VoodooI2CHID.kext - I2C触摸板</span><br><span class="line">VoodooI2CFTE.kext - FTE触摸板</span><br><span class="line">VoodooI2CSynaptics.kext - Synaptics触摸板</span><br><span class="line">VoodooI2CAtmelMXT.kext - MXT触摸屏</span><br><span class="line">VoodooI2CUPDDEngine.kext - UPDD多点触控引擎</span><br></pre></td></tr></table></figure>

<p>对于小部分机型（如华硕笔记本），触控板已被驱动。若未被驱动，则需要对DSDT应用<code>Windows补丁</code>，根据出厂时随附的操作系统应用对应的补丁，一般用Windows 10 Patch。</p>
<details>
<summary>【非必要不使用】操作系统补丁</summary>

<p>以下方法选择一种即可。</p>
<p>DSDT修改法如下。</p>
<p>打开MaciASL，保证有VoodooI2C的补丁源。点击Patch，选择VoodooI2C下的<code>Windows 10 Patch</code>补丁，Apply-Close后保存DSDT，并将新的DSDT放入Clover文件夹的ACPI&#x2F;patched下即可。</p>
<p>若MaciASL无法加载出补丁源，可直接在Patch界面复制以下代码内容。根据操作系统自行选择。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># Windows 10 DSDT Patch for VoodooI2C</span><br><span class="line">into_all method code_regex If\s+\([\\]?_OSI\s+\(\&quot;Windows\s2015\&quot;\)\) replace_matched begin If(LOr(_OSI(&quot;Darwin&quot;),_OSI(&quot;Windows 2015&quot;))) end;</span><br><span class="line"></span><br><span class="line"># Windows 8.1 DSDT Patch for VoodooI2C</span><br><span class="line">into_all method code_regex If\s+\([\\]?_OSI\s+\(\&quot;Windows\s2013\&quot;\)\) replace_matched begin If(LOr(_OSI(&quot;Darwin&quot;),_OSI(&quot;Windows 2013&quot;))) end;</span><br><span class="line"></span><br><span class="line"># Windows 8 DSDT Patch for VoodooI2C</span><br><span class="line">into_all method code_regex If\s+\([\\]?_OSI\s+\(\&quot;Windows\s2012\&quot;\)\) replace_matched begin If(LOr(_OSI(&quot;Darwin&quot;),_OSI(&quot;Windows 2012&quot;))) end;</span><br><span class="line"></span><br><span class="line"># Windows 7 DSDT Patch for VoodooI2C</span><br><span class="line">into_all method code_regex If\s+\([\\]?_OSI\s+\(\&quot;Windows\s2009\&quot;\)\) replace_matched begin If(LOr(_OSI(&quot;Darwin&quot;),_OSI(&quot;Windows 2009&quot;))) end;</span><br></pre></td></tr></table></figure>

<p>SSDT热补丁法如下。</p>
<p>打开MaciASL，新建文件并复制以下内容，保存为SSDT-XOSI.aml。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;&quot;, &quot;SSDT&quot;, 2, &quot;DRTNIA&quot;, &quot;XOSI&quot;, 0x00001000)</span><br><span class="line">&#123;</span><br><span class="line">    Method (XOSI, 1, NotSerialized)</span><br><span class="line">    &#123;</span><br><span class="line">        Store (Package (0x11)</span><br><span class="line">            &#123;</span><br><span class="line">                &quot;Windows 2001&quot;, </span><br><span class="line">                &quot;Windows 2001.1&quot;, </span><br><span class="line">                &quot;Windows 2001 SP1&quot;, </span><br><span class="line">                &quot;Windows 2001 SP2&quot;, </span><br><span class="line">                &quot;Windows 2001 SP3&quot;, </span><br><span class="line">                &quot;Windows 2006&quot;, </span><br><span class="line">                &quot;Windows 2006 SP1&quot;, </span><br><span class="line">                &quot;Windows 2009&quot;, </span><br><span class="line">                &quot;Windows 2012&quot;, </span><br><span class="line">                &quot;Windows 2013&quot;, </span><br><span class="line">                &quot;Microsoft Windows NT&quot;, </span><br><span class="line">                &quot;Microsoft Windows&quot;, </span><br><span class="line">                &quot;Microsoft WindowsME: Millennium Edition&quot;</span><br><span class="line">            &#125;, Local0)</span><br><span class="line">        If (_OSI (&quot;Darwin&quot;))</span><br><span class="line">        &#123;</span><br><span class="line">            Return (LNotEqual (Ones, Match (Local0, MEQ, Arg0, MTR, Zero, Zero)))</span><br><span class="line">        &#125;</span><br><span class="line">        Else</span><br><span class="line">        &#123;</span><br><span class="line">            Return (_OSI (Arg0))</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>将SSDT-XOSI.aml放置在Clover文件夹的ACPI&#x2F;patched目录下，然后在config.plist下添加以下改名补丁即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Comment: change _OSI to XOSI</span><br><span class="line">Find: 5F4F5349</span><br><span class="line">Replace: 584F5349</span><br></pre></td></tr></table></figure>
</details>

<h4 id="中断模式驱动"><a href="#中断模式驱动" class="headerlink" title="中断模式驱动"></a>中断模式驱动</h4><h5 id="查看APIC-Pin值"><a href="#查看APIC-Pin值" class="headerlink" title="查看APIC Pin值"></a>查看APIC Pin值</h5><p>不放置VoodooI2C驱动，并应用Windows补丁。打开IORegistryExplorer，搜索前面保存的BIOS设备名称，然后定位到<code>IOInterruptSpecifiers</code>，最前面的两位数即为<code>APIC Pin</code>值。</p>
<p>若无IOInterruptSpecifiers项或APIC Pin值不大于<code>2F</code>，则直接跳到安装步骤，否则继续下列步骤。</p>
<h5 id="移除APIC中断控制器"><a href="#移除APIC中断控制器" class="headerlink" title="移除APIC中断控制器"></a>移除APIC中断控制器</h5><p>用MaciASL打开设备的DSDT，搜索<code>BIOS设备名称</code>（此处为ETPD），定位到触控板设备的代码块下。注意，以下操作全部在触控板设备的代码块下进行，请勿跳到其他设备下的代码操作。</p>
<p>在触控板设备的代码块下寻找类似以下的代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">Method (_CRS, 0, Serialized)  // _CRS: Current Resource Settings</span><br><span class="line">&#123;</span><br><span class="line">    Name (SBFI, ResourceTemplate ()</span><br><span class="line">    &#123;</span><br><span class="line">        I2cSerialBusV2 (0x0015, ControllerInitiated, 0x00061A80,</span><br><span class="line">            AddressingMode7Bit, &quot;\\_SB.PCI0.I2C1&quot;,</span><br><span class="line">            0x00, ResourceConsumer, , Exclusive,</span><br><span class="line">            )</span><br><span class="line">        Interrupt (ResourceConsumer, Level, ActiveLow, Exclusive, ,, )</span><br><span class="line">        &#123;</span><br><span class="line">            0x0000006D,</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">    Return (SBFI)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在此段代码中，需将<code>SBFI</code>改为<code>SBFB</code>，并删除以下内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Interrupt (ResourceConsumer, Level, ActiveLow, Exclusive, ,, )</span><br><span class="line">&#123;</span><br><span class="line">    0x0000006D,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以上面代码为例，修改后变为如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Method (_CRS, 0, Serialized)  // _CRS: Current Resource Settings</span><br><span class="line">&#123;</span><br><span class="line">    Name (SBFB, ResourceTemplate ()</span><br><span class="line">    &#123;</span><br><span class="line">        I2cSerialBusV2 (0x0015, ControllerInitiated, 0x00061A80,</span><br><span class="line">            AddressingMode7Bit, &quot;\\_SB.PCI0.I2C1&quot;,</span><br><span class="line">            0x00, ResourceConsumer, , Exclusive,</span><br><span class="line">            )</span><br><span class="line">        &#125;)</span><br><span class="line">        Return (SBFB)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="确定触控板固定类型"><a href="#确定触控板固定类型" class="headerlink" title="确定触控板固定类型"></a>确定触控板固定类型</h5><p>在触控板的DSDT下寻找以下代码块。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Name (SBFG, ResourceTemplate ()</span><br><span class="line">&#123;</span><br><span class="line">    GpioInt (Level, ActiveLow, ExclusiveAndWake, PullDefault, 0x0000,</span><br><span class="line">        &quot;\\_SB.PCI0.GPI0&quot;, 0x00, ResourceConsumer, ,</span><br><span class="line">        )</span><br><span class="line">        &#123;   // Pin list</span><br><span class="line">            0x0000</span><br><span class="line">        &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>若此段代码出现在设备的根目录，则称为触控板设备已经<code>root固定</code>。若出现在CRS方法中，则称为触控板设备已经<code>CRS固定</code>。如果Pin list对应非零值，称为<code>well-root固定</code>和<code>well-CRS固定</code>。若此段代码未出现，则称为触控板设备<code>未固定</code>。</p>
<p>若未固定，则先将以上代码段复制到设备根目录下，示例如下。复制完成后跳到GPIO固定步骤。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Scope (_SB.PCI0.I2C0)</span><br><span class="line">&#123;</span><br><span class="line">       Device (ETPD)</span><br><span class="line">       &#123;</span><br><span class="line">           Name (SBFG, ResourceTemplate ()</span><br><span class="line">           &#123;</span><br><span class="line">                GpioInt (Level, ActiveLow, Exclusive, PullUp, 0x0000,</span><br><span class="line">                        &quot;\\_SB.PCI0.GPI0&quot;, 0x00, ResourceConsumer, ,</span><br><span class="line">                        )</span><br><span class="line">                        &#123;   // Pin list</span><br><span class="line">                            0x0000</span><br><span class="line">                        &#125;</span><br><span class="line">           &#125;)</span><br><span class="line">           ......</span><br></pre></td></tr></table></figure>

<p>若为root固定或CRS固定，需在触控板代码块下查找<code>_CRS</code>方法，并确定以下代码是否存在。若存在，则证明设备已固定好，可直接跳到安装步骤，否则需继续GPIO固定步骤。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Return (ConcatenateResTemplate (SBFB, SBFG))</span><br></pre></td></tr></table></figure>

<p>若为well-root固定或well-CRS固定，则直接跳到安装步骤。</p>
<h5 id="GPIO固定"><a href="#GPIO固定" class="headerlink" title="GPIO固定"></a>GPIO固定</h5><p>定位到代码块的_CRS方法，删除此方法的Return语句并用以下Return语句替换，以确保DSDT通知系统设备已固定好GPIO。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Return (ConcatenateResTemplate (SBFB, SBFG))</span><br></pre></td></tr></table></figure>

<h5 id="驱动安装"><a href="#驱动安装" class="headerlink" title="驱动安装"></a>驱动安装</h5><p>驱动的安装包括驱动放置、禁用系统驱动、应用补丁，其中放置驱动操作与轮询模式完全一致。对于系统驱动，需禁用AppleIntelLpssI2C.kext和AppleIntelLpssI2CController.kext，方法见说明。应用补丁需应用Windows补丁和GPIO补丁。</p>
<p>Windows补丁的应用与轮询模式完全一致，GPIO补丁的应用提供以下两种形式。</p>
<h5 id="热补丁法应用GPIO补丁"><a href="#热补丁法应用GPIO补丁" class="headerlink" title="热补丁法应用GPIO补丁"></a>热补丁法应用GPIO补丁</h5><p>在OC-little包中取<code>SSDT-GPIO.aml</code>并放置在Clover文件夹的ACPI&#x2F;patched目录下，然后在config.plist下添加以下改名补丁即可。注意，在补丁无效时，可尝试删除<code>Tgtbridge</code>值。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Comment: change _STA to XSTA in GPI0 </span><br><span class="line">Find: 5F535441</span><br><span class="line">Replace: 58535441</span><br><span class="line">TgtBridge: 47504930</span><br></pre></td></tr></table></figure>

<h5 id="DSDT修改法应用GPIO补丁"><a href="#DSDT修改法应用GPIO补丁" class="headerlink" title="DSDT修改法应用GPIO补丁"></a>DSDT修改法应用GPIO补丁</h5><p>在MaciASL下点击Patch，选择VoodooI2C下的<code>GPIO Controller</code>和<code>SKL I2C Controller</code>补丁，Apply-Close后保存DSDT，并将新的DSDT放入Clover文件夹的ACPI&#x2F;patched下即可。</p>
<p>若MaciASL无法加载出补丁源，可直接在Patch界面复制以下代码内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br></pre></td><td class="code"><pre><span class="line">// GPI0 Controller</span><br><span class="line">into method label _STA parent_label GPI0 replace_content begin</span><br><span class="line">Return (0x0F)</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// Skylake controller patches for VoodooI2C</span><br><span class="line">into_all device label I2C0 remove_entry;</span><br><span class="line">into_all device label I2C1 remove_entry;</span><br><span class="line">into_all device label I2C2 remove_entry;</span><br><span class="line">into_all device label I2C3 remove_entry;</span><br><span class="line">into_all device label I2C4 remove_entry;</span><br><span class="line">into_all device label I2C5 remove_entry;</span><br><span class="line"></span><br><span class="line">into scope label _SB.PCI0 insert begin</span><br><span class="line"></span><br><span class="line">Device (I2C0)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    Name (LINK, &quot;\\_SB.PCI0.I2C0&quot;)\n</span><br><span class="line">    Method (_PSC, 0, NotSerialized)  // _PSC: Power State Current\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (GETD (SB10))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS0, 0, NotSerialized)  // _PS0: Power State 0\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD0 (SB10)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS3, 0, NotSerialized)  // _PS3: Power State 3\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD3 (SB10)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">\n\n</span><br><span class="line">Device (I2C1)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    Name (LINK, &quot;\\_SB.PCI0.I2C1&quot;)\n</span><br><span class="line">    Method (_PSC, 0, NotSerialized)  // _PSC: Power State Current\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (GETD (SB11))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS0, 0, NotSerialized)  // _PS0: Power State 0\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD0 (SB11)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS3, 0, NotSerialized)  // _PS3: Power State 3\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD3 (SB11)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">\n\n</span><br><span class="line">Device (I2C2)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    Name (LINK, &quot;\\_SB.PCI0.I2C2&quot;)\n</span><br><span class="line">    Method (_PSC, 0, NotSerialized)  // _PSC: Power State Current\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (GETD (SB12))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS0, 0, NotSerialized)  // _PS0: Power State 0\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD0 (SB12)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS3, 0, NotSerialized)  // _PS3: Power State 3\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD3 (SB12)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">\n\n</span><br><span class="line">Device (I2C3)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    Name (LINK, &quot;\\_SB.PCI0.I2C3&quot;)\n</span><br><span class="line">    Method (_PSC, 0, NotSerialized)  // _PSC: Power State Current\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (GETD (SB13))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS0, 0, NotSerialized)  // _PS0: Power State 0\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD0 (SB13)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS3, 0, NotSerialized)  // _PS3: Power State 3\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD3 (SB13)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">\n</span><br><span class="line">Device (I2C4)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    Name (LINK, &quot;\\_SB.PCI0.I2C4&quot;)\n</span><br><span class="line">    Method (_PSC, 0, NotSerialized)  // _PSC: Power State Current\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (GETD (SB14))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS0, 0, NotSerialized)  // _PS0: Power State 0\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD0 (SB14)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS3, 0, NotSerialized)  // _PS3: Power State 3\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD3 (SB14)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">\n</span><br><span class="line">Device (I2C5)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    Name (LINK, &quot;\\_SB.PCI0.I2C5&quot;)\n</span><br><span class="line">    Method (_PSC, 0, NotSerialized)  // _PSC: Power State Current\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (GETD (SB15))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS0, 0, NotSerialized)  // _PS0: Power State 0\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD0 (SB15)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_PS3, 0, NotSerialized)  // _PS3: Power State 3\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        LPD3 (SB15)\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">into scope label _SB.PCI0.I2C0 replace_content begin</span><br><span class="line"></span><br><span class="line">    Name (_HID, &quot;INT3442&quot;)  // _HID: Hardware ID\n</span><br><span class="line">    Method (_HRV, 0, NotSerialized)  // _HRV: Hardware Revision\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LHRV (SB10))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_CRS, 0, NotSerialized)  // _CRS: Current Resource Settings\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LCRS (SMD0, SB00, SIR0))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_STA, 0, NotSerialized)  // _STA: Status\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LSTA (SMD0))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">into scope label _SB.PCI0.I2C1 replace_content begin</span><br><span class="line"></span><br><span class="line">    Name (_HID, &quot;INT3443&quot;)  // _HID: Hardware ID\n</span><br><span class="line">    Method (_HRV, 0, NotSerialized)  // _HRV: Hardware Revision\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LHRV (SB11))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_CRS, 0, NotSerialized)  // _CRS: Current Resource Settings\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LCRS (SMD1, SB01, SIR1))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_STA, 0, NotSerialized)  // _STA: Status\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LSTA (SMD1))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">into scope label _SB.PCI0.I2C2 replace_content begin</span><br><span class="line"></span><br><span class="line">    Name (_HID, &quot;INT3444&quot;)  // _HID: Hardware ID\n</span><br><span class="line">    Method (_HRV, 0, NotSerialized)  // _HRV: Hardware Revision\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LHRV (SB12))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_CRS, 0, NotSerialized)  // _CRS: Current Resource Settings\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LCRS (SMD2, SB02, SIR2))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_STA, 0, NotSerialized)  // _STA: Status\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LSTA (SMD2))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line">into scope label _SB.PCI0.I2C3 replace_content begin</span><br><span class="line"></span><br><span class="line">    Name (_HID, &quot;INT3445&quot;)  // _HID: Hardware ID\n</span><br><span class="line">    Method (_HRV, 0, NotSerialized)  // _HRV: Hardware Revision\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LHRV (SB13))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_CRS, 0, NotSerialized)  // _CRS: Current Resource Settings\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LCRS (SMD3, SB03, SIR3))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_STA, 0, NotSerialized)  // _STA: Status\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LSTA (SMD3))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">into scope label _SB.PCI0.I2C4 replace_content begin</span><br><span class="line"></span><br><span class="line">    Name (_HID, &quot;INT3446&quot;)  // _HID: Hardware ID\n</span><br><span class="line">    Method (_HRV, 0, NotSerialized)  // _HRV: Hardware Revision\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LHRV (SB14))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_CRS, 0, NotSerialized)  // _CRS: Current Resource Settings\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LCRS (SMD4, SB04, SIR4))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_STA, 0, NotSerialized)  // _STA: Status\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LSTA (SMD4))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line">into scope label _SB.PCI0.I2C5 replace_content begin</span><br><span class="line"></span><br><span class="line">    Name (_HID, &quot;INT3447&quot;)  // _HID: Hardware ID\n</span><br><span class="line">    Method (_HRV, 0, NotSerialized)  // _HRV: Hardware Revision\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LHRV (SB15))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_CRS, 0, NotSerialized)  // _CRS: Current Resource Settings\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LCRS (SMD5, SB05, SIR5))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">\n</span><br><span class="line">    Method (_STA, 0, NotSerialized)  // _STA: Status\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        Return (LSTA (SMD5))\n</span><br><span class="line">    &#125;\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<h5 id="确认驱动情况"><a href="#确认驱动情况" class="headerlink" title="确认驱动情况"></a>确认驱动情况</h5><p>所有步骤完成后重启。若触控板未驱动或开机卡Busy timeout，则考虑更换不同的Pin list值。</p>
<p>对于本机而言，APIC Pin值为0x6D。</p>
<h4 id="特殊处理"><a href="#特殊处理" class="headerlink" title="特殊处理"></a>特殊处理</h4><h5 id="华硕笔记本"><a href="#华硕笔记本" class="headerlink" title="华硕笔记本"></a>华硕笔记本</h5><p>华硕笔记本的DSDT会有一个TPD0设备，该设备具有GPIO中断的模板，但并不是真实的设备。应当修补ETPD设备。</p>
<h5 id="三星笔记本"><a href="#三星笔记本" class="headerlink" title="三星笔记本"></a>三星笔记本</h5><p>使用轮询模式驱动时，需在应用补丁的同时在DSDT的以下代码中删除<code>If (_OSI (&quot;Windows 2012&quot;)) &#123;</code>及对应的<code>&#125;</code>，如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">If (_OSI (&quot;Windows 2012&quot;))</span><br><span class="line">&#123;</span><br><span class="line">    Scope (_SB.PCI0.I2C0.SPTP)</span><br><span class="line">    &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Scope (_GPE)</span><br><span class="line">    &#123;</span><br><span class="line">        Method (_L04, 0, NotSerialized)  // _Lxx: Level-Triggered GPE</span><br><span class="line">        &#123;</span><br><span class="line">            Notify (\_SB.PCI0.I2C0.SPTP, 0x02)</span><br><span class="line">            Notify (\_SB.PWRB, 0x02)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    Scope (_SB.PCI0.I2C0.ATFU)</span><br><span class="line">    &#123;</span><br><span class="line">        Method (_CRS, 0, NotSerialized)  // _CRS: Current Resource Settings</span><br><span class="line">        &#123;</span><br><span class="line">            Name (SBFB, ResourceTemplate ()</span><br><span class="line">            &#123;</span><br><span class="line">                I2cSerialBusV2 (0x0026, ControllerInitiated, 0x00061A80,</span><br><span class="line">                    AddressingMode7Bit, &quot;\\_SB.PCI0.I2C0&quot;,</span><br><span class="line">                    0x00, ResourceConsumer, , Exclusive,</span><br><span class="line">                    )</span><br><span class="line">                I2cSerialBusV2 (0x0027, ControllerInitiated, 0x00061A80,</span><br><span class="line">                    AddressingMode7Bit, &quot;\\_SB.PCI0.I2C0&quot;,</span><br><span class="line">                    0x00, ResourceConsumer, , Exclusive,</span><br><span class="line">                    )</span><br><span class="line">            &#125;)</span><br><span class="line">            Return (SBFB)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>若仍未解决，则在DSDT中进入设备SPTP的_INI方法，搜索以下代码并将其内容更改为<code>SHPO (Local0, One)</code>，如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">If (LEqual (SDM0, Zero))</span><br><span class="line">&#123;</span><br><span class="line">    SHPO (Local0, One)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="其它-1"><a href="#其它-1" class="headerlink" title="其它"></a>其它</h3><p>对于Thinkpad T480s&#x2F;L380&#x2F;P52的I2C-I801设备，为ELAN触控板，可用VoodooSMBus，适用于10.14及以上系统。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/VoodooSMBus/VoodooSMBus</span><br></pre></td></tr></table></figure>

<p>对于Synaptic的I2C HID&#x2F;SMBus触控板，可用VoodooRMI，适用于10.11及以上系统。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/VoodooSMBus/VoodooRMI</span><br></pre></td></tr></table></figure>

<p>对于Alps T4 USB触摸板，可用AlpsT4USB。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/blankmac/AlpsT4USB</span><br></pre></td></tr></table></figure>

<h2 id="TouchID"><a href="#TouchID" class="headerlink" title="TouchID"></a>TouchID</h2><p>笔记本的指纹传感器一般都无法被驱动。但由于SMBIOS设置的机型具有TouchID，因此在输入密码或进行认证时，系统会等待指纹的反馈，导致键盘输入卡顿。</p>
<p>在Clover的kexts文件夹下放置<code>NoTouchID.kext</code>，重启后即可修复。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/al3xtjames/NoTouchID/releases</span><br></pre></td></tr></table></figure>

<h1 id="SMBIOS与三码设置"><a href="#SMBIOS与三码设置" class="headerlink" title="SMBIOS与三码设置"></a>SMBIOS与三码设置</h1><p>正确设置SMBIOS并注入正确的三码，可开启HWP功能，并正常登录iCloud等苹果服务。系统的SMBIOS支持列表可在安装盘的&#x2F;System&#x2F;Library&#x2F;CoreServices&#x2F;PlatformSupport.plist查看。</p>
<h2 id="选择"><a href="#选择" class="headerlink" title="选择"></a>选择</h2><p>选择SMBIOS应考虑CPU类型、GPU类型、操作系统支持、USB设备等。一般而言，应当先尽可能找到合适的CPU，然后选择仅iGPU或仅dGPU的SMBIOS，最后决定其它因素。</p>
<h3 id="CPU"><a href="#CPU" class="headerlink" title="CPU"></a>CPU</h3><p>SMBIOS的CPU决定了是否能使用XCPM进行电源管理修复，以及能否开启HWP。XCPM支持的SMBIOS如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">MacBook8,1+</span><br><span class="line">MacBookAir6,x+</span><br><span class="line">MacBookPro11,x+</span><br><span class="line">Macmini7,1+</span><br><span class="line">iMac14,x+</span><br><span class="line">iMacPro1,1</span><br><span class="line">MacPro7,1+</span><br></pre></td></tr></table></figure>

<p>打开终端并输入以下命令以查询支持HWP的机型，在输出内容中选择台式机机型或笔记本机型。注意需挑选带HWP字样的机型，且尽可能选最新的机型，2017年及以后机型支持Sidebar功能。若机型为Unknown，可用搜索引擎搜索其代码以确认机型。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cd /tmp &amp;&amp; curl -s https://raw.githubusercontent.com/Piker-Alpha/freqVectorsEdit.sh/master/freqVectorsEdit.sh &gt; /tmp/freqVectorsEdit.sh &amp;&amp; chmod +x freqVectorsEdit.sh &amp;&amp; /tmp/freqVectorsEdit.sh &amp;&amp; sudo rm -rf /tmp/freqVectorsEdit.sh &amp;&amp; sudo rm -rf /tmp/Mac-*.bin</span><br></pre></td></tr></table></figure>

<h3 id="GPU"><a href="#GPU" class="headerlink" title="GPU"></a>GPU</h3><p>Mac Mini为移动端硬件，与台式机硬件不匹配。</p>
<p>由于Apple总是假设当SMBIOS存在dGPU时，所有显示输出都将通过dGPU路由，因此若Optimus笔记本电脑的外部显示器通过iGPU连接，将可能出现黑屏问题。</p>
<p>对于没有iGPU的CPU，若SMBIOS需要iGPU（如iMac），则Quicklook等功能将被破坏。可使用iMac Pro或Mac Pro替代iMac。</p>
<p>iMacPro1,1和MacPro7,1是仅有的2个允许dGPU处理所有工作负载的SMBIOS，需要Polaris、Vega或Navi GPU。</p>
<p>iMac20,2仅适用于Apple的定制i9-10910 CPU。</p>
<p>除非运行没有内置显示器的移动硬件，否则应避免使用MacMini SMBIOS，除了Intel NUC。</p>
<h3 id="操作系统支持"><a href="#操作系统支持" class="headerlink" title="操作系统支持"></a>操作系统支持</h3><p>Mac可能仍然支持CPU，但不再支持那个时代的SMBIOS。如Arrandale，但在10.13.6之后没有iGPU支持。</p>
<h2 id="配置"><a href="#配置" class="headerlink" title="配置"></a>配置</h2><p>在进行之前通过以下命令清除旧配置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">bash</span><br><span class="line">sudo rm -rf ~/Library/Caches/com.apple.iCloudHelper*</span><br><span class="line">sudo rm -rf ~/Library/Caches/com.apple.Messages*</span><br><span class="line">sudo rm -rf ~/Library/Caches/com.apple.imfoundation.IMRemoteURLConnectionAgent*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.iChat*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.icloud*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.imagent*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.imessage*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.imservice*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.ids.service*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.madrid.plist*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.imessage.bag.plist*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.identityserviced*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.ids.service*</span><br><span class="line">sudo rm -rf ~/Library/Preferences/com.apple.security*</span><br><span class="line">sudo rm -rf ~/Library/Messages</span><br></pre></td></tr></table></figure>

<p>正常登录iCloud等苹果服务，需本机的NVRAM正常工作。部分主板需Clover的Drivers64UEFI文件夹中有<code>EmuVariableUefi-64.efi</code>才可使NVRAM正常工作。</p>
<p>打开Clover的config.plist，选择左侧SMBIOS，使用右侧上下箭头选择上面所确定的机型。也可通过GenSMBIOS生成SMBIOS。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/corpnewt/GenSMBIOS</span><br></pre></td></tr></table></figure>

<p>前往以下网站（需要翻墙环境），复制Clover中的Serial Number到文本框进行查询。若出现具体机型，则说明此序列号可用。若提示无效，则此序列码不可使用，需点击Generate New生成新的Serial Number。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://everymac.com/ultimate-mac-lookup/ </span><br></pre></td></tr></table></figure>

<p>前往以下Apple官网查询序列号。如果显示有购买日期和机型等保修信息，则此序列码不可使用，需返回Clover生成新的Serial Number。直到出现提示<code>很抱歉，这个序列号无效。请检查您的信息并再试一次</code>，则可使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://checkcoverage.apple.com/cn/zh</span><br></pre></td></tr></table></figure>

<p>点击左侧System Parameters，生成一个UUID，系统生成或随机生成都可以，并勾选Inject System ID。复制生成的UUID到SMBIOS的SmUUID里，复制SMBIOS里的Board Serial Numbe到Rt VariablesMLB里。点击获取ROM，确保下方三码正常匹配，退出并重启。</p>
<p>重启后打开Hackintool，转到工具选项卡，点击Intel图标，在工具输出中查看enableHWP的值，若为1则已成功开启HWP。同时，iCloud、iMassage、FaceTime应已可正常登录。</p>
<p>若出现问题，可打开iMessageDebug提取Mac的三码，查看MLB和ROM是否正常显示。若为Failed，则应在Clover中加上EmuVariableUefi-64.efi。若正常显示，可把结果保存，重启电脑后再打开iMessageDebug，若两次结果一致，则黑苹果已成功洗白。</p>
<h1 id="CPU与电源管理"><a href="#CPU与电源管理" class="headerlink" title="CPU与电源管理"></a>CPU与电源管理</h1><details>
<summary>【进阶】Power Management State</summary>

<p>通常为0。X86PlatformPlugin.kext能读取的已知bit如下。</p>
<table>
<thead>
<tr>
<th>bit</th>
<th>含义</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>0x00000001</td>
<td>PWROK事件导致关机</td>
<td>与GEN_PMCON_2 bit 0含义相同</td>
</tr>
<tr>
<td>0x00000002</td>
<td>SYS_PWROK事件导致关机</td>
<td>与GEN_PMCON_2 bit 1含义相同</td>
</tr>
<tr>
<td>0x00000004</td>
<td>THRMTRIP#事件导致关机</td>
<td>与GEN_PMCON_2 bit 3含义相同</td>
</tr>
<tr>
<td>0x00000008</td>
<td>SYS_RESET#事件导致重启</td>
<td>与GEN_PMCON_2 bit 4含义相同</td>
</tr>
<tr>
<td>0x00000010</td>
<td>电源失败</td>
<td>与GEN_PMCON_3 bit 1 PWR_FLR含义相同</td>
</tr>
<tr>
<td>0x00000020</td>
<td>RTC电源丢失</td>
<td>与GEN_PMCON_3 bit 2 RTC_PWR_STS含义相同</td>
</tr>
<tr>
<td>0x00000040</td>
<td>一般重置状态</td>
<td>与GEN_PMCON_3 bit 9 GEN_RST_STS含义相同</td>
</tr>
<tr>
<td>0xffffff80</td>
<td>SUS电源丢失</td>
<td>与GEN_PMCON_3 bit 14含义相同</td>
</tr>
<tr>
<td>0x00010000</td>
<td>ME唤醒事件导致唤醒</td>
<td>与PRSTS bit 0 ME_WAKE_STS含义相同</td>
</tr>
<tr>
<td>0x00020000</td>
<td>ME引发事件导致冷重启</td>
<td>与PRSTS bit 1 ME_HRST_COLD_STS含义相同</td>
</tr>
<tr>
<td>0x00040000</td>
<td>ME引发事件导致热重启</td>
<td>与PRSTS bit 2 ME_HRST_WARM_STS含义相同</td>
</tr>
<tr>
<td>0x00080000</td>
<td>ME引发事件导致关机</td>
<td>与PRSTS bit 3 ME_HOST_PWRDN含义相同</td>
</tr>
<tr>
<td>0x00100000</td>
<td>全局重置Watchdog计时器事件</td>
<td>与PRSTS bit 6含义相同</td>
</tr>
<tr>
<td>0x00200000</td>
<td>全局重置电源管理Watchdog计时器事件</td>
<td>与PRSTS bit 15含义相同</td>
</tr>
</tbody></table>
</details>

<h2 id="原生电源管理"><a href="#原生电源管理" class="headerlink" title="原生电源管理"></a>原生电源管理</h2><p>正常休眠需要启用原生电源管理，未启用时无法正确休眠。</p>
<h3 id="启用"><a href="#启用" class="headerlink" title="启用"></a>启用</h3><p>对于Haswell和更新的消费级Sandy&#x2F;Ivy Bridge，可通过启用XCPM内核的方式实现启用原生电源管理。打开IORegistryExplorer并查找AppleACPICPU，若其下附有X86PlatformPlugin，证明原生电源管理已经启用。</p>
<p>由于Sierra放弃了对Ivy Bridge和Ivy Bridge-E的XCPM支持，因此XCPM方法仅在10.8.5-10.11.6之间受支持。较新的操作系统将需要ssdtPRgen方法。</p>
<p>确保在BIOS下开启以下设置。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>设置</th>
</tr>
</thead>
<tbody><tr>
<td>C States</td>
<td>True</td>
</tr>
<tr>
<td>P States Coordination</td>
<td>SW_ALL</td>
</tr>
</tbody></table>
<details>
<summary>【注意】AMD CPU</summary>

<p>对于AMD CPU，可使用SMCAMDProcessor，链接如下。注意需要在VirtualSMC之后加载。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/trulyspinach/SMCAMDProcessor</span><br></pre></td></tr></table></figure>
</details>

<h4 id="通过XCPM"><a href="#通过XCPM" class="headerlink" title="通过XCPM"></a>通过XCPM</h4><details>
<summary>【注意】旧版操作系统</summary>

<p>要在较旧的操作系统（10.11及更早版本）中启用XCPM，只需在引导参数添加<code>-xcpm</code>，无需进行以下操作。</p>
</details>

<p>打开MaciASL，复制以下链接下的内容，另存为SSDT-PLUG.aml，并放置到Clover的ACPI&#x2F;patched下即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/AcpiSamples/Source/SSDT-PLUG.dsl</span><br></pre></td></tr></table></figure>

<p>也可对以上SSDT进行清理。在DSDT中搜索Processor，查看第一个处理器的名称。以<code>SB.PR00</code>为例，在SSDT中删除除SB.PR00意外以外的条目即可，最后应保留一个External、一个Method、一个If。</p>
<details>
<summary>【旧版】Haswell-E和Broadwell-E</summary>

<p>XCPM不支持Haswell-E和Broadwell-E，但可通过设置Fake CPUID的方式实现。</p>
<p>对于OpenCore，在Kernel-Emulate使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># Haswell-E</span><br><span class="line">Cpuid1Data: C3060300 00000000 00000000 00000000</span><br><span class="line">Cpuid1Mask: FFFFFFFF 00000000 00000000 00000000</span><br><span class="line"></span><br><span class="line"># Broadwell-E</span><br><span class="line">Cpuid1Data: D4060300 00000000 00000000 00000000</span><br><span class="line">Cpuid1Mask: FFFFFFFF 00000000 00000000 00000000</span><br></pre></td></tr></table></figure>
</details>

<h4 id="通过ssdtPRgen"><a href="#通过ssdtPRgen" class="headerlink" title="通过ssdtPRgen"></a>通过ssdtPRgen</h4><p>在Sandy Bridge和Ivy Bridge采用新版系统（10.8.2及以上）时使用。也可用于Core 2、Haswell、Nehalem或Westmere。</p>
<p>对于Haswell，需要将SMBIOS设置为iMac14,x&#x2F;MacBookAir6,x&#x2F;MacBookPro11,x。对于Core 2，需要将SMBIOS设置为MacPro3,1。对于Nehalem或Westmere，需要将SMBIOS设置为iMac11,x&#x2F;MacBookPro6,x&#x2F;MacPro5,1。对于Sandy Bridge，需要将SMBIOS设置为iMac12,x&#x2F;MacMini5,x&#x2F;MacBookPro8,x。对于Ivy Bridge，需要将SMBIOS设置为iMac13,x&#x2F;MacMini6,x&#x2F;MacBookPro9,x&#x2F;MacBookPro10,x。</p>
<p>以OpenCore为例，在配置文件的ACPI-Delete添加以下配置，以暂时删除CpuPm和Cpu0Ist表。</p>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>All</td>
<td>Boolean</td>
<td>YES</td>
</tr>
<tr>
<td>Comment</td>
<td>String</td>
<td>Drop CpuPm</td>
</tr>
<tr>
<td>Enabled</td>
<td>Boolean</td>
<td>YES</td>
</tr>
<tr>
<td>OemTableId</td>
<td>Data</td>
<td>437075506d000000</td>
</tr>
<tr>
<td>TableLength</td>
<td>Number</td>
<td>0</td>
</tr>
<tr>
<td>TableSignature</td>
<td>Data</td>
<td>53534454</td>
</tr>
</tbody></table>
<table>
<thead>
<tr>
<th>Key</th>
<th>Type</th>
<th>Value</th>
</tr>
</thead>
<tbody><tr>
<td>All</td>
<td>Boolean</td>
<td>YES</td>
</tr>
<tr>
<td>Comment</td>
<td>String</td>
<td>Drop Cpu0Ist</td>
</tr>
<tr>
<td>Enabled</td>
<td>Boolean</td>
<td>YES</td>
</tr>
<tr>
<td>OemTableId</td>
<td>Data</td>
<td>4370753049737400</td>
</tr>
<tr>
<td>TableLength</td>
<td>Number</td>
<td>0</td>
</tr>
<tr>
<td>TableSignature</td>
<td>Data</td>
<td>53534454</td>
</tr>
</tbody></table>
<p>重启后使用ssdtPRGen.sh脚本，命令如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">cd ~</span><br><span class="line">curl -o ./ssdtPRGen.sh https://raw.githubusercontent.com/Piker-Alpha/ssdtPRGen.sh/master/ssdtPRGen.sh</span><br><span class="line">chmod +x ./ssdtPRGen.sh</span><br></pre></td></tr></table></figure>

<p>脚本仓库如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Piker-Alpha/ssdtPRGen.sh</span><br></pre></td></tr></table></figure>

<p>完成后得到ssdt.aml，复制到引导器的ACPI目录并重命名为SSDT-PM.aml。重启后将以上添加的两个条目禁用即可。</p>
<details>
<summary>【注意】对于三代/HD4000，无Ivy Bridge电源管理的处理</summary>

<p>应使用Sandy Bridge的SMBIOS，运行Sandy Bridge电源管理。</p>
<p>可忽略<code>IOPlatformPluginUtil : getCPUIDInfo: this is an unknown CPU model 0x3a</code>错误消息。</p>
</details>

<p>若出现<code>ACPI Error: Method parse/execution failed [\_SB._INI] , AE_ALREADY_EXIST</code>错误，则需要修改SSDT格式，如下。主要修改为将Processor物体移至外置，且将所有方法移至CPU设备之内。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;ssdt.aml&quot;, &quot;SSDT&quot;, 1, &quot;APPLE &quot;, &quot;CpuPm&quot;, 0x00021500)</span><br><span class="line">&#123;</span><br><span class="line">    External (\_PR_.CPU0, DeviceObj) // External Processor definition</span><br><span class="line">    External (\_PR_.CPU1, DeviceObj) // External Processor definition</span><br><span class="line"></span><br><span class="line">    Scope (\_PR_.CPU0) // Processor&#x27;s scope</span><br><span class="line">    &#123;</span><br><span class="line">        Name (APLF, Zero)</span><br><span class="line">        Name (APSN, 0x04)</span><br><span class="line">        Name (APSS, Package (0x20)</span><br><span class="line">        &#123;</span><br><span class="line">            /*  … */</span><br><span class="line">        &#125;)</span><br><span class="line"></span><br><span class="line">        Method (ACST, 0, NotSerialized)</span><br><span class="line">        &#123;</span><br><span class="line">            /*  … */</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        /*  … */</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>然后使用ssdtPRGen.sh脚本，同上。</p>
<p>对于Haswell以前，可在Clover配置文件设置KernelAndKextPatches-AppleIntelCPUPM&#x3D;true。有可能需要删除OEM表，即设置ACPI-SSDT-DropOem&#x3D;true，非必要不使用。</p>
<p>对于Haswell及以后，可在Clover的配置文件中设置ACPI-SSDT-Generate-PluginType&#x3D;true，以及KernelAndKextPatches-KernelLapic&#x3D;true。也可使用OC-Little中的X86注入，链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/daliansky/OC-little/tree/master/05-%E6%B3%A8%E5%85%A5%E8%AE%BE%E5%A4%87/05-1-%E6%B3%A8%E5%85%A5X86</span><br></pre></td></tr></table></figure>

<p>对于AMD Radeon笔记本，可能需要删除MCFG表，通过Clover配置文件的ACPI-DropTables即可。</p>
<details>
<summary>【进阶】OC对于Haswell + low-end的电源管理XCPM补丁</summary>

<p>需要使用以下CPUID补丁以仿冒为Ivy Bridge。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cpuid1Data: &lt;A9 06 03 00 00 00 00 00 00 00 00 00 00 00 00 00&gt;</span><br><span class="line">Cpuid1Mask: &lt;FF FF FF FF 00 00 00 00 00 00 00 00 00 00 00 00&gt;</span><br></pre></td></tr></table></figure>

<p>对于10.11及更早版本，再在启动参数添加<code>-xcpm</code>即可。对于10.12及更高版本，则根据CPU类型选用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"># 通用AVX补丁，均需使用</span><br><span class="line">Base: [EMPTY]</span><br><span class="line">Comment: Haswell+ low-end Celeron/Pentium cpuid_set_info_rdmsr (c) vit9696</span><br><span class="line">Count: 1</span><br><span class="line">Enabled: YES</span><br><span class="line">Find: B9A00100000F32</span><br><span class="line">Identifier: kernel</span><br><span class="line">Limit: 0</span><br><span class="line">Mask: [EMPTY]</span><br><span class="line">MatchKernel: [EMPTY]</span><br><span class="line">Replace: B9A001000031C0</span><br><span class="line">ReplaceMask: [EMPTY]</span><br><span class="line">Skip: 0</span><br><span class="line"></span><br><span class="line"># 根据CPU类型选用</span><br><span class="line"># _xcpm_bootstrap, Haswell+ low-end Celeron/Pentium 10.12</span><br><span class="line">Base: _xcpm_bootstrap</span><br><span class="line">Comment: _xcpm_bootstrap (Haswell+ low-end Celeron/Pentium) 10.12</span><br><span class="line">Count: 1</span><br><span class="line">Enabled: YES</span><br><span class="line">Find: C4830022</span><br><span class="line">Identifier: kernel</span><br><span class="line">Limit: 0</span><br><span class="line">Mask: FFFF00FF</span><br><span class="line">MatchKernel: 16.</span><br><span class="line">Replace: C6830022</span><br><span class="line">ReplaceMask: FFFF00FF</span><br><span class="line">Skip: 0</span><br><span class="line"></span><br><span class="line"># _xcpm_bootstrap, Haswell+ low-end Celeron/Pentium 10.13+(10.13-10.15 at least)</span><br><span class="line">Base: _xcpm_bootstrap</span><br><span class="line">Comment: _xcpm_bootstrap (Haswell+ low-end Celeron/Pentium) 10.13+</span><br><span class="line">Count: 1</span><br><span class="line">Enabled: YES</span><br><span class="line">Find: 00C43C22</span><br><span class="line">Identifier: kernel</span><br><span class="line">Limit: 0</span><br><span class="line">Mask: 00FFFFFF</span><br><span class="line">MatchKernel: 16.</span><br><span class="line">Replace: 00C63C22</span><br><span class="line">ReplaceMask: 00FFFFFF</span><br><span class="line">Skip: 0</span><br></pre></td></tr></table></figure>

<p>完成后还可使用性能修复补丁，注意非必要不使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"># XCPM performance fix (10.8.5 - 10.13.3)</span><br><span class="line">Base: [EMPTY]</span><br><span class="line">Comment: XCPM performance fix (c) okrasit 10.8.5 - 10.13.3</span><br><span class="line">Count: 0</span><br><span class="line">Enabled: YES</span><br><span class="line">Find: 89D8C1E0 08000000</span><br><span class="line">Identifier: kernel</span><br><span class="line">Limit: 0</span><br><span class="line">Mask: FFFFFFFF FF000000</span><br><span class="line">MatchKernel: [EMPTY]</span><br><span class="line">Replace: B800FF00 00000000</span><br><span class="line">ReplaceMask: FFFFFFFF FF000000</span><br><span class="line">Skip: 0</span><br><span class="line"></span><br><span class="line"># XCPM performance fix (10.13.4+)</span><br><span class="line">Base: [EMPTY]</span><br><span class="line">Comment: XCPM performance fix (c) okrasit &amp; vit9696 10.13.4+</span><br><span class="line">Count: 0</span><br><span class="line">Enabled: YES</span><br><span class="line">Find: C1E3084863D389D048C1EA20B99901</span><br><span class="line">Identifier: kernel</span><br><span class="line">Limit: 0</span><br><span class="line">Mask: [EMPTY]</span><br><span class="line">MatchKernel: [EMPTY]</span><br><span class="line">Replace: C1E308B800FF000031D29090B99901</span><br><span class="line">ReplaceMask: [EMPTY]</span><br><span class="line">Skip: 0</span><br></pre></td></tr></table></figure>
</details>

<h3 id="变频"><a href="#变频" class="headerlink" title="变频"></a>变频</h3><h4 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h4><h5 id="LFM"><a href="#LFM" class="headerlink" title="LFM"></a>LFM</h5><p>即Low Frequency Mode，表示空闲时的最低值。LFM值仅适用于Broadwell和更新的SMBIOS。</p>
<p>可通过以下网站查看TDP-down Frequency以确定。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://ark.intel.com/content/www/us/en/ark.html</span><br></pre></td></tr></table></figure>

<p>也可使用以下值。</p>
<table>
<thead>
<tr>
<th>CPU次代</th>
<th>LFM值</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Broadwell+ Laptops</td>
<td>08</td>
<td>相当于800Mhz</td>
</tr>
<tr>
<td>Broadwell+ Desktops</td>
<td>0A</td>
<td>相当于1000Mhz</td>
</tr>
<tr>
<td>Haswell&#x2F;Broadwell HEDT&#x2F;Server（如X99）</td>
<td>0D</td>
<td>相当于1300Mhz</td>
</tr>
<tr>
<td>Skylake+ HEDT&#x2F;Server（如X299）</td>
<td>0C</td>
<td>相当于1200Mhz</td>
</tr>
</tbody></table>
<h5 id="EPP"><a href="#EPP" class="headerlink" title="EPP"></a>EPP</h5><p>即Energy Performance Preference，表示将CPU加速到其完整时钟的速度。EPP值仅适用于Skylake和更新的SMBIOS。</p>
<p>00表示最快，FF表示最慢。设置列表如下。</p>
<table>
<thead>
<tr>
<th>EPP</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>0x00-0x3F</td>
<td>最大性能</td>
</tr>
<tr>
<td>0x40-0x7F</td>
<td>平衡性能</td>
</tr>
<tr>
<td>0x80-0xBF</td>
<td>平衡省电</td>
</tr>
<tr>
<td>0xC0-0xFF</td>
<td>最大省电</td>
</tr>
</tbody></table>
<h5 id="Perf-Bias"><a href="#Perf-Bias" class="headerlink" title="Perf-Bias"></a>Perf-Bias</h5><p>即Performance Bias，确定CPU的期望整体性能。</p>
<h4 id="通过CPUFriendFriend"><a href="#通过CPUFriendFriend" class="headerlink" title="通过CPUFriendFriend"></a>通过CPUFriendFriend</h4><p>下载以下包，解压后运行CPUFriendFriend.command。运行完成后将获得CPUFriendDataProvider.kext和ssdt_data.aml，二者选其一放置即可。</p>
<p>建议放置CPUFriendDataProvider.kext。若放置ssdt_data.aml，则不再需要SSDT-PLUG。但此SSDT的设置在X99&#x2F;X299等HEDT平台上已损坏。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/corpnewt/CPUFriendFriend</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】CPUFriend的注意事项</summary>

<p>在OpenCore中无需考虑CPUFriendDataProvider的注入顺序，因为它仅为一个plist-only kext。</p>
<p>CPUFriend导致的唤醒问题可能是由于不正确的频率设置，需要修改生成配置以达到稳定效果。该问题主要表现为出现<code>Sleep Wake failure in efi</code>的panic。</p>
</details>

<h4 id="通过one-key-cpufriend"><a href="#通过one-key-cpufriend" class="headerlink" title="通过one-key-cpufriend"></a>通过one-key-cpufriend</h4><p>不推荐，会创建不良频率向量。</p>
<p>在终端下输入以下命令以执行一键CPU变频脚本。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash -c &quot;$(curl -fsSL https://raw.githubusercontent.com/stevezhengshiqi/one-key-cpufriend/master/one-key-cpufriend_cn.sh)&quot;</span><br></pre></td></tr></table></figure>

<p>完成后把桌面的CPUFriend.kext和CPUFriendDataProvider.kext放到Clover的kexts中即可。</p>
<h4 id="通过kexts"><a href="#通过kexts" class="headerlink" title="通过kexts"></a>通过kexts</h4><p>放置CPUFriend.kext即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/CPUFriend</span><br></pre></td></tr></table></figure>

<h2 id="锁频"><a href="#锁频" class="headerlink" title="锁频"></a>锁频</h2><h3 id="通过Clover-1"><a href="#通过Clover-1" class="headerlink" title="通过Clover"></a>通过Clover</h3><p>打开Clover的配置文件，进入Cpu，开启HWPEnable和UseARTFrequency，并修改HWPValue为频率值，如i5 10400可设为002B2B2B，其中2B化为十进制为43，即4.3GHz，保存即可。</p>
<p>HWPValue即为CPU的IA32_HWP_REQUEST寄存器，以002B2B2B为例说明如下。</p>
<table>
<thead>
<tr>
<th>位置</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>00</td>
<td>00代表高性能，94代表节能</td>
</tr>
<tr>
<td>2B</td>
<td></td>
</tr>
<tr>
<td>2B</td>
<td>最高频率（十六进制）</td>
</tr>
<tr>
<td>2B</td>
<td>最低频率（十六进制）</td>
</tr>
</tbody></table>
<h3 id="通过kexts-1"><a href="#通过kexts-1" class="headerlink" title="通过kexts"></a>通过kexts</h3><p>下载HWPEnable.kext，修改HWPEnabler.kext&#x2F;Contents&#x2F;Info.plist中的HWPDeaultVal为频率值，同上。修改完成后放置到引导器即可。</p>
<h1 id="硬盘配置"><a href="#硬盘配置" class="headerlink" title="硬盘配置"></a>硬盘配置</h1><p>不支持三星PM981&#x2F;PM991、Micron 2200S、Intel 660p以及任何基于eMMC的硬盘。</p>
<p>Samsung 970 EVO Plus NVMe SSD可通过固件更新修复相关问题。</p>
<p>对于所有NVMe SSD，建议使用以下kext修复功率和能耗。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/NVMeFix</span><br></pre></td></tr></table></figure>

<h2 id="SSD开启TRIM"><a href="#SSD开启TRIM" class="headerlink" title="SSD开启TRIM"></a>SSD开启TRIM</h2><p>在终端输入以下命令以打开TRIM。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo trimforce enable</span><br></pre></td></tr></table></figure>

<p>若执行后TRIM仍未开启，则需要通过Clover打kext补丁。打开Clover的config.plist，选择Kernel and Kext Pathches-Kext Pathches，添加以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Name*: IOAHCIBlockStorage</span><br><span class="line">Find*[HEX]: 4150504C452053534400 </span><br><span class="line">Replace*[HEX]: 00000000000000000000 </span><br></pre></td></tr></table></figure>

<h2 id="屏蔽三星PM981-NVMe-SSD"><a href="#屏蔽三星PM981-NVMe-SSD" class="headerlink" title="屏蔽三星PM981 NVMe SSD"></a>屏蔽三星PM981 NVMe SSD</h2><p>PM981可能会引起系统死机。放置以下SSDT即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">DefinitionBlock (&quot;&quot;, &quot;SSDT&quot;, 2, &quot;hack&quot;, &quot;NVMe-Pcc&quot;, 0x00000000)</span><br><span class="line">&#123;</span><br><span class="line">    External (_SB_.PCI0.RP09.PXSX, DeviceObj)</span><br><span class="line"></span><br><span class="line">    Method (_SB.PCI0.RP09.PXSX._DSM, 4, NotSerialized)</span><br><span class="line">    &#123;</span><br><span class="line">        If (!Arg2)</span><br><span class="line">        &#123;</span><br><span class="line">            Return (Buffer (One)</span><br><span class="line">            &#123;</span><br><span class="line">                 0x03</span><br><span class="line">            &#125;)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        Return (Package (0x02)</span><br><span class="line">        &#123;</span><br><span class="line">            &quot;class-code&quot;, </span><br><span class="line">            Buffer (0x04)</span><br><span class="line">            &#123;</span><br><span class="line">                 0xFF, 0x08, 0x01, 0x00</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="睡眠相关"><a href="#睡眠相关" class="headerlink" title="睡眠相关"></a>睡眠相关</h1><h2 id="打开"><a href="#打开" class="headerlink" title="打开"></a>打开</h2><p>在终端输入以下命令，可打开Clover为黑苹果修补的休眠功能。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pmset -a hibernatemode 29（或21）</span><br></pre></td></tr></table></figure>

<p>在Clover的kexts文件夹放置HibernationFixup.kext，并在启动参数中加<code>-hbfxbeta</code>，即可实现hibernatemode 3休眠，下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/HibernationFixup</span><br></pre></td></tr></table></figure>

<h2 id="关闭"><a href="#关闭" class="headerlink" title="关闭"></a>关闭</h2><p>黑苹果不支持挂起到磁盘的休眠或S4睡眠。</p>
<p>首先需要打开Clover配置文件，将NeverHibernate设置为true，并添加启动参数<code>swd_panic=1</code>，以避免进入睡眠后重启的问题，并给出相应的panic日志。然后在终端输入以下命令以禁止。</p>
<details>
<summary>【进阶】对于OpenCore</summary>

<p>还需在配置文件中设置Misc-Boot-HibernateMode为None，以避免S4睡眠。</p>
</details>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 设置睡眠模式为3</span><br><span class="line">sudo pmset -a hibernatemode 0</span><br><span class="line"></span><br><span class="line"># 禁用自动关机（一种休眠形式）</span><br><span class="line">sudo pmset -a autopoweroff 0</span><br><span class="line"></span><br><span class="line"># 禁用powernap（定期唤醒机器以保持网络和进行更新）</span><br><span class="line">sudo pmset -a powernap 0</span><br><span class="line"></span><br><span class="line"># 禁用待机</span><br><span class="line">sudo pmset -a standby 0</span><br><span class="line"></span><br><span class="line"># 禁用从iPhone/Watch唤醒</span><br><span class="line"># 解决合盖后遇到偶发性的随机唤醒，如Thinkpad合盖后A面红色指示灯开始闪烁（表示设备已经睡眠），但一会以后指示灯进入常亮，而开盖屏幕不会点亮</span><br><span class="line">sudo pmset -a proximitywake 0</span><br><span class="line"></span><br><span class="line"># 禁用TCP Keep Alive机制</span><br><span class="line"># 以防止每2小时唤醒一次</span><br><span class="line">sudo pmset -a tcpkeepalive 0</span><br><span class="line"></span><br><span class="line"># 删除睡眠映像并防止再次生成</span><br><span class="line">sudo rm /var/vm/sleepimage</span><br><span class="line">sudo mkdir /var/vm/sleepimage</span><br></pre></td></tr></table></figure>

<p>以上终端操作也可由Hackintool完成。在Hackintool里切换到<code>电源</code>选项卡，点击最下方的齿轮按钮即可。</p>
<h2 id="修复-1"><a href="#修复-1" class="headerlink" title="修复"></a>修复</h2><p>若睡眠后无法唤醒，如合盖后系统死机，则可能是设备不正确导致。因为当设备收到S3调用（或S0用于唤醒）时，驱动程序需要关闭设备电源并进入低状态模式（唤醒时反之亦然）。当此类设备不与驱动程序配合，就会出现问题。</p>
<p>首先需要关闭睡眠，放置HibernationFixup，并按以下配置BIOS。</p>
<table>
<thead>
<tr>
<th>选项</th>
<th>配置</th>
<th>说明</th>
</tr>
</thead>
<tbody><tr>
<td>Wake on LAN</td>
<td>Disabled</td>
<td></td>
</tr>
<tr>
<td>Trusted Platform Module</td>
<td>Disabled</td>
<td>若在Windows中使用BitLocker，禁用此功能将导致所有加密密钥丢失</td>
</tr>
<tr>
<td>Wake on USB</td>
<td>Disabled</td>
<td>大多数主板会通过该功能执行随机唤醒</td>
</tr>
<tr>
<td>Wake on Bluetooth</td>
<td>Disabled</td>
<td>需要使用蓝牙设备唤醒（如键盘）则可开启</td>
</tr>
</tbody></table>
<p>设置Clover配置文件的FixDSDTMask&#x3D;0x30DF可能会解决问题。</p>
<h3 id="网卡检查"><a href="#网卡检查" class="headerlink" title="网卡检查"></a>网卡检查</h3><p>检查系统是否有两个有线网卡，一般为NullEthernet与有线网卡驱动共同使用造成的。若是，则删除NullEthernet后查看是否已经恢复正常。</p>
<h3 id="显卡检查"><a href="#显卡检查" class="headerlink" title="显卡检查"></a>显卡检查</h3><p>检查显卡驱动是否正常、注入EDID并开启Hidpi。可能需要禁用独显。</p>
<p>也可能是背光设置不正确，更换SSDT-PNLF即可。也可能是合盖唤醒检测损坏，在终端输入以下命令禁用即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo pmset lidwake 0</span><br></pre></td></tr></table></figure>

<p>也可能是PS2键盘在唤醒时发送了垃圾内容，导致唤醒错误。使用 SSDT-HP-FixLidSleep，并将ACPI路径修改为键盘路径即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/VoodooPS2/blob/master/Docs/ACPI/SSDT-HP-FixLidSleep.dsl</span><br></pre></td></tr></table></figure>

<h3 id="声卡检查"><a href="#声卡检查" class="headerlink" title="声卡检查"></a>声卡检查</h3><p>错误的音频设备也可能会导致睡眠问题。</p>
<h3 id="SMBus检查"><a href="#SMBus检查" class="headerlink" title="SMBus检查"></a>SMBus检查</h3><p>SMBus未正确加载将可能导致睡眠问题。</p>
<h3 id="TSC检查"><a href="#TSC检查" class="headerlink" title="TSC检查"></a>TSC检查</h3><p>TSC（Time Stamp Counter，时间戳计数器）确保硬件以正确速度运行，某些固件可能不会将TSC写入内核的某部分而出现问题。TSC出错时常伴随登录界面输入密码后立即卡住冻结的错误，也会导致屏幕残影。</p>
<p>对于笔记本电脑，可直接使用CpuTscSync。CpuTscSync结合了VoodooTSCSync的功能并在TSC不同步的情况下禁用xcpm_urgency。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/CpuTscSync</span><br></pre></td></tr></table></figure>

<p>对于大多数HEDT硬件，可使用VoodooTSCSync。VoodooTSCSync校正华硕HEDT&#x2F;Server主板上的TSC，改善时间、音频和视频的同步。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://bitbucket.org/RehabMan/VoodooTSCSync/downloads/</span><br><span class="line">https://github.com/IOIIIO/AMDVanilla/raw/master/files/VoodooTSCSyncAMD.zip</span><br></pre></td></tr></table></figure>

<p>打开终端并输入以下命令，记录输出。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo $(($(sysctl -n hw.ncpu) - 1))</span><br></pre></td></tr></table></figure>

<p>在kext上右键点击显示包内容，打开Contents&#x2F;Info.plist，搜索<code>#CORE</code>并替换为刚才所得的值，保存即可使用该kext。</p>
<p>放置VoodooTSCSync后还需要放置TSCAdjustReset。下载后在kext上右键点击显示包内容，打开Contents&#x2F;Info.plist，将IOKitPersonalities-IOPropertyMatch-IOCPUNumber更改为从0开始的CPU线程数，保存即可使用该kext。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/khronokernel/Opencore-Vanilla-Desktop-Guide/blob/master/extra-files/TSCAdjustReset.kext.zip</span><br></pre></td></tr></table></figure>

<h3 id="RTC检查"><a href="#RTC检查" class="headerlink" title="RTC检查"></a>RTC检查</h3><p>RTC可能被禁用，或RTC与系统不兼容。可尝试在Clover的配置文件勾选FixRTC。</p>
<p>对于第一个问题，可使用SSDT-AWAC或SSDT-RTC0-RANGE-HEDT，如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># SSDT-AWAC</span><br><span class="line"># 适用于大多数主板</span><br><span class="line">https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/compiled/SSDT-AWAC.aml</span><br><span class="line"></span><br><span class="line"># SSDT-RTC0-RANGE-HEDT</span><br><span class="line"># 适用于Intel的X99和X299平台</span><br><span class="line">https://github.com/dortania/Getting-Started-With-ACPI/blob/master/extra-files/compiled/SSDT-RTC0-RANGE-HEDT.aml</span><br></pre></td></tr></table></figure>

<p>对于第二个问题，一般会在启动时出现<code>BIOS Restarted in Safemode</code>错误。</p>
<p>对于OpenCore，可在配置文件开启DisableRtcChecksum以防止写入主校验和（0x58-0x59）。</p>
<p>然后设置UEFI-ProtoclOverride-AppleRtcRam和NVRAM-Add-rtc-blacklist，将某些区域列入黑名单。</p>
<p>同时需要使用RTCMemoryFixup，添加<code>rtcfx_exclude=</code>启动参数，将某些区域列入黑名单。该参数的范围为0x00-0xFF，其中0x00-0x0D的偏移不会引起任何冲突，0x80-0xAB的偏移用于存储休眠信息（IOHibernateRTCVariables），0xB0-0xB4的偏移用于PowerManagement功能。</p>
<p>RTCMemoryFixup下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/RTCMemoryFixup</span><br></pre></td></tr></table></figure>

<details>
<summary>【旧版】对于Z68主板</summary>

<p>可能需要修复DSDT。打开DSDT并查找RTC设备，然后替换为以下内容，保存后放置到引导器的ACPI目录。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">Device (RTC)</span><br><span class="line">&#123;</span><br><span class="line">    Name (_HID, EisaId (&quot;PNP0B00&quot;))  // _HID: Hardware ID</span><br><span class="line">    Name (_CRS, ResourceTemplate ()  // _CRS: Current Resource Settings</span><br><span class="line">    &#123;</span><br><span class="line">        IO (Decode16,</span><br><span class="line">            0x0070,             // Range Minimum</span><br><span class="line">            0x0070,             // Range Maximum</span><br><span class="line">            0x00,               // Alignment</span><br><span class="line">            0x02,               // Length</span><br><span class="line">            )</span><br><span class="line">    &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</details>

<h3 id="NVMe检查"><a href="#NVMe检查" class="headerlink" title="NVMe检查"></a>NVMe检查</h3><p>检查NVMe是否已经完成修复。</p>
<h3 id="CPU电源管理检查"><a href="#CPU电源管理检查" class="headerlink" title="CPU电源管理检查"></a>CPU电源管理检查</h3><p>检查CPU电源管理是否正常工作。</p>
<h3 id="Thunderbolt检查"><a href="#Thunderbolt检查" class="headerlink" title="Thunderbolt检查"></a>Thunderbolt检查</h3><p>可在BIOS禁用Thunderbolt 3，以保证Thunderbolt与睡眠可同时工作。</p>
<p>或尝试修补Thunderbolt。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://osy.gitbook.io/hac-mini-guide/details/thunderbolt-3-fix/</span><br><span class="line">https://github.com/osy/ThunderboltReset</span><br><span class="line">https://github.com/al3xtjames/ThunderboltPkg</span><br></pre></td></tr></table></figure>

<h3 id="USB检查"><a href="#USB检查" class="headerlink" title="USB检查"></a>USB检查</h3><p>可尝试进行USB定制。</p>
<p>也有可能是USB3导致的问题，向DSDT打以下补丁即可。</p>
<p>对于0x0d使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">#Maintained by: RehabMan for: Laptop Patches</span><br><span class="line">#usb_prw_0x0d_xhc.txt</span><br><span class="line"></span><br><span class="line"># remove _PRW methods to prevent instant wake</span><br><span class="line"></span><br><span class="line"># delete any existing XHC1 device</span><br><span class="line">into device label XHC1 name_adr 0x00140000 remove_entry;</span><br><span class="line"># delete any existing USB2 device</span><br><span class="line">into device label USB2 name_adr 0x001D0000 remove_entry;</span><br><span class="line"></span><br><span class="line"># if _PRW objects are methods</span><br><span class="line">into method label _PRW parent_adr 0x001D0000 remove_entry;</span><br><span class="line">into method label _PRW parent_adr 0x001A0000 remove_entry;</span><br><span class="line">into method label _PRW parent_adr 0x00140000 remove_entry;</span><br><span class="line">into method label _PRW parent_adr 0x001B0000 remove_entry;</span><br><span class="line"># some other LAN cards use 0x00190000</span><br><span class="line">into method label _PRW parent_adr 0x00190000 remove_entry;</span><br><span class="line"></span><br><span class="line"># if _PRW methods are stuffed into a separate scope</span><br><span class="line">into method label _PRW parent_label _SB.PCI0.EHC1 remove_entry;</span><br><span class="line">into method label _PRW parent_label _SB.PCI0.EHC2 remove_entry;</span><br><span class="line">into method label _PRW parent_label _SB.PCI0.XHC remove_entry;</span><br><span class="line">into method label _PRW parent_label \_SB.PCI0.EHC1 remove_entry;</span><br><span class="line">into method label _PRW parent_label \_SB.PCI0.EHC2 remove_entry;</span><br><span class="line">into method label _PRW parent_label \_SB.PCI0.XHC remove_entry;</span><br><span class="line"></span><br><span class="line"># if _PRW objects are names</span><br><span class="line">into device name_adr 0x001D0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x001A0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x00140000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x001B0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x00190000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line"># some _PRW have three entries in the Package</span><br><span class="line">into device name_adr 0x001D0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x001A0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x00140000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x001B0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x00190000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line"></span><br><span class="line"># seems to work better if _PRW is present, but returns 0 (original was 3) for sleep state</span><br><span class="line">into device name_adr 0x001D0000 insert begin Name(_PRW, Package() &#123; 0x0D, 0 &#125;) end;</span><br><span class="line">into device name_adr 0x001A0000 insert begin Name(_PRW, Package() &#123; 0x0D, 0 &#125;) end;</span><br><span class="line">into device name_adr 0x00140000 insert begin Name(_PRW, Package() &#123; 0x0D, 0 &#125;) end;</span><br><span class="line">into device name_adr 0x001B0000 insert begin Name(_PRW, Package() &#123; 0x0D, 0 &#125;) end;</span><br><span class="line">into device name_adr 0x00190000 insert begin Name(_PRW, Package() &#123; 0x0D, 0 &#125;) end;</span><br><span class="line"></span><br><span class="line"># rename XHC to XHC1</span><br><span class="line"># rename is not a good idea for 10.11, maybe not for prior versions</span><br><span class="line"># disabled for now</span><br><span class="line"></span><br><span class="line">#into device label XHC set_label begin XHC1 end;</span><br><span class="line">#into_all all code_regex XHC\. replaceall_matched begin XHC1. end;</span><br><span class="line">#into_all all code_regex XHC_\. replaceall_matched begin XHC1. end;</span><br><span class="line">#into_all all code_regex \.XHC, replaceall_matched begin .XHC1, end;</span><br><span class="line"></span><br><span class="line">#Maintained by: RehabMan for: Laptop Patches</span><br><span class="line">#usb_USB_7-series.txt</span><br><span class="line"></span><br><span class="line"># USB property injection for 7-series boards (originally HM76)</span><br><span class="line"></span><br><span class="line"># Insert Apple USB properties into EHC1</span><br><span class="line">into method label _DSM parent_adr 0x001D0000 remove_entry;</span><br><span class="line">into device name_adr 0x001D0000 insert</span><br><span class="line">begin</span><br><span class="line">Method (_DSM, 4, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    If (LEqual (Arg2, Zero)) &#123; Return (Buffer() &#123; 0x03 &#125; ) &#125;\n</span><br><span class="line">    Return (Package()\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        &quot;subsystem-id&quot;, Buffer() &#123; 0x70, 0x72, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;subsystem-vendor-id&quot;, Buffer() &#123; 0x86, 0x80, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;AAPL,current-available&quot;, 2100,\n</span><br><span class="line">        &quot;AAPL,current-extra&quot;, 2200,\n</span><br><span class="line">        &quot;AAPL,current-extra-in-sleep&quot;, 1600,\n</span><br><span class="line">        &quot;AAPL,device-internal&quot;, 0x02,\n</span><br><span class="line">        &quot;AAPL,max-port-current-in-sleep&quot;, 2100,\n</span><br><span class="line">    &#125;)\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line"># Insert Apple USB properties into EHC2</span><br><span class="line">into method label _DSM parent_adr 0x001A0000 remove_entry;</span><br><span class="line">into device name_adr 0x001A0000 insert</span><br><span class="line">begin</span><br><span class="line">Method (_DSM, 4, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    If (LEqual (Arg2, Zero)) &#123; Return (Buffer() &#123; 0x03 &#125; ) &#125;\n</span><br><span class="line">    Return (Package()\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        &quot;subsystem-id&quot;, Buffer() &#123; 0x70, 0x72, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;subsystem-vendor-id&quot;, Buffer() &#123; 0x86, 0x80, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;AAPL,current-available&quot;, 2100,\n</span><br><span class="line">        &quot;AAPL,current-extra&quot;, 2200,\n</span><br><span class="line">        &quot;AAPL,current-extra-in-sleep&quot;, 1600,\n</span><br><span class="line">        &quot;AAPL,device-internal&quot;, 0x02,\n</span><br><span class="line">        &quot;AAPL,max-port-current-in-sleep&quot;, 2100,\n</span><br><span class="line">    &#125;)\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line"># Insert Apple USB properties into USB 3.0 XHC</span><br><span class="line">into method label _DSM parent_adr 0x00140000 remove_entry;</span><br><span class="line">into device name_adr 0x00140000 insert</span><br><span class="line">begin</span><br><span class="line">Method (_DSM, 4, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    If (LEqual (Arg2, Zero)) &#123; Return (Buffer() &#123; 0x03 &#125; ) &#125;\n</span><br><span class="line">    Return (Package()\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        &quot;subsystem-id&quot;, Buffer() &#123; 0x70, 0x72, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;subsystem-vendor-id&quot;, Buffer() &#123; 0x86, 0x80, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;AAPL,current-available&quot;, 2100,\n</span><br><span class="line">        &quot;AAPL,current-extra&quot;, 2200,\n</span><br><span class="line">        &quot;AAPL,current-extra-in-sleep&quot;, 1600,\n</span><br><span class="line">        &quot;AAPL,device-internal&quot;, 0x02,\n</span><br><span class="line">        &quot;AAPL,max-port-current-in-sleep&quot;, 2100,\n</span><br><span class="line">    &#125;)\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line"># special cases... (not in u430 DSDT)</span><br><span class="line">#into scope label _SB.PCI0.XHC.RHUB.HS05 set_label begin _SB.PCI0.XHC1.RHUB.HS05 end;</span><br></pre></td></tr></table></figure>

<p>对于0x6d使用以下补丁。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br></pre></td><td class="code"><pre><span class="line">#Maintained by: RehabMan for: Laptop Patches</span><br><span class="line">#usb_prw_0x6d_xhc.txt</span><br><span class="line"></span><br><span class="line"># remove _PRW methods to prevent instant wake</span><br><span class="line"></span><br><span class="line"># delete any existing XHC1 device</span><br><span class="line">into device label XHC1 name_adr 0x00140000 remove_entry;</span><br><span class="line"># delete any existing USB2 device</span><br><span class="line">into device label USB2 name_adr 0x001D0000 remove_entry;</span><br><span class="line"></span><br><span class="line"># if _PRW objects are methods</span><br><span class="line">into method label _PRW parent_adr 0x001D0000 remove_entry;</span><br><span class="line">into method label _PRW parent_adr 0x001A0000 remove_entry;</span><br><span class="line">into method label _PRW parent_adr 0x00140000 remove_entry;</span><br><span class="line">into method label _PRW parent_adr 0x001B0000 remove_entry;</span><br><span class="line"># some other LAN cards use 0x00190000</span><br><span class="line">into method label _PRW parent_adr 0x00190000 remove_entry;</span><br><span class="line"></span><br><span class="line"># if _PRW methods are stuffed into a separate scope</span><br><span class="line">into method label _PRW parent_label _SB.PCI0.EHC1 remove_entry;</span><br><span class="line">into method label _PRW parent_label _SB.PCI0.EHC2 remove_entry;</span><br><span class="line">into method label _PRW parent_label _SB.PCI0.XHC remove_entry;</span><br><span class="line">into method label _PRW parent_label \_SB.PCI0.EHC1 remove_entry;</span><br><span class="line">into method label _PRW parent_label \_SB.PCI0.EHC2 remove_entry;</span><br><span class="line">into method label _PRW parent_label \_SB.PCI0.XHC remove_entry;</span><br><span class="line"></span><br><span class="line"># if _PRW objects are names</span><br><span class="line">into device name_adr 0x001D0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x001A0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x00140000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x001B0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x00190000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line"># some _PRW have three entries in the Package</span><br><span class="line">into device name_adr 0x001D0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x001A0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x00140000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x001B0000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line">into device name_adr 0x00190000 code_regex Name.*_PRW.*\n.*\n.*\n.*\n.*\n.*\&#125;\) remove_matched;</span><br><span class="line"></span><br><span class="line"># seems to work better if _PRW is present, but returns 0 (original was 3) for sleep state</span><br><span class="line">into device name_adr 0x001D0000 insert begin Name(_PRW, Package() &#123; 0x6D, 0 &#125;) end;</span><br><span class="line">into device name_adr 0x001A0000 insert begin Name(_PRW, Package() &#123; 0x6D, 0 &#125;) end;</span><br><span class="line">into device name_adr 0x00140000 insert begin Name(_PRW, Package() &#123; 0x6D, 0 &#125;) end;</span><br><span class="line">into device name_adr 0x001B0000 insert begin Name(_PRW, Package() &#123; 0x6D, 0 &#125;) end;</span><br><span class="line">into device name_adr 0x00190000 insert begin Name(_PRW, Package() &#123; 0x6D, 0 &#125;) end;</span><br><span class="line"></span><br><span class="line"># rename XHC to XHC1</span><br><span class="line"># rename is not a good idea for 10.11, maybe not for prior versions</span><br><span class="line"># disabled for now</span><br><span class="line"></span><br><span class="line">#into device label XHC set_label begin XHC1 end;</span><br><span class="line">#into_all all code_regex XHC\. replaceall_matched begin XHC1. end;</span><br><span class="line">#into_all all code_regex XHC_\. replaceall_matched begin XHC1. end;</span><br><span class="line">#into_all all code_regex \.XHC, replaceall_matched begin .XHC1, end;</span><br><span class="line"></span><br><span class="line">#Maintained by: RehabMan for: Laptop Patches</span><br><span class="line">#usb_USB_7-series.txt</span><br><span class="line"></span><br><span class="line"># USB property injection for 7-series boards (originally HM76)</span><br><span class="line"></span><br><span class="line"># Insert Apple USB properties into EHC1</span><br><span class="line">into method label _DSM parent_adr 0x001D0000 remove_entry;</span><br><span class="line">into device name_adr 0x001D0000 insert</span><br><span class="line">begin</span><br><span class="line">Method (_DSM, 4, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    If (LEqual (Arg2, Zero)) &#123; Return (Buffer() &#123; 0x03 &#125; ) &#125;\n</span><br><span class="line">    Return (Package()\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        &quot;subsystem-id&quot;, Buffer() &#123; 0x70, 0x72, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;subsystem-vendor-id&quot;, Buffer() &#123; 0x86, 0x80, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;AAPL,current-available&quot;, 2100,\n</span><br><span class="line">        &quot;AAPL,current-extra&quot;, 2200,\n</span><br><span class="line">        &quot;AAPL,current-extra-in-sleep&quot;, 1600,\n</span><br><span class="line">        &quot;AAPL,device-internal&quot;, 0x02,\n</span><br><span class="line">        &quot;AAPL,max-port-current-in-sleep&quot;, 2100,\n</span><br><span class="line">    &#125;)\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line"># Insert Apple USB properties into EHC2</span><br><span class="line">into method label _DSM parent_adr 0x001A0000 remove_entry;</span><br><span class="line">into device name_adr 0x001A0000 insert</span><br><span class="line">begin</span><br><span class="line">Method (_DSM, 4, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    If (LEqual (Arg2, Zero)) &#123; Return (Buffer() &#123; 0x03 &#125; ) &#125;\n</span><br><span class="line">    Return (Package()\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        &quot;subsystem-id&quot;, Buffer() &#123; 0x70, 0x72, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;subsystem-vendor-id&quot;, Buffer() &#123; 0x86, 0x80, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;AAPL,current-available&quot;, 2100,\n</span><br><span class="line">        &quot;AAPL,current-extra&quot;, 2200,\n</span><br><span class="line">        &quot;AAPL,current-extra-in-sleep&quot;, 1600,\n</span><br><span class="line">        &quot;AAPL,device-internal&quot;, 0x02,\n</span><br><span class="line">        &quot;AAPL,max-port-current-in-sleep&quot;, 2100,\n</span><br><span class="line">    &#125;)\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line"># Insert Apple USB properties into USB 3.0 XHC</span><br><span class="line">into method label _DSM parent_adr 0x00140000 remove_entry;</span><br><span class="line">into device name_adr 0x00140000 insert</span><br><span class="line">begin</span><br><span class="line">Method (_DSM, 4, NotSerialized)\n</span><br><span class="line">&#123;\n</span><br><span class="line">    If (LEqual (Arg2, Zero)) &#123; Return (Buffer() &#123; 0x03 &#125; ) &#125;\n</span><br><span class="line">    Return (Package()\n</span><br><span class="line">    &#123;\n</span><br><span class="line">        &quot;subsystem-id&quot;, Buffer() &#123; 0x70, 0x72, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;subsystem-vendor-id&quot;, Buffer() &#123; 0x86, 0x80, 0x00, 0x00 &#125;,\n</span><br><span class="line">        &quot;AAPL,current-available&quot;, 2100,\n</span><br><span class="line">        &quot;AAPL,current-extra&quot;, 2200,\n</span><br><span class="line">        &quot;AAPL,current-extra-in-sleep&quot;, 1600,\n</span><br><span class="line">        &quot;AAPL,device-internal&quot;, 0x02,\n</span><br><span class="line">        &quot;AAPL,max-port-current-in-sleep&quot;, 2100,\n</span><br><span class="line">    &#125;)\n</span><br><span class="line">&#125;\n</span><br><span class="line">end;</span><br><span class="line"></span><br><span class="line"># special cases... (not in u430 DSDT)</span><br><span class="line">#into scope label _SB.PCI0.XHC.RHUB.HS05 set_label begin _SB.PCI0.XHC1.RHUB.HS05 end;</span><br></pre></td></tr></table></figure>

<details>
<summary>【注意】Catalina的IOClass</summary>

<p>对于Catalina上的USB睡眠问题，可能还需要将USBMap.kext（或&#x2F;System&#x2F;Library&#x2F;Extensions&#x2F;IOUSBHostFamily.kext&#x2F;Contents&#x2F;PlugIns&#x2F;AppleUSBHostPlatformProperties.kext&#x2F;Contents&#x2F;Info.plist）的IOClass由AppleUSBMergeNub修改为AppleUSBHostMergeProperties。</p>
</details>

<h3 id="IRQ检查"><a href="#IRQ检查" class="headerlink" title="IRQ检查"></a>IRQ检查</h3><p>IRQ问题有可能导致睡眠不正常。</p>
<h2 id="常见问题-2"><a href="#常见问题-2" class="headerlink" title="常见问题"></a>常见问题</h2><h3 id="修复休眠后摄像头失效"><a href="#修复休眠后摄像头失效" class="headerlink" title="修复休眠后摄像头失效"></a>修复休眠后摄像头失效</h3><p>在终端输入以下命令即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo killall VDCAssistant</span><br></pre></td></tr></table></figure>

<h1 id="系统时间调整"><a href="#系统时间调整" class="headerlink" title="系统时间调整"></a>系统时间调整</h1><p>Windows把系统硬件时间当作本地时间，即操作系统中显示的时间跟BIOS中显示的时间一致。而Linux&#x2F;Mac把硬件时间当作UTC，操作系统中显示的时间是硬件时间经过换算得来的，比如说北京时间是 GMT+8，则系统中显示时间是硬件时间+8。因此两个系统的时间会出现差异。</p>
<p>在Windows以管理员身份打开命令提示符，输入下列命令并重启以修复两个系统时间不一致的问题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Reg add HKLM\SYSTEM\CurrentControlSet\Control\TimeZoneInformation /v RealTimeIsUniversal /t REG_DWORD /d 1</span><br></pre></td></tr></table></figure>

<p>若仍不一致，则在Windows下修改时间为自动获取，在Mac下把时区改成北京并开启自动获取，重新启动即可。</p>
<h1 id="完成度检查"><a href="#完成度检查" class="headerlink" title="完成度检查"></a>完成度检查</h1><p>对于笔记本，可通过以下选项进行完成度检查。</p>
<h2 id="变频测试"><a href="#变频测试" class="headerlink" title="变频测试"></a>变频测试</h2><p>使用CPU-S进行变频测试，二档可用，八档以上优秀。下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://bbs.pcbeta.com/viewthread-1698338-1-1.html</span><br></pre></td></tr></table></figure>

<p>也可使用DPCI Manager查看。打开DPCI Manager并点击P States即可。</p>
<h2 id="显示"><a href="#显示" class="headerlink" title="显示"></a>显示</h2><p>分辨率和显存显示正常，支持DP、HDMI外接显示，风扇不持续高速旋转，原生亮度调节正常。</p>
<h2 id="声音"><a href="#声音" class="headerlink" title="声音"></a>声音</h2><p>通过VoodooHDA能有声音则可用，通过AppleALC能有声音则优秀。</p>
<h2 id="网络"><a href="#网络" class="headerlink" title="网络"></a>网络</h2><p>以太网需位于en0，无线支持2.4G&#x2F;5G双频。支持AirDrop和Handoff则优秀。</p>
<h2 id="USB-1"><a href="#USB-1" class="headerlink" title="USB"></a>USB</h2><p>USB接口2.0&#x2F;3.0&#x2F;3.1均能识别，3.0及以上接口的识别速度应有5G&#x2F;s。</p>
<h2 id="电池-1"><a href="#电池-1" class="headerlink" title="电池"></a>电池</h2><p>系统偏好设置正常识别电池电量状态。</p>
<h2 id="睡眠"><a href="#睡眠" class="headerlink" title="睡眠"></a>睡眠</h2><p>合盖睡眠，开盖唤醒后正常点亮不黑屏。</p>
<h2 id="输入设备"><a href="#输入设备" class="headerlink" title="输入设备"></a>输入设备</h2><p>自带键盘和触摸板都能正常使用。</p>
<h2 id="固态硬盘"><a href="#固态硬盘" class="headerlink" title="固态硬盘"></a>固态硬盘</h2><p>打开关于本机-系统报告，检查NVMExpress和SATA&#x2F;SATA Express，均显示TRIM支持已开启则优秀。</p>
<h1 id="常见问题-3"><a href="#常见问题-3" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="系统安装"><a href="#系统安装" class="headerlink" title="系统安装"></a>系统安装</h2><p>系统安装过程中，可通过打开安装器日志查看当前进度和所遇到的问题。</p>
<h3 id="提示MediaKit-reports-not-enough-space-on-device-for-requested-operation"><a href="#提示MediaKit-reports-not-enough-space-on-device-for-requested-operation" class="headerlink" title="提示MediaKit reports not enough space on device for requested operation"></a>提示MediaKit reports not enough space on device for requested operation</h3><p>EFI分区不够大。</p>
<h3 id="安装时停在verifying-installmacosx-pkg-x2F-installesd-dmg"><a href="#安装时停在verifying-installmacosx-pkg-x2F-installesd-dmg" class="headerlink" title="安装时停在verifying installmacosx.pkg&#x2F;installesd.dmg"></a>安装时停在verifying installmacosx.pkg&#x2F;installesd.dmg</h3><p>等待一段时间后会重新启动，然后再去安装一次即可。</p>
<h3 id="需要蓝牙连接键盘连接"><a href="#需要蓝牙连接键盘连接" class="headerlink" title="需要蓝牙连接键盘连接"></a>需要蓝牙连接键盘连接</h3><p>主要是启动后显示鼠标和键盘的开关界面，一直循环切换。按空格即可跳过。</p>
<h3 id="验证安装器数据时发生错误"><a href="#验证安装器数据时发生错误" class="headerlink" title="验证安装器数据时发生错误"></a>验证安装器数据时发生错误</h3><p>断开网络后尝试拔掉无用外置硬盘、终端修改时间，或检查镜像是否损坏。</p>
<h3 id="提示安装资源已过期，退出安装器以重新启动电脑，然后再次尝试"><a href="#提示安装资源已过期，退出安装器以重新启动电脑，然后再次尝试" class="headerlink" title="提示安装资源已过期，退出安装器以重新启动电脑，然后再次尝试"></a>提示安装资源已过期，退出安装器以重新启动电脑，然后再次尝试</h3><p>将安装U盘插入USB2.0接口，或重新制作安装盘。</p>
<h3 id="安装卡在第一次走条的最后两分钟很久，而后提示安装器资源损坏"><a href="#安装卡在第一次走条的最后两分钟很久，而后提示安装器资源损坏" class="headerlink" title="安装卡在第一次走条的最后两分钟很久，而后提示安装器资源损坏"></a>安装卡在第一次走条的最后两分钟很久，而后提示安装器资源损坏</h3><p>内存驱动问题。</p>
<h3 id="安装时提示找不到安装器资源"><a href="#安装时提示找不到安装器资源" class="headerlink" title="安装时提示找不到安装器资源"></a>安装时提示找不到安装器资源</h3><p>可能是安装器损坏。若不行，则删除EmuVariableUefi.efi。也有可能是SMBIOS设置错误。</p>
<h2 id="引导启动"><a href="#引导启动" class="headerlink" title="引导启动"></a>引导启动</h2><h3 id="安装完成后无法进入BIOS"><a href="#安装完成后无法进入BIOS" class="headerlink" title="安装完成后无法进入BIOS"></a>安装完成后无法进入BIOS</h3><p>出现了不正确的引导项。在Windows下可通过EasyUEFI删除多余的引导项，在Mac下可重置NVRAM。</p>
<h3 id="Clover提示Invalid-Signature…"><a href="#Clover提示Invalid-Signature…" class="headerlink" title="Clover提示Invalid Signature…"></a>Clover提示Invalid Signature…</h3><p>需要在BIOS关闭安全启动。</p>
<h3 id="Clover提示X64-Exception-Error"><a href="#Clover提示X64-Exception-Error" class="headerlink" title="Clover提示X64 Exception Error"></a>Clover提示X64 Exception Error</h3><p>Drivers中的驱动太新，删除或更换为旧版即可。如将PartitionDxe更换为PartitionDxeLegacy。</p>
<h3 id="Clover检测不到启动项或任何HFS-x2F-APFS分区"><a href="#Clover检测不到启动项或任何HFS-x2F-APFS分区" class="headerlink" title="Clover检测不到启动项或任何HFS&#x2F;APFS分区"></a>Clover检测不到启动项或任何HFS&#x2F;APFS分区</h3><p>可能是Clover版本太旧。</p>
<h3 id="内置kexts错误导致无法进入系统"><a href="#内置kexts错误导致无法进入系统" class="headerlink" title="内置kexts错误导致无法进入系统"></a>内置kexts错误导致无法进入系统</h3><p>进入恢复模式后点击常用工具-终端，输入以下命令以重建缓存。也可进入单用户模式操作。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// MAC为系统盘卷标，需根据情况替换</span><br><span class="line">rm -rf [错误的kexts路径]</span><br><span class="line">rm -rf /Volumes/MAC/System/Library/Caches/com.apple.kext.caches/Startup/kernelcache</span><br><span class="line">rm -rf /Volumes/MAC/System/Library/PrelinkedKernels/prelinkedkernel</span><br><span class="line">touch /Volumes/MAC/System/Library/Extensions/ &amp;&amp; kextcache -u /Volumes/MAC</span><br></pre></td></tr></table></figure>

<h3 id="无法更改启动路径"><a href="#无法更改启动路径" class="headerlink" title="无法更改启动路径"></a>无法更改启动路径</h3><p>在某些情况下，电脑的启动路径被硬编码为启动<code>EFI/Microsoft/Boot/bootmgfw.efi</code>而不是<code>EFI/BOOT/BOOTX64.EFI</code>，这将导致计算机启动系统的锁定。若遇到以上情况，则需将EFI分区里的EFI&#x2F;Microsoft&#x2F;Boot&#x2F;bootmgfw.efi重命名为其他名称并将Clover的CLOVERX64.efi重命名为bootmgfw.efi，复制替换即可。注意，Windows的每次更新都会覆盖bootmgfw.efi，因此需要重新操作。</p>
<h3 id="抹盘时提示MediaKit报告设备上的空间不足以执行请求的操作，或磁盘工具自动退出"><a href="#抹盘时提示MediaKit报告设备上的空间不足以执行请求的操作，或磁盘工具自动退出" class="headerlink" title="抹盘时提示MediaKit报告设备上的空间不足以执行请求的操作，或磁盘工具自动退出"></a>抹盘时提示MediaKit报告设备上的空间不足以执行请求的操作，或磁盘工具自动退出</h3><p>根本原因是EFI分区小于200MB。</p>
<h3 id="出现Welcome-to-Clover-xxxx-user-settings卡住不动"><a href="#出现Welcome-to-Clover-xxxx-user-settings卡住不动" class="headerlink" title="出现Welcome to Clover xxxx user settings卡住不动"></a>出现Welcome to Clover xxxx user settings卡住不动</h3><p>更换版本即可。</p>
<h3 id="提示This-version-of-Mac-OS-X-is-not-supported-on-this-platform"><a href="#提示This-version-of-Mac-OS-X-is-not-supported-on-this-platform" class="headerlink" title="提示This version of Mac OS X is not supported on this platform"></a>提示This version of Mac OS X is not supported on this platform</h3><p>更改SMBIOS即可。</p>
<h3 id="卡在Clover引导界面不动"><a href="#卡在Clover引导界面不动" class="headerlink" title="卡在Clover引导界面不动"></a>卡在Clover引导界面不动</h3><p>在引导器目录把无用的plist删除，仅保留config.plist。</p>
<h3 id="运行后导致CMOS重置"><a href="#运行后导致CMOS重置" class="headerlink" title="运行后导致CMOS重置"></a>运行后导致CMOS重置</h3><p>对于Clover，可在配置文件中勾选Apple RTC，以防止CMOS重置与有关AppleALC的错误。</p>
<h2 id="啰嗦模式"><a href="#啰嗦模式" class="headerlink" title="啰嗦模式"></a>啰嗦模式</h2><h3 id="提示Panic"><a href="#提示Panic" class="headerlink" title="提示Panic"></a>提示Panic</h3><p>内核恐慌。可先尝试加-x参数后再次启动，若无效则应当根据错误提示选择以下的解决方案。</p>
<h4 id="AppleIntelCPUPowerManagement-x2F-AppleRTC"><a href="#AppleIntelCPUPowerManagement-x2F-AppleRTC" class="headerlink" title="AppleIntelCPUPowerManagement&#x2F;AppleRTC"></a>AppleIntelCPUPowerManagement&#x2F;AppleRTC</h4><p>Mac的CPU电源管理不起作用。</p>
<p>在Clover加入NullCPUPowerManagement.kext，或删除SLE下的AppleIntelCPUPowerManagement.kext和AppleIntelCPUPowerManagementClient.kext。</p>
<h4 id="AppleTyMCEDriver"><a href="#AppleTyMCEDriver" class="headerlink" title="AppleTyMCEDriver"></a>AppleTyMCEDriver</h4><p>删除AppleTyMCEDriver.kext即可，可能在SLE或引导器目录。或SMBIOS不要设置MacPro4,1&#x2F;MacPro5,1&#x2F;Xserve3,1。</p>
<h4 id="VoodooHDA"><a href="#VoodooHDA" class="headerlink" title="VoodooHDA"></a>VoodooHDA</h4><p>删除VoodooHDA.kext即可，可能在SLE或引导器目录。</p>
<h4 id="ApplePolicyControl"><a href="#ApplePolicyControl" class="headerlink" title="ApplePolicyControl"></a>ApplePolicyControl</h4><p>删除AppleGraphicsControl.kext中的Contents&#x2F;Plugins&#x2F;ApplePolicyControl.kext即可。</p>
<h4 id="Local-APIC"><a href="#Local-APIC" class="headerlink" title="Local APIC"></a>Local APIC</h4><p>可能是因为Mac不支持当前CPU。可尝试使用cpus&#x3D;1启动标志。</p>
<h4 id="Unable-to-find-driver-for-this-platform-quot-ACPI"><a href="#Unable-to-find-driver-for-this-platform-quot-ACPI" class="headerlink" title="Unable to find driver for this platform: &quot;ACPI\"></a>Unable to find driver for this platform: &quot;ACPI\</h4><p>在极少数情况下，这种恐慌只会在AppleACPIPlatform.kext损坏时发生。可尝试启动安全模式。</p>
<h4 id="Thread-14-crash"><a href="#Thread-14-crash" class="headerlink" title="Thread 14 crash"></a>Thread 14 crash</h4><p>可尝试将BIOS降级。</p>
<h4 id="VTDecoderXPCServ"><a href="#VTDecoderXPCServ" class="headerlink" title="VTDecoderXPCServ"></a>VTDecoderXPCServ</h4><p>在Clover引导界面中选择Graphics Injector，勾选Inject Intel，并将*-platform-id修改为0x3E9B0000。</p>
<h4 id="IOATAFamily"><a href="#IOATAFamily" class="headerlink" title="IOATAFamily"></a>IOATAFamily</h4><p>可尝试删除SLE下的IOATAFamily.kext。</p>
<h3 id="卡在PCI-configuration-begin"><a href="#卡在PCI-configuration-begin" class="headerlink" title="卡在PCI configuration begin"></a>卡在PCI configuration begin</h3><p>可尝试添加启动参数npci&#x3D;0x2000或npci&#x3D;0x3000。两者不要同时使用。</p>
<h3 id="Still-waiting-for-root-device并禁行"><a href="#Still-waiting-for-root-device并禁行" class="headerlink" title="Still waiting for root device并禁行"></a>Still waiting for root device并禁行</h3><p>表示系统无法找到系统盘，一般分为USB引导和SATA硬盘引导两种情况。更新引导器到最新版本，若无效则按照以下内容修复。</p>
<p>如果是USB引导，代表系统无法识别到USB，可在引导器的kexts下放置USBInjectAll.kext，也可尝试在Clover的config.plist中勾选FixOwnership。也可尝试插入USB 2.0端口而非3.0端口。启动后应当通过USB端口定制解决该问题。</p>
<p>如果是SATA硬盘引导，代表Mac不支持该SATA控制器。由于Mac不能正确支持RAID、IDE和RST，因此需要在BIOS将SATA设置为AHCI模式，或使用AHCI补丁。若不起作用，则可尝试在引导器的kexts部分放置以下kext，注意不要同时使用。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">## SATA-unsupported.kext</span><br><span class="line">https://github.com/khronokernel/Legacy-Kexts/blob/master/Injectors/Zip/SATA-unsupported.kext.zip</span><br><span class="line"></span><br><span class="line">## AHCIPortInjector.kext</span><br><span class="line">https://www.insanelymac.com/forum/files/file/436-ahciportinjectorkext/</span><br><span class="line"></span><br><span class="line">## ATAPortInjector.kext</span><br><span class="line">https://github.com/khronokernel/Legacy-Kexts/blob/master/Injectors/Zip/ATAPortInjector.kext.zip</span><br><span class="line"></span><br><span class="line">## AppleAHCIPort.kext（从Catalina提取，主要用于Big Sur）</span><br><span class="line">https://github.com/dortania/OpenCore-Install-Guide/blob/master/extra-files/CtlnaAHCIPort.kext.zip</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】OC引导</summary>

<p>可尝试打开RealeasUSBOwnership、XhciPortlimit。</p>
</details>

<h3 id="卡在ApplelIntelLpssI2CController"><a href="#卡在ApplelIntelLpssI2CController" class="headerlink" title="卡在ApplelIntelLpssI2CController"></a>卡在ApplelIntelLpssI2CController</h3><p>在主机Windows下把SLE下的AppleInteLpssI2CController.kext删掉。若无效，再删AppleIntelLpssI2C.kext。</p>
<p>或者在Clover配置中禁用。打开Clover的config.plist，在KextsToPatch加入以下配置即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">Name: com.apple.driver.AppleIntelLpssI2C</span><br><span class="line">Find: 494F4B69 74</span><br><span class="line">Replace: 494F4B69 73</span><br><span class="line">Comments: Prevent Apple I2C kexts from attaching to I2C controllers, credit CoolStar</span><br><span class="line">InfoPlistPatch: true</span><br><span class="line"></span><br><span class="line">Name: com.apple.driver.AppleIntelLpssI2CController</span><br><span class="line">Find: 494F4B69 74</span><br><span class="line">Replace: 494F4B69 73</span><br><span class="line">Comments: Prevent Apple I2C kexts from attaching to I2C controllers, credit CoolStar</span><br><span class="line">InfoPlistPatch: true</span><br></pre></td></tr></table></figure>

<h3 id="卡在IOConsoleUsers-gIOScreenLockState-3或出现Busy-Timeout或-IGPU-Hash-data-from-ME-never-returned-status-x3D-1-doing-retry"><a href="#卡在IOConsoleUsers-gIOScreenLockState-3或出现Busy-Timeout或-IGPU-Hash-data-from-ME-never-returned-status-x3D-1-doing-retry" class="headerlink" title="卡在IOConsoleUsers:gIOScreenLockState 3或出现Busy Timeout或[IGPU] Hash data from ME never returned, status &#x3D;1, doing retry"></a>卡在IOConsoleUsers:gIOScreenLockState 3或出现Busy Timeout或[IGPU] Hash data from ME never returned, status &#x3D;1, doing retry</h3><p>此错误是由于显卡驱动问题。如果为双显卡，需屏蔽独显，驱动集显。</p>
<p>更新Whatevergreen和Lilu。若无效，则在Clover主页面中选择Options，点击Graphics injector，取消勾选<code>InjectIntel</code>并把<code>platform-id</code>修改为<code>0×12345678</code>，然后启动系统。若无效，则将LE下所有kexts备份并删除，再次启动。</p>
<p>若仍无效，则找到SLE下AppleIntel&#x2F;AMD&#x2F;ATI&#x2F;Ge&#x2F;NVD开头的所有显卡kexts，并将除核显外的其它所有kexts备份后删除。假设为Intel核显，则删除除AppleIntel开头外的其余所有显卡kexts。</p>
<p>也可尝试关闭CSM，或强制PCIe 3.0链接速度，或添加启动参数agdpmod&#x3D;pikera。</p>
<h3 id="卡在IOBluetoothHCIController"><a href="#卡在IOBluetoothHCIController" class="headerlink" title="卡在IOBluetoothHCIController"></a>卡在IOBluetoothHCIController</h3><p>真正的问题可能与蓝牙无关，而是在显卡。解决方法同上。</p>
<h3 id="显示This-version-of-Mac-OS-X-is-not-supported-on-this-platform"><a href="#显示This-version-of-Mac-OS-X-is-not-supported-on-this-platform" class="headerlink" title="显示This version of Mac OS X is not supported on this platform!"></a>显示This version of Mac OS X is not supported on this platform!</h3><p>Clover添加启动参数<code>-no_compat_check</code>，或更换SMBIOS。若不行，则换用其他版本的系统镜像。</p>
<h3 id="卡在Service-only-ran-for-0-seconds-Pushing-respawn-out-by-10-second"><a href="#卡在Service-only-ran-for-0-seconds-Pushing-respawn-out-by-10-second" class="headerlink" title="卡在Service only ran for 0 seconds. Pushing respawn out by 10 second"></a>卡在Service only ran for 0 seconds. Pushing respawn out by 10 second</h3><p>使用SSDT而非DSDT进行独显屏蔽即可。</p>
<h3 id="卡在Attempting-system-restart…MACH-Reboot"><a href="#卡在Attempting-system-restart…MACH-Reboot" class="headerlink" title="卡在Attempting system restart…MACH Reboot"></a>卡在Attempting system restart…MACH Reboot</h3><p>在Clover的config.plist配置文件DropTables下添加以下内容。</p>
<table>
<thead>
<tr>
<th>Signature</th>
<th>Type&#x2F;key</th>
<th>String</th>
</tr>
</thead>
<tbody><tr>
<td>MATS</td>
<td></td>
<td></td>
</tr>
<tr>
<td>DMAR</td>
<td></td>
<td></td>
</tr>
<tr>
<td>BGRT</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="卡在Welcome-to-Clover-xxxx-user-settings"><a href="#卡在Welcome-to-Clover-xxxx-user-settings" class="headerlink" title="卡在Welcome to Clover xxxx user settings"></a>卡在Welcome to Clover xxxx user settings</h3><p>Clover的config.plist不适合该系统，替换即可。</p>
<h3 id="卡在ACPI-System-State-S0-S3-S4-S5-S3"><a href="#卡在ACPI-System-State-S0-S3-S4-S5-S3" class="headerlink" title="卡在ACPI:System State [S0 S3 S4 S5] (S3)"></a>卡在ACPI:System State [S0 S3 S4 S5] (S3)</h3><p>显卡无解，可能需要外接显卡。</p>
<h3 id="卡在apfs-module-start或VoodooPS2Controller，或安装时键盘无法使用"><a href="#卡在apfs-module-start或VoodooPS2Controller，或安装时键盘无法使用" class="headerlink" title="卡在apfs_module_start或VoodooPS2Controller，或安装时键盘无法使用"></a>卡在apfs_module_start或VoodooPS2Controller，或安装时键盘无法使用</h3><p>删除VoodooPS2Controller.kext，替换为AppleACPIPS2Nub.kext和ApplePS2Controller.kext。</p>
<h3 id="显示DSMOS-has-arrived后重启"><a href="#显示DSMOS-has-arrived后重启" class="headerlink" title="显示DSMOS has arrived后重启"></a>显示DSMOS has arrived后重启</h3><p>显卡问题，添加启动参数nv_disable&#x3D;1禁用独显即可。若无效。可到SLE下删除所有显卡kexts。</p>
<h3 id="出现DSMOS错误"><a href="#出现DSMOS错误" class="headerlink" title="出现DSMOS错误"></a>出现DSMOS错误</h3><p>FakeSMC.kext与dsmos.kext同时使用导致。删除dsmos.kext并使用FakeSMC.kext。</p>
<h3 id="出现ATIRadeonX2000-x2F-ATIRadeonX3000错误"><a href="#出现ATIRadeonX2000-x2F-ATIRadeonX3000错误" class="headerlink" title="出现ATIRadeonX2000&#x2F;ATIRadeonX3000错误"></a>出现ATIRadeonX2000&#x2F;ATIRadeonX3000错误</h3><p>删除SLE下ATI开头的显卡驱动。</p>
<h3 id="出现CHUDKernLib错误"><a href="#出现CHUDKernLib错误" class="headerlink" title="出现CHUDKernLib错误"></a>出现CHUDKernLib错误</h3><p>Xcode用于调试核心的驱动。删除SLE下的CHUDKernLib.kext即可。</p>
<h3 id="出现FakeSMC错误"><a href="#出现FakeSMC错误" class="headerlink" title="出现FakeSMC错误"></a>出现FakeSMC错误</h3><p>替换一个不同版本的FakeSMC.kext即可。</p>
<h3 id="停在FakeSMC"><a href="#停在FakeSMC" class="headerlink" title="停在FakeSMC"></a>停在FakeSMC</h3><p>可能是USB问题。可关闭BIOS中的USB Legacy Support。</p>
<h3 id="出现FakeSMCRadeon错误"><a href="#出现FakeSMCRadeon错误" class="headerlink" title="出现FakeSMCRadeon错误"></a>出现FakeSMCRadeon错误</h3><p>替换一个不同版本的FakeSMC.kext，或删除FakeSMC.kext中的Contents&#x2F;PlugIns&#x2F;FakeSMCRadeon.kext即可。</p>
<h3 id="出现ElliottForceLegacyRTC错误"><a href="#出现ElliottForceLegacyRTC错误" class="headerlink" title="出现ElliottForceLegacyRTC错误"></a>出现ElliottForceLegacyRTC错误</h3><p>删除ElliottForceLegacyRTC.kext并使用LegacyAppleRTC.kext。</p>
<h3 id="出现AppleRTL8169Ethernet错误"><a href="#出现AppleRTL8169Ethernet错误" class="headerlink" title="出现AppleRTL8169Ethernet错误"></a>出现AppleRTL8169Ethernet错误</h3><p>删除IONetworkingFamily.kext，或IONetworkingFamily.kext下的Contents&#x2F;PlugIns&#x2F;AppleRTL8169Ethernet.kext。</p>
<h3 id="出现AppleRTC错误"><a href="#出现AppleRTC错误" class="headerlink" title="出现AppleRTC错误"></a>出现AppleRTC错误</h3><p>放入NullCPUPowerManagement.kext。或删除&#x2F;System&#x2F;Library&#x2F;Extensions&#x2F;AppleIntelCPUPowerManagement.kext和AppleIntelCPUPowerManagementClient.kext。</p>
<h3 id="出现AppleFWOHCI错误"><a href="#出现AppleFWOHCI错误" class="headerlink" title="出现AppleFWOHCI错误"></a>出现AppleFWOHCI错误</h3><p>删除SLE下的IOFireWireFamily.kext&#x2F;Contents&#x2F;PlugIns&#x2F;AppleFWOHCI.kext即可。</p>
<h3 id="出现SleepEnabler错误"><a href="#出现SleepEnabler错误" class="headerlink" title="出现SleepEnabler错误"></a>出现SleepEnabler错误</h3><p>删除SleepEnabler.kext。</p>
<h3 id="出现Trying-to-change-a-collection-in-the-registry的OScollection-cpp错误"><a href="#出现Trying-to-change-a-collection-in-the-registry的OScollection-cpp错误" class="headerlink" title="出现Trying to change a collection in the registry的OScollection.cpp错误"></a>出现Trying to change a collection in the registry的OScollection.cpp错误</h3><p>在BIOS开启ACPI 2.0 Support及ACPI APIC support。</p>
<h3 id="出现failed-to-locate-SMC-driver错误"><a href="#出现failed-to-locate-SMC-driver错误" class="headerlink" title="出现failed to locate SMC driver错误"></a>出现failed to locate SMC driver错误</h3><p>更新FakeSMC.kext即可。</p>
<h3 id="出现ApplePolicyControl错误"><a href="#出现ApplePolicyControl错误" class="headerlink" title="出现ApplePolicyControl错误"></a>出现ApplePolicyControl错误</h3><p>删除SLE下的AppleGraphicsControl.kext&#x2F;Contents&#x2F;PlugIns&#x2F;ApplePolicyControl.kext即可。</p>
<h3 id="白屏且鼠标在屏幕左上角出现无限彩色风火轮"><a href="#白屏且鼠标在屏幕左上角出现无限彩色风火轮" class="headerlink" title="白屏且鼠标在屏幕左上角出现无限彩色风火轮"></a>白屏且鼠标在屏幕左上角出现无限彩色风火轮</h3><p>更新FakeSMC.kext即可。</p>
<h3 id="出现IOMemoryDescriptor-cpp错误"><a href="#出现IOMemoryDescriptor-cpp错误" class="headerlink" title="出现IOMemoryDescriptor.cpp错误"></a>出现IOMemoryDescriptor.cpp错误</h3><p>内存读取错误。</p>
<h3 id="发生lapic-native-c-x2F-lapic-c的Local-APIC-error内核错误"><a href="#发生lapic-native-c-x2F-lapic-c的Local-APIC-error内核错误" class="headerlink" title="发生lapic_native.c&#x2F;lapic.c的Local APIC error内核错误"></a>发生lapic_native.c&#x2F;lapic.c的Local APIC error内核错误</h3><p>添加启动参数cpus&#x3D;1，可能还需要busratio&#x3D;16。</p>
<h3 id="出现can’t-perform-kext-scan-no-kext-summary错误"><a href="#出现can’t-perform-kext-scan-no-kext-summary错误" class="headerlink" title="出现can’t perform kext scan: no kext summary错误"></a>出现can’t perform kext scan: no kext summary错误</h3><p>尝试不使用kexts缓存。</p>
<h3 id="发生Should-have-2-threads-but-only-found-3-for-Die-0的cpu-threads-c错误"><a href="#发生Should-have-2-threads-but-only-found-3-for-Die-0的cpu-threads-c错误" class="headerlink" title="发生Should have 2 threads, but only found 3 for Die 0的cpu_threads.c错误"></a>发生Should have 2 threads, but only found 3 for Die 0的cpu_threads.c错误</h3><p>重新提取修改正确的DSDT.aml即可。</p>
<h3 id="发生IOAPIC-Version-0x20-Vectors-64-87错误"><a href="#发生IOAPIC-Version-0x20-Vectors-64-87错误" class="headerlink" title="发生IOAPIC: Version 0x20 Vectors 64:87错误"></a>发生IOAPIC: Version 0x20 Vectors 64:87错误</h3><p>使用启动参数cpus&#x3D;1或cpus&#x3D;2，或删掉DSDT.aml即可。</p>
<h3 id="出现NVClockX错误"><a href="#出现NVClockX错误" class="headerlink" title="出现NVClockX错误"></a>出现NVClockX错误</h3><p>删除NVClockX.kext或FakeSMC.kext&#x2F;Contents&#x2F;PlugIns&#x2F;NVClockX.kext。</p>
<h3 id="出现AppleIntelGMA950错误"><a href="#出现AppleIntelGMA950错误" class="headerlink" title="出现AppleIntelGMA950错误"></a>出现AppleIntelGMA950错误</h3><p>删除SLE下的AppleIntelGMA950.kext。</p>
<h3 id="出现GeForce7xxx错误"><a href="#出现GeForce7xxx错误" class="headerlink" title="出现GeForce7xxx错误"></a>出现GeForce7xxx错误</h3><p>删除SLE下的eForce7xxx.kext。</p>
<h3 id="出现IntelCPUMonitor错误"><a href="#出现IntelCPUMonitor错误" class="headerlink" title="出现IntelCPUMonitor错误"></a>出现IntelCPUMonitor错误</h3><p>删除IntelCPUMonitor.kext或FakeSMC.kext&#x2F;Contents&#x2F;PlugIns&#x2F;IntelCPUMonitor.kext。</p>
<h3 id="出现Window-Server-Service-only-ran-for-0-seconds错误"><a href="#出现Window-Server-Service-only-ran-for-0-seconds错误" class="headerlink" title="出现Window Server Service only ran for 0 seconds错误"></a>出现Window Server Service only ran for 0 seconds错误</h3><p>禁用独显。</p>
<h3 id="卡在灰屏"><a href="#卡在灰屏" class="headerlink" title="卡在灰屏"></a>卡在灰屏</h3><p>灰屏表示FakeSMC未加载。</p>
<h3 id="出现RTC-Only-single-RAM-bank错误"><a href="#出现RTC-Only-single-RAM-bank错误" class="headerlink" title="出现RTC:Only single RAM bank错误"></a>出现RTC:Only single RAM bank错误</h3><p>在引导器放置RTCMemoryFixup.kext即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/RTCMemoryFixup</span><br></pre></td></tr></table></figure>

<h3 id="卡在VoodooPS2Trackpad：idengtify-TouchPad-command-failed"><a href="#卡在VoodooPS2Trackpad：idengtify-TouchPad-command-failed" class="headerlink" title="卡在VoodooPS2Trackpad：idengtify TouchPad command failed"></a>卡在VoodooPS2Trackpad：idengtify TouchPad command failed</h3><p>关闭RAID或改为其它模式。</p>
<h3 id="出现SMCReadKeyActionError错误"><a href="#出现SMCReadKeyActionError错误" class="headerlink" title="出现SMCReadKeyActionError错误"></a>出现SMCReadKeyActionError错误</h3><p>禁用VT-d，或在启动参数中添加dart&#x3D;0，或在Clover设置Drop DMAR。</p>
<h3 id="在Ivy-Bridge-CPU出现PState-Stepper错误"><a href="#在Ivy-Bridge-CPU出现PState-Stepper错误" class="headerlink" title="在Ivy Bridge CPU出现PState Stepper错误"></a>在Ivy Bridge CPU出现PState Stepper错误</h3><p>CPU的SSDT错误，进行原生电源管理修复即可。</p>
<h3 id="出现AppleLMUController-smcReadKey-Error-received-error-0×84-when-reading-key-‘MSLD’错误"><a href="#出现AppleLMUController-smcReadKey-Error-received-error-0×84-when-reading-key-‘MSLD’错误" class="headerlink" title="出现AppleLMUController::smcReadKey Error:received error 0×84 when reading key ‘MSLD’错误"></a>出现AppleLMUController::smcReadKey Error:received error 0×84 when reading key ‘MSLD’错误</h3><p>使用了多余的SSDT。</p>
<h3 id="出现Forcing-CS-RUNTIME-for-entitlement：com-apple-rootless-restricted-block-devices"><a href="#出现Forcing-CS-RUNTIME-for-entitlement：com-apple-rootless-restricted-block-devices" class="headerlink" title="出现Forcing CS_RUNTIME for entitlement：com.apple.rootless.restricted-block-devices"></a>出现Forcing CS_RUNTIME for entitlement：com.apple.rootless.restricted-block-devices</h3><p>等待即可。</p>
<h3 id="启用安全启动后无法启动"><a href="#启用安全启动后无法启动" class="headerlink" title="启用安全启动后无法启动"></a>启用安全启动后无法启动</h3><p>若安装时启用了安全启动，需要关闭安全启动后再次安装系统。</p>
<p>若无启用，则可启动到恢复分区并输入以下命令。注意确保未安装两个SSD，且已连接到网络。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">## Macintosh HD为安装有Mac的分区名称</span><br><span class="line">bless --folder &quot;/Volumes/Macintosh HD/System/Library/CoreServices&quot; --bootefi --personalize</span><br></pre></td></tr></table></figure>

<h2 id="系统运行"><a href="#系统运行" class="headerlink" title="系统运行"></a>系统运行</h2><h3 id="内置SATA硬盘显示为橙色图标"><a href="#内置SATA硬盘显示为橙色图标" class="headerlink" title="内置SATA硬盘显示为橙色图标"></a>内置SATA硬盘显示为橙色图标</h3><p>打开Clover的config.plist，在Kernel and kext Patches选项卡中的KextsToPatch加入以下代码即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Name: AppleAHCIPort</span><br><span class="line">Find: 45787465 726E616C</span><br><span class="line">Replace: 496E7465 726E616C</span><br><span class="line">Comment: Define external drivers as internal to fix yellow drive icons</span><br></pre></td></tr></table></figure>

<h3 id="RTC问题"><a href="#RTC问题" class="headerlink" title="RTC问题"></a>RTC问题</h3><p>打开终端并输入以下命令。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cat /private/var/log/system.log | grep rtc</span><br></pre></td></tr></table></figure>

<p>输出示例如下。E00002C2即为需要屏蔽的内存位置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">localhost kernel[0]: Lilu:     rtc @ rtc read failure 1 bytes from 180 E00002C2</span><br></pre></td></tr></table></figure>

<p>下载RTCmemoryfixup,并且在boot args中添加<code>rtcfx_exclude=10-FF</code>即可。其中10-FF为内存屏蔽区间，根据以上输出确定。</p>
<h3 id="键盘-x2F-触控板不工作"><a href="#键盘-x2F-触控板不工作" class="headerlink" title="键盘&#x2F;触控板不工作"></a>键盘&#x2F;触控板不工作</h3><p>可能是EC设备出现故障。对于笔记本，可关闭电脑后拔出电池，30秒后装回，重新开机。</p>
<p>对于ELAN触控板，在键盘不工作时可尝试按Escape。</p>
<h3 id="App-Store无法登录"><a href="#App-Store无法登录" class="headerlink" title="App Store无法登录"></a>App Store无法登录</h3><p>打开终端并输入以下命令以重置NVRAM即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo nvram -c</span><br></pre></td></tr></table></figure>

<h1 id="附录"><a href="#附录" class="headerlink" title="附录"></a>附录</h1><h2 id="Kexts"><a href="#Kexts" class="headerlink" title="Kexts"></a>Kexts</h2><p>大部分kexts可在以下网站找到。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># 新版kexts</span><br><span class="line">https://dortania.github.io/builds/</span><br><span class="line">https://kext.me/</span><br><span class="line">https://bitbucket.org/RehabMan/</span><br><span class="line">https://github.com/acidanthera</span><br><span class="line">https://www.zdynb.cn/2020/hei-ping-guo-qu-dong.html</span><br><span class="line">https://github.com/ClayMoreBoy/Hackintosh-Kext-Factory</span><br><span class="line">https://github.com/corpnewt/Lilu-and-Friends</span><br><span class="line"></span><br><span class="line"># 旧版kexts</span><br><span class="line">https://github.com/khronokernel/Legacy-Kexts</span><br><span class="line">https://onedrive.live.com/?authkey=%21APjCyRpzoAKp4xs&amp;id=FE4038DA929BFB23%21455036&amp;cid=FE4038DA929BFB23</span><br><span class="line">https://olarila.com/files/</span><br><span class="line">https://github.com/RehabMan/hack-tools/tree/master/kexts</span><br></pre></td></tr></table></figure>

<p>可在终端输入以下命令查看kext支持的体系结构。其中二进制文件路径可通过在kext上右键点击显示包内容，然后在Contents&#x2F;MacOS中找到。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">lipo -archs [kext的二进制文件路径]</span><br></pre></td></tr></table></figure>

<h3 id="Lilu"><a href="#Lilu" class="headerlink" title="Lilu"></a>Lilu</h3><p>Lilu为其它kext提供接口支持，许多kext需要依赖Lilu才能运行。需要10.8或更高版本的系统，下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/Lilu/</span><br></pre></td></tr></table></figure>

<h3 id="FakeSMC包与VirtualSMC包"><a href="#FakeSMC包与VirtualSMC包" class="headerlink" title="FakeSMC包与VirtualSMC包"></a>FakeSMC包与VirtualSMC包</h3><p>下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"># FakeSMC包</span><br><span class="line"># 主体与传感器驱动</span><br><span class="line">https://bitbucket.org/RehabMan/os-x-fakesmc-kozlek/downloads/</span><br><span class="line">https://github.com/CloverHackyColor/FakeSMC3_with_plugins</span><br><span class="line"></span><br><span class="line"># 主体（32位）</span><br><span class="line">https://github.com/khronokernel/Legacy-Kexts/blob/master/32Bit-only/Zip/FakeSMC-32.kext.zip?raw=true</span><br><span class="line"></span><br><span class="line"># ACPIBatteryManager，电池驱动</span><br><span class="line">https://bitbucket.org/RehabMan/os-x-acpi-battery-driver/downloads/</span><br><span class="line"></span><br><span class="line"># VirtualSMC</span><br><span class="line"># 主体、传感器与电池驱动</span><br><span class="line">https://github.com/acidanthera/VirtualSMC</span><br></pre></td></tr></table></figure>

<p>两者作用相同，均用于向macOS提供SMC信息，模拟白苹果启动环境。FakeSMC早于VirtualSMC，且已不再更新，因此推荐使用VirtualSMC替换FakeSMC。注意，使用VirtualSMC时Lilu需为最新版本，否则将无法进入系统。VirtualSMC包作用分别如下。</p>
<table>
<thead>
<tr>
<th>Kext名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>VirtualSMC</td>
<td>替换FakeSMC.kext，需在Clover的driver64UEFI中删除SMCHelper-64.efi并复制VirtualSMC.efi到此目录</td>
</tr>
<tr>
<td>SMCProcessor</td>
<td>监控CPU温度，不适用于基于AMD CPU的系统</td>
</tr>
<tr>
<td>SMCSuperIO</td>
<td>监控风扇速度，不适用于基于AMD CPU的系统</td>
</tr>
<tr>
<td>SMCLightSensor</td>
<td>用于笔记本电脑上的环境光传感器，台式机可以忽略</td>
</tr>
<tr>
<td>SMCDellSensors</td>
<td>对支持系统管理模式（SMM）的戴尔机器上的风扇进行更精细的监视和控制</td>
</tr>
<tr>
<td>SMCBatteryManager</td>
<td>电源管理驱动，用于替换ACPIBatteryManager，台式机可以忽略</td>
</tr>
</tbody></table>
<p>VirtualSMC需要10.8或更高版本的系统，旧版本应当使用FakeSMC。</p>
<details>
<summary>【进阶】FakeSMC的Info.plist说明</summary>

<p>REV表示SMC版本，以Base64表示，转换为十六进制即可，对应关系如下。</p>
<table>
<thead>
<tr>
<th>型号</th>
<th>SMC版本</th>
<th>REV值</th>
</tr>
</thead>
<tbody><tr>
<td>MacPro3,1</td>
<td>1.25f4</td>
<td>ASUPAAAE</td>
</tr>
<tr>
<td>MacPro4,1</td>
<td>1.39f5</td>
<td>ATkPAAAF</td>
</tr>
<tr>
<td>MacPro5,1</td>
<td>1.39f11</td>
<td>ATkPAAAR</td>
</tr>
<tr>
<td>iMac8,1</td>
<td>1.30f1</td>
<td>ATAPAAAB</td>
</tr>
<tr>
<td>iMac9,1</td>
<td>1.45f0</td>
<td>AUUPAAAA</td>
</tr>
<tr>
<td>iMac10,1</td>
<td>1.53f13</td>
<td>AVMPAAAT</td>
</tr>
<tr>
<td>iMac11,1</td>
<td>1.54f36</td>
<td>AVQPAAA2</td>
</tr>
<tr>
<td>iMac12,1</td>
<td>1.72f5</td>
<td>AXIPAAAF</td>
</tr>
<tr>
<td>MacBookPro5,1</td>
<td>1.33f8</td>
<td>ATMPAAAI</td>
</tr>
<tr>
<td>MacBookPro5,1</td>
<td>1.33f8</td>
<td>ATMPAAAI</td>
</tr>
<tr>
<td>MacBookPro6,1</td>
<td>1.58f16</td>
<td>AVgPAAAW</td>
</tr>
<tr>
<td>MacBookPro7,1</td>
<td>1.62f6</td>
<td>AWIPAAAG</td>
</tr>
<tr>
<td>MacBookPro8,1</td>
<td>1.68f96</td>
<td>AWgPAACW</td>
</tr>
</tbody></table>
<p>smc-compatible的值列表如下。</p>
<table>
<thead>
<tr>
<th>型号</th>
<th>smc-compatible值</th>
</tr>
</thead>
<tbody><tr>
<td>MacPro3,1</td>
<td>smc-napa</td>
</tr>
<tr>
<td>MacPro4,1</td>
<td>smc-thurley</td>
</tr>
<tr>
<td>MacPro5,1</td>
<td>smc-thurley</td>
</tr>
<tr>
<td>iMac9,1</td>
<td>smc-napa</td>
</tr>
<tr>
<td>iMac10,1</td>
<td>smc-mcp</td>
</tr>
<tr>
<td>iMac11,1</td>
<td>smc-piketon</td>
</tr>
<tr>
<td>iMac12,1</td>
<td>smc-huronriver</td>
</tr>
<tr>
<td>MacBookPro5,1</td>
<td>smc-mcp</td>
</tr>
<tr>
<td>MacBookPro5,5</td>
<td>smc-mcp</td>
</tr>
<tr>
<td>MacBookPro6,1</td>
<td>smc-piketon</td>
</tr>
<tr>
<td>MacBookPro7,1</td>
<td>smc-mcp</td>
</tr>
<tr>
<td>MacBookPro8,1</td>
<td>smc-huronriver</td>
</tr>
</tbody></table>
<p>tjmax表示CPU可承受的最大温度，可通过Aida64等方式查到。</p>
</details>

<h3 id="WebCamera"><a href="#WebCamera" class="headerlink" title="WebCamera"></a>WebCamera</h3><p>相机驱动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://i.applelife.ru/2019/03/448848_WebCamera.kext.zip</span><br></pre></td></tr></table></figure>

<h3 id="AnyiSightCam"><a href="#AnyiSightCam" class="headerlink" title="AnyiSightCam"></a>AnyiSightCam</h3><p>在系统报告中添加相机信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/tuiuVN/EFI_Clover/tree/13a94765f8c3f4a5c7138b2fcc1b9e8d091c65e8/K46CA/EFI/CLOVER/kexts/Other</span><br></pre></td></tr></table></figure>

<h3 id="AnyCardReader"><a href="#AnyCardReader" class="headerlink" title="AnyCardReader"></a>AnyCardReader</h3><p>在系统报告中添加读卡器信息（需更改为自己的ID）。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/holoto/ec-471g/tree/master/EFI/EFI/CLOVER/kexts/10.11</span><br></pre></td></tr></table></figure>

<h3 id="AnyiSightCam-1"><a href="#AnyiSightCam-1" class="headerlink" title="AnyiSightCam"></a>AnyiSightCam</h3><p>在系统报告中添加相机信息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/tuiuVN/EFI_Clover/tree/13a94765f8c3f4a5c7138b2fcc1b9e8d091c65e8/K46CA/EFI/CLOVER/kexts/Other</span><br></pre></td></tr></table></figure>

<h3 id="DebugEnhancer"><a href="#DebugEnhancer" class="headerlink" title="DebugEnhancer"></a>DebugEnhancer</h3><p>啰嗦模式下可输出更多内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/DebugEnhancer</span><br></pre></td></tr></table></figure>

<h3 id="IOElectrify"><a href="#IOElectrify" class="headerlink" title="IOElectrify"></a>IOElectrify</h3><p>为Intel Thunderbolt硬件提供始终开启的电源。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/the-darkvoid/macOS-IOElectrify/releases</span><br></pre></td></tr></table></figure>

<h3 id="VoodooInput"><a href="#VoodooInput" class="headerlink" title="VoodooInput"></a>VoodooInput</h3><p>提供Magic Trackpad 2仿真。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/VoodooInput/releases</span><br></pre></td></tr></table></figure>

<h3 id="LiluFriend"><a href="#LiluFriend" class="headerlink" title="LiluFriend"></a>LiluFriend</h3><p>确保Lilu及其插件被加载。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/PMheart/LiluFriend</span><br></pre></td></tr></table></figure>

<h3 id="VoodooSDHCMod"><a href="#VoodooSDHCMod" class="headerlink" title="VoodooSDHCMod"></a>VoodooSDHCMod</h3><p>读卡器驱动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/lvs1974/VoodooSDHCMod/releases</span><br></pre></td></tr></table></figure>

<h3 id="SASMegaRAID"><a href="#SASMegaRAID" class="headerlink" title="SASMegaRAID"></a>SASMegaRAID</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/dukzcry/osx-goodies</span><br></pre></td></tr></table></figure>

<h3 id="Legacy-USB3-amp-Legacy-InternalHub-EHCx"><a href="#Legacy-USB3-amp-Legacy-InternalHub-EHCx" class="headerlink" title="Legacy_USB3&amp;Legacy_InternalHub-EHCx"></a>Legacy_USB3&amp;Legacy_InternalHub-EHCx</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://applelife.ru/posts/537459</span><br></pre></td></tr></table></figure>

<h3 id="Sinetek-rtsx"><a href="#Sinetek-rtsx" class="headerlink" title="Sinetek-rtsx"></a>Sinetek-rtsx</h3><p>读卡器驱动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/tsingui/Sinetek-rtsx-1</span><br></pre></td></tr></table></figure>

<h3 id="SerialMouse"><a href="#SerialMouse" class="headerlink" title="SerialMouse"></a>SerialMouse</h3><p>串行鼠标驱动，在系统启动前需先将鼠标接入电脑。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Goldfish64/SerialMouse/releases</span><br></pre></td></tr></table></figure>

<h3 id="RTCMemoryFixup"><a href="#RTCMemoryFixup" class="headerlink" title="RTCMemoryFixup"></a>RTCMemoryFixup</h3><p>解决部分Z370 B360新BIOS的RTC中STA函数导致卡Apfs NVME的问题。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/RTCMemoryFixup</span><br></pre></td></tr></table></figure>

<h3 id="SidecarEnabler"><a href="#SidecarEnabler" class="headerlink" title="SidecarEnabler"></a>SidecarEnabler</h3><p>删除Sidecar使用的所有SMBIOS检查。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/hieplpvip/SidecarEnabler</span><br></pre></td></tr></table></figure>

<h3 id="ThunderboltReset"><a href="#ThunderboltReset" class="headerlink" title="ThunderboltReset"></a>ThunderboltReset</h3><p>禁用Alpine Ridge中的ICM，以便OSX接管LC。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/osy/ThunderboltReset</span><br></pre></td></tr></table></figure>

<h3 id="SystemProfilerMemoryFixup"><a href="#SystemProfilerMemoryFixup" class="headerlink" title="SystemProfilerMemoryFixup"></a>SystemProfilerMemoryFixup</h3><p>在MacBookAir和MacBookPro10，x平台上显示内存选项卡。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Goldfish64/SystemProfilerMemoryFixup</span><br></pre></td></tr></table></figure>

<h3 id="DiskArbitrationFixup"><a href="#DiskArbitrationFixup" class="headerlink" title="DiskArbitrationFixup"></a>DiskArbitrationFixup</h3><p>禁用<code>此计算机无法读取您插入的磁盘</code>消息。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Goldfish64/DiskArbitrationFixup</span><br></pre></td></tr></table></figure>

<h3 id="AHCI-3rdParty-eSATA-x2F-SATA"><a href="#AHCI-3rdParty-eSATA-x2F-SATA" class="headerlink" title="AHCI_3rdParty_eSATA&#x2F;SATA"></a>AHCI_3rdParty_eSATA&#x2F;SATA</h3><p>第三方eSATA&#x2F;SATA驱动，连接到这些接口的设备将会识别为内置磁盘。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">// AHCI_3rdParty_eSATA</span><br><span class="line">https://github.com/NTT123/Hackintosh-HP-Z420-MacOS-High-Sierra-10.13-10.14/tree/master/CLOVER/kexts/10.12</span><br><span class="line"></span><br><span class="line">// AHCI_3rdParty_SATA</span><br><span class="line">https://github.com/forumi0721/osx_clover/tree/master/OEM/Z77%20Extreme4/kexts/10.11</span><br></pre></td></tr></table></figure>

<h3 id="AHCI-Intel-Generic-SATA"><a href="#AHCI-Intel-Generic-SATA" class="headerlink" title="AHCI_Intel_Generic_SATA"></a>AHCI_Intel_Generic_SATA</h3><p>英特尔SATA驱动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/NTT123/Hackintosh-HP-Z420-MacOS-High-Sierra-10.13-10.14/tree/master/CLOVER/kexts/10.12</span><br></pre></td></tr></table></figure>

<h3 id="FakePCIID"><a href="#FakePCIID" class="headerlink" title="FakePCIID"></a>FakePCIID</h3><p>仿冒PCI设备核心驱动。与IOPCIDevice设备建立连接，以便当另一个驱动程序连接到同一设备时提供备用的PCI ID。</p>
<p>必须放置FakePCIID，然后根据需求放置以下kexts中的一个或多个。</p>
<table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody><tr>
<td>FakePCIID_AR9280_as_AR946x</td>
<td>将PCI ID重新映射回AR9280（168c:002a），即使该设备本身报告的是168c:0034</td>
</tr>
<tr>
<td>FakePCIID_Broadcom_WiFi</td>
<td>模拟真正的Apple Airport（苹果无线网卡）</td>
</tr>
<tr>
<td>FakePCIID_Intel_GbX</td>
<td>与一些Intel以太网设备建立连接，以使基于Intel芯片组的驱动程序工作。不做单独使用，通常与SmallTreelntel8254x.kext、Applelntel8254XEthernet.kext、SmallTreelntel82576.kext、SmallTreelntel8259x.kext一起使用</td>
</tr>
<tr>
<td>FakePCIID_Intel_HD_Graphics</td>
<td>用于核显HD4200&#x2F;HD4400&#x2F;HD4600&#x2F;P4600，Iris 540&#x2F;550 Iris Pro 580、HD510 HD515 HD520 HD530 P530（多数530不需要这个）、P4000、P6300 – 162a、UHD620 KabyLake-R、UHD630 CoffeeLake</td>
</tr>
<tr>
<td>FakePCIID_Intel_HDMI_Audio</td>
<td>在Haswell以上的系统中提供HDMI-audio的设备，为不支持的HDAU提供支持（通常称为B0D3，但需要将其重命名为HDAU）</td>
</tr>
<tr>
<td>FakePCIID_XHCIMux</td>
<td>把USB3.0主控器XHC下的USB2.0 port转移（bypass）到USB2.0主控器EHC1&#x2F;EHC2下</td>
</tr>
<tr>
<td>FakePCIID_BCM57XX_as_BCM57765</td>
<td>用于Broadcom无线网卡BCM5700&#x2F;BCM5701&#x2F;BCM5702&#x2F;BCM5703&#x2F;BCM5717&#x2F;BCM5718&#x2F;BCM5719&#x2F;BCM5725&#x2F;BCM5727&#x2F;BCM5761&#x2F;BCM5762&#x2F;BCM57760&#x2F;BCM57764&#x2F;BCM57767&#x2F;BCM57781&#x2F;BCM57782&#x2F;BCM57785&#x2F;BCM57786&#x2F;BCM57787&#x2F;BCM57788&#x2F;BCM57790&#x2F;BCM57791&#x2F;BCM57795&#x2F;BCM5785&#x2F;BCM5787M</td>
</tr>
</tbody></table>
<h3 id="AMFIExemption"><a href="#AMFIExemption" class="headerlink" title="AMFIExemption"></a>AMFIExemption</h3><p>将允许的entitlements添加到非Apple签名的应用程序。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/osy/AMFIExemption</span><br></pre></td></tr></table></figure>

<h3 id="Innie"><a href="#Innie" class="headerlink" title="Innie"></a>Innie</h3><p>使PCIe驱动器显示为内部驱动器。</p>
<h3 id="NightShiftEnabler"><a href="#NightShiftEnabler" class="headerlink" title="NightShiftEnabler"></a>NightShiftEnabler</h3><p>NightShiftUnlocker已被整合到NightShiftEnabler。</p>
<p>开启Night Shift功能。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/cdf/NightShiftEnabler</span><br></pre></td></tr></table></figure>

<h3 id="ECEnabler"><a href="#ECEnabler" class="headerlink" title="ECEnabler"></a>ECEnabler</h3><p>允许读取长度超过1个字节的EC字段，大大减少工作电池状态所需的ACPI修改量。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/1Revenger1/ECEnabler</span><br></pre></td></tr></table></figure>

<h3 id="RestrictEvents"><a href="#RestrictEvents" class="headerlink" title="RestrictEvents"></a>RestrictEvents</h3><p>MacProMemoryNotificationDisabler已被整合到RestrictEvents。</p>
<p>阻止不需要的进程，避免在不同的硬件上引起兼容性问题，并解锁对仅限于其他硬件的某些功能的支持。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/RestrictEvents</span><br></pre></td></tr></table></figure>

<h3 id="TSCAdjustReset"><a href="#TSCAdjustReset" class="headerlink" title="TSCAdjustReset"></a>TSCAdjustReset</h3><p>修复了在x299主板和Skylake-X平台的cpu启动Mac时同步TSC的衰退的问题。</p>
<h3 id="TOSMotionSensor"><a href="#TOSMotionSensor" class="headerlink" title="TOSMotionSensor"></a>TOSMotionSensor</h3><p>东芝hackintosh设备的加速度计驱动程序。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/jslegendre/TOSMotionSensor</span><br></pre></td></tr></table></figure>

<h3 id="AAAMouSSE"><a href="#AAAMouSSE" class="headerlink" title="AAAMouSSE"></a>AAAMouSSE</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://forums.macrumors.com/threads/mp3-1-others-sse-4-2-emulation-to-enable-amd-metal-driver.2206682/</span><br></pre></td></tr></table></figure>

<h3 id="Polaris22Fixup"><a href="#Polaris22Fixup" class="headerlink" title="Polaris22Fixup"></a>Polaris22Fixup</h3><p>修复Polaris22&#x2F;VegaM的已知图形问题，支持10.14+。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/osy/Polaris22Fixup</span><br></pre></td></tr></table></figure>

<h3 id="HWPEnable"><a href="#HWPEnable" class="headerlink" title="HWPEnable"></a>HWPEnable</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cgithub.com/headkaze/HWPEnable</span><br></pre></td></tr></table></figure>

<h2 id="旧版Kexts"><a href="#旧版Kexts" class="headerlink" title="旧版Kexts"></a>旧版Kexts</h2><table>
<thead>
<tr>
<th>名称</th>
<th>作用</th>
<th>下载</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>OpenHaltRestart&#x2F;EvOreboot</td>
<td>解决重启&#x2F;关机时遇到无法断电问题</td>
<td></td>
<td>不可同时使用</td>
</tr>
<tr>
<td>ElliottForceLegacyRTC&#x2F;LegacyAppleRTC</td>
<td>防止主板BIOS的CMOS重置错误</td>
<td></td>
<td>不可同时使用</td>
</tr>
<tr>
<td>PlatformUUID</td>
<td>解决Unable to determine UUID for host. Error:35的问题</td>
<td></td>
<td></td>
</tr>
<tr>
<td>IOAHCIBlockStorageInjector</td>
<td>修复将内置硬盘识别为外置硬盘的问题</td>
<td></td>
<td></td>
</tr>
<tr>
<td>ApplePS2SmartTouchPad</td>
<td>键盘鼠标触摸板万能驱动</td>
<td></td>
<td></td>
</tr>
<tr>
<td>SATA-100-series-unsupported</td>
<td>Intel 100系列主板SATA磁盘识别驱动</td>
<td></td>
<td></td>
</tr>
<tr>
<td>SATA-200-series-unsupported</td>
<td>Intel 200系列主板SATA磁盘识别驱动</td>
<td></td>
<td></td>
</tr>
<tr>
<td>SATA-RAID-unsupported</td>
<td>SATA磁盘阵列驱动</td>
<td></td>
<td></td>
</tr>
<tr>
<td>XHCI-200-series-injector</td>
<td>200系列主板驱动</td>
<td></td>
<td></td>
</tr>
<tr>
<td>XHCI-300-series-injector</td>
<td>300系列主板驱动</td>
<td></td>
<td></td>
</tr>
<tr>
<td>XHCI-unsupported</td>
<td>Intel X99系列主板驱动，可用于H370、B360、H310、Z390（Mojave及更新版本不需要）、X79、X99、AsRock（除B460&#x2F;Z490+）</td>
<td></td>
<td></td>
</tr>
<tr>
<td>XHCI-x99-injector</td>
<td>Intel X99系列主板驱动</td>
<td></td>
<td></td>
</tr>
<tr>
<td>BT4LEContiunityFixup</td>
<td>开启BT4LE蓝牙上的hotspot以及handoff</td>
<td></td>
<td></td>
</tr>
<tr>
<td>NVEnabler</td>
<td>NVidia GeForce 9500GT驱动</td>
<td></td>
<td></td>
</tr>
<tr>
<td>AppleAC97Audio</td>
<td>AC97音频驱动</td>
<td></td>
<td>适用于10.4-10.5</td>
</tr>
<tr>
<td>BCM5906MEthernet</td>
<td>NetLink BCM5906M有线网卡驱动</td>
<td><a target="_blank" rel="noopener" href="https://github.com/vmatyushin/osx-bcm5906m/">https://github.com/vmatyushin/osx-bcm5906m/</a></td>
<td>适用于10.6-10.7</td>
</tr>
<tr>
<td>ACPICPUThrottle</td>
<td>根据负载自动调整CPU时钟和电压</td>
<td></td>
<td>适用于10.4</td>
</tr>
<tr>
<td>MMInputFamily</td>
<td>多媒体输入设备驱动</td>
<td><a target="_blank" rel="noopener" href="http://defyne.org/dvb/driver.html">http://defyne.org/dvb/driver.html</a></td>
<td>适用于10.2-10.4</td>
</tr>
<tr>
<td>Macam</td>
<td>USB摄像头驱动</td>
<td><a target="_blank" rel="noopener" href="https://sourceforge.net/projects/webcam-osx/">https://sourceforge.net/projects/webcam-osx/</a></td>
<td>适用于10.4</td>
</tr>
</tbody></table>
<h2 id="Kext禁用器"><a href="#Kext禁用器" class="headerlink" title="Kext禁用器"></a>Kext禁用器</h2><p>下载以下kext并右键显示包内容，打开Contents&#x2F;Info.plist，将AppleUserUpstreamClient替换为需要禁用的kext名称，然后放到引导器的Kexts部分即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/attachments/disabler-kext-zip.18081/</span><br></pre></td></tr></table></figure>

<h2 id="WhateverGreen"><a href="#WhateverGreen" class="headerlink" title="WhateverGreen"></a>WhateverGreen</h2><p>修复显卡必备驱动，适用于10.8及更新版本，下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/WhateverGreen/releases</span><br></pre></td></tr></table></figure>

<p>若未指定帧缓冲区，则默认帧缓冲区将被注入。若未设置帧缓冲区且系统具有独立显卡，则空帧缓冲区（零个控制器）将被注入。空帧缓冲区如下。</p>
<table>
<thead>
<tr>
<th>平台</th>
<th>platform-id</th>
</tr>
</thead>
<tbody><tr>
<td>SNB</td>
<td>0x00050000</td>
</tr>
<tr>
<td>IVY</td>
<td>0x01620007</td>
</tr>
<tr>
<td>HSW</td>
<td>0x04120004</td>
</tr>
<tr>
<td>SKL</td>
<td>0x19120001</td>
</tr>
<tr>
<td>KBL</td>
<td>0x59120003</td>
</tr>
<tr>
<td>CFL</td>
<td>0x3E910003</td>
</tr>
<tr>
<td>CML</td>
<td>0x9BC80003</td>
</tr>
</tbody></table>
<p>在未确定帧缓冲区时，可通过启动参数<code>igfxframe=</code>进行设置，此时将忽略设备属性中的参数。</p>
<p>WhateverGreen中已包含以下kexts。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">IntelGraphicsFixup</span><br><span class="line">IntelGraphicsDVMTFixup</span><br><span class="line">NvidiaGraphicsFixup</span><br><span class="line">CoreDisplayFixup</span><br><span class="line">Shiki</span><br><span class="line">IntelGraphicsDVMTFixup</span><br><span class="line">AzulPatcher4600</span><br><span class="line">AppleBacklightFixup</span><br><span class="line">EnableLidWake</span><br><span class="line">NoVPAJpeg</span><br><span class="line">FakePCIID</span><br><span class="line">FakePCIID_Intel_HD_Graphics</span><br><span class="line">FakePCIID_Intel_HDMI_Audio</span><br></pre></td></tr></table></figure>

<p>注意需要关闭Clover的以下选项。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"># DSDT</span><br><span class="line">AddHDMI</span><br><span class="line">FixDisplay</span><br><span class="line">FixIntelGfx</span><br><span class="line">AddIMEI</span><br><span class="line">FixHDA</span><br><span class="line">AddPNLF</span><br><span class="line"></span><br><span class="line"># 显卡</span><br><span class="line">UseIntelHDMI</span><br><span class="line">SetIntelBacklight</span><br><span class="line">SetIntelMaxBacklight</span><br><span class="line"></span><br><span class="line"># 设备</span><br><span class="line">Devices-Inject</span><br><span class="line"></span><br><span class="line"># FakeID</span><br><span class="line">IntelGFX</span><br><span class="line">IMEI</span><br><span class="line">ig-platform-id</span><br><span class="line"></span><br><span class="line"># 重命名</span><br><span class="line">GFX0 to IGPU</span><br><span class="line">PEGP to GFX0</span><br><span class="line">HECI to IMEI</span><br><span class="line">MEI to IMEI</span><br><span class="line">HDAS to HDEF</span><br><span class="line">B0D3 to HDAU</span><br><span class="line"></span><br><span class="line"># 启动参数</span><br><span class="line">-disablegfxfirmware</span><br><span class="line">-igfxnohdmi</span><br></pre></td></tr></table></figure>

<details>
<summary>【过时】IntelGraphicsDVMTFixup</summary>

<p>macOS的启动需要DVMT大于<code>32MB</code>，否则将导致内核崩溃。DVMT的大小可在BIOS设置，若BIOS无相应选项，可通过grub中的<code>setup_var</code>修改。或者使用本kext，但仅用于macOS 10.13及以下，在macOS Mojave下不适用。</p>
<p>在Majove及更新系统，需在Clover的config.plist应用以下补丁以修复。或者使用Hackintool，应用补丁时勾选<code>DVMT 32MB 预分配</code>。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;key&gt;Properties&lt;/key&gt;</span><br><span class="line">&lt;dict&gt;</span><br><span class="line">    &lt;key&gt;PciRoot(0x0)/Pci(0x2,0x0)&lt;/key&gt;</span><br><span class="line">        &lt;dict&gt;</span><br><span class="line">            &lt;key&gt;framebuffer-fbmem&lt;/key&gt;</span><br><span class="line">            &lt;data&gt;</span><br><span class="line">            AACQAA==</span><br><span class="line">            &lt;/data&gt;</span><br><span class="line">            &lt;key&gt;framebuffer-patch-enable&lt;/key&gt;</span><br><span class="line">            &lt;data&gt;</span><br><span class="line">            AQAAAA==</span><br><span class="line">            &lt;/data&gt;</span><br><span class="line">            &lt;key&gt;framebuffer-stolenmem&lt;/key&gt;</span><br><span class="line">            &lt;data&gt;</span><br><span class="line">            AAAwAQ==</span><br><span class="line">            &lt;/data&gt;</span><br><span class="line">        &lt;/dict&gt;</span><br><span class="line">&lt;/dict&gt;</span><br></pre></td></tr></table></figure>

</details>

<h3 id="VoodooI2C"><a href="#VoodooI2C" class="headerlink" title="VoodooI2C"></a>VoodooI2C</h3><p>VoodooI2C具有记忆性，由中断模式切换到轮询模式、在中断模式下修改有关触控板的DSDT等均不生效，需将VoodooI2C的相关驱动在Clover的kexts下删除再重新复制才能恢复初始设置。适用于10.11及以上系统，下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/alexandred/VoodooI2C/releases</span><br></pre></td></tr></table></figure>

<h3 id="NullCPUPowerManagement"><a href="#NullCPUPowerManagement" class="headerlink" title="NullCPUPowerManagement"></a>NullCPUPowerManagement</h3><p>AMD CPU无法使用英特尔的电源管理，因此我们需要取消它。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Goldfish64/SerialMouse/releases</span><br></pre></td></tr></table></figure>

<h2 id="Windows读写HFS"><a href="#Windows读写HFS" class="headerlink" title="Windows读写HFS"></a>Windows读写HFS</h2><h3 id="HFSExplorer"><a href="#HFSExplorer" class="headerlink" title="HFSExplorer"></a>HFSExplorer</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.catacombae.org/hfsexplorer/</span><br></pre></td></tr></table></figure>

<h3 id="HFS-driver"><a href="#HFS-driver" class="headerlink" title="HFS+ driver"></a>HFS+ driver</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://forums.macrumors.com/threads/apple-hfs-windows-driver-download.1368010/</span><br></pre></td></tr></table></figure>

<h2 id="UEFI驱动"><a href="#UEFI驱动" class="headerlink" title="UEFI驱动"></a>UEFI驱动</h2><h3 id="EmuVariableUefi"><a href="#EmuVariableUefi" class="headerlink" title="EmuVariableUefi"></a>EmuVariableUefi</h3><p>用于模拟NVRAM，从而将黑苹果洗白。若主板有原生NVARM，则无需放置。</p>
<h3 id="ApfsDriverLoader"><a href="#ApfsDriverLoader" class="headerlink" title="ApfsDriverLoader"></a>ApfsDriverLoader</h3><p>APFS驱动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/ApfsSupportPkg</span><br></pre></td></tr></table></figure>

<h3 id="HFSPlus"><a href="#HFSPlus" class="headerlink" title="HFSPlus"></a>HFSPlus</h3><p>HFS驱动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/STLVNUB/CloverGrower/tree/master/Files/HFSPlus/x64</span><br><span class="line">https://github.com/JrCs/CloverGrowerPro/tree/master/Files/HFSPlus/X64</span><br></pre></td></tr></table></figure>

<h3 id="CrScreenshotDxe"><a href="#CrScreenshotDxe" class="headerlink" title="CrScreenshotDxe"></a>CrScreenshotDxe</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/LongSoft/CrScreenshotDxe</span><br></pre></td></tr></table></figure>

<h2 id="硬件驱动"><a href="#硬件驱动" class="headerlink" title="硬件驱动"></a>硬件驱动</h2><h3 id="EMU-USB"><a href="#EMU-USB" class="headerlink" title="EMU-USB"></a>EMU-USB</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Wouter1/EMU-driver</span><br></pre></td></tr></table></figure>

<h3 id="kXAudioDriver"><a href="#kXAudioDriver" class="headerlink" title="kXAudioDriver"></a>kXAudioDriver</h3><p>Windows和macOS的kX音频驱动程序。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/kxproject/kx-audio-driver</span><br></pre></td></tr></table></figure>

<h3 id="liquid-coolers"><a href="#liquid-coolers" class="headerlink" title="liquid coolers"></a>liquid coolers</h3><p>液体冷却器驱动。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/liquidctl/liquidctl</span><br></pre></td></tr></table></figure>

<h2 id="黑苹果库"><a href="#黑苹果库" class="headerlink" title="黑苹果库"></a>黑苹果库</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 网站</span><br><span class="line">https://images.daliansky.net/d/YmBXVA8q/blog</span><br><span class="line"></span><br><span class="line"># FTP</span><br><span class="line">主机名 / repo1.macintoshgarden.org</span><br><span class="line">用户名 / macgarden</span><br><span class="line">密码 / publicdl</span><br></pre></td></tr></table></figure>

<h2 id="OC-little包"><a href="#OC-little包" class="headerlink" title="OC-little包"></a>OC-little包</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/daliansky/OC-little</span><br><span class="line"></span><br><span class="line"># 另附P-little包（较旧）</span><br><span class="line">https://github.com/daliansky/P-little</span><br></pre></td></tr></table></figure>

<h2 id="工具"><a href="#工具" class="headerlink" title="工具"></a>工具</h2><h3 id="MountEFI"><a href="#MountEFI" class="headerlink" title="MountEFI"></a>MountEFI</h3><p>挂载EFI分区。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/corpnewt/MountEFI</span><br></pre></td></tr></table></figure>

<h3 id="Hackintool"><a href="#Hackintool" class="headerlink" title="Hackintool"></a>Hackintool</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">http://headsoft.com.au/download/mac/Hackintool.zip</span><br><span class="line">https://github.com/headkaze/Hackintool</span><br></pre></td></tr></table></figure>

<h3 id="Kext-Updater"><a href="#Kext-Updater" class="headerlink" title="Kext Updater"></a>Kext Updater</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://bitbucket.org/profdrluigi/kextupdater/downloads/</span><br></pre></td></tr></table></figure>

<h3 id="MaciASL"><a href="#MaciASL" class="headerlink" title="MaciASL"></a>MaciASL</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># RehabMan版</span><br><span class="line">https://bitbucket.org/RehabMan/os-x-maciasl-patchmatic/downloads/</span><br><span class="line"></span><br><span class="line"># 最新版</span><br><span class="line">https://github.com/acidanthera/MaciASL/releases</span><br></pre></td></tr></table></figure>

<h3 id="IORegistryExplorer"><a href="#IORegistryExplorer" class="headerlink" title="IORegistryExplorer"></a>IORegistryExplorer</h3><p>IORegistryExplorer可用于查看硬件情况。2.1版下载链接如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/vulgo/IORegistryExplorer</span><br><span class="line">https://github.com/khronokernel/IORegistryClone</span><br></pre></td></tr></table></figure>

<h4 id="判断设备存在情况"><a href="#判断设备存在情况" class="headerlink" title="判断设备存在情况"></a>判断设备存在情况</h4><p>将左上角的模式选为<code>IODeviceTree</code>，查看左侧设备树。若显示类似为<code>P0P5@1C,1</code>，则表示存在该设备。若显示类似为<code>P0P5@1c0001</code>，且点进去后只有acpi-device与acpi-path两项，则表示不存在该设备。</p>
<h4 id="判断设备驱动情况"><a href="#判断设备驱动情况" class="headerlink" title="判断设备驱动情况"></a>判断设备驱动情况</h4><p>将左上角的模式选为IOService，查看左侧设备树。</p>
<p>若显示类似为<code>P0P4@1C</code>且可展开，展开后可查看相应kexts，则该设备已驱动。部分设备可能无法展开，但也已经被驱动，如Memory Controller Hub、SMBus Controller。</p>
<p>若显示类似为<code>pci8086,266a@1F,3</code>，则该设备未驱动。</p>
<h4 id="查看CPU变频档次"><a href="#查看CPU变频档次" class="headerlink" title="查看CPU变频档次"></a>查看CPU变频档次</h4><p>搜索ACPI_SMC_PlatformPlugin，查看其中的PerformanceStateArray即可。</p>
<h3 id="gfxutil"><a href="#gfxutil" class="headerlink" title="gfxutil"></a>gfxutil</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/gfxutil</span><br></pre></td></tr></table></figure>

<h3 id="iMessageDebug"><a href="#iMessageDebug" class="headerlink" title="iMessageDebug"></a>iMessageDebug</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/YCSuperM/ImessageDebug</span><br></pre></td></tr></table></figure>

<h3 id="Clover-Configurator"><a href="#Clover-Configurator" class="headerlink" title="Clover Configurator"></a>Clover Configurator</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://mackie100projects.altervista.org/download-clover-configurator/</span><br></pre></td></tr></table></figure>

<h3 id="Kext-Utility"><a href="#Kext-Utility" class="headerlink" title="Kext Utility"></a>Kext Utility</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://en.freedownloadmanager.org/Mac-OS/Kext-Utility-FREE.html</span><br></pre></td></tr></table></figure>

<h3 id="7z"><a href="#7z" class="headerlink" title="7z"></a>7z</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.7-zip.org/download.html</span><br></pre></td></tr></table></figure>

<h3 id="AW-EDID-Editor"><a href="#AW-EDID-Editor" class="headerlink" title="AW EDID Editor"></a>AW EDID Editor</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.analogway.com/apac/products/software-tools/aw-edid-editor/</span><br></pre></td></tr></table></figure>

<h3 id="HWMonitorSMC2"><a href="#HWMonitorSMC2" class="headerlink" title="HWMonitorSMC2"></a>HWMonitorSMC2</h3><p>监控硬件运行状况。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/CloverHackyColor/HWMonitorSMC2</span><br></pre></td></tr></table></figure>

<h3 id="Continuity-Activation-Tool"><a href="#Continuity-Activation-Tool" class="headerlink" title="Continuity-Activation-Tool"></a>Continuity-Activation-Tool</h3><p>只能用在Broadcom无线网卡，用于启用接力功能。支持10.10-10.13。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/dokterdok/Continuity-Activation-Tool</span><br></pre></td></tr></table></figure>

<h2 id="一键安装系统工具"><a href="#一键安装系统工具" class="headerlink" title="一键安装系统工具"></a>一键安装系统工具</h2><h3 id="Ccmacos"><a href="#Ccmacos" class="headerlink" title="Ccmacos"></a>Ccmacos</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.ccmacos.cn/#</span><br></pre></td></tr></table></figure>

<h1 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h1><h2 id="黑苹果必备：Intel核显platform-ID整理及smbios速查表"><a href="#黑苹果必备：Intel核显platform-ID整理及smbios速查表" class="headerlink" title="黑苹果必备：Intel核显platform ID整理及smbios速查表"></a>黑苹果必备：Intel核显platform ID整理及smbios速查表</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.daliansky.net/Intel-core-display-platformID-finishing.html</span><br></pre></td></tr></table></figure>

<h2 id="FIX-BTFIRMWAREUPLOADER-IN-MACOS-HIGH-SIERRA"><a href="#FIX-BTFIRMWAREUPLOADER-IN-MACOS-HIGH-SIERRA" class="headerlink" title="FIX BTFIRMWAREUPLOADER IN MACOS HIGH SIERRA"></a>FIX BTFIRMWAREUPLOADER IN MACOS HIGH SIERRA</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://osxlatitude.com/forums/topic/10127-updated-nov-2017-fix-btfirmwareuploader-in-macos-high-sierra/</span><br></pre></td></tr></table></figure>

<h2 id="alexandred-x2F-VoodooI2C-Gitter"><a href="#alexandred-x2F-VoodooI2C-Gitter" class="headerlink" title="alexandred&#x2F;VoodooI2C-Gitter"></a>alexandred&#x2F;VoodooI2C-Gitter</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://gitter.im/alexandred/VoodooI2C/archives/2019/01/14</span><br><span class="line">https://gitter.im/alexandred/VoodooI2C/archives/2018/08/30（搜索@Piero512）</span><br></pre></td></tr></table></figure>

<h2 id="Hackintool深度教程"><a href="#Hackintool深度教程" class="headerlink" title="Hackintool深度教程"></a>Hackintool深度教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.daliansky.net/Intel-FB-Patcher-tutorial-and-insertion-pose.html</span><br></pre></td></tr></table></figure>

<h2 id="修改DSDT实现电量显示教程"><a href="#修改DSDT实现电量显示教程" class="headerlink" title="修改DSDT实现电量显示教程"></a>修改DSDT实现电量显示教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.geekcj.com/333.html</span><br><span class="line">https://blog.gzxiaobai.cn/2020/05/16/%E4%B8%BA%E5%B0%8F%E7%99%BD%E8%AE%BE%E8%AE%A1%E7%9A%84%E7%94%B5%E6%B1%A0%E6%95%99%E7%A8%8B%EF%BC%88DSDT%EF%BC%89/</span><br></pre></td></tr></table></figure>

<h2 id="VoodooI2C驱动教程"><a href="#VoodooI2C驱动教程" class="headerlink" title="VoodooI2C驱动教程"></a>VoodooI2C驱动教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://www.penghubingzhou.cn/2019/01/06/VoodooI2C%20DSDT%20Edit/</span><br><span class="line">https://www.penghubingzhou.cn/2019/07/24/VoodooI2C%20DSDT%20Edit%20FAQ/</span><br><span class="line">https://voodooi2c.github.io/#GPIO%20Pinning/GPIO%20Pinning</span><br></pre></td></tr></table></figure>

<h2 id="英特尔®核芯显卡常见问答（WhateverGreen）"><a href="#英特尔®核芯显卡常见问答（WhateverGreen）" class="headerlink" title="英特尔®核芯显卡常见问答（WhateverGreen）"></a>英特尔®核芯显卡常见问答（WhateverGreen）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/WhateverGreen/blob/master/Manual/FAQ.IntelHD.cn.md</span><br></pre></td></tr></table></figure>

<h2 id="黑苹果精华必读：新手常见-五国-v图-错误解决"><a href="#黑苹果精华必读：新手常见-五国-v图-错误解决" class="headerlink" title="黑苹果精华必读：新手常见(五国)(-v图)错误解决"></a>黑苹果精华必读：新手常见(五国)(-v图)错误解决</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.xmyy.com/article-254928.html</span><br></pre></td></tr></table></figure>

<h2 id="Disabling-discrete-graphics-in-dual-GPU-laptops"><a href="#Disabling-discrete-graphics-in-dual-GPU-laptops" class="headerlink" title="Disabling discrete graphics in dual-GPU laptops"></a>Disabling discrete graphics in dual-GPU laptops</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/guide-disabling-discrete-graphics-in-dual-gpu-laptops.163772/</span><br></pre></td></tr></table></figure>

<h2 id="x2F-r-x2F-Hackintosh-Vanilla-Desktop-Guide"><a href="#x2F-r-x2F-Hackintosh-Vanilla-Desktop-Guide" class="headerlink" title="&#x2F;r&#x2F;Hackintosh Vanilla Desktop Guide"></a>&#x2F;r&#x2F;Hackintosh Vanilla Desktop Guide</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://hackintosh.gitbook.io/-r-hackintosh-vanilla-desktop-guide/</span><br></pre></td></tr></table></figure>

<h2 id="SSDT-GPU-Graphics-Card-Injection"><a href="#SSDT-GPU-Graphics-Card-Injection" class="headerlink" title="SSDT GPU (Graphics Card) Injection"></a>SSDT GPU (Graphics Card) Injection</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/ssdt-gpu-graphics-card-injection.183354/</span><br></pre></td></tr></table></figure>

<h2 id="stevezhengshiqi-x2F-one-key-cpufriend"><a href="#stevezhengshiqi-x2F-one-key-cpufriend" class="headerlink" title="stevezhengshiqi&#x2F;one-key-cpufriend"></a>stevezhengshiqi&#x2F;one-key-cpufriend</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/stevezhengshiqi/one-key-cpufriend</span><br></pre></td></tr></table></figure>

<h2 id="AR9565-MAC黑苹果Bluetooth蓝牙驱动教程"><a href="#AR9565-MAC黑苹果Bluetooth蓝牙驱动教程" class="headerlink" title="AR9565 MAC黑苹果Bluetooth蓝牙驱动教程"></a>AR9565 MAC黑苹果Bluetooth蓝牙驱动教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.longzc.cn/index.php/archives/308</span><br></pre></td></tr></table></figure>

<h2 id="SSDT-RMNE-aml"><a href="#SSDT-RMNE-aml" class="headerlink" title="SSDT-RMNE.aml"></a>SSDT-RMNE.aml</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/RehabMan/OS-X-Null-Ethernet/blob/master/ssdt-rmne.aml</span><br></pre></td></tr></table></figure>

<h2 id="SSDT-PNLF-aml"><a href="#SSDT-PNLF-aml" class="headerlink" title="SSDT-PNLF.aml"></a>SSDT-PNLF.aml</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://bitbucket.org/RehabMan/applebacklightfixup/downloads/</span><br></pre></td></tr></table></figure>

<h2 id="使用HIDPI解决睡眠唤醒黑屏、花屏及连接外部显示器的正确姿势"><a href="#使用HIDPI解决睡眠唤醒黑屏、花屏及连接外部显示器的正确姿势" class="headerlink" title="使用HIDPI解决睡眠唤醒黑屏、花屏及连接外部显示器的正确姿势"></a>使用HIDPI解决睡眠唤醒黑屏、花屏及连接外部显示器的正确姿势</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.daliansky.net/Use-HIDPI-to-solve-sleep-wake-up-black-screen,-Huaping-and-connect-the-external-monitor-the-correct-posture.html</span><br></pre></td></tr></table></figure>

<h2 id="小米笔记本Pro安装10-13随手记及EFI分享"><a href="#小米笔记本Pro安装10-13随手记及EFI分享" class="headerlink" title="小米笔记本Pro安装10.13随手记及EFI分享"></a>小米笔记本Pro安装10.13随手记及EFI分享</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.daliansky.net/XiaoMiPro-notebook-Installation-10.13-readily-remember-and-share-EFI.html</span><br></pre></td></tr></table></figure>

<h2 id="Notebook-Compatibility-List"><a href="#Notebook-Compatibility-List" class="headerlink" title="Notebook Compatibility List"></a>Notebook Compatibility List</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://gpu-passthrough.com/</span><br></pre></td></tr></table></figure>

<h2 id="Hackintosh-won’t-boot-How-to-use-verbose-mode-to-fix-it"><a href="#Hackintosh-won’t-boot-How-to-use-verbose-mode-to-fix-it" class="headerlink" title="Hackintosh won’t boot? How to use verbose mode to fix it"></a>Hackintosh won’t boot? How to use verbose mode to fix it</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://www.macbreaker.com/2015/01/read-verbose-mode-fix-hackintosh-errors.html</span><br></pre></td></tr></table></figure>

<h2 id="新手常见-五国-v图-错误解决-原版-破解kernel-补丁kext下载"><a href="#新手常见-五国-v图-错误解决-原版-破解kernel-补丁kext下载" class="headerlink" title="新手常见(五国)(-v图)错误解决(原版,破解kernel,补丁kext下载)"></a>新手常见(五国)(-v图)错误解决(原版,破解kernel,补丁kext下载)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/ashuai81/article/details/8032952</span><br></pre></td></tr></table></figure>

<h2 id="DW1820A-x2F-BCM94350ZAE-x2F-BCM94356ZEPA50DX插入的正确姿势"><a href="#DW1820A-x2F-BCM94350ZAE-x2F-BCM94356ZEPA50DX插入的正确姿势" class="headerlink" title="DW1820A&#x2F;BCM94350ZAE&#x2F;BCM94356ZEPA50DX插入的正确姿势"></a>DW1820A&#x2F;BCM94350ZAE&#x2F;BCM94356ZEPA50DX插入的正确姿势</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.daliansky.net/DW1820A_BCM94350ZAE-driver-inserts-the-correct-posture.html</span><br></pre></td></tr></table></figure>

<h2 id="Broadcom-BCM94352z-x2F-DW1560驱动新姿势-新方法"><a href="#Broadcom-BCM94352z-x2F-DW1560驱动新姿势-新方法" class="headerlink" title="Broadcom BCM94352z&#x2F;DW1560驱动新姿势[新方法]"></a>Broadcom BCM94352z&#x2F;DW1560驱动新姿势[新方法]</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.daliansky.net/Broadcom-BCM94352z-DW1560-drive-new-posture.html</span><br></pre></td></tr></table></figure>

<h2 id="OpenIntelWireless"><a href="#OpenIntelWireless" class="headerlink" title="OpenIntelWireless"></a>OpenIntelWireless</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://openintelwireless.github.io/itlwm/Installation.html</span><br></pre></td></tr></table></figure>

<h2 id="VoodooI2C-x2F-VoodooI2C-Patches"><a href="#VoodooI2C-x2F-VoodooI2C-Patches" class="headerlink" title="VoodooI2C&#x2F;VoodooI2C-Patches"></a>VoodooI2C&#x2F;VoodooI2C-Patches</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/VoodooI2C/VoodooI2C-Patches</span><br></pre></td></tr></table></figure>

<h2 id="OpenCorePkg-x2F-Kexts-md-at-master"><a href="#OpenCorePkg-x2F-Kexts-md-at-master" class="headerlink" title="OpenCorePkg&#x2F;Kexts.md at master"></a>OpenCorePkg&#x2F;Kexts.md at master</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Kexts.md</span><br></pre></td></tr></table></figure>

<h2 id="启用CPU-HWP-锁定CPU最高频率-让CPU展示其真正实力吧-OC可用"><a href="#启用CPU-HWP-锁定CPU最高频率-让CPU展示其真正实力吧-OC可用" class="headerlink" title="启用CPU-HWP, 锁定CPU最高频率, 让CPU展示其真正实力吧! (OC可用)"></a>启用CPU-HWP, 锁定CPU最高频率, 让CPU展示其真正实力吧! (OC可用)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://zhuanlan.zhihu.com/p/49183461</span><br></pre></td></tr></table></figure>

<h2 id="Skylake-HWP-Enable"><a href="#Skylake-HWP-Enable" class="headerlink" title="Skylake HWP Enable"></a>Skylake HWP Enable</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/skylake-hwp-enable.214915/</span><br></pre></td></tr></table></figure>

<h2 id="First-time-Hackintosh-Stuck-at-Grey-Screen-after-installation"><a href="#First-time-Hackintosh-Stuck-at-Grey-Screen-after-installation" class="headerlink" title="First time Hackintosh Stuck at Grey Screen after installation"></a>First time Hackintosh Stuck at Grey Screen after installation</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/first-time-hackintosh-stuck-at-grey-screen-after-installation.186100/</span><br></pre></td></tr></table></figure>

<h2 id="Clover引导安装黑苹果卡各种问题的解决方法-内容较多"><a href="#Clover引导安装黑苹果卡各种问题的解决方法-内容较多" class="headerlink" title="Clover引导安装黑苹果卡各种问题的解决方法(内容较多)"></a>Clover引导安装黑苹果卡各种问题的解决方法(内容较多)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://vlambda.com/wz_7ilcImwxVbO.html</span><br></pre></td></tr></table></figure>

<h2 id="El-Capitan-Install-Demanding-Bluetooth-Mouse-x2F-Keyboard"><a href="#El-Capitan-Install-Demanding-Bluetooth-Mouse-x2F-Keyboard" class="headerlink" title="El Capitan Install Demanding Bluetooth Mouse&#x2F;Keyboard"></a>El Capitan Install Demanding Bluetooth Mouse&#x2F;Keyboard</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.reddit.com/r/hackintosh/comments/3v81hb/el_capitan_install_demanding_bluetooth/</span><br></pre></td></tr></table></figure>

<h2 id="CLOVER-折腾了半天终于找到唤醒重启问题的原因了。。。"><a href="#CLOVER-折腾了半天终于找到唤醒重启问题的原因了。。。" class="headerlink" title="[CLOVER] 折腾了半天终于找到唤醒重启问题的原因了。。。"></a>[CLOVER] 折腾了半天终于找到唤醒重启问题的原因了。。。</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://bbs.pcbeta.com/viewthread-1835747-1-1.html</span><br></pre></td></tr></table></figure>

<h2 id="List-of-Hackintosh-USB-Port-Limit-Patches-10-15-Updated"><a href="#List-of-Hackintosh-USB-Port-Limit-Patches-10-15-Updated" class="headerlink" title="List of Hackintosh USB Port Limit Patches (10.15 Updated)"></a>List of Hackintosh USB Port Limit Patches (10.15 Updated)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://hackintosher.com/forums/thread/list-of-hackintosh-usb-port-limit-patches-10-15-updated.467/</span><br></pre></td></tr></table></figure>

<h2 id="Wireless-Buyers-Guide"><a href="#Wireless-Buyers-Guide" class="headerlink" title="Wireless Buyers Guide"></a>Wireless Buyers Guide</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://dortania.github.io/Wireless-Buyers-Guide/</span><br></pre></td></tr></table></figure>

<h2 id="Hackintosh-Internet-Install-Gitbook"><a href="#Hackintosh-Internet-Install-Gitbook" class="headerlink" title="Hackintosh Internet Install Gitbook"></a>Hackintosh Internet Install Gitbook</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://midi1996.github.io/hackintosh-internet-install-gitbook/</span><br></pre></td></tr></table></figure>

<h2 id="Guide-Booting-the-OS-X-installer-on-LAPTOPS-with-Clover"><a href="#Guide-Booting-the-OS-X-installer-on-LAPTOPS-with-Clover" class="headerlink" title="[Guide] Booting the OS X installer on LAPTOPS with Clover"></a>[Guide] Booting the OS X installer on LAPTOPS with Clover</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/guide-booting-the-os-x-installer-on-laptops-with-clover.148093/</span><br></pre></td></tr></table></figure>

<h2 id="Fix-incorrect-time-in-Windows-OSX-dual-boot"><a href="#Fix-incorrect-time-in-Windows-OSX-dual-boot" class="headerlink" title="Fix incorrect time in Windows + OSX dual boot"></a>Fix incorrect time in Windows + OSX dual boot</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/fix-incorrect-time-in-windows-osx-dual-boot.133719/</span><br></pre></td></tr></table></figure>

<h2 id="教程-【變色龍系列三】FakeSMC-kext-設定說明【08-x2F-05】"><a href="#教程-【變色龍系列三】FakeSMC-kext-設定說明【08-x2F-05】" class="headerlink" title="[教程] 【變色龍系列三】FakeSMC.kext 設定說明【08&#x2F;05】"></a>[教程] 【變色龍系列三】FakeSMC.kext 設定說明【08&#x2F;05】</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://bbs.pcbeta.com/viewthread.php?tid=799385</span><br></pre></td></tr></table></figure>

<h2 id="A-Beginner’s-Guide-to-Creating-a-Custom-USB-SSDT"><a href="#A-Beginner’s-Guide-to-Creating-a-Custom-USB-SSDT" class="headerlink" title="A Beginner’s Guide to Creating a Custom USB SSDT"></a>A Beginner’s Guide to Creating a Custom USB SSDT</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/a-beginners-guide-to-creating-a-custom-usb-ssdt.272505/</span><br></pre></td></tr></table></figure>

<h2 id="分享-10-11-USB问题之下篇，一步一步教你解决USB问题"><a href="#分享-10-11-USB问题之下篇，一步一步教你解决USB问题" class="headerlink" title="[分享] 10.11 USB问题之下篇，一步一步教你解决USB问题"></a>[分享] 10.11 USB问题之下篇，一步一步教你解决USB问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://bbs.pcbeta.com/viewthread-1651615-1-1.html</span><br></pre></td></tr></table></figure>

<h2 id="OpenCorePkg-x2F-Docs-x2F-Kexts-md"><a href="#OpenCorePkg-x2F-Docs-x2F-Kexts-md" class="headerlink" title="OpenCorePkg&#x2F;Docs&#x2F;Kexts.md"></a>OpenCorePkg&#x2F;Docs&#x2F;Kexts.md</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/OpenCorePkg/blob/master/Docs/Kexts.md</span><br></pre></td></tr></table></figure>

<h2 id="DSDT笔记本电池补丁教程-让黑苹果显示电池状态信息"><a href="#DSDT笔记本电池补丁教程-让黑苹果显示电池状态信息" class="headerlink" title="DSDT笔记本电池补丁教程-让黑苹果显示电池状态信息"></a>DSDT笔记本电池补丁教程-让黑苹果显示电池状态信息</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://imacos.top/2019/12/03/1602-2/</span><br></pre></td></tr></table></figure>

<h2 id="New-and-Improved-Mac-OS-Tutorial-Part-1-The-Basics"><a href="#New-and-Improved-Mac-OS-Tutorial-Part-1-The-Basics" class="headerlink" title="New and Improved Mac OS Tutorial, Part 1 (The Basics)"></a>New and Improved Mac OS Tutorial, Part 1 (The Basics)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://passthroughpo.st/new-and-improved-mac-os-tutorial-part-1-the-basics/</span><br></pre></td></tr></table></figure>

<h2 id="【官方双语】让任何电脑都用上黑苹果！-linus谈科技"><a href="#【官方双语】让任何电脑都用上黑苹果！-linus谈科技" class="headerlink" title="【官方双语】让任何电脑都用上黑苹果！#linus谈科技"></a>【官方双语】让任何电脑都用上黑苹果！#linus谈科技</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.bilibili.com/video/BV1vb411V7WD</span><br></pre></td></tr></table></figure>

<h2 id="foxlet-x2F-macOS-Simple-KVM"><a href="#foxlet-x2F-macOS-Simple-KVM" class="headerlink" title="foxlet&#x2F;macOS-Simple-KVM"></a>foxlet&#x2F;macOS-Simple-KVM</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/foxlet/macOS-Simple-KVM</span><br></pre></td></tr></table></figure>

<h2 id="Make-a-install-USBstick-faster-better-and-Dualboot"><a href="#Make-a-install-USBstick-faster-better-and-Dualboot" class="headerlink" title="Make a install USBstick, faster, better and Dualboot."></a>Make a install USBstick, faster, better and Dualboot.</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.youtube.com/watch?v=akc1Db2KXwo</span><br></pre></td></tr></table></figure>

<h2 id="Hasee-macOS-Library"><a href="#Hasee-macOS-Library" class="headerlink" title="Hasee macOS Library"></a>Hasee macOS Library</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://hackintosh.kirainmoe.com/</span><br></pre></td></tr></table></figure>

<h2 id="Guide-How-to-patch-DSDT-for-working-battery-status"><a href="#Guide-How-to-patch-DSDT-for-working-battery-status" class="headerlink" title="[Guide] How to patch DSDT for working battery status"></a>[Guide] How to patch DSDT for working battery status</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/guide-how-to-patch-dsdt-for-working-battery-status.116102/</span><br></pre></td></tr></table></figure>

<h2 id="Guide-Native-Power-Management-for-Laptops"><a href="#Guide-Native-Power-Management-for-Laptops" class="headerlink" title="[Guide] Native Power Management for Laptops"></a>[Guide] Native Power Management for Laptops</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/guide-native-power-management-for-laptops.175801/</span><br></pre></td></tr></table></figure>

<h2 id="Creating-a-Custom-SSDT-for-USBInjectAll-kext"><a href="#Creating-a-Custom-SSDT-for-USBInjectAll-kext" class="headerlink" title="Creating a Custom SSDT for USBInjectAll.kext"></a>Creating a Custom SSDT for USBInjectAll.kext</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/guide-creating-a-custom-ssdt-for-usbinjectall-kext.211311/</span><br></pre></td></tr></table></figure>

<h2 id="FIX-“Window-Server-Service-only-ran-for-0-seconds”-with-dual-GPU"><a href="#FIX-“Window-Server-Service-only-ran-for-0-seconds”-with-dual-GPU" class="headerlink" title="[FIX] “Window Server Service only ran for 0 seconds” with dual-GPU"></a>[FIX] “Window Server Service only ran for 0 seconds” with dual-GPU</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/fix-window-server-service-only-ran-for-0-seconds-with-dual-gpu.233092/</span><br></pre></td></tr></table></figure>

<h2 id="Leopard-en-un-Raid-por-Software-usando-Chameleon"><a href="#Leopard-en-un-Raid-por-Software-usando-Chameleon" class="headerlink" title="Leopard en un Raid por Software usando Chameleon"></a>Leopard en un Raid por Software usando Chameleon</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.osx86spain.com/145/14262/leopard-en-un-raid-por-software-usando-chameleon.html</span><br></pre></td></tr></table></figure>

<h2 id="ASUS-100-Series-and-Later-Custom-SSDT-for-XHCI-USB-Port-Control"><a href="#ASUS-100-Series-and-Later-Custom-SSDT-for-XHCI-USB-Port-Control" class="headerlink" title="ASUS 100 Series and Later Custom SSDT for XHCI USB Port Control"></a>ASUS 100 Series and Later Custom SSDT for XHCI USB Port Control</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/asus-100-series-and-later-custom-ssdt-for-xhci-usb-port-control.253981/</span><br></pre></td></tr></table></figure>

<h2 id="Guide-Laptop-backlight-control-using-AppleBacklightFixup-kext"><a href="#Guide-Laptop-backlight-control-using-AppleBacklightFixup-kext" class="headerlink" title="[Guide] Laptop backlight control using AppleBacklightFixup.kext"></a>[Guide] Laptop backlight control using AppleBacklightFixup.kext</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/guide-laptop-backlight-control-using-applebacklightfixup-kext.218222/</span><br></pre></td></tr></table></figure>

<h2 id="Apple-Backlight-Injector-Brightness-not-saved"><a href="#Apple-Backlight-Injector-Brightness-not-saved" class="headerlink" title="Apple Backlight Injector Brightness not saved"></a>Apple Backlight Injector Brightness not saved</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.tonymacx86.com/threads/apple-backlight-injector-brightness-not-saved.222952/page-14#post-1516295</span><br></pre></td></tr></table></figure>

<h2 id="Install-Snow-Leopard-on-AMD-PC-Laptop"><a href="#Install-Snow-Leopard-on-AMD-PC-Laptop" class="headerlink" title="Install Snow Leopard on AMD PC, Laptop"></a>Install Snow Leopard on AMD PC, Laptop</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://geeknizer.com/install-snow-leopard-on-amd/</span><br></pre></td></tr></table></figure>

<h2 id="acidanthera-x2F-bugtracker"><a href="#acidanthera-x2F-bugtracker" class="headerlink" title="acidanthera&#x2F;bugtracker"></a>acidanthera&#x2F;bugtracker</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/acidanthera/bugtracker/issues/365</span><br><span class="line">https://github.com/acidanthera/bugtracker/issues/1247</span><br><span class="line">https://github.com/acidanthera/bugtracker/issues/1193</span><br></pre></td></tr></table></figure>

<h2 id="Intel®-HD-Graphics"><a href="#Intel®-HD-Graphics" class="headerlink" title="Intel® HD Graphics"></a>Intel® HD Graphics</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://applelife.ru/threads/intel-hd-graphics.1289648/#post-595326</span><br></pre></td></tr></table></figure>

<h2 id="Завод-Intel®-Quick-Sync-Video"><a href="#Завод-Intel®-Quick-Sync-Video" class="headerlink" title="Завод Intel® Quick Sync Video"></a>Завод Intel® Quick Sync Video</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.applelife.ru/threads/zavod-intel-quick-sync-video.817923/page-186#post-765336</span><br></pre></td></tr></table></figure>

<h2 id="dortania-x2F-bugtracker"><a href="#dortania-x2F-bugtracker" class="headerlink" title="dortania&#x2F;bugtracker"></a>dortania&#x2F;bugtracker</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/dortania/bugtracker/issues/15</span><br></pre></td></tr></table></figure>

<h2 id="macOS-Big-Sur-成功开启HiDPI正确姿势"><a href="#macOS-Big-Sur-成功开启HiDPI正确姿势" class="headerlink" title="macOS Big Sur 成功开启HiDPI正确姿势"></a>macOS Big Sur 成功开启HiDPI正确姿势</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://juejin.cn/post/6894638510158905352</span><br></pre></td></tr></table></figure>

<h2 id="Need-CMOS-reset-after-sleep-only-after-login"><a href="#Need-CMOS-reset-after-sleep-only-after-login" class="headerlink" title="Need CMOS reset after sleep, only after login"></a>Need CMOS reset after sleep, only after login</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.insanelymac.com/forum/topic/329624-need-cmos-reset-after-sleep-only-after-login/</span><br></pre></td></tr></table></figure>

<h2 id="VMware15-x2F-16解鎖VMware安裝MacOS"><a href="#VMware15-x2F-16解鎖VMware安裝MacOS" class="headerlink" title="VMware15&#x2F;16解鎖VMware安裝MacOS"></a>VMware15&#x2F;16解鎖VMware安裝MacOS</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://iter01.com/557364.html</span><br></pre></td></tr></table></figure>

<h2 id="分享UltraISO，转换你的iATKOS-ML2-DMG为ISO-让它支持硬盘助手写入"><a href="#分享UltraISO，转换你的iATKOS-ML2-DMG为ISO-让它支持硬盘助手写入" class="headerlink" title="分享UltraISO，转换你的iATKOS ML2.DMG为ISO,让它支持硬盘助手写入"></a>分享UltraISO，转换你的iATKOS ML2.DMG为ISO,让它支持硬盘助手写入</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://bbs.pcbeta.com/viewthread-1256266-1-1.html</span><br></pre></td></tr></table></figure>

<h2 id="Olarila"><a href="#Olarila" class="headerlink" title="Olarila"></a>Olarila</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">https://www.olarila.com/topic/9860-guide-forcing-rgb-mode-to-fix-problems-on-external-monitors-in-macos/</span><br><span class="line">https://www.olarila.com/topic/4997-usb-raise-remove-limit-port-patch-el-capitan-sierra-high-sierra-mojave-catalina/</span><br><span class="line">https://www.olarila.com/topic/6451-guide-generate-ssdt-for-power-management-with-ssdtprgen/</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/posts/Hackintosh-Upgrade-Downgrade.html" rel="prev" title="黑苹果的系统升降级">
      <i class="fa fa-chevron-left"></i> 黑苹果的系统升降级
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/posts/Hackintosh-Maintenance.html" rel="next" title="黑苹果的系统维护">
      黑苹果的系统维护 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%AE%B0%E5%BD%95%E7%A1%AC%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="nav-text">记录硬件配置</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A1%AC%E7%9B%98%E5%88%86%E5%8C%BA"><span class="nav-text">硬盘分区</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%95%E5%AF%BC%E5%99%A8%E4%B8%8B%E8%BD%BD"><span class="nav-text">引导器下载</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%9B%98%E5%88%B6%E4%BD%9C"><span class="nav-text">安装盘制作</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BB%91%E6%9E%9C%E5%B0%8F%E5%85%B5"><span class="nav-text">黑果小兵</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macrecovery"><span class="nav-text">macrecovery</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#GibMacOS"><span class="nav-text">GibMacOS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B6%E4%BB%96%E6%96%B9%E5%BC%8F"><span class="nav-text">其他方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%98%E6%96%B9%E4%B8%8B%E8%BD%BD"><span class="nav-text">官方下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#InstallInstallMacOS"><span class="nav-text">InstallInstallMacOS</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#BIOS%E8%AE%BE%E7%BD%AE"><span class="nav-text">BIOS设置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E8%AE%BE%E7%BD%AE"><span class="nav-text">全局设置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E5%8D%A1%E8%AE%BE%E7%BD%AE"><span class="nav-text">显卡设置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F"><span class="nav-text">安装系统</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%BC%95%E5%AF%BC%E6%9C%AC%E5%9C%B0%E7%B3%BB%E7%BB%9F"><span class="nav-text">引导本地系统</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Clover%E5%AE%89%E8%A3%85"><span class="nav-text">Clover安装</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Clover%E9%85%8D%E7%BD%AE"><span class="nav-text">Clover配置</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#ACPI"><span class="nav-text">ACPI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Boot"><span class="nav-text">Boot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Grpahics"><span class="nav-text">Grpahics</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Devices"><span class="nav-text">Devices</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BF%9B%E5%85%A5%E7%B3%BB%E7%BB%9F"><span class="nav-text">进入系统</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A9%B1%E5%8A%A8%E4%BF%AE%E8%A1%A5"><span class="nav-text">驱动修补</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E5%8D%A1"><span class="nav-text">显卡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%89%E6%8B%A9%E6%98%BE%E5%8D%A1"><span class="nav-text">选择显卡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E8%AE%BE%E5%A4%87%E8%B7%AF%E5%BE%84"><span class="nav-text">查找设备路径</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87gfxutil"><span class="nav-text">通过gfxutil</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Windows"><span class="nav-text">通过Windows</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87ACPI%E8%A1%A8"><span class="nav-text">通过ACPI表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A9%B1%E5%8A%A8Nvidia%E6%98%BE%E5%8D%A1"><span class="nav-text">驱动Nvidia显卡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A9%B1%E5%8A%A8Intel%E6%98%BE%E5%8D%A1"><span class="nav-text">驱动Intel显卡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A9%B1%E5%8A%A8AMD%E6%98%BE%E5%8D%A1"><span class="nav-text">驱动AMD显卡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%A6%81%E7%94%A8%E6%98%BE%E5%8D%A1"><span class="nav-text">禁用显卡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E6%B7%BB%E5%8A%A0%E5%BC%95%E5%AF%BC%E6%A0%87%E5%BF%97"><span class="nav-text">通过添加引导标志</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E6%B7%BB%E5%8A%A0%E7%8B%AC%E6%98%BE%E8%AE%BE%E5%A4%87%E5%B9%B6%E7%A6%81%E7%94%A8"><span class="nav-text">通过添加独显设备并禁用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87SSDT"><span class="nav-text">通过SSDT</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%8F%E8%94%BD%E7%8B%AC%E6%98%BE"><span class="nav-text">屏蔽独显</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%8F%E5%B9%95%E4%BA%AE%E5%BA%A6"><span class="nav-text">屏幕亮度</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%90%AF%E7%94%A8%E8%B0%83%E8%8A%82"><span class="nav-text">启用调节</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BA%AE%E5%BA%A6%E6%81%A2%E5%A4%8D"><span class="nav-text">亮度恢复</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%88%E6%9E%9C%E6%A3%80%E9%AA%8C"><span class="nav-text">效果检验</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DRM%E6%94%AF%E6%8C%81"><span class="nav-text">DRM支持</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA%E4%BF%AE%E5%A4%8D"><span class="nav-text">显示修复</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B9%B3%E6%BB%91%E5%AD%97%E4%BD%93"><span class="nav-text">平滑字体</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Hidpi"><span class="nav-text">Hidpi</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E8%84%9A%E6%9C%AC"><span class="nav-text">通过脚本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87RDM"><span class="nav-text">通过RDM</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E6%89%8B%E5%8A%A8%E8%AE%BE%E7%BD%AE"><span class="nav-text">通过手动设置</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B3%A8%E5%85%A5EDID"><span class="nav-text">注入EDID</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87patch-edid-rb"><span class="nav-text">通过patch-edid.rb</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Clover"><span class="nav-text">通过Clover</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Hackintool"><span class="nav-text">通过Hackintool</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%83%A8%E5%88%86iGPU%E5%94%A4%E9%86%92%E4%B8%AD%E6%96%AD"><span class="nav-text">部分iGPU唤醒中断</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#NVMe%E5%86%85%E6%A0%B8%E5%B4%A9%E6%BA%83"><span class="nav-text">NVMe内核崩溃</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Ice-Lake%E7%AC%94%E8%AE%B0%E6%9C%AC%E5%87%BA%E7%8E%B0panic%EF%BC%8C%E4%B8%BACannot-allow-DC9-without-disallowing-DC6"><span class="nav-text">Ice Lake笔记本出现panic，为Cannot allow DC9 without disallowing DC6</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%A6%E6%9C%89AMD-dGPU%E7%9A%844k%E6%98%BE%E7%A4%BA%E5%99%A8%E6%97%A0%E6%B3%95%E9%9A%8F%E6%9C%BA%E5%94%A4%E9%86%92"><span class="nav-text">带有AMD dGPU的4k显示器无法随机唤醒</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9C%89%E7%BA%BF%E7%BD%91%E5%8D%A1"><span class="nav-text">有线网卡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Realtek"><span class="nav-text">Realtek</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Intel"><span class="nav-text">Intel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Broadcom"><span class="nav-text">Broadcom</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AMD"><span class="nav-text">AMD</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Atheros"><span class="nav-text">Atheros</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Aquantia"><span class="nav-text">Aquantia</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E5%AE%9E%E9%99%85%E7%BD%91%E5%8D%A1"><span class="nav-text">无实际网卡</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C%E7%AB%AF%E5%8F%A3%E9%87%8D%E7%BD%AE"><span class="nav-text">网络端口重置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9C%89%E7%BA%BF%E7%BD%91%E5%8D%A1%E5%86%85%E5%BB%BA"><span class="nav-text">有线网卡内建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%8D%E9%A9%B1%E5%8D%A1"><span class="nav-text">免驱卡</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A0%E7%BA%BF%E7%BD%91%E5%8D%A1"><span class="nav-text">无线网卡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Atheros-1"><span class="nav-text">Atheros</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Intel-1"><span class="nav-text">Intel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Broadcom-1"><span class="nav-text">Broadcom</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Realtek-1"><span class="nav-text">Realtek</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%8D%E9%A9%B1%E5%8D%A1-1"><span class="nav-text">免驱卡</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%B6%E5%AE%83"><span class="nav-text">其它</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%B3%95"><span class="nav-text">替代方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A3%B0%E5%8D%A1"><span class="nav-text">声卡</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87AppleALC%E9%A9%B1%E5%8A%A8"><span class="nav-text">通过AppleALC驱动</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AF%BB%E6%89%BELayout-ID"><span class="nav-text">寻找Layout ID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%86%99%E5%85%A5Layout-ID"><span class="nav-text">写入Layout ID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%AE%9E%E7%8E%B0%E9%A1%BA%E5%BA%8F"><span class="nav-text">实现顺序</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-1"><span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%90%8C%E4%B8%80%E5%B8%83%E5%B1%80%E5%9C%A8Clover%E8%B5%B7%E4%BD%9C%E7%94%A8%E8%80%8COpenCore%E4%B8%8D%E8%B5%B7%E4%BD%9C%E7%94%A8"><span class="nav-text">同一布局在Clover起作用而OpenCore不起作用</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#10-15%E4%B8%AD%E7%94%B1%E4%BA%8E%E7%94%B5%E6%BA%90%E7%8A%B6%E6%80%81%E6%9B%B4%E6%94%B9%E5%AF%BC%E8%87%B4%E7%9A%84kernel-panic"><span class="nav-text">10.15中由于电源状态更改导致的kernel panic</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#AppleALC%E5%B7%A5%E4%BD%9C%E4%B8%8D%E4%B8%80%E8%87%B4"><span class="nav-text">AppleALC工作不一致</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8F%8C%E5%A3%B0%E5%8D%A1%E6%97%B6%E6%97%A0%E5%A3%B0"><span class="nav-text">双声卡时无声</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BB%8EWindows%E9%87%8D%E5%90%AF%E5%88%B0Mac%E5%90%8E%E6%97%A0%E5%A3%B0"><span class="nav-text">从Windows重启到Mac后无声</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87VoodooHDA%E9%A9%B1%E5%8A%A8"><span class="nav-text">通过VoodooHDA驱动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E5%AD%94%E6%A3%80%E6%B5%8B"><span class="nav-text">插孔检测</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%94%AE%E7%9B%98%E4%B8%8E%E9%BC%A0%E6%A0%87"><span class="nav-text">键盘与鼠标</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%A9%B1%E5%8A%A8"><span class="nav-text">驱动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%94%AE%E4%BD%8D%E6%98%A0%E5%B0%84"><span class="nav-text">键位映射</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#USB"><span class="nav-text">USB</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E9%99%90%E5%88%B6%E8%A7%A3%E9%99%A4%E8%A1%A5%E4%B8%81"><span class="nav-text">端口限制解除补丁</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#El-Capitan"><span class="nav-text">El Capitan</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Sierra"><span class="nav-text">Sierra</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#High-Sierra"><span class="nav-text">High Sierra</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mojave"><span class="nav-text">Mojave</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Catalina"><span class="nav-text">Catalina</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%AB%AF%E5%8F%A3%E5%AE%9A%E5%88%B6"><span class="nav-text">端口定制</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Hackintool-1"><span class="nav-text">通过Hackintool</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87USBMap"><span class="nav-text">通过USBMap</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87SSDT-1"><span class="nav-text">通过SSDT</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8D%E5%94%A4%E9%86%92%E6%96%AD%E7%BA%BF"><span class="nav-text">修复唤醒断线</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8DUSB%E5%AF%BC%E8%87%B4%E7%9A%84%E5%85%B3%E6%9C%BA"><span class="nav-text">修复USB导致的关机</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%93%9D%E7%89%99"><span class="nav-text">蓝牙</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Atheros-2"><span class="nav-text">Atheros</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Intel-2"><span class="nav-text">Intel</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Broadcom-2"><span class="nav-text">Broadcom</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E7%94%A8%E8%93%9D%E7%89%99%E5%85%B3%E9%97%AD%E6%8C%89%E9%92%AE"><span class="nav-text">启用蓝牙关闭按钮</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%B7%E5%90%AF%E5%8A%A8%E4%B8%8E%E7%83%AD%E5%90%AF%E5%8A%A8"><span class="nav-text">冷启动与热启动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%93%9D%E7%89%99%E6%97%A0%E6%B3%95%E9%A9%B1%E5%8A%A8%E7%9A%84%E6%9B%BF%E4%BB%A3%E6%96%B9%E6%A1%88"><span class="nav-text">蓝牙无法驱动的替代方案</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BC%A0%E6%84%9F%E5%99%A8"><span class="nav-text">传感器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%B5%E6%B1%A0"><span class="nav-text">电池</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83%E9%85%8D%E7%BD%AE"><span class="nav-text">环境配置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9DSDT"><span class="nav-text">修改DSDT</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E6%89%BE%E5%AD%97%E6%AE%B5"><span class="nav-text">查找字段</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#16-x2F-32%E4%BD%8D%E5%AD%97%E6%AE%B5%E5%A4%84%E7%90%86"><span class="nav-text">16&#x2F;32位字段处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%B6%85%E8%BF%8732%E4%BD%8D%E5%AD%97%E6%AE%B5%E5%A4%84%E7%90%86"><span class="nav-text">超过32位字段处理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%BA%94%E7%94%A8%E4%BF%AE%E6%94%B9"><span class="nav-text">应用修改</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AF%B4%E6%98%8E"><span class="nav-text">说明</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E5%86%99%E6%B3%95"><span class="nav-text">正则表达式写法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%A1%A5%E4%B8%81%E7%BB%93%E6%9E%84"><span class="nav-text">补丁结构</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Mutex%E7%BD%AE%E9%9B%B6%E6%A3%80%E6%9F%A5%E5%8F%8A%E4%BF%AE%E5%A4%8D"><span class="nav-text">Mutex置零检查及修复</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%A3%80%E6%9F%A5"><span class="nav-text">检查</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8D"><span class="nav-text">修复</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%85%85%E7%94%B5-x2F-%E6%94%BE%E7%94%B5%E7%8A%B6%E6%80%81%E7%9A%84%E9%80%BB%E8%BE%91%E9%94%99%E8%AF%AF"><span class="nav-text">充电&#x2F;放电状态的逻辑错误</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A6%E6%8E%A7%E6%9D%BF"><span class="nav-text">触控板</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E8%A7%A6%E6%8E%A7%E6%9D%BF%E7%B1%BB%E5%9E%8B"><span class="nav-text">判断触控板类型</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#PS2%E8%A7%A6%E6%8E%A7%E6%9D%BF"><span class="nav-text">PS2触控板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#I2C%E8%A7%A6%E6%8E%A7%E6%9D%BF"><span class="nav-text">I2C触控板</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%B0%E5%BD%95IRQ"><span class="nav-text">记录IRQ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%A1%AE%E5%AE%9A%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86"><span class="nav-text">确定工作原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%BD%AE%E8%AF%A2%E6%A8%A1%E5%BC%8F%E9%A9%B1%E5%8A%A8"><span class="nav-text">轮询模式驱动</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%B8%AD%E6%96%AD%E6%A8%A1%E5%BC%8F%E9%A9%B1%E5%8A%A8"><span class="nav-text">中断模式驱动</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BAPIC-Pin%E5%80%BC"><span class="nav-text">查看APIC Pin值</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A7%BB%E9%99%A4APIC%E4%B8%AD%E6%96%AD%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text">移除APIC中断控制器</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A1%AE%E5%AE%9A%E8%A7%A6%E6%8E%A7%E6%9D%BF%E5%9B%BA%E5%AE%9A%E7%B1%BB%E5%9E%8B"><span class="nav-text">确定触控板固定类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#GPIO%E5%9B%BA%E5%AE%9A"><span class="nav-text">GPIO固定</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E9%A9%B1%E5%8A%A8%E5%AE%89%E8%A3%85"><span class="nav-text">驱动安装</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%83%AD%E8%A1%A5%E4%B8%81%E6%B3%95%E5%BA%94%E7%94%A8GPIO%E8%A1%A5%E4%B8%81"><span class="nav-text">热补丁法应用GPIO补丁</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#DSDT%E4%BF%AE%E6%94%B9%E6%B3%95%E5%BA%94%E7%94%A8GPIO%E8%A1%A5%E4%B8%81"><span class="nav-text">DSDT修改法应用GPIO补丁</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E7%A1%AE%E8%AE%A4%E9%A9%B1%E5%8A%A8%E6%83%85%E5%86%B5"><span class="nav-text">确认驱动情况</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%89%B9%E6%AE%8A%E5%A4%84%E7%90%86"><span class="nav-text">特殊处理</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#%E5%8D%8E%E7%A1%95%E7%AC%94%E8%AE%B0%E6%9C%AC"><span class="nav-text">华硕笔记本</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#%E4%B8%89%E6%98%9F%E7%AC%94%E8%AE%B0%E6%9C%AC"><span class="nav-text">三星笔记本</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%B6%E5%AE%83-1"><span class="nav-text">其它</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#TouchID"><span class="nav-text">TouchID</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#SMBIOS%E4%B8%8E%E4%B8%89%E7%A0%81%E8%AE%BE%E7%BD%AE"><span class="nav-text">SMBIOS与三码设置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%80%89%E6%8B%A9"><span class="nav-text">选择</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#CPU"><span class="nav-text">CPU</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#GPU"><span class="nav-text">GPU</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%93%8D%E4%BD%9C%E7%B3%BB%E7%BB%9F%E6%94%AF%E6%8C%81"><span class="nav-text">操作系统支持</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%85%8D%E7%BD%AE"><span class="nav-text">配置</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#CPU%E4%B8%8E%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86"><span class="nav-text">CPU与电源管理</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8E%9F%E7%94%9F%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86"><span class="nav-text">原生电源管理</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E7%94%A8"><span class="nav-text">启用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87XCPM"><span class="nav-text">通过XCPM</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87ssdtPRgen"><span class="nav-text">通过ssdtPRgen</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E9%A2%91"><span class="nav-text">变频</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86"><span class="nav-text">基本知识</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#LFM"><span class="nav-text">LFM</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#EPP"><span class="nav-text">EPP</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Perf-Bias"><span class="nav-text">Perf-Bias</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87CPUFriendFriend"><span class="nav-text">通过CPUFriendFriend</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87one-key-cpufriend"><span class="nav-text">通过one-key-cpufriend</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%80%9A%E8%BF%87kexts"><span class="nav-text">通过kexts</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%94%81%E9%A2%91"><span class="nav-text">锁频</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87Clover-1"><span class="nav-text">通过Clover</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87kexts-1"><span class="nav-text">通过kexts</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%A1%AC%E7%9B%98%E9%85%8D%E7%BD%AE"><span class="nav-text">硬盘配置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#SSD%E5%BC%80%E5%90%AFTRIM"><span class="nav-text">SSD开启TRIM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B1%8F%E8%94%BD%E4%B8%89%E6%98%9FPM981-NVMe-SSD"><span class="nav-text">屏蔽三星PM981 NVMe SSD</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%9D%A1%E7%9C%A0%E7%9B%B8%E5%85%B3"><span class="nav-text">睡眠相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%93%E5%BC%80"><span class="nav-text">打开</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B3%E9%97%AD"><span class="nav-text">关闭</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8D-1"><span class="nav-text">修复</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BD%91%E5%8D%A1%E6%A3%80%E6%9F%A5"><span class="nav-text">网卡检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E5%8D%A1%E6%A3%80%E6%9F%A5"><span class="nav-text">显卡检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%A3%B0%E5%8D%A1%E6%A3%80%E6%9F%A5"><span class="nav-text">声卡检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SMBus%E6%A3%80%E6%9F%A5"><span class="nav-text">SMBus检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TSC%E6%A3%80%E6%9F%A5"><span class="nav-text">TSC检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RTC%E6%A3%80%E6%9F%A5"><span class="nav-text">RTC检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NVMe%E6%A3%80%E6%9F%A5"><span class="nav-text">NVMe检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CPU%E7%94%B5%E6%BA%90%E7%AE%A1%E7%90%86%E6%A3%80%E6%9F%A5"><span class="nav-text">CPU电源管理检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Thunderbolt%E6%A3%80%E6%9F%A5"><span class="nav-text">Thunderbolt检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#USB%E6%A3%80%E6%9F%A5"><span class="nav-text">USB检查</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IRQ%E6%A3%80%E6%9F%A5"><span class="nav-text">IRQ检查</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-2"><span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E5%A4%8D%E4%BC%91%E7%9C%A0%E5%90%8E%E6%91%84%E5%83%8F%E5%A4%B4%E5%A4%B1%E6%95%88"><span class="nav-text">修复休眠后摄像头失效</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E6%97%B6%E9%97%B4%E8%B0%83%E6%95%B4"><span class="nav-text">系统时间调整</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%AE%8C%E6%88%90%E5%BA%A6%E6%A3%80%E6%9F%A5"><span class="nav-text">完成度检查</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%98%E9%A2%91%E6%B5%8B%E8%AF%95"><span class="nav-text">变频测试</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%98%BE%E7%A4%BA"><span class="nav-text">显示</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A3%B0%E9%9F%B3"><span class="nav-text">声音</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BD%91%E7%BB%9C"><span class="nav-text">网络</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#USB-1"><span class="nav-text">USB</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%B5%E6%B1%A0-1"><span class="nav-text">电池</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9D%A1%E7%9C%A0"><span class="nav-text">睡眠</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E8%AE%BE%E5%A4%87"><span class="nav-text">输入设备</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9B%BA%E6%80%81%E7%A1%AC%E7%9B%98"><span class="nav-text">固态硬盘</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-3"><span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E5%AE%89%E8%A3%85"><span class="nav-text">系统安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAMediaKit-reports-not-enough-space-on-device-for-requested-operation"><span class="nav-text">提示MediaKit reports not enough space on device for requested operation</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%97%B6%E5%81%9C%E5%9C%A8verifying-installmacosx-pkg-x2F-installesd-dmg"><span class="nav-text">安装时停在verifying installmacosx.pkg&#x2F;installesd.dmg</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9C%80%E8%A6%81%E8%93%9D%E7%89%99%E8%BF%9E%E6%8E%A5%E9%94%AE%E7%9B%98%E8%BF%9E%E6%8E%A5"><span class="nav-text">需要蓝牙连接键盘连接</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%AA%8C%E8%AF%81%E5%AE%89%E8%A3%85%E5%99%A8%E6%95%B0%E6%8D%AE%E6%97%B6%E5%8F%91%E7%94%9F%E9%94%99%E8%AF%AF"><span class="nav-text">验证安装器数据时发生错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E7%A4%BA%E5%AE%89%E8%A3%85%E8%B5%84%E6%BA%90%E5%B7%B2%E8%BF%87%E6%9C%9F%EF%BC%8C%E9%80%80%E5%87%BA%E5%AE%89%E8%A3%85%E5%99%A8%E4%BB%A5%E9%87%8D%E6%96%B0%E5%90%AF%E5%8A%A8%E7%94%B5%E8%84%91%EF%BC%8C%E7%84%B6%E5%90%8E%E5%86%8D%E6%AC%A1%E5%B0%9D%E8%AF%95"><span class="nav-text">提示安装资源已过期，退出安装器以重新启动电脑，然后再次尝试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%8D%A1%E5%9C%A8%E7%AC%AC%E4%B8%80%E6%AC%A1%E8%B5%B0%E6%9D%A1%E7%9A%84%E6%9C%80%E5%90%8E%E4%B8%A4%E5%88%86%E9%92%9F%E5%BE%88%E4%B9%85%EF%BC%8C%E8%80%8C%E5%90%8E%E6%8F%90%E7%A4%BA%E5%AE%89%E8%A3%85%E5%99%A8%E8%B5%84%E6%BA%90%E6%8D%9F%E5%9D%8F"><span class="nav-text">安装卡在第一次走条的最后两分钟很久，而后提示安装器资源损坏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E6%97%B6%E6%8F%90%E7%A4%BA%E6%89%BE%E4%B8%8D%E5%88%B0%E5%AE%89%E8%A3%85%E5%99%A8%E8%B5%84%E6%BA%90"><span class="nav-text">安装时提示找不到安装器资源</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BC%95%E5%AF%BC%E5%90%AF%E5%8A%A8"><span class="nav-text">引导启动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%AE%89%E8%A3%85%E5%AE%8C%E6%88%90%E5%90%8E%E6%97%A0%E6%B3%95%E8%BF%9B%E5%85%A5BIOS"><span class="nav-text">安装完成后无法进入BIOS</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Clover%E6%8F%90%E7%A4%BAInvalid-Signature%E2%80%A6"><span class="nav-text">Clover提示Invalid Signature…</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Clover%E6%8F%90%E7%A4%BAX64-Exception-Error"><span class="nav-text">Clover提示X64 Exception Error</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Clover%E6%A3%80%E6%B5%8B%E4%B8%8D%E5%88%B0%E5%90%AF%E5%8A%A8%E9%A1%B9%E6%88%96%E4%BB%BB%E4%BD%95HFS-x2F-APFS%E5%88%86%E5%8C%BA"><span class="nav-text">Clover检测不到启动项或任何HFS&#x2F;APFS分区</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E7%BD%AEkexts%E9%94%99%E8%AF%AF%E5%AF%BC%E8%87%B4%E6%97%A0%E6%B3%95%E8%BF%9B%E5%85%A5%E7%B3%BB%E7%BB%9F"><span class="nav-text">内置kexts错误导致无法进入系统</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A0%E6%B3%95%E6%9B%B4%E6%94%B9%E5%90%AF%E5%8A%A8%E8%B7%AF%E5%BE%84"><span class="nav-text">无法更改启动路径</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8A%B9%E7%9B%98%E6%97%B6%E6%8F%90%E7%A4%BAMediaKit%E6%8A%A5%E5%91%8A%E8%AE%BE%E5%A4%87%E4%B8%8A%E7%9A%84%E7%A9%BA%E9%97%B4%E4%B8%8D%E8%B6%B3%E4%BB%A5%E6%89%A7%E8%A1%8C%E8%AF%B7%E6%B1%82%E7%9A%84%E6%93%8D%E4%BD%9C%EF%BC%8C%E6%88%96%E7%A3%81%E7%9B%98%E5%B7%A5%E5%85%B7%E8%87%AA%E5%8A%A8%E9%80%80%E5%87%BA"><span class="nav-text">抹盘时提示MediaKit报告设备上的空间不足以执行请求的操作，或磁盘工具自动退出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0Welcome-to-Clover-xxxx-user-settings%E5%8D%A1%E4%BD%8F%E4%B8%8D%E5%8A%A8"><span class="nav-text">出现Welcome to Clover xxxx user settings卡住不动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAThis-version-of-Mac-OS-X-is-not-supported-on-this-platform"><span class="nav-text">提示This version of Mac OS X is not supported on this platform</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8Clover%E5%BC%95%E5%AF%BC%E7%95%8C%E9%9D%A2%E4%B8%8D%E5%8A%A8"><span class="nav-text">卡在Clover引导界面不动</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BF%90%E8%A1%8C%E5%90%8E%E5%AF%BC%E8%87%B4CMOS%E9%87%8D%E7%BD%AE"><span class="nav-text">运行后导致CMOS重置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%95%B0%E5%97%A6%E6%A8%A1%E5%BC%8F"><span class="nav-text">啰嗦模式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%90%E7%A4%BAPanic"><span class="nav-text">提示Panic</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#AppleIntelCPUPowerManagement-x2F-AppleRTC"><span class="nav-text">AppleIntelCPUPowerManagement&#x2F;AppleRTC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#AppleTyMCEDriver"><span class="nav-text">AppleTyMCEDriver</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#VoodooHDA"><span class="nav-text">VoodooHDA</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ApplePolicyControl"><span class="nav-text">ApplePolicyControl</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Local-APIC"><span class="nav-text">Local APIC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Unable-to-find-driver-for-this-platform-quot-ACPI"><span class="nav-text">Unable to find driver for this platform: &quot;ACPI\</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Thread-14-crash"><span class="nav-text">Thread 14 crash</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#VTDecoderXPCServ"><span class="nav-text">VTDecoderXPCServ</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#IOATAFamily"><span class="nav-text">IOATAFamily</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8PCI-configuration-begin"><span class="nav-text">卡在PCI configuration begin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Still-waiting-for-root-device%E5%B9%B6%E7%A6%81%E8%A1%8C"><span class="nav-text">Still waiting for root device并禁行</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8ApplelIntelLpssI2CController"><span class="nav-text">卡在ApplelIntelLpssI2CController</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8IOConsoleUsers-gIOScreenLockState-3%E6%88%96%E5%87%BA%E7%8E%B0Busy-Timeout%E6%88%96-IGPU-Hash-data-from-ME-never-returned-status-x3D-1-doing-retry"><span class="nav-text">卡在IOConsoleUsers:gIOScreenLockState 3或出现Busy Timeout或[IGPU] Hash data from ME never returned, status &#x3D;1, doing retry</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8IOBluetoothHCIController"><span class="nav-text">卡在IOBluetoothHCIController</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E7%A4%BAThis-version-of-Mac-OS-X-is-not-supported-on-this-platform"><span class="nav-text">显示This version of Mac OS X is not supported on this platform!</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8Service-only-ran-for-0-seconds-Pushing-respawn-out-by-10-second"><span class="nav-text">卡在Service only ran for 0 seconds. Pushing respawn out by 10 second</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8Attempting-system-restart%E2%80%A6MACH-Reboot"><span class="nav-text">卡在Attempting system restart…MACH Reboot</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8Welcome-to-Clover-xxxx-user-settings"><span class="nav-text">卡在Welcome to Clover xxxx user settings</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8ACPI-System-State-S0-S3-S4-S5-S3"><span class="nav-text">卡在ACPI:System State [S0 S3 S4 S5] (S3)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8apfs-module-start%E6%88%96VoodooPS2Controller%EF%BC%8C%E6%88%96%E5%AE%89%E8%A3%85%E6%97%B6%E9%94%AE%E7%9B%98%E6%97%A0%E6%B3%95%E4%BD%BF%E7%94%A8"><span class="nav-text">卡在apfs_module_start或VoodooPS2Controller，或安装时键盘无法使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%98%BE%E7%A4%BADSMOS-has-arrived%E5%90%8E%E9%87%8D%E5%90%AF"><span class="nav-text">显示DSMOS has arrived后重启</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0DSMOS%E9%94%99%E8%AF%AF"><span class="nav-text">出现DSMOS错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0ATIRadeonX2000-x2F-ATIRadeonX3000%E9%94%99%E8%AF%AF"><span class="nav-text">出现ATIRadeonX2000&#x2F;ATIRadeonX3000错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0CHUDKernLib%E9%94%99%E8%AF%AF"><span class="nav-text">出现CHUDKernLib错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0FakeSMC%E9%94%99%E8%AF%AF"><span class="nav-text">出现FakeSMC错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%9C%E5%9C%A8FakeSMC"><span class="nav-text">停在FakeSMC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0FakeSMCRadeon%E9%94%99%E8%AF%AF"><span class="nav-text">出现FakeSMCRadeon错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0ElliottForceLegacyRTC%E9%94%99%E8%AF%AF"><span class="nav-text">出现ElliottForceLegacyRTC错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0AppleRTL8169Ethernet%E9%94%99%E8%AF%AF"><span class="nav-text">出现AppleRTL8169Ethernet错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0AppleRTC%E9%94%99%E8%AF%AF"><span class="nav-text">出现AppleRTC错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0AppleFWOHCI%E9%94%99%E8%AF%AF"><span class="nav-text">出现AppleFWOHCI错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0SleepEnabler%E9%94%99%E8%AF%AF"><span class="nav-text">出现SleepEnabler错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0Trying-to-change-a-collection-in-the-registry%E7%9A%84OScollection-cpp%E9%94%99%E8%AF%AF"><span class="nav-text">出现Trying to change a collection in the registry的OScollection.cpp错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0failed-to-locate-SMC-driver%E9%94%99%E8%AF%AF"><span class="nav-text">出现failed to locate SMC driver错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0ApplePolicyControl%E9%94%99%E8%AF%AF"><span class="nav-text">出现ApplePolicyControl错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%99%BD%E5%B1%8F%E4%B8%94%E9%BC%A0%E6%A0%87%E5%9C%A8%E5%B1%8F%E5%B9%95%E5%B7%A6%E4%B8%8A%E8%A7%92%E5%87%BA%E7%8E%B0%E6%97%A0%E9%99%90%E5%BD%A9%E8%89%B2%E9%A3%8E%E7%81%AB%E8%BD%AE"><span class="nav-text">白屏且鼠标在屏幕左上角出现无限彩色风火轮</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0IOMemoryDescriptor-cpp%E9%94%99%E8%AF%AF"><span class="nav-text">出现IOMemoryDescriptor.cpp错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E7%94%9Flapic-native-c-x2F-lapic-c%E7%9A%84Local-APIC-error%E5%86%85%E6%A0%B8%E9%94%99%E8%AF%AF"><span class="nav-text">发生lapic_native.c&#x2F;lapic.c的Local APIC error内核错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0can%E2%80%99t-perform-kext-scan-no-kext-summary%E9%94%99%E8%AF%AF"><span class="nav-text">出现can’t perform kext scan: no kext summary错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E7%94%9FShould-have-2-threads-but-only-found-3-for-Die-0%E7%9A%84cpu-threads-c%E9%94%99%E8%AF%AF"><span class="nav-text">发生Should have 2 threads, but only found 3 for Die 0的cpu_threads.c错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%91%E7%94%9FIOAPIC-Version-0x20-Vectors-64-87%E9%94%99%E8%AF%AF"><span class="nav-text">发生IOAPIC: Version 0x20 Vectors 64:87错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0NVClockX%E9%94%99%E8%AF%AF"><span class="nav-text">出现NVClockX错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0AppleIntelGMA950%E9%94%99%E8%AF%AF"><span class="nav-text">出现AppleIntelGMA950错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0GeForce7xxx%E9%94%99%E8%AF%AF"><span class="nav-text">出现GeForce7xxx错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0IntelCPUMonitor%E9%94%99%E8%AF%AF"><span class="nav-text">出现IntelCPUMonitor错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0Window-Server-Service-only-ran-for-0-seconds%E9%94%99%E8%AF%AF"><span class="nav-text">出现Window Server Service only ran for 0 seconds错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8%E7%81%B0%E5%B1%8F"><span class="nav-text">卡在灰屏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0RTC-Only-single-RAM-bank%E9%94%99%E8%AF%AF"><span class="nav-text">出现RTC:Only single RAM bank错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8D%A1%E5%9C%A8VoodooPS2Trackpad%EF%BC%9Aidengtify-TouchPad-command-failed"><span class="nav-text">卡在VoodooPS2Trackpad：idengtify TouchPad command failed</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0SMCReadKeyActionError%E9%94%99%E8%AF%AF"><span class="nav-text">出现SMCReadKeyActionError错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8Ivy-Bridge-CPU%E5%87%BA%E7%8E%B0PState-Stepper%E9%94%99%E8%AF%AF"><span class="nav-text">在Ivy Bridge CPU出现PState Stepper错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0AppleLMUController-smcReadKey-Error-received-error-0%C3%9784-when-reading-key-%E2%80%98MSLD%E2%80%99%E9%94%99%E8%AF%AF"><span class="nav-text">出现AppleLMUController::smcReadKey Error:received error 0×84 when reading key ‘MSLD’错误</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%87%BA%E7%8E%B0Forcing-CS-RUNTIME-for-entitlement%EF%BC%9Acom-apple-rootless-restricted-block-devices"><span class="nav-text">出现Forcing CS_RUNTIME for entitlement：com.apple.rootless.restricted-block-devices</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%90%AF%E7%94%A8%E5%AE%89%E5%85%A8%E5%90%AF%E5%8A%A8%E5%90%8E%E6%97%A0%E6%B3%95%E5%90%AF%E5%8A%A8"><span class="nav-text">启用安全启动后无法启动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E8%BF%90%E8%A1%8C"><span class="nav-text">系统运行</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%86%85%E7%BD%AESATA%E7%A1%AC%E7%9B%98%E6%98%BE%E7%A4%BA%E4%B8%BA%E6%A9%99%E8%89%B2%E5%9B%BE%E6%A0%87"><span class="nav-text">内置SATA硬盘显示为橙色图标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RTC%E9%97%AE%E9%A2%98"><span class="nav-text">RTC问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%94%AE%E7%9B%98-x2F-%E8%A7%A6%E6%8E%A7%E6%9D%BF%E4%B8%8D%E5%B7%A5%E4%BD%9C"><span class="nav-text">键盘&#x2F;触控板不工作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#App-Store%E6%97%A0%E6%B3%95%E7%99%BB%E5%BD%95"><span class="nav-text">App Store无法登录</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%99%84%E5%BD%95"><span class="nav-text">附录</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Kexts"><span class="nav-text">Kexts</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Lilu"><span class="nav-text">Lilu</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FakeSMC%E5%8C%85%E4%B8%8EVirtualSMC%E5%8C%85"><span class="nav-text">FakeSMC包与VirtualSMC包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#WebCamera"><span class="nav-text">WebCamera</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AnyiSightCam"><span class="nav-text">AnyiSightCam</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AnyCardReader"><span class="nav-text">AnyCardReader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AnyiSightCam-1"><span class="nav-text">AnyiSightCam</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DebugEnhancer"><span class="nav-text">DebugEnhancer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IOElectrify"><span class="nav-text">IOElectrify</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VoodooInput"><span class="nav-text">VoodooInput</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#LiluFriend"><span class="nav-text">LiluFriend</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VoodooSDHCMod"><span class="nav-text">VoodooSDHCMod</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SASMegaRAID"><span class="nav-text">SASMegaRAID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Legacy-USB3-amp-Legacy-InternalHub-EHCx"><span class="nav-text">Legacy_USB3&amp;Legacy_InternalHub-EHCx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Sinetek-rtsx"><span class="nav-text">Sinetek-rtsx</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SerialMouse"><span class="nav-text">SerialMouse</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RTCMemoryFixup"><span class="nav-text">RTCMemoryFixup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SidecarEnabler"><span class="nav-text">SidecarEnabler</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ThunderboltReset"><span class="nav-text">ThunderboltReset</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#SystemProfilerMemoryFixup"><span class="nav-text">SystemProfilerMemoryFixup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#DiskArbitrationFixup"><span class="nav-text">DiskArbitrationFixup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AHCI-3rdParty-eSATA-x2F-SATA"><span class="nav-text">AHCI_3rdParty_eSATA&#x2F;SATA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AHCI-Intel-Generic-SATA"><span class="nav-text">AHCI_Intel_Generic_SATA</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#FakePCIID"><span class="nav-text">FakePCIID</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AMFIExemption"><span class="nav-text">AMFIExemption</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Innie"><span class="nav-text">Innie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NightShiftEnabler"><span class="nav-text">NightShiftEnabler</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ECEnabler"><span class="nav-text">ECEnabler</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#RestrictEvents"><span class="nav-text">RestrictEvents</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TSCAdjustReset"><span class="nav-text">TSCAdjustReset</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#TOSMotionSensor"><span class="nav-text">TOSMotionSensor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AAAMouSSE"><span class="nav-text">AAAMouSSE</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Polaris22Fixup"><span class="nav-text">Polaris22Fixup</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HWPEnable"><span class="nav-text">HWPEnable</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%A7%E7%89%88Kexts"><span class="nav-text">旧版Kexts</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Kext%E7%A6%81%E7%94%A8%E5%99%A8"><span class="nav-text">Kext禁用器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#WhateverGreen"><span class="nav-text">WhateverGreen</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#VoodooI2C"><span class="nav-text">VoodooI2C</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#NullCPUPowerManagement"><span class="nav-text">NullCPUPowerManagement</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Windows%E8%AF%BB%E5%86%99HFS"><span class="nav-text">Windows读写HFS</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#HFSExplorer"><span class="nav-text">HFSExplorer</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HFS-driver"><span class="nav-text">HFS+ driver</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UEFI%E9%A9%B1%E5%8A%A8"><span class="nav-text">UEFI驱动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#EmuVariableUefi"><span class="nav-text">EmuVariableUefi</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ApfsDriverLoader"><span class="nav-text">ApfsDriverLoader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HFSPlus"><span class="nav-text">HFSPlus</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CrScreenshotDxe"><span class="nav-text">CrScreenshotDxe</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A1%AC%E4%BB%B6%E9%A9%B1%E5%8A%A8"><span class="nav-text">硬件驱动</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#EMU-USB"><span class="nav-text">EMU-USB</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#kXAudioDriver"><span class="nav-text">kXAudioDriver</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#liquid-coolers"><span class="nav-text">liquid coolers</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BB%91%E8%8B%B9%E6%9E%9C%E5%BA%93"><span class="nav-text">黑苹果库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OC-little%E5%8C%85"><span class="nav-text">OC-little包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B7%A5%E5%85%B7"><span class="nav-text">工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#MountEFI"><span class="nav-text">MountEFI</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Hackintool"><span class="nav-text">Hackintool</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kext-Updater"><span class="nav-text">Kext Updater</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#MaciASL"><span class="nav-text">MaciASL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IORegistryExplorer"><span class="nav-text">IORegistryExplorer</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E8%AE%BE%E5%A4%87%E5%AD%98%E5%9C%A8%E6%83%85%E5%86%B5"><span class="nav-text">判断设备存在情况</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%88%A4%E6%96%AD%E8%AE%BE%E5%A4%87%E9%A9%B1%E5%8A%A8%E6%83%85%E5%86%B5"><span class="nav-text">判断设备驱动情况</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%9F%A5%E7%9C%8BCPU%E5%8F%98%E9%A2%91%E6%A1%A3%E6%AC%A1"><span class="nav-text">查看CPU变频档次</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#gfxutil"><span class="nav-text">gfxutil</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#iMessageDebug"><span class="nav-text">iMessageDebug</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Clover-Configurator"><span class="nav-text">Clover Configurator</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Kext-Utility"><span class="nav-text">Kext Utility</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7z"><span class="nav-text">7z</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#AW-EDID-Editor"><span class="nav-text">AW EDID Editor</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HWMonitorSMC2"><span class="nav-text">HWMonitorSMC2</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Continuity-Activation-Tool"><span class="nav-text">Continuity-Activation-Tool</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%80%E9%94%AE%E5%AE%89%E8%A3%85%E7%B3%BB%E7%BB%9F%E5%B7%A5%E5%85%B7"><span class="nav-text">一键安装系统工具</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Ccmacos"><span class="nav-text">Ccmacos</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%95%99%E7%A8%8B"><span class="nav-text">参考教程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BB%91%E8%8B%B9%E6%9E%9C%E5%BF%85%E5%A4%87%EF%BC%9AIntel%E6%A0%B8%E6%98%BEplatform-ID%E6%95%B4%E7%90%86%E5%8F%8Asmbios%E9%80%9F%E6%9F%A5%E8%A1%A8"><span class="nav-text">黑苹果必备：Intel核显platform ID整理及smbios速查表</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FIX-BTFIRMWAREUPLOADER-IN-MACOS-HIGH-SIERRA"><span class="nav-text">FIX BTFIRMWAREUPLOADER IN MACOS HIGH SIERRA</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#alexandred-x2F-VoodooI2C-Gitter"><span class="nav-text">alexandred&#x2F;VoodooI2C-Gitter</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hackintool%E6%B7%B1%E5%BA%A6%E6%95%99%E7%A8%8B"><span class="nav-text">Hackintool深度教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9DSDT%E5%AE%9E%E7%8E%B0%E7%94%B5%E9%87%8F%E6%98%BE%E7%A4%BA%E6%95%99%E7%A8%8B"><span class="nav-text">修改DSDT实现电量显示教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VoodooI2C%E9%A9%B1%E5%8A%A8%E6%95%99%E7%A8%8B"><span class="nav-text">VoodooI2C驱动教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8B%B1%E7%89%B9%E5%B0%94%C2%AE%E6%A0%B8%E8%8A%AF%E6%98%BE%E5%8D%A1%E5%B8%B8%E8%A7%81%E9%97%AE%E7%AD%94%EF%BC%88WhateverGreen%EF%BC%89"><span class="nav-text">英特尔®核芯显卡常见问答（WhateverGreen）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%BB%91%E8%8B%B9%E6%9E%9C%E7%B2%BE%E5%8D%8E%E5%BF%85%E8%AF%BB%EF%BC%9A%E6%96%B0%E6%89%8B%E5%B8%B8%E8%A7%81-%E4%BA%94%E5%9B%BD-v%E5%9B%BE-%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3"><span class="nav-text">黑苹果精华必读：新手常见(五国)(-v图)错误解决</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Disabling-discrete-graphics-in-dual-GPU-laptops"><span class="nav-text">Disabling discrete graphics in dual-GPU laptops</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#x2F-r-x2F-Hackintosh-Vanilla-Desktop-Guide"><span class="nav-text">&#x2F;r&#x2F;Hackintosh Vanilla Desktop Guide</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSDT-GPU-Graphics-Card-Injection"><span class="nav-text">SSDT GPU (Graphics Card) Injection</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#stevezhengshiqi-x2F-one-key-cpufriend"><span class="nav-text">stevezhengshiqi&#x2F;one-key-cpufriend</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AR9565-MAC%E9%BB%91%E8%8B%B9%E6%9E%9CBluetooth%E8%93%9D%E7%89%99%E9%A9%B1%E5%8A%A8%E6%95%99%E7%A8%8B"><span class="nav-text">AR9565 MAC黑苹果Bluetooth蓝牙驱动教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSDT-RMNE-aml"><span class="nav-text">SSDT-RMNE.aml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SSDT-PNLF-aml"><span class="nav-text">SSDT-PNLF.aml</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8HIDPI%E8%A7%A3%E5%86%B3%E7%9D%A1%E7%9C%A0%E5%94%A4%E9%86%92%E9%BB%91%E5%B1%8F%E3%80%81%E8%8A%B1%E5%B1%8F%E5%8F%8A%E8%BF%9E%E6%8E%A5%E5%A4%96%E9%83%A8%E6%98%BE%E7%A4%BA%E5%99%A8%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF"><span class="nav-text">使用HIDPI解决睡眠唤醒黑屏、花屏及连接外部显示器的正确姿势</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B0%8F%E7%B1%B3%E7%AC%94%E8%AE%B0%E6%9C%ACPro%E5%AE%89%E8%A3%8510-13%E9%9A%8F%E6%89%8B%E8%AE%B0%E5%8F%8AEFI%E5%88%86%E4%BA%AB"><span class="nav-text">小米笔记本Pro安装10.13随手记及EFI分享</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Notebook-Compatibility-List"><span class="nav-text">Notebook Compatibility List</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hackintosh-won%E2%80%99t-boot-How-to-use-verbose-mode-to-fix-it"><span class="nav-text">Hackintosh won’t boot? How to use verbose mode to fix it</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%B0%E6%89%8B%E5%B8%B8%E8%A7%81-%E4%BA%94%E5%9B%BD-v%E5%9B%BE-%E9%94%99%E8%AF%AF%E8%A7%A3%E5%86%B3-%E5%8E%9F%E7%89%88-%E7%A0%B4%E8%A7%A3kernel-%E8%A1%A5%E4%B8%81kext%E4%B8%8B%E8%BD%BD"><span class="nav-text">新手常见(五国)(-v图)错误解决(原版,破解kernel,补丁kext下载)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DW1820A-x2F-BCM94350ZAE-x2F-BCM94356ZEPA50DX%E6%8F%92%E5%85%A5%E7%9A%84%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF"><span class="nav-text">DW1820A&#x2F;BCM94350ZAE&#x2F;BCM94356ZEPA50DX插入的正确姿势</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Broadcom-BCM94352z-x2F-DW1560%E9%A9%B1%E5%8A%A8%E6%96%B0%E5%A7%BF%E5%8A%BF-%E6%96%B0%E6%96%B9%E6%B3%95"><span class="nav-text">Broadcom BCM94352z&#x2F;DW1560驱动新姿势[新方法]</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OpenIntelWireless"><span class="nav-text">OpenIntelWireless</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VoodooI2C-x2F-VoodooI2C-Patches"><span class="nav-text">VoodooI2C&#x2F;VoodooI2C-Patches</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OpenCorePkg-x2F-Kexts-md-at-master"><span class="nav-text">OpenCorePkg&#x2F;Kexts.md at master</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E7%94%A8CPU-HWP-%E9%94%81%E5%AE%9ACPU%E6%9C%80%E9%AB%98%E9%A2%91%E7%8E%87-%E8%AE%A9CPU%E5%B1%95%E7%A4%BA%E5%85%B6%E7%9C%9F%E6%AD%A3%E5%AE%9E%E5%8A%9B%E5%90%A7-OC%E5%8F%AF%E7%94%A8"><span class="nav-text">启用CPU-HWP, 锁定CPU最高频率, 让CPU展示其真正实力吧! (OC可用)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Skylake-HWP-Enable"><span class="nav-text">Skylake HWP Enable</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#First-time-Hackintosh-Stuck-at-Grey-Screen-after-installation"><span class="nav-text">First time Hackintosh Stuck at Grey Screen after installation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Clover%E5%BC%95%E5%AF%BC%E5%AE%89%E8%A3%85%E9%BB%91%E8%8B%B9%E6%9E%9C%E5%8D%A1%E5%90%84%E7%A7%8D%E9%97%AE%E9%A2%98%E7%9A%84%E8%A7%A3%E5%86%B3%E6%96%B9%E6%B3%95-%E5%86%85%E5%AE%B9%E8%BE%83%E5%A4%9A"><span class="nav-text">Clover引导安装黑苹果卡各种问题的解决方法(内容较多)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#El-Capitan-Install-Demanding-Bluetooth-Mouse-x2F-Keyboard"><span class="nav-text">El Capitan Install Demanding Bluetooth Mouse&#x2F;Keyboard</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CLOVER-%E6%8A%98%E8%85%BE%E4%BA%86%E5%8D%8A%E5%A4%A9%E7%BB%88%E4%BA%8E%E6%89%BE%E5%88%B0%E5%94%A4%E9%86%92%E9%87%8D%E5%90%AF%E9%97%AE%E9%A2%98%E7%9A%84%E5%8E%9F%E5%9B%A0%E4%BA%86%E3%80%82%E3%80%82%E3%80%82"><span class="nav-text">[CLOVER] 折腾了半天终于找到唤醒重启问题的原因了。。。</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#List-of-Hackintosh-USB-Port-Limit-Patches-10-15-Updated"><span class="nav-text">List of Hackintosh USB Port Limit Patches (10.15 Updated)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Wireless-Buyers-Guide"><span class="nav-text">Wireless Buyers Guide</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hackintosh-Internet-Install-Gitbook"><span class="nav-text">Hackintosh Internet Install Gitbook</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Guide-Booting-the-OS-X-installer-on-LAPTOPS-with-Clover"><span class="nav-text">[Guide] Booting the OS X installer on LAPTOPS with Clover</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Fix-incorrect-time-in-Windows-OSX-dual-boot"><span class="nav-text">Fix incorrect time in Windows + OSX dual boot</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%99%E7%A8%8B-%E3%80%90%E8%AE%8A%E8%89%B2%E9%BE%8D%E7%B3%BB%E5%88%97%E4%B8%89%E3%80%91FakeSMC-kext-%E8%A8%AD%E5%AE%9A%E8%AA%AA%E6%98%8E%E3%80%9008-x2F-05%E3%80%91"><span class="nav-text">[教程] 【變色龍系列三】FakeSMC.kext 設定說明【08&#x2F;05】</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#A-Beginner%E2%80%99s-Guide-to-Creating-a-Custom-USB-SSDT"><span class="nav-text">A Beginner’s Guide to Creating a Custom USB SSDT</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E4%BA%AB-10-11-USB%E9%97%AE%E9%A2%98%E4%B9%8B%E4%B8%8B%E7%AF%87%EF%BC%8C%E4%B8%80%E6%AD%A5%E4%B8%80%E6%AD%A5%E6%95%99%E4%BD%A0%E8%A7%A3%E5%86%B3USB%E9%97%AE%E9%A2%98"><span class="nav-text">[分享] 10.11 USB问题之下篇，一步一步教你解决USB问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OpenCorePkg-x2F-Docs-x2F-Kexts-md"><span class="nav-text">OpenCorePkg&#x2F;Docs&#x2F;Kexts.md</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#DSDT%E7%AC%94%E8%AE%B0%E6%9C%AC%E7%94%B5%E6%B1%A0%E8%A1%A5%E4%B8%81%E6%95%99%E7%A8%8B-%E8%AE%A9%E9%BB%91%E8%8B%B9%E6%9E%9C%E6%98%BE%E7%A4%BA%E7%94%B5%E6%B1%A0%E7%8A%B6%E6%80%81%E4%BF%A1%E6%81%AF"><span class="nav-text">DSDT笔记本电池补丁教程-让黑苹果显示电池状态信息</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#New-and-Improved-Mac-OS-Tutorial-Part-1-The-Basics"><span class="nav-text">New and Improved Mac OS Tutorial, Part 1 (The Basics)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90%E5%AE%98%E6%96%B9%E5%8F%8C%E8%AF%AD%E3%80%91%E8%AE%A9%E4%BB%BB%E4%BD%95%E7%94%B5%E8%84%91%E9%83%BD%E7%94%A8%E4%B8%8A%E9%BB%91%E8%8B%B9%E6%9E%9C%EF%BC%81-linus%E8%B0%88%E7%A7%91%E6%8A%80"><span class="nav-text">【官方双语】让任何电脑都用上黑苹果！#linus谈科技</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#foxlet-x2F-macOS-Simple-KVM"><span class="nav-text">foxlet&#x2F;macOS-Simple-KVM</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Make-a-install-USBstick-faster-better-and-Dualboot"><span class="nav-text">Make a install USBstick, faster, better and Dualboot.</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Hasee-macOS-Library"><span class="nav-text">Hasee macOS Library</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Guide-How-to-patch-DSDT-for-working-battery-status"><span class="nav-text">[Guide] How to patch DSDT for working battery status</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Guide-Native-Power-Management-for-Laptops"><span class="nav-text">[Guide] Native Power Management for Laptops</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Creating-a-Custom-SSDT-for-USBInjectAll-kext"><span class="nav-text">Creating a Custom SSDT for USBInjectAll.kext</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#FIX-%E2%80%9CWindow-Server-Service-only-ran-for-0-seconds%E2%80%9D-with-dual-GPU"><span class="nav-text">[FIX] “Window Server Service only ran for 0 seconds” with dual-GPU</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Leopard-en-un-Raid-por-Software-usando-Chameleon"><span class="nav-text">Leopard en un Raid por Software usando Chameleon</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ASUS-100-Series-and-Later-Custom-SSDT-for-XHCI-USB-Port-Control"><span class="nav-text">ASUS 100 Series and Later Custom SSDT for XHCI USB Port Control</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Guide-Laptop-backlight-control-using-AppleBacklightFixup-kext"><span class="nav-text">[Guide] Laptop backlight control using AppleBacklightFixup.kext</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Apple-Backlight-Injector-Brightness-not-saved"><span class="nav-text">Apple Backlight Injector Brightness not saved</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Install-Snow-Leopard-on-AMD-PC-Laptop"><span class="nav-text">Install Snow Leopard on AMD PC, Laptop</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#acidanthera-x2F-bugtracker"><span class="nav-text">acidanthera&#x2F;bugtracker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Intel%C2%AE-HD-Graphics"><span class="nav-text">Intel® HD Graphics</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%D0%97%D0%B0%D0%B2%D0%BE%D0%B4-Intel%C2%AE-Quick-Sync-Video"><span class="nav-text">Завод Intel® Quick Sync Video</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#dortania-x2F-bugtracker"><span class="nav-text">dortania&#x2F;bugtracker</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#macOS-Big-Sur-%E6%88%90%E5%8A%9F%E5%BC%80%E5%90%AFHiDPI%E6%AD%A3%E7%A1%AE%E5%A7%BF%E5%8A%BF"><span class="nav-text">macOS Big Sur 成功开启HiDPI正确姿势</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Need-CMOS-reset-after-sleep-only-after-login"><span class="nav-text">Need CMOS reset after sleep, only after login</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#VMware15-x2F-16%E8%A7%A3%E9%8E%96VMware%E5%AE%89%E8%A3%9DMacOS"><span class="nav-text">VMware15&#x2F;16解鎖VMware安裝MacOS</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E4%BA%ABUltraISO%EF%BC%8C%E8%BD%AC%E6%8D%A2%E4%BD%A0%E7%9A%84iATKOS-ML2-DMG%E4%B8%BAISO-%E8%AE%A9%E5%AE%83%E6%94%AF%E6%8C%81%E7%A1%AC%E7%9B%98%E5%8A%A9%E6%89%8B%E5%86%99%E5%85%A5"><span class="nav-text">分享UltraISO，转换你的iATKOS ML2.DMG为ISO,让它支持硬盘助手写入</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Olarila"><span class="nav-text">Olarila</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Payton"
      src="/blog/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Payton</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-comments"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Payton</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">2m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">30:27</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
