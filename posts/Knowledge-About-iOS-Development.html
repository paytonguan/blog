<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#000">
<meta name="generator" content="Hexo 6.3.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16.png">
  <link rel="mask-icon" href="/blog/images/logo.svg" color="#000">

<link rel="stylesheet" href="/blog/css/main.css">

<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Noto Serif SC:300,300italic,400,400italic,700,700italic|Roboto Slab:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">
<link rel="stylesheet" href="/blog/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"paytonguan.github.io","root":"/blog/","scheme":"Pisces","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":true,"show_result":false,"style":"mac"},"back2top":{"enable":true,"sidebar":true,"scrollpercent":true},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":true,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":true},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeIn","post_body":"fadeIn","coll_header":"fadeIn","sidebar":"fadeIn"}},"path":"search.xml"};
  </script>

  <meta name="description" content="iOS开发相关知识。">
<meta property="og:type" content="article">
<meta property="og:title" content="iOS开发相关知识">
<meta property="og:url" content="https://paytonguan.github.io/blog/posts/Knowledge-About-iOS-Development.html">
<meta property="og:site_name" content="Payton&#39;s blog">
<meta property="og:description" content="iOS开发相关知识。">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://paytonguan.github.io/blog/posts/Knowledge-About-iOS-Development/topic.jpg">
<meta property="article:published_time" content="2024-12-19T13:40:57.000Z">
<meta property="article:modified_time" content="2025-04-03T18:55:58.557Z">
<meta property="article:author" content="Payton">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://paytonguan.github.io/blog/posts/Knowledge-About-iOS-Development/topic.jpg">

<link rel="canonical" href="https://paytonguan.github.io/blog/posts/Knowledge-About-iOS-Development.html">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>iOS开发相关知识 | Payton's blog</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/blog/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">Payton's blog</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
      <p class="site-subtitle" itemprop="description">Somewhere leisure.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/blog/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/blog/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/blog/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div id="search-result">
  <div id="no-result">
    <i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>
  </div>
</div>

    </div>
  </div>

</div>
    </header>

    


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://paytonguan.github.io/blog/posts/Knowledge-About-iOS-Development.html">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/blog/images/avatar.gif">
      <meta itemprop="name" content="Payton">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Payton's blog">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          iOS开发相关知识
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2024-12-19 21:40:57" itemprop="dateCreated datePublished" datetime="2024-12-19T21:40:57+08:00">2024-12-19</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2025-04-04 02:55:58" itemprop="dateModified" datetime="2025-04-04T02:55:58+08:00">2025-04-04</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/blog/categories/Study/" itemprop="url" rel="index"><span itemprop="name">Study</span></a>
                </span>
            </span>

          <br>
            <span class="post-meta-item" title="本文字数">
              <span class="post-meta-item-icon">
                <i class="far fa-file-word"></i>
              </span>
                <span class="post-meta-item-text">本文字数：</span>
              <span>65k</span>
            </span>
            <span class="post-meta-item" title="阅读时长">
              <span class="post-meta-item-icon">
                <i class="far fa-clock"></i>
              </span>
                <span class="post-meta-item-text">阅读时长 &asymp;</span>
              <span>59 分钟</span>
            </span>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <p><img src="/blog/posts/Knowledge-About-iOS-Development/topic.jpg"></p>
<p>iOS开发相关知识。</p>
<span id="more"></span>

<h1 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h1><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">https://objccn.io/</span><br><span class="line">https://swiftgg.gitbook.io/swift/</span><br><span class="line">https://swift.org/</span><br><span class="line">https://github.com/anupamchugh/iOS14-Resources</span><br><span class="line">https://awesome-tips.gitbook.io/ios/</span><br><span class="line"></span><br><span class="line"># 动画</span><br><span class="line">https://github.com/CalvinCheungCoder/SwiftAnimation</span><br><span class="line">https://zhangdinghao.cn/2017/07/02/Swift-Animation10/</span><br><span class="line"></span><br><span class="line"># 侧滑菜单</span><br><span class="line">https://ithelp.ithome.com.tw/articles/10195966</span><br><span class="line">https://www.jianshu.com/p/1b704103be1f</span><br><span class="line">https://blog.coding.net/blog/creating-a-sidebar-menu-using-swrevealviewcontroller-in-swift</span><br><span class="line"></span><br><span class="line"># 设计规范</span><br><span class="line">https://developer.apple.com/documentation/</span><br><span class="line">https://developer.apple.com/design/human-interface-guidelines/</span><br><span class="line">https://www.microsoft.com/design/fluent/</span><br><span class="line">https://principleformac.com/tutorial.html</span><br><span class="line">https://material.io/design</span><br></pre></td></tr></table></figure>

<h1 id="基本知识"><a href="#基本知识" class="headerlink" title="基本知识"></a>基本知识</h1><h2 id="常量"><a href="#常量" class="headerlink" title="常量"></a>常量</h2><h3 id="if-let"><a href="#if-let" class="headerlink" title="if let"></a>if let</h3><p>判断对象的值是否为nil。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let name: String? = &quot;老王&quot;</span><br><span class="line">let age: Int? = 10</span><br><span class="line"></span><br><span class="line">if let nameNew = name,</span><br><span class="line">    let ageNew = age &#123;</span><br><span class="line">    // nameNew和ageNew不为nil时执行</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="guard-let"><a href="#guard-let" class="headerlink" title="guard let"></a>guard let</h3><p>保证对象的值不为nil。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let name: String? = &quot;老王&quot;</span><br><span class="line">let age: Int? = 10</span><br><span class="line"></span><br><span class="line">guard let nameNew = name,</span><br><span class="line">    let ageNew = age else &#123;</span><br><span class="line">    // nameNew和ageNew有其一为nil时执行</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Extension"><a href="#Extension" class="headerlink" title="Extension"></a>Extension</h2><p>当类A需要遵循协议B时，可按照以下原始写法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class A: B&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可通过extension的方式实现，在协议众多的情况下会使代码逻辑更加清楚。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">class A&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extension A: B&#123;</span><br><span class="line">  ...</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="页面生命周期"><a href="#页面生命周期" class="headerlink" title="页面生命周期"></a>页面生命周期</h2><h3 id="viewDidLoad"><a href="#viewDidLoad" class="headerlink" title="viewDidLoad"></a>viewDidLoad</h3><p>新建页面时被调用，即页面首先载入的方法，类似初始化。一个页面只会调用一次viewDidLoad方法。</p>
<h3 id="viewDidAppear"><a href="#viewDidAppear" class="headerlink" title="viewDidAppear"></a>viewDidAppear</h3><p>将页面放置到视图时被调用。每次显示页面都会调用该方法，比如进入页面后返回时会调用一次viewDidAppear方法。</p>
<h3 id="viewDidLayoutSubviews"><a href="#viewDidLayoutSubviews" class="headerlink" title="viewDidLayoutSubviews"></a>viewDidLayoutSubviews</h3><p>当页面被放置好时被调用。viewDidLayoutSubviews只会在视图上所有Auto Layout设定或是大小自动计算完成后才会执行，因此会在视图更新、旋转、变动时调用该方法。</p>
<p>在开启APP时，viewDidLayoutSubviews会在viewDidLoad之后执行。</p>
<p>注意，如果要获取控件在设备上的实际尺寸，需要在viewDidLayoutSubviews而不是viewDidLoad进行操作。在viewDidLayoutSubviews调用会得到计算完约束后得到的尺寸，而在viewDidLoad调用会得到在Storyboard或程序添加控件时设定的默认尺寸。</p>
<h1 id="Xcode"><a href="#Xcode" class="headerlink" title="Xcode"></a>Xcode</h1><h2 id="设置代码折叠"><a href="#设置代码折叠" class="headerlink" title="设置代码折叠"></a>设置代码折叠</h2><p>打开Xcode的Preference-Text Editing，勾选code folding ribbon即可。</p>
<h1 id="组件"><a href="#组件" class="headerlink" title="组件"></a>组件</h1><h2 id="Collection-View"><a href="#Collection-View" class="headerlink" title="Collection View"></a>Collection View</h2><p>展示Cell列表。</p>
<h3 id="使用方法"><a href="#使用方法" class="headerlink" title="使用方法"></a>使用方法</h3><p>在Storyboard中添加UICollectionView，在其中的Cell布局所需要的控件。</p>
<p>在该页对应的ViewController建立该UICollectionView的Outlet，此处将名称设定为collectionView。新建一个类并继承自UICollectionViewCell，此处取名为MyCell。</p>
<p>将Storyboard中UICollectionView的Cell的Class设定为MyCell，并设置Identifier，此处设置为<code>identifierMyCell</code>。</p>
<p>将Cell中的控件通过Outlet添加到MyCell中。回到ViewController的代码页，修改以下代码以建立委托。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">override func viewDidLoad()&#123;</span><br><span class="line">  super.viewDidLoad()</span><br><span class="line">  ...</span><br><span class="line">  collectionView.delegate = self</span><br><span class="line">  collectionView.dataSource = self</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>建立委托后会提示错误，点击错误提示后会自动添加UICollectionViewDataSource协议。需要重写以下协议实现方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">func collectionView(collectionView: UICollectionView, numberOfItemsInSection section: Int) -&gt; Int &#123;</span><br><span class="line">    // 返回Cell的数量</span><br><span class="line">    return 4</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func collectionView(collectionView: UICollectionView, cellForItemAtIndexPath indexPath: NSIndexPath) -&gt; UICollectionViewCell &#123;</span><br><span class="line">    // 对Cell进行设置</span><br><span class="line">    // 获取当前操作的Cell</span><br><span class="line">    let cell = collectionView.dequeueReusableCell(withReuseIdentifier: &quot;identifierMyCell&quot;, for: indexPath) as! MyCell</span><br><span class="line"></span><br><span class="line">    // 设置对应控件的值</span><br><span class="line">    // 控件Outlet在MyCell中被定义</span><br><span class="line">    cell.label.text = &quot;Text&quot;</span><br><span class="line"></span><br><span class="line">    // 返回Cell</span><br><span class="line">    return cell</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="布局设置"><a href="#布局设置" class="headerlink" title="布局设置"></a>布局设置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 新建layout</span><br><span class="line">let layout = UICollectionViewFlowLayout()</span><br><span class="line"></span><br><span class="line"># 设置滚动方向</span><br><span class="line">layout.scrollDirection = .horizontal</span><br><span class="line"></span><br><span class="line"># 设置cell的大小</span><br><span class="line">layout.itemSize = CGSize(width: 100, height: 100)</span><br><span class="line"></span><br><span class="line"># 设置分组的间距</span><br><span class="line">layout.sectionInset = UIEdgeInsets.zero</span><br><span class="line"></span><br><span class="line"># 设置最小行间距</span><br><span class="line">layout.minimumLineSpacing = 0</span><br><span class="line"></span><br><span class="line"># 设置最小列间距</span><br><span class="line">layout.minimumInteritemSpacing = 10</span><br><span class="line"></span><br><span class="line"># 设置边界的填充距离</span><br><span class="line">flowLayout.sectionInset = UIEdgeInsets.init(top: 10, left: 10, bottom: 10, right: 10)</span><br><span class="line"></span><br><span class="line"># 最后将layout赋值给UICollectionView</span><br><span class="line">self.mCollectionView.collectionViewLayout = layout </span><br></pre></td></tr></table></figure>

<h3 id="点击事件"><a href="#点击事件" class="headerlink" title="点击事件"></a>点击事件</h3><h4 id="添加"><a href="#添加" class="headerlink" title="添加"></a>添加</h4><p>直接在Storyboard中将Cell拖动至需要跳转的页面即可。</p>
<h4 id="获取点击的位置"><a href="#获取点击的位置" class="headerlink" title="获取点击的位置"></a>获取点击的位置</h4><p>点击上面添加的跳转线即segue，设置该segue的identifier，此处为bookJump。重写跳转前的ViewController的prepare方法，示例代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># DestViewController为跳转后的ViewController</span><br><span class="line"># indexInCollection为DestViewController的变量，用于存储当前点击的index</span><br><span class="line">override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123;</span><br><span class="line">    if(segue.identifier == &quot;bookJump&quot;) &#123;</span><br><span class="line">        (segue.destination as! DestViewController).indexInCollection = collectionView.indexPath(for: sender as! UICollectionViewCell)?.item</span><br><span class="line">            </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="UIColorPickerViewController"><a href="#UIColorPickerViewController" class="headerlink" title="UIColorPickerViewController"></a>UIColorPickerViewController</h2><p>颜色选择器。</p>
<h3 id="使用方法-1"><a href="#使用方法-1" class="headerlink" title="使用方法"></a>使用方法</h3><p>通过以下代码新建。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">// 组件初始化</span><br><span class="line">let picker = UIColorPickerViewController()</span><br><span class="line"></span><br><span class="line">// 设置初始颜色</span><br><span class="line">picker.selectedColor = self.view.backgroundColor!</span><br><span class="line"></span><br><span class="line">// 设置delegate</span><br><span class="line">picker.delegate = self</span><br><span class="line"></span><br><span class="line">// 展示组件</span><br><span class="line">self.present(picker, animated: true, completion: nil)</span><br></pre></td></tr></table></figure>

<p>需要给呈现该组件的页面ViewController添加UIColorPickerViewControllerDelegate协议，示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">extension ViewController: UIColorPickerViewControllerDelegate &#123;</span><br><span class="line">    // 选择颜色完成，关闭picker时被调用</span><br><span class="line">    func colorPickerViewControllerDidFinish(_ viewController: UIColorPickerViewController) &#123;</span><br><span class="line">        // 需要进行的设置</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 每次切换颜色时被调用</span><br><span class="line">    func colorPickerViewControllerDidSelectColor(_ viewController: UIColorPickerViewController) &#123;</span><br><span class="line">        // 需要进行的设置</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>也可不使用以上协议，而使用Combine框架。示例代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">import Combine</span><br><span class="line"></span><br><span class="line">class ViewController: UIViewController&#123;</span><br><span class="line">    // Global declaration, to keep the subscription alive.</span><br><span class="line">    var cancellable: AnyCancellable?</span><br><span class="line"></span><br><span class="line">    @IBAction func changeBackground(_ sender: Any) &#123;</span><br><span class="line">        </span><br><span class="line">        let picker = UIColorPickerViewController()</span><br><span class="line">        picker.selectedColor = self.view.backgroundColor!</span><br><span class="line">        </span><br><span class="line">        //  Subscribing selectedColor property changes.</span><br><span class="line">        self.cancellable = picker.publisher(for: \.selectedColor)</span><br><span class="line">            .sink &#123; color in</span><br><span class="line">                </span><br><span class="line">                //  Changing view color on main thread.</span><br><span class="line">                DispatchQueue.main.async &#123;</span><br><span class="line">                    self.view.backgroundColor = color</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        </span><br><span class="line">        self.present(picker, animated: true, completion: nil)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="UIFontPickerViewController"><a href="#UIFontPickerViewController" class="headerlink" title="UIFontPickerViewController"></a>UIFontPickerViewController</h2><p>字体选择器。</p>
<h3 id="使用方法-2"><a href="#使用方法-2" class="headerlink" title="使用方法"></a>使用方法</h3><p>通过以下代码新建。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let vc = UIFontPickerViewController()</span><br><span class="line">vc.delegate = self</span><br><span class="line">present(vc, animated: true)</span><br></pre></td></tr></table></figure>

<p>需要给呈现该组件的页面ViewController添加UIFontPickerViewControllerDelegate协议，示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">extension ViewController: UIFontPickerViewControllerDelegate &#123;</span><br><span class="line">    // 完成字体选择后调用</span><br><span class="line">    func fontPickerViewControllerDidPickFont(_ viewController: UIFontPickerViewController) &#123;</span><br><span class="line">        // 读取字体描述符</span><br><span class="line">        guard let descriptor = viewController.selectedFontDescriptor else &#123; return &#125;</span><br><span class="line"></span><br><span class="line">        // 从字体描述符获取字体</span><br><span class="line">        let font = UIFont(descriptor: descriptor, size: 36)</span><br><span class="line">        </span><br><span class="line">        // 根据需求完成剩余操作</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 取消选择字体时调用</span><br><span class="line">    func fontPickerViewControllerDidCancel(_ viewController: UIFontPickerViewController) &#123;</span><br><span class="line">        // 根据需求完成剩余操作</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="UIImageView"><a href="#UIImageView" class="headerlink" title="UIImageView"></a>UIImageView</h2><h3 id="添加点击事件"><a href="#添加点击事件" class="headerlink" title="添加点击事件"></a>添加点击事件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let singleTapGesture = UITapGestureRecognizer(target: self, action: #selector(imageViewClick))</span><br><span class="line">imageView?.addGestureRecognizer(singleTapGesture)</span><br><span class="line">imageView?.isUserInteractionEnabled = true</span><br></pre></td></tr></table></figure>

<h2 id="Button"><a href="#Button" class="headerlink" title="Button"></a>Button</h2><h3 id="设置按钮为系统图标"><a href="#设置按钮为系统图标" class="headerlink" title="设置按钮为系统图标"></a>设置按钮为系统图标</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 一般做法</span><br><span class="line">button.setImage(UIImage(systemName: &quot;search&quot;), for: .normal)</span><br><span class="line"></span><br><span class="line"># 设置图标权重</span><br><span class="line">let boldConfig = UIImage.SymbolConfiguration(weight: .bold)</span><br><span class="line">let boldSearch = UIImage(systemName: &quot;search&quot;, withConfiguration: boldConfig)</span><br><span class="line">button.setImage(boldSearch, for: .normal)</span><br></pre></td></tr></table></figure>

<h2 id="UIView"><a href="#UIView" class="headerlink" title="UIView"></a>UIView</h2><h3 id="添加点击事件-1"><a href="#添加点击事件-1" class="headerlink" title="添加点击事件"></a>添加点击事件</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">view.isUserInteractionEnabled = true</span><br><span class="line">let tapGesture = UITapGestureRecognizer(target: self, action: #selector(tapGestureAction))</span><br><span class="line">tapGesture.numberOfTapsRequired = 1</span><br><span class="line">view.addGestureRecognizer(tapGesture)</span><br><span class="line"></span><br><span class="line">@objc func tapGestureAction()&#123;</span><br><span class="line">    // todo  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="属性"><a href="#属性" class="headerlink" title="属性"></a>属性</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"># 描述UIView的大小和在父系坐标系中的位置</span><br><span class="line">testView.frame = CGRect(x: 100, y: 100, width: 50, height: 50)</span><br><span class="line"></span><br><span class="line"># 描述UIView的大小和在自身坐标系中的位置</span><br><span class="line"># 一般bounds.origin = (0,0)，而bounds.size = frames.size</span><br><span class="line">testView.bounds = CGRect(x: 0, y: 0, width: 50, height: 50)</span><br><span class="line"></span><br><span class="line"># 背景颜色</span><br><span class="line">testView.backgroundColor = UIColor.black</span><br><span class="line"></span><br><span class="line"># 是否切除子视图超出部分</span><br><span class="line">testView.clipsToBounds = true</span><br><span class="line"></span><br><span class="line"># 透明度</span><br><span class="line">testView.alpha = 0.5</span><br><span class="line"></span><br><span class="line"># 是否隐藏视图</span><br><span class="line"># 若为true，表示该View及其子视图都被隐藏</span><br><span class="line"># 同时该View会从响应链中移除，而响应链的下一个会成为第一响应者</span><br><span class="line">testView.isHidden = false</span><br></pre></td></tr></table></figure>

<h3 id="插入-x2F-删除与移动"><a href="#插入-x2F-删除与移动" class="headerlink" title="插入&#x2F;删除与移动"></a>插入&#x2F;删除与移动</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"># 将子视图从父视图中删除</span><br><span class="line">removeFromSuperview()</span><br><span class="line"></span><br><span class="line"># 添加视图，加在父视图层级结构的最上层</span><br><span class="line">addSubview(view:)</span><br><span class="line"></span><br><span class="line"># 在指定位置插入视图</span><br><span class="line">insertSubview(view:,at:)</span><br><span class="line"></span><br><span class="line"># 将视图添加到指定视图的下方</span><br><span class="line">insertSubview(view:,belowSubview:)</span><br><span class="line"></span><br><span class="line"># 将视图添加到指定视图的下方</span><br><span class="line">insertSubview(view:,aboveSubview:)</span><br><span class="line"></span><br><span class="line"># 交换两个指定位置的子视图在父视图中的位置</span><br><span class="line">exchangeSubview(at:,withSubviewAt:)</span><br><span class="line"></span><br><span class="line"># 将指定子视图移动到最前面</span><br><span class="line">bringSubview(toFront:)</span><br><span class="line"></span><br><span class="line"># 将指定子视图移动到最后面</span><br><span class="line">sendSubview(toBack:)</span><br></pre></td></tr></table></figure>

<h2 id="UIBarButtonItem"><a href="#UIBarButtonItem" class="headerlink" title="UIBarButtonItem"></a>UIBarButtonItem</h2><h3 id="绑定点击事件"><a href="#绑定点击事件" class="headerlink" title="绑定点击事件"></a>绑定点击事件</h3><p>无法调用addTarget()方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">barbuttonitem.target = self;</span><br><span class="line">barbuttonitem.action = @selector(myMethod);</span><br></pre></td></tr></table></figure>

<h2 id="UITextView"><a href="#UITextView" class="headerlink" title="UITextView"></a>UITextView</h2><h3 id="检测所点击的文本内容"><a href="#检测所点击的文本内容" class="headerlink" title="检测所点击的文本内容"></a>检测所点击的文本内容</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"></span><br></pre></td></tr></table></figure>

<h2 id="Activity-Indicator"><a href="#Activity-Indicator" class="headerlink" title="Activity Indicator"></a>Activity Indicator</h2><p>显示转圈动画。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># 假设通过Outlet，连接为activityIndicator</span><br><span class="line"># 开始转圈</span><br><span class="line">activityIndicator.startAnimating()</span><br><span class="line"></span><br><span class="line"># 停止转圈</span><br><span class="line">activityIndicator.stopAnimating()</span><br></pre></td></tr></table></figure>

<h2 id="AVPlayer"><a href="#AVPlayer" class="headerlink" title="AVPlayer"></a>AVPlayer</h2><p>用于播放视频。需要AVFoundation库，使用前添加以下语句。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">import AVFoundation</span><br></pre></td></tr></table></figure>

<h3 id="初始化"><a href="#初始化" class="headerlink" title="初始化"></a>初始化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">guard let path = Bundle.main.path(forResource: &quot;video&quot;, ofType:&quot;m4v&quot;) else &#123;</span><br><span class="line">    debugPrint(&quot;video not found&quot;)</span><br><span class="line">    return</span><br><span class="line">&#125;</span><br><span class="line">        </span><br><span class="line">let player = AVPlayer(url: URL(fileURLWithPath: path))</span><br><span class="line">let playerLayer = AVPlayerLayer(player: player)</span><br><span class="line">playerLayer.frame = self.view.bounds</span><br><span class="line">self.view.layer.addSublayer(playerLayer)</span><br></pre></td></tr></table></figure>

<p>也可通过函数调用的方式，如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">var player: AVPlayer!</span><br><span class="line">var playerLayer: AVPlayerLayer!</span><br><span class="line"></span><br><span class="line">func viewDidLoad()&#123;</span><br><span class="line">    ...</span><br><span class="line">    addVideo(file: &quot;video.m4v&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func addVideo(file: String) &#123;</span><br><span class="line">    let files = file.components(separatedBy: &quot;.&quot;)</span><br><span class="line"></span><br><span class="line">    guard let path = Bundle.main.path(forResource: files[0], ofType:files[1]) else &#123;</span><br><span class="line">        debugPrint( &quot;\(files.joined(separator: &quot;.&quot;)) not found&quot;)</span><br><span class="line">        return</span><br><span class="line">    &#125;</span><br><span class="line">    player = AVPlayer(url: URL(fileURLWithPath: path))</span><br><span class="line"></span><br><span class="line">    playerLayer = AVPlayerLayer(player: player)</span><br><span class="line">    playerLayer.frame = self.view.bounds</span><br><span class="line">    self.view.layer.addSublayer(playerLayer)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="播放"><a href="#播放" class="headerlink" title="播放"></a>播放</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">player.play()</span><br></pre></td></tr></table></figure>

<h3 id="暂停"><a href="#暂停" class="headerlink" title="暂停"></a>暂停</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">player.pause()</span><br></pre></td></tr></table></figure>

<h3 id="停止"><a href="#停止" class="headerlink" title="停止"></a>停止</h3><p>先将时间设为起始点，然后暂停播放。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">player.seek(to: CMTime.zero)</span><br><span class="line">player.pause()</span><br></pre></td></tr></table></figure>

<h2 id="UIPageViewController"><a href="#UIPageViewController" class="headerlink" title="UIPageViewController"></a>UIPageViewController</h2><p>页面切换控制器，可独立使用或嵌入到其它页面使用。</p>
<h3 id="放置"><a href="#放置" class="headerlink" title="放置"></a>放置</h3><h4 id="独立使用"><a href="#独立使用" class="headerlink" title="独立使用"></a>独立使用</h4><p>直接在Storyboard中添加Page View Controller即可。</p>
<h4 id="嵌入到页面"><a href="#嵌入到页面" class="headerlink" title="嵌入到页面"></a>嵌入到页面</h4><p>在页面上添加Container View，再添加一个Page View Controller，连接Container View和Page View Controller，选择Embed。</p>
<h3 id="初始化-1"><a href="#初始化-1" class="headerlink" title="初始化"></a>初始化</h3><p>将Storyboard中的Page View Controller链接到自定义类，此处为PageViewController。示例代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">import UIKit</span><br><span class="line"></span><br><span class="line">class PageViewController: UIPageViewController &#123;</span><br><span class="line">    // 要展示的所有页面，放置在数组之中</span><br><span class="line">    var controllers: [UIViewController] = []</span><br><span class="line"></span><br><span class="line">    override func viewDidLoad() &#123;</span><br><span class="line">        super.viewDidLoad()</span><br><span class="line"></span><br><span class="line">        // 新建要展示的页面</span><br><span class="line">        let firstVC = storyboard!.instantiateViewController(withIdentifier: &quot;FirstView&quot;) as! FirstViewController</span><br><span class="line">        let secondVC = storyboard!.instantiateViewController(withIdentifier: &quot;SecondView&quot;) as! SecondViewController</span><br><span class="line">        let ThirdVC = storyboard!.instantiateViewController(withIdentifier: &quot;ThirdView&quot;) as! ThirdViewController</span><br><span class="line"></span><br><span class="line">        // 放置到数组</span><br><span class="line">        self.controllers = [ firstVC, secondVC, ThirdVC ]</span><br><span class="line"></span><br><span class="line">        // 设置首先显示的页面</span><br><span class="line">        setViewControllers([self.controllers[0]], direction: .forward, animated: true, completion: nil)</span><br><span class="line"></span><br><span class="line">        // 数据来源为自身</span><br><span class="line">        self.dataSource = self </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// MARK: - UIPageViewController DataSource</span><br><span class="line">extension PageViewController: UIPageViewControllerDataSource &#123;</span><br><span class="line">    // 页面数量</span><br><span class="line">    func presentationCount(for pageViewController: UIPageViewController) -&gt; Int &#123;</span><br><span class="line">        return self.controllers.count</span><br><span class="line">    &#125;</span><br><span class="line">   </span><br><span class="line">    // 左滑时的操作</span><br><span class="line">    func pageViewController(_ pageViewController: UIPageViewController, viewControllerAfter viewController: UIViewController) -&gt; UIViewController? &#123;</span><br><span class="line">        if let index = self.controllers.firstIndex(of: viewController),</span><br><span class="line">            index &lt; self.controllers.count - 1 &#123;</span><br><span class="line">            // 后面还有页面，页面后滑一页</span><br><span class="line">            return self.controllers[index + 1]</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // 后面没有页面，不允许滑动</span><br><span class="line">            return nil</span><br><span class="line"></span><br><span class="line">            // 后面没有页面，滑动到第一页</span><br><span class="line">            return self.controllers.first</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 右滑时的操作</span><br><span class="line">    func pageViewController(_ pageViewController: UIPageViewController, viewControllerBefore viewController: UIViewController) -&gt; UIViewController? &#123;</span><br><span class="line">        if let index = self.controllers.firstIndex(of: viewController),</span><br><span class="line">            index &gt; 0 &#123;</span><br><span class="line">            // 前面还有页面，页面前滑一页</span><br><span class="line">            return self.controllers[index - 1]</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            // 前面没有页面，不允许滑动</span><br><span class="line">            return nil</span><br><span class="line"></span><br><span class="line">            // 前面没有页面，滑动到最后一页</span><br><span class="line">            return self.controllers.last</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="添加当前页显示"><a href="#添加当前页显示" class="headerlink" title="添加当前页显示"></a>添加当前页显示</h3><p>若需要添加页控件用以显示当前页码，则需要在放置时选择将UIPageViewController嵌入到页面，然后在Container View下添加UIPageControl控件。</p>
<p>添加完成后，除了完成初始化中的步骤外，还需要在显示时和切换页面时给UIPageControl控件传递信息。该操作通过自定义协议PageViewControllerDelegate实现，代码如下，仅显示比初始化时增加的部分。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br></pre></td><td class="code"><pre><span class="line">protocol PageViewControllerDelegate: class &#123;</span><br><span class="line">    // 当页面数量改变时调用</span><br><span class="line">    func pageViewController(pageViewController: PageViewController,</span><br><span class="line">                                    didUpdatePageCount count: Int)</span><br><span class="line">     </span><br><span class="line">    // 当前页索引改变时调用</span><br><span class="line">    func pageViewController(pageViewController: PageViewController,</span><br><span class="line">                                    didUpdatePageIndex index: Int)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class PageViewController: UIPageViewController, UIPageViewControllerDelegate &#123;</span><br><span class="line">    ...</span><br><span class="line">    var pageDelegate: PageViewControllerDelegate?</span><br><span class="line"></span><br><span class="line">    override func viewDidLoad() &#123;</span><br><span class="line">        ...</span><br><span class="line">        // 协议来源为自身</span><br><span class="line">        self.delegate = self</span><br><span class="line"></span><br><span class="line">        // 页面数量改变，通知委托对象</span><br><span class="line">        pageDelegate?.pageViewController(self, didUpdatePageCount: allViewControllers.count)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// MARK: - UIPageViewController DataSource</span><br><span class="line">extension PageViewController: UIPageViewControllerDataSource &#123;</span><br><span class="line">    ...</span><br><span class="line">    // 页面切换完毕</span><br><span class="line">    func pageViewController(pageViewController: UIPageViewController,</span><br><span class="line">                            didFinishAnimating finished: Bool,</span><br><span class="line">                            previousViewControllers: [UIViewController],</span><br><span class="line">                            transitionCompleted completed: Bool) &#123;</span><br><span class="line">        if let firstViewController = viewControllers?.first,</span><br><span class="line">          let index = controllers.indexOf(firstViewController) &#123;</span><br><span class="line">            //当前页改变，通知委托对象</span><br><span class="line">            pageDelegate?.pageViewController(self, didUpdatePageIndex: index)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// Container View的父控制器类</span><br><span class="line">class ViewController: UIViewController, PageViewControllerDelegate &#123;</span><br><span class="line"></span><br><span class="line">    // 页控件</span><br><span class="line">    @IBOutlet weak var pageControl: UIPageControl!</span><br><span class="line">     </span><br><span class="line">    override func viewDidLoad() &#123;</span><br><span class="line">        super.viewDidLoad()</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    // 场景切换</span><br><span class="line">    override func prepare(for segue: UIStoryboardSegue, sender: AnyObject?) &#123;</span><br><span class="line">        if let pageViewController = segue.destinationViewController as? PageViewController &#123;</span><br><span class="line">            // 设置委托（当页面数量、索引改变时当前视图控制器能触发页控件的改变）</span><br><span class="line">            pageViewController.pageDelegate = self</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    // 当页面数量改变时调用</span><br><span class="line">    func pageViewController(pageViewController: PageViewController,</span><br><span class="line">                                    didUpdatePageCount count: Int) &#123;</span><br><span class="line">        pageControl.numberOfPages = count</span><br><span class="line">    &#125;</span><br><span class="line">     </span><br><span class="line">    // 当前页索引改变时调用</span><br><span class="line">    func pageViewController(pageViewController: PageViewController,</span><br><span class="line">                                    didUpdatePageIndex index: Int) &#123;</span><br><span class="line">        pageControl.currentPage = index</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h3 id="样式设置"><a href="#样式设置" class="headerlink" title="样式设置"></a>样式设置</h3><h4 id="修改滑动样式"><a href="#修改滑动样式" class="headerlink" title="修改滑动样式"></a>修改滑动样式</h4><p>将Transition Style设置成Scroll时为滚动形式，Page Curl时为翻页形式。</p>
<h4 id="设置UIPageControl大小"><a href="#设置UIPageControl大小" class="headerlink" title="设置UIPageControl大小"></a>设置UIPageControl大小</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">// 整体放大，包括圆点和间距</span><br><span class="line">pageControl.transform = CGAffineTransform(scaleX: 2, y: 2)</span><br><span class="line"></span><br><span class="line">// 仅放大圆点</span><br><span class="line">pageControl.subviews.forEach &#123;</span><br><span class="line">    $0.transform = CGAffineTransform(scaleX: 2, y: 2)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="框架"><a href="#框架" class="headerlink" title="框架"></a>框架</h1><h2 id="不规则按钮"><a href="#不规则按钮" class="headerlink" title="不规则按钮"></a>不规则按钮</h2><h3 id="类定义"><a href="#类定义" class="headerlink" title="类定义"></a>类定义</h3><p>定义IrregularButton类，在默认按钮的基础上进行拓展。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br></pre></td><td class="code"><pre><span class="line">import UIKit</span><br><span class="line"></span><br><span class="line">enum BtnType &#123;</span><br><span class="line">    case leftUp</span><br><span class="line">    case leftDown</span><br><span class="line">    case rightUp</span><br><span class="line">    case rightDown</span><br><span class="line">    case center</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">class IrregularButton: UIButton &#123;</span><br><span class="line">    private var path = UIBezierPath()</span><br><span class="line">    private var drawLayer = CAShapeLayer()</span><br><span class="line">    private var textLayer = CATextLayer()</span><br><span class="line">    </span><br><span class="line">    // 初始化时为let btn = IrregularButton(frame: CGRect(...))</span><br><span class="line">    // 用于标记按钮在父控制器的位置</span><br><span class="line">    override init(frame: CGRect) &#123;</span><br><span class="line">        super.init(frame: frame)</span><br><span class="line">        </span><br><span class="line">        self.layer.addSublayer(self.drawLayer)</span><br><span class="line">        self.layer.addSublayer(self.textLayer)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    required init?(coder aDecoder: NSCoder) &#123;</span><br><span class="line">        fatalError(&quot;init(coder:) has not been implemented&quot;)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    // 通过path定义按钮形状</span><br><span class="line">    // path.move为移动到起点</span><br><span class="line">    // (0, 0)为初始化时标记的位置</span><br><span class="line">    // 用(0, 0)标记为无左侧偏移</span><br><span class="line">    // path.addLine为从当前点绘制到指定点</span><br><span class="line">    // path.addArc为添加圆弧</span><br><span class="line">    // path.close()标记路径完成</span><br><span class="line">    func path(type: BtnType) &#123;</span><br><span class="line">        </span><br><span class="line">        let path = UIBezierPath()</span><br><span class="line">        </span><br><span class="line">        switch type &#123;</span><br><span class="line">        case .leftUp:</span><br><span class="line">            path.move(to: CGPoint(x: 60, y: 100))</span><br><span class="line">            path.addLine(to: CGPoint(x: 0, y: 100))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 100, startAngle: .pi, endAngle: .pi*1.5, clockwise: true)</span><br><span class="line">            path.addLine(to: CGPoint(x: 100, y: 60))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 40, startAngle: .pi*1.5, endAngle: .pi, clockwise: false)</span><br><span class="line">            path.close()</span><br><span class="line">            </span><br><span class="line">            self.path = path</span><br><span class="line">            </span><br><span class="line">        case .leftDown:</span><br><span class="line">            path.move(to: CGPoint(x: 60, y: 100))</span><br><span class="line">            path.addLine(to: CGPoint(x: 0, y: 100))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 100, startAngle: .pi, endAngle: .pi*0.5, clockwise: false)</span><br><span class="line">            path.addLine(to: CGPoint(x: 100, y: 140))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 40, startAngle: .pi*0.5, endAngle: .pi, clockwise: true)</span><br><span class="line">            path.close()</span><br><span class="line">            </span><br><span class="line">            self.path = path</span><br><span class="line">        case .rightUp:</span><br><span class="line">            path.move(to: CGPoint(x: 100, y: 60))</span><br><span class="line">            path.addLine(to: CGPoint(x: 100, y: 0))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 100, startAngle: .pi*1.5, endAngle: 0, clockwise: true)</span><br><span class="line">            path.addLine(to: CGPoint(x: 140, y: 100))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 40, startAngle: 0, endAngle: .pi*1.5, clockwise: false)</span><br><span class="line">            path.close()</span><br><span class="line">            </span><br><span class="line">            self.path = path</span><br><span class="line">        case .rightDown:</span><br><span class="line">            path.move(to: CGPoint(x: 140, y: 100))</span><br><span class="line">            path.addLine(to: CGPoint(x: 200, y: 100))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 100, startAngle: 0, endAngle: .pi*0.5, clockwise: true)</span><br><span class="line">            path.addLine(to: CGPoint(x: 100, y: 140))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 40, startAngle: .pi*0.5, endAngle: 0, clockwise: false)</span><br><span class="line">            path.close()</span><br><span class="line">            </span><br><span class="line">            self.path = path</span><br><span class="line">        case .center:</span><br><span class="line">            path.move(to: CGPoint(x: 140, y: 100))</span><br><span class="line">            path.addArc(withCenter: CGPoint(x: 100, y: 100), radius: 40, startAngle: 0, endAngle: .pi*2, clockwise: true)</span><br><span class="line">            path.close()</span><br><span class="line">            </span><br><span class="line">            self.path = path</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        self.drawLayer.path = self.path.cgPath</span><br><span class="line"></span><br><span class="line">        setNeedsDisplay()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func text(text: String) &#123;</span><br><span class="line">        </span><br><span class="line">        let stringSize = text.boundingRect(with: CGSize(width:100,height:CGFloat.greatestFiniteMagnitude), options: .usesLineFragmentOrigin, attributes: [NSAttributedString.Key.font:UIFont.systemFont(ofSize: 14)], context: nil).size</span><br><span class="line">        </span><br><span class="line">        textLayer.frame = CGRect(x: self.path.bounds.origin.x+(self.path.bounds.size.width/2)-(stringSize.width/2), y: self.path.bounds.origin.y+(self.path.bounds.size.height/2)-(stringSize.height/2), width: stringSize.width, height: stringSize.height)</span><br><span class="line">        </span><br><span class="line">        textLayer.string = NSAttributedString(string: text, attributes: [NSAttributedString.Key.foregroundColor:UIColor.black,</span><br><span class="line">            NSAttributedString.Key.font:UIFont.systemFont(ofSize: 14)])</span><br><span class="line">        textLayer.backgroundColor = UIColor.clear.cgColor</span><br><span class="line">        </span><br><span class="line">        // 设置是否自动换行</span><br><span class="line">        textLayer.isWrapped = false</span><br><span class="line"></span><br><span class="line">        // 寄宿图的像素尺寸和视图大小的比</span><br><span class="line">        // 不设置为屏幕比例文字就会像素化</span><br><span class="line">        textLayer.contentsScale = UIScreen.main.scale</span><br><span class="line">        </span><br><span class="line">        setNeedsDisplay()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    func backgroundColor(color: UIColor) &#123;</span><br><span class="line">        </span><br><span class="line">        self.drawLayer.fillColor = color.cgColor</span><br><span class="line">        </span><br><span class="line">        setNeedsDisplay()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    override func point(inside point: CGPoint, with event: UIEvent?) -&gt; Bool &#123;</span><br><span class="line">        if self.path.contains(point) &#123;</span><br><span class="line">            return true</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            return false</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">let btn = IrregularButton(frame: CGRect(x: 80, y: 100, width: 0, height: 0))</span><br><span class="line"></span><br><span class="line">btn.path(type: .leftUp)</span><br><span class="line">btn.backgroundColor(color: UIColor(red: 0, green: 0, blue: 0, alpha: 1))</span><br><span class="line">btn.text(text: &quot;Some Text&quot;)</span><br><span class="line">btn.addTarget(self, action: #selector(btnClick), for: .touchUpInside)</span><br><span class="line"></span><br><span class="line">self.view.addSubview(btn)</span><br><span class="line"></span><br><span class="line">func btnClick()&#123;</span><br><span class="line">    // todo</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="OCR识别"><a href="#OCR识别" class="headerlink" title="OCR识别"></a>OCR识别</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://developer.apple.com/documentation/vision/structuring_recognized_text_on_a_document</span><br><span class="line">https://developer.apple.com/documentation/vision/recognizing_text_in_images</span><br></pre></td></tr></table></figure>

<h3 id="修改识别语言"><a href="#修改识别语言" class="headerlink" title="修改识别语言"></a>修改识别语言</h3><p>默认识别语言为英文。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 修改识别语言为简体中文</span><br><span class="line">textRecognitionRequest.recognitionLanguages = [&quot;zh-CN&quot;]</span><br></pre></td></tr></table></figure>

<h2 id="手部识别"><a href="#手部识别" class="headerlink" title="手部识别"></a>手部识别</h2><h3 id="例程"><a href="#例程" class="headerlink" title="例程"></a>例程</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://developer.apple.com/documentation/vision/detecting_hand_poses_with_vision</span><br><span class="line">https://heartbeat.fritz.ai/swipeless-tinder-using-ios-14-vision-hand-pose-estimation-64e5f00ce45c</span><br></pre></td></tr></table></figure>

<h3 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="镜头方向随设备旋转而变化"><a href="#镜头方向随设备旋转而变化" class="headerlink" title="镜头方向随设备旋转而变化"></a>镜头方向随设备旋转而变化</h4><p>需要旋转cameraPreviewLayer，即相机预览层。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cameraPreviewLayer.connection.videoOrientation = getCaptureVideoOrientation()</span><br></pre></td></tr></table></figure>

<p>其中getCaptureVideoOrientation()函数如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">func getCaptureVideoOrientation() -&gt; AVCaptureVideoOrientation &#123;</span><br><span class="line">    switch UIDevice.current.orientation &#123;</span><br><span class="line">    case .portrait,.faceUp,.faceDown:</span><br><span class="line">        return .portrait</span><br><span class="line">    case .portraitUpsideDown:</span><br><span class="line">        return .portrait</span><br><span class="line">    case .landscapeLeft:</span><br><span class="line">        return .landscapeRight</span><br><span class="line">    case .landscapeRight:</span><br><span class="line">        return .landscapeLeft</span><br><span class="line">    default:</span><br><span class="line">        return .portrait</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<details>
<summary>【进阶】旋转视频</summary>

<p>按照以下方式设置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">session.outputs[0].connection(with: .video)?.videoOrientation = true</span><br></pre></td></tr></table></figure>
</details>

<h2 id="文本转语音"><a href="#文本转语音" class="headerlink" title="文本转语音"></a>文本转语音</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">// </span><br><span class="line">class ViewController: UIViewController, AVSpeechSynthesizerDelegate &#123;</span><br><span class="line">    // 开始朗读</span><br><span class="line">    func StartSpeech()&#123;</span><br><span class="line">        let utterance = AVSpeechUtterance(string: inportTextField.text!)</span><br><span class="line">        utterance.voice = AVSpeechSynthesisVoice(language: &quot;zh-CN&quot;)</span><br><span class="line">        let synthesizer = AVSpeechSynthesizer()</span><br><span class="line"></span><br><span class="line">        // 音调</span><br><span class="line">        utterance.pitchMultiplier = tonebar.value</span><br><span class="line"></span><br><span class="line">        // 速度</span><br><span class="line">        utterance.rate = speedbar.value</span><br><span class="line">        synthesizer.speak(utterance)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 停止朗读</span><br><span class="line">    func StopSpeech() &#123;</span><br><span class="line">        // 立即中断语音</span><br><span class="line">        synth.stopSpeaking(at: AVSpeechBoundary.immediate)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 语音结束后的操作</span><br><span class="line">    func speechSynthesizer(_ synthesizer: AVSpeechSynthesizer, didFinish utterance: AVSpeechUtterance) &#123;</span><br><span class="line">        // code</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="类型"><a href="#类型" class="headerlink" title="类型"></a>类型</h1><h2 id="NSMutableAttributedString"><a href="#NSMutableAttributedString" class="headerlink" title="NSMutableAttributedString"></a>NSMutableAttributedString</h2><p>可设置样式的富文本。</p>
<h3 id="样式设置-1"><a href="#样式设置-1" class="headerlink" title="样式设置"></a>样式设置</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">let labelString = &quot;Underline Label&quot;</span><br><span class="line">let textColor: UIColor = .blue</span><br><span class="line">let underLineColor: UIColor = .red</span><br><span class="line">let underLineStyle = NSUnderlineStyle.styleSingle.rawValue</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">let labelAtributes:[NSAttributedStringKey : Any]  = [</span><br><span class="line">    NSAttributedStringKey.foregroundColor: textColor,</span><br><span class="line">    NSAttributedStringKey.underlineStyle: underLineStyle,</span><br><span class="line"></span><br><span class="line">    # 下划线颜色</span><br><span class="line">    NSAttributedStringKey.underlineColor: underLineColor</span><br><span class="line">]</span><br><span class="line"></span><br><span class="line">let underlineAttributedString = NSAttributedString(string: labelString, attributes: labelAtributes)</span><br><span class="line">textView.attributedText = underlineAttributedString</span><br></pre></td></tr></table></figure>

<h3 id="样式追加"><a href="#样式追加" class="headerlink" title="样式追加"></a>样式追加</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">let attributed = NSMutableAttributedString(attributedString: textView.attributedText!)</span><br><span class="line">attributed.addAttribute(.foregroundColor, value: ChangeColor, range: .init(location: 0, length: attributed.length))</span><br><span class="line">textView.attributedText = NSAttributedString(attributedString: attributed)</span><br></pre></td></tr></table></figure>

<h3 id="转换为String"><a href="#转换为String" class="headerlink" title="转换为String"></a>转换为String</h3><p>使用string方法即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">var attributedString = NSMutableAttributedString(string: &quot;hello, world!&quot;)</span><br><span class="line">var s = attributedString.string</span><br></pre></td></tr></table></figure>

<h2 id="数组"><a href="#数组" class="headerlink" title="数组"></a>数组</h2><h3 id="创建"><a href="#创建" class="headerlink" title="创建"></a>创建</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">var animals = [&quot;cats&quot;, &quot;dogs&quot;, &quot;chimps&quot;, &quot;moose&quot;]</span><br></pre></td></tr></table></figure>

<h3 id="删除元素"><a href="#删除元素" class="headerlink" title="删除元素"></a>删除元素</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"># 删除第一个元素</span><br><span class="line">animals.removeFirst() // &quot;cats&quot;</span><br><span class="line"></span><br><span class="line"># 删除最后一个元素</span><br><span class="line">animals.removeLast() // &quot;moose&quot;</span><br><span class="line"></span><br><span class="line"># 删除索引处的元素</span><br><span class="line">animals.remove(at: 2) // &quot;chimps&quot;</span><br><span class="line"># 或以下方法</span><br><span class="line">let pets = animals.filter &#123; $0 != &quot;chimps&quot; &#125;</span><br><span class="line"></span><br><span class="line"># 删除未知索引的元素（仅一个元素）</span><br><span class="line">if let index = animals.firstIndex(of: &quot;chimps&quot;) &#123;</span><br><span class="line">    animals.remove(at: index)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"># 删除未知索引的元素（多个元素）</span><br><span class="line">animals = animals.filter()&#123;$0 != &quot;chimps&quot;&#125;</span><br></pre></td></tr></table></figure>

<h1 id="页面与动作控制"><a href="#页面与动作控制" class="headerlink" title="页面与动作控制"></a>页面与动作控制</h1><h2 id="子视图添加和移除"><a href="#子视图添加和移除" class="headerlink" title="子视图添加和移除"></a>子视图添加和移除</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 添加</span><br><span class="line">self.addSubview(subView)</span><br><span class="line"></span><br><span class="line"># 移除</span><br><span class="line">subView.removeFromSuperView()</span><br></pre></td></tr></table></figure>

<h2 id="监听进程事件"><a href="#监听进程事件" class="headerlink" title="监听进程事件"></a>监听进程事件</h2><p>在AppDelegete.swift下的AppDelegete类添加以下函数即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">func applicationDidFinishLaunching(_ application: UIApplication) &#123;</span><br><span class="line">    print(&quot;程序启动&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func applicationWillResignActive(_ application: UIApplication) &#123;</span><br><span class="line">    print(&quot;程序变为不活跃状态&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func applicationDidEnterBackground(_ application: UIApplication) &#123;</span><br><span class="line">    print(&quot;程序进入后台&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func applicationDidEnterForeground(_ application: UIApplication) &#123;</span><br><span class="line">    print(&quot;程序进入前台&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func applicationDidBecomeActive(_ application: UIApplication) &#123;</span><br><span class="line">    print(&quot;变为活跃状态&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">func applicationWillTerminate(_ application: UIApplication) &#123;</span><br><span class="line">    print(&quot;程序终止&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="监听触摸事件"><a href="#监听触摸事件" class="headerlink" title="监听触摸事件"></a>监听触摸事件</h2><p>UIView等相关视图是UIResponder的子类，而UIResponder可对相关触摸事件做出反馈。将Storyboard中的视图绑定到自定义类后，即可重写以下方法对触摸事件做出反馈。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"># 点击事件触发</span><br><span class="line">func touchesBegan(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span><br><span class="line"></span><br><span class="line"># 移动事件触发</span><br><span class="line">func touchesMoved(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span><br><span class="line"></span><br><span class="line"># 结束点击事件触发</span><br><span class="line">func touchesEnded(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) </span><br><span class="line"></span><br><span class="line"># 取消点击事件触发</span><br><span class="line">func touchesCancelled(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?)</span><br></pre></td></tr></table></figure>

<h2 id="在View中获取点击坐标"><a href="#在View中获取点击坐标" class="headerlink" title="在View中获取点击坐标"></a>在View中获取点击坐标</h2><p>需要重写View的touchesBegan方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">override func touchesBegan(_ touches: Set&lt;UITouch&gt;, with event: UIEvent?) &#123;</span><br><span class="line">    for touch:AnyObject in touches &#123;</span><br><span class="line">        let t:UITouch = touch as! UITouch</span><br><span class="line">        print(t.location(in: self.contentView))</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="隐藏返回键"><a href="#隐藏返回键" class="headerlink" title="隐藏返回键"></a>隐藏返回键</h2><p>在需要隐藏返回键页面的ViewController的viewDidLoad()方法中添加以下语句即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.navigationController?.navigationBarHidden = true</span><br></pre></td></tr></table></figure>

<h2 id="从跳转中获取父-x2F-子控制器"><a href="#从跳转中获取父-x2F-子控制器" class="headerlink" title="从跳转中获取父&#x2F;子控制器"></a>从跳转中获取父&#x2F;子控制器</h2><p>在Storyboard中对需要设置的segue设置identifier，此处为<code>Jump</code>。假设父控制器为ParentViewController，子控制器为ChildViewController。</p>
<p>父控制器代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">class ParentViewController: UIViewController &#123;</span><br><span class="line">    var child: ChildViewController?</span><br><span class="line"></span><br><span class="line">    // Set the child delegate</span><br><span class="line">    // And child&#x27;s parent delegate</span><br><span class="line">    override func prepareForSegue(segue: UIStoryboardSegue, sender: AnyObject?) &#123;</span><br><span class="line">        if segue.identifier ==&quot;Jump&quot; &#123;</span><br><span class="line">                self.child = (segue.destinationViewController as ChildViewController)</span><br><span class="line">                (segue.destinationViewController as ChildViewController).parent = self</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>子控制器代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">class ChildViewController: UITableViewController &#123;</span><br><span class="line">    var parent: ParentViewController?</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="从视图获取父控制器"><a href="#从视图获取父控制器" class="headerlink" title="从视图获取父控制器"></a>从视图获取父控制器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">func nextresponsder(viewself:UIView) -&gt; UIViewController&#123;</span><br><span class="line">    var vc:UIResponder = viewself</span><br><span class="line">     </span><br><span class="line">    while vc.isKind(of: UIViewController.self) != true &#123;</span><br><span class="line">        vc = vc.next!</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    return vc as! UIViewController</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="获取子视图在父视图中的坐标"><a href="#获取子视图在父视图中的坐标" class="headerlink" title="获取子视图在父视图中的坐标"></a>获取子视图在父视图中的坐标</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 获取childView在fatherView的坐标，size是childView</span><br><span class="line">let crect = childView?.convert((childView?.frame)!, to: fatherView)</span><br><span class="line"></span><br><span class="line"># 或以下方式</span><br><span class="line">let crect2 = fatherView?.convert((childView?.frame)!, from: childView)</span><br></pre></td></tr></table></figure>

<h2 id="不可退回的页面跳转"><a href="#不可退回的页面跳转" class="headerlink" title="不可退回的页面跳转"></a>不可退回的页面跳转</h2><h3 id="设置"><a href="#设置" class="headerlink" title="设置"></a>设置</h3><p>使用present()方法即可。</p>
<h3 id="淡出切换"><a href="#淡出切换" class="headerlink" title="淡出切换"></a>淡出切换</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># toVC为目标控制器</span><br><span class="line">toVC.modalTransitionStyle = .crossDissolve</span><br></pre></td></tr></table></figure>

<h2 id="可退回的页面跳转"><a href="#可退回的页面跳转" class="headerlink" title="可退回的页面跳转"></a>可退回的页面跳转</h2><h3 id="原理"><a href="#原理" class="headerlink" title="原理"></a>原理</h3><p>若使用普通的present方法，将无法实现页面回退。</p>
<p>设当前有两个页面firstVC和secondVC，通过按钮进行两个页面的切换，按钮均绑定btnClicked方法。若使用正常跳转逻辑，代码示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">// firstVC的类</span><br><span class="line">class FirstViewController: UIViewController &#123;</span><br><span class="line">    var secondVC: SecondViewController!</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    func btnClicked() &#123;</span><br><span class="line">        secondVC = SecondViewController()</span><br><span class="line">        secondVC.firstVC = self</span><br><span class="line">        self.present(secondVC, animated: true)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// secondVC的类</span><br><span class="line">class SecondViewController: UIViewController &#123;</span><br><span class="line">    var firstVC: FirstViewController!</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    func btnClicked() &#123;</span><br><span class="line">        self.present(firstVC, animated: true)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在firstVC点击按钮可以顺利跳转到secondVC，但在secondVC点击按钮时将会报错，原因是跳转到的页面已经被呈现过。因此需要使用NavigationController作为页面跳转的载体，通过pushViewController和popViewController方法实现回退跳转。</p>
<h3 id="初始化与跳转设置"><a href="#初始化与跳转设置" class="headerlink" title="初始化与跳转设置"></a>初始化与跳转设置</h3><p>在Storyboard点击底层页面，即无法再回退的页面，此处以firstVC为例，在菜单栏选择Editor-Embed in-Navigation Controller以使NavigationController嵌入到页面中。</p>
<p>嵌入后代码示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">// firstVC的类</span><br><span class="line">class FirstViewController: UIViewController &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    func btnClicked() &#123;</span><br><span class="line">        let secondVC = SecondViewController()</span><br><span class="line">        self.navigationController?.pushViewController(secondVC, animated: true)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">// secondVC的类</span><br><span class="line">class SecondViewController: UIViewController &#123;</span><br><span class="line">    ...</span><br><span class="line"></span><br><span class="line">    func btnClicked() &#123;</span><br><span class="line">        // 返回前一页</span><br><span class="line">        self.navigationController?.pushViewController(firstVC, animated: true)</span><br><span class="line"></span><br><span class="line">        // 返回到最前页（根页面）</span><br><span class="line">        // self.navigationController?.popToRootViewController(animated: true)</span><br><span class="line"></span><br><span class="line">        // 返回前两页</span><br><span class="line">        // let count = self.navigationController!.viewControllers.count</span><br><span class="line">        // if let preController = self.navigationController?.viewControllers[count-3] &#123;</span><br><span class="line">            self.navigationController?.popToViewController(preController, animated: true)</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="隐藏导航栏"><a href="#隐藏导航栏" class="headerlink" title="隐藏导航栏"></a>隐藏导航栏</h3><p>若需要隐藏所有页面的导航栏，可点击Navigation Controller的导航栏，在右侧勾选isHidden即可。或者通过以下代码实现。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">self.navigationController?.navigationBar.isHidden = true</span><br></pre></td></tr></table></figure>

<p>若需要隐藏特定页面的导航栏，则在该页面的控制器添加以下重写函数即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">override func viewWillAppear(_ animated: Bool) &#123;</span><br><span class="line">    super.viewWillAppear(animated)</span><br><span class="line">    self.navigationController?.setNavigationBarHidden(true, animated: animated)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">override func viewWillDisappear(_ animated: Bool) &#123;</span><br><span class="line">    super.viewWillDisappear(animated)</span><br><span class="line">    self.navigationController?.setNavigationBarHidden(false, animated: animated)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="转场样式"><a href="#转场样式" class="headerlink" title="转场样式"></a>转场样式</h3><h4 id="淡出转场"><a href="#淡出转场" class="headerlink" title="淡出转场"></a>淡出转场</h4><p>添加以下扩展。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">extension UINavigationController &#123;</span><br><span class="line">    func fadeIn(_ viewController: UIViewController) &#123;</span><br><span class="line">        let transition: CATransition = CATransition()</span><br><span class="line">        transition.duration = 0.3</span><br><span class="line">        transition.type = CATransitionType.fade</span><br><span class="line">        view.layer.add(transition, forKey: nil)</span><br><span class="line">        pushViewController(viewController, animated: false)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func fadeOut(_ viewController: UIViewController) &#123;</span><br><span class="line">        let transition: CATransition = CATransition()</span><br><span class="line">        transition.duration = 0.3</span><br><span class="line">        transition.type = CATransitionType.fade</span><br><span class="line">        view.layer.add(transition, forKey: nil)</span><br><span class="line">        popViewController(animated: false)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>按照如下方式使用即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 用于取代self.navigationController?.pushViewController(viewController, animated: true)</span><br><span class="line">self.navigationController?.fadeIn(viewController)</span><br><span class="line"></span><br><span class="line"># 用于取代self.navigationController?.popViewController(animated: true)</span><br><span class="line">self.navigationController?.fadeOut()</span><br></pre></td></tr></table></figure>

<h3 id="转场动画"><a href="#转场动画" class="headerlink" title="转场动画"></a>转场动画</h3><p>在页面跳转时，可设置转场动画。转场动画通过自定义的TransitionCoordinator类实现，该类用于承接NavigationController的delegate，定义转场时的操作。</p>
<p>为向TransitionCoordinator类传递动画前后的控件位置，首先定义animTransitionable协议用于从主控制器获取相关内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># 定义需要获取的控件</span><br><span class="line">protocol animTransitionable &#123;</span><br><span class="line">    var backGroundView: UIView &#123; get &#125;</span><br><span class="line">    var AnimateButton: UIButton &#123; get &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在主控制器添加关于animTransitionable的拓展，从而指定每个选项对应的应当获取的内容。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">extension MainViewController : animTransitionable</span><br><span class="line">&#123;</span><br><span class="line">    # 保证动画过程中背景一致</span><br><span class="line">    var backGroundView: UIView &#123;</span><br><span class="line">        return backgroundView</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    # 需要进行动画操作的控件</span><br><span class="line">    var AnimateButton: UIButton &#123;</span><br><span class="line">        return animateButton</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在需要转场的页面添加以下代码。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">let transition = TransitionCoordinator()</span><br><span class="line"></span><br><span class="line"># 开启转场动画</span><br><span class="line">navigationController?.delegate = transition</span><br><span class="line"></span><br><span class="line"># 关闭转场动画</span><br><span class="line">navigationController?.delegate = nil</span><br></pre></td></tr></table></figure>

<p>TransitionCoordinator类定义如下。在进行push时，会调用PushAnimator()方法，在进行pop时则调用PopAnimator()方法。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">import UIKit</span><br><span class="line"></span><br><span class="line">class TransitionCoordinator: NSObject, UINavigationControllerDelegate &#123;</span><br><span class="line">    func navigationController(_ navigationController: UINavigationController,</span><br><span class="line">        animationControllerFor operation: UINavigationControllerOperation,</span><br><span class="line">        from fromVC: UIViewController,</span><br><span class="line">        to toVC: UIViewController) -&gt; UIViewControllerAnimatedTransitioning? &#123;</span><br><span class="line">        </span><br><span class="line">        switch operation &#123;</span><br><span class="line">        case .push:</span><br><span class="line">            return PushAnimator()</span><br><span class="line">        case .pop:</span><br><span class="line">            return PopAnimator()</span><br><span class="line">        default:</span><br><span class="line">            return nil</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>以PushAnimator()方法为例，示例如下。其原理为新建一个视图，在其上隐藏来源控制器，完成动画操作，然后显示目标控制器。PopAnimator()方法原理完全一致。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br></pre></td><td class="code"><pre><span class="line">import UIKit</span><br><span class="line"></span><br><span class="line">class PushAnimator: NSObject, UIViewControllerAnimatedTransitioning &#123;</span><br><span class="line">    # 动画时长</span><br><span class="line">    func transitionDuration(using transitionContext: UIViewControllerContextTransitioning?) -&gt; TimeInterval &#123;</span><br><span class="line">        return 2.0</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    # 动画设置</span><br><span class="line">    func animateTransition(using transitionContext: UIViewControllerContextTransitioning) &#123;</span><br><span class="line">        # 新建视图</span><br><span class="line">        let containerView = transitionContext.containerView</span><br><span class="line"></span><br><span class="line">        # 用于提取来源控制器和目标控制器中的指定控件</span><br><span class="line">        # 这些控件在animTransitionable协议中被定义</span><br><span class="line">        guard let fromVC = transitionContext.viewController(forKey: .from) as? animTransitionable,</span><br><span class="line">            let toVC = transitionContext.viewController(forKey: .to) as? animTransitionable else &#123;</span><br><span class="line">                transitionContext.completeTransition(false)</span><br><span class="line">                return</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        # 获取来源控制器和目标控制器</span><br><span class="line">        let fromViewController = transitionContext.viewController(forKey: .from)!        </span><br><span class="line">        let toViewController = transitionContext.viewController(forKey: .to)!</span><br><span class="line">        </span><br><span class="line">        # 添加背景到containerView并设置为来源控制器的颜色</span><br><span class="line">        let backgroundView = UIView()</span><br><span class="line">        backgroundView.frame = fromVC.backGroundView.frame</span><br><span class="line">        backgroundView.backgroundColor = fromVC.backGroundView.backgroundColor</span><br><span class="line">        containerView.addSubview(backgroundView)</span><br><span class="line"></span><br><span class="line">        # 添加需要设置动画的控件</span><br><span class="line">        # 初始位置来源于来源控制器，通过convert进行坐标变换</span><br><span class="line">        let animateButton = UIButton()</span><br><span class="line">        animateButton.frame = containerView.convert(fromVC.AnimateButton.frame, from: fromVC.AnimateButton.superview)</span><br><span class="line">        animateButton.backgroundColor = fromVC.AnimateButton.backgroundColor</span><br><span class="line">        animateButton.layer.cornerRadius = fromVC.AnimateButton.layer.cornerRadius</span><br><span class="line">        animateButton.layer.masksToBounds = fromVC.AnimateButton.layer.masksToBounds</span><br><span class="line"></span><br><span class="line">        # 添加来源控制器和目标控制器</span><br><span class="line">        # 并设置为隐藏</span><br><span class="line">        containerView.addSubview(fromViewController.view)</span><br><span class="line">        containerView.addSubview(toViewController.view)</span><br><span class="line">        fromViewController.view.isHidden = true</span><br><span class="line">        toViewController.view.isHidden = true</span><br><span class="line"></span><br><span class="line">        # 动画设置</span><br><span class="line">        # 缩放为原来的0.9倍，持续时间0.4秒，弹跳动作强度1.3</span><br><span class="line">        let animator1 = &#123;</span><br><span class="line">            UIViewPropertyAnimator(duration: 0CGAffineTransform(scaleX: 0.9, y: 0.9).4, dampingRatio: 1.3) &#123;</span><br><span class="line">                animateButton.transform = </span><br><span class="line">            &#125;</span><br><span class="line">        &#125;()</span><br><span class="line">        </span><br><span class="line">        # 消除圆角，持续时间0.3秒，弹跳动作强度0.9</span><br><span class="line">        let animator2 = &#123;</span><br><span class="line">            UIViewPropertyAnimator(duration: 0.3, dampingRatio: 0.9) &#123;</span><br><span class="line">                animateButton.layer.cornerRadius = 0</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;()</span><br><span class="line"></span><br><span class="line">        # 在第一个动画完成后再进行第二个动画</span><br><span class="line">        animator1.addCompletion &#123; _ in</span><br><span class="line">            animator2.startAnimation()</span><br><span class="line">            # 若需要添加延迟则使用以下代码</span><br><span class="line">            animator2.startAnimation(afterDelay: 0.1)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # 在第二个动画完成后显示目标控制器</span><br><span class="line">        animator2.addCompletion &#123; _ in</span><br><span class="line">            # 隐藏相关控件</span><br><span class="line">            cellBackground.removeFromSuperview()</span><br><span class="line"></span><br><span class="line">            # 显示目标控制器</span><br><span class="line">            toViewController.view.isHidden = false</span><br><span class="line">            </span><br><span class="line">            transitionContext.completeTransition(true)</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        # 开启动画</span><br><span class="line">        animator1.startAnimation()  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="界面与外观设置"><a href="#界面与外观设置" class="headerlink" title="界面与外观设置"></a>界面与外观设置</h1><h2 id="添加自定义字体"><a href="#添加自定义字体" class="headerlink" title="添加自定义字体"></a>添加自定义字体</h2><p>将所需字体拖动到Xcode的文件栏，选择Copy items if needed和create groups。然后打开Info.plist，添加<code>Fonts provided by application</code>，内容为字体文件名称，注意包括扩展名。</p>
<p>可在编辑组件时直接修改组件的Font属性使用自定义字体，也可在代码中调用。由于字体名称与字体文件名称不一定完全对应，因此需要通过以下代码输出当前APP可用的字体列表。该段代码放置于任意可被执行的位置即可，比如放置在会出现的ViewController的viewDidLoad()方法中。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">for family in UIFont.familyNames.sorted() &#123;</span><br><span class="line">    let names = UIFont.fontNames(forFamilyName: family)</span><br><span class="line">    print(&quot;Family: \(family) Font names: \(names)&quot;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>知道所用字体的名称后，通过以下命令即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># label为需要改变字体的标签</span><br><span class="line">guard let customFont = UIFont(name: &quot;CustomFont-Light&quot;, size: UIFont.labelFontSize) else &#123;</span><br><span class="line">    fatalError(&quot;&quot;&quot;</span><br><span class="line">    Failed to load the custom font.</span><br><span class="line">    Make sure the font file is included in the project and the font name is spelled correctly.</span><br><span class="line">    &quot;&quot;&quot;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">label.font = UIFontMetrics.default.scaledFont(for: customFont)</span><br><span class="line">label.adjustsFontForContentSizeCategory = true</span><br></pre></td></tr></table></figure>

<h2 id="启动页相关"><a href="#启动页相关" class="headerlink" title="启动页相关"></a>启动页相关</h2><h3 id="设置启动页"><a href="#设置启动页" class="headerlink" title="设置启动页"></a>设置启动页</h3><p>启动页一般在LaunchScreen.storyboard中设置，可点击该文件后，查看右侧Interface Builder Document下Use as Launch Screen是否已被勾选，若未勾选则勾选即可。</p>
<p>也可在项目设置中点击APP，在General的Deployment Info-Main Interface选择启动后显示的页面，一般为Main。在App Icons and Launch Images-Launch Screen File选择启动页，即LaunchScreen。</p>
<h3 id="修改启动页界面"><a href="#修改启动页界面" class="headerlink" title="修改启动页界面"></a>修改启动页界面</h3><p>在LaunchScreen.storyboard中放置控件即可。注意该文件中的ViewController不可绑定到自定义类，因此该ViewController的控件属性只可提前设定。</p>
<p>若启动页有图片，注意需要直接放置到项目目录，而不要放置到Assets.xcasset文件夹中，且应当为JPG而非PNG格式。</p>
<h3 id="设置启动页停留时间"><a href="#设置启动页停留时间" class="headerlink" title="设置启动页停留时间"></a>设置启动页停留时间</h3><p>在AppDelegate.swift下设置启动页时长，如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplicationLaunchOptionsKey: Any]?) -&gt; Bool &#123;</span><br><span class="line">    # 在顶部状态栏显示风火轮</span><br><span class="line">    UIApplication.shared.isNetworkActivityIndicatorVisible = true</span><br><span class="line">    # 启动页显示时间3s</span><br><span class="line">    Thread.sleep(forTimeInterval: 3)</span><br><span class="line">    # 关闭风火轮</span><br><span class="line">    UIApplication.shared.isNetworkActivityIndicatorVisible = false</span><br><span class="line"></span><br><span class="line">    return true</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="在不同设备设置不同布局"><a href="#在不同设备设置不同布局" class="headerlink" title="在不同设备设置不同布局"></a>在不同设备设置不同布局</h3><p>主要用于在iPhone和iPad设置不同的布局。假设Main_iPad.storyboard为用于iPad的布局，Main_iPhone.storyboard为用于iPhone的布局，在AppDelegate.swift下添加以下代码即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">func applicationDidFinishLaunching(_ application: UIApplication) &#123;</span><br><span class="line">    if(UIDevice.current.userInterfaceIdiom == .pad)&#123;</span><br><span class="line">        currentStoryBoard = UIStoryboard(name: &quot;Main_iPad&quot;, bundle: nil)</span><br><span class="line">        initViewController = currentStoryBoard.instantiateInitialViewController()</span><br><span class="line">        self.window?.rootViewController = initViewController</span><br><span class="line">    &#125;</span><br><span class="line">    else if(UIDevice.current.userInterfaceIdiom == .phone)&#123;</span><br><span class="line">        currentStoryBoard = UIStoryboard(name: &quot;Main_iPhone&quot;, bundle: nil)</span><br><span class="line">        initViewController = currentStoryBoard.instantiateInitialViewController()</span><br><span class="line">        self.window?.rootViewController = initViewController</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


<h2 id="添加圆角-x2F-描边"><a href="#添加圆角-x2F-描边" class="headerlink" title="添加圆角&#x2F;描边"></a>添加圆角&#x2F;描边</h2><p>可通过以下代码设置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"># 圆角</span><br><span class="line">label.layer.cornerRadius = 10</span><br><span class="line"></span><br><span class="line"># 描边</span><br><span class="line">label.layer.masksToBounds = true</span><br><span class="line">label.layer.borderWidth = 1</span><br><span class="line">label.layer.borderColor = #colorLiteral(red: 1, green: 1, blue: 1, alpha: 1)</span><br></pre></td></tr></table></figure>

<p>也可在Storyboard中点击需要设置的控件，在右侧的Runtime Attributes添加以下项目。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">layer.borderWidth</span><br><span class="line">layer.borderColorFromUIColor</span><br><span class="line">layer.cornerRadius</span><br><span class="line">clipsToBounds</span><br></pre></td></tr></table></figure>

<h2 id="添加阴影"><a href="#添加阴影" class="headerlink" title="添加阴影"></a>添加阴影</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># 设置阴影颜色</span><br><span class="line">view.layer.shadowColor = sColor.cgColor</span><br><span class="line"></span><br><span class="line"># 设置透明度</span><br><span class="line">view.layer.shadowOpacity = opacity</span><br><span class="line"></span><br><span class="line"># 设置阴影半径</span><br><span class="line">view.layer.shadowRadius = radius</span><br><span class="line"></span><br><span class="line"># 设置阴影偏移量</span><br><span class="line"># offset为CGSize(width: height:)类型</span><br><span class="line"># width为正数时向右偏移，height为正数时向下偏移</span><br><span class="line">view.layer.shadowOffset = offset</span><br><span class="line"></span><br><span class="line"># 显示阴影</span><br><span class="line">view.layer.masksToBounds = false</span><br></pre></td></tr></table></figure>

<h2 id="控件变换与动画"><a href="#控件变换与动画" class="headerlink" title="控件变换与动画"></a>控件变换与动画</h2><p>通过transform属性可以修改控件的位移、缩放、旋转。</p>
<h3 id="变换"><a href="#变换" class="headerlink" title="变换"></a>变换</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"># 修改位置</span><br><span class="line"># 每次形变都基于原始值</span><br><span class="line">btn.transform = CGAffineTransformMakeTranslation()</span><br><span class="line"># 基于btn上次的值</span><br><span class="line">btn.transform = CGAffineTransformTranslate()</span><br><span class="line"></span><br><span class="line"># 缩放</span><br><span class="line"># 按照比例缩放</span><br><span class="line">btn.transform = CGAffineTransform(scaleX: 0.9, y: 0.9)</span><br><span class="line"># a表示x水平方向的缩放，tx表示x水平方向的偏移</span><br><span class="line"># d表示y垂直方向的缩放，ty表示y垂直方向的偏移</span><br><span class="line"># b和c不为零表示视图发生了旋转</span><br><span class="line">btn.transform = CGAffineTransform(a: 0.9, b: 0, c: 0, d: 0.9, tx: 100, ty: 100)</span><br><span class="line"></span><br><span class="line"># 旋转</span><br><span class="line"># angle是弧度值，通过宏M_PI设置</span><br><span class="line">btn.transform = CGAffineTransformMakeRotation()</span><br><span class="line">btn.transform = CGAffineTransformRotate()</span><br><span class="line"></span><br><span class="line"># 旋转和移动</span><br><span class="line">btn.transform = CGAffineTransformMakeTranslation()</span><br><span class="line">btn.transform = CGAffineTransformRotate()</span><br><span class="line"></span><br><span class="line"># 重置位置</span><br><span class="line">btn.transform = CGAffineTransformIdentity</span><br></pre></td></tr></table></figure>

<h3 id="动画"><a href="#动画" class="headerlink" title="动画"></a>动画</h3><p>以为按钮添加缩放动画为例，代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"># 设置动画类型</span><br><span class="line">let zoomInAndOut = CABasicAnimation(keyPath: &quot;transform.scale&quot;)</span><br><span class="line"></span><br><span class="line"># 起始比例</span><br><span class="line">zoomInAndOut.fromValue = 1.0</span><br><span class="line"></span><br><span class="line"># 终止比例</span><br><span class="line">zoomInAndOut.toValue = 0.5</span><br><span class="line"></span><br><span class="line"># 动画时长</span><br><span class="line">zoomInAndOut.duration = 1.0</span><br><span class="line"></span><br><span class="line"># 重复次数</span><br><span class="line">zoomInAndOut.repeatCount = 5</span><br><span class="line"></span><br><span class="line"># 自动翻转</span><br><span class="line"># fromValue-&gt;toValue后自动进行toValue-&gt;fromValue</span><br><span class="line">zoomInAndOut.autoreverses = true</span><br><span class="line"></span><br><span class="line"># 速度</span><br><span class="line"># 由于设置了autoreverses，则fromValue-&gt;toValue和toValue-&gt;fromValue各耗费1.0s</span><br><span class="line"># 将速度设置为2倍后保证这组动作在1.0s完成</span><br><span class="line">zoomInAndOut.speed = 2.0</span><br><span class="line"></span><br><span class="line"># 为按钮添加动作</span><br><span class="line">button.layer.addAnimation(zoomInAndOut, forKey: nil) </span><br></pre></td></tr></table></figure>


<h2 id="Popover"><a href="#Popover" class="headerlink" title="Popover"></a>Popover</h2><p>Popover是类似气泡的ViewController显示模式，一般在点击按钮时触发。</p>
<h3 id="通过segue"><a href="#通过segue" class="headerlink" title="通过segue"></a>通过segue</h3><p>若在Storyboard中通过segue实现跳转，在拉segue时选择Present As Popover即可。在segue的Anchor设置中可设置箭头指向的对象。</p>
<p>在iPhone上Popover默认无法显示出像iPad的效果，需要进行以下设置。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">// ViewController为Popover对应控制器的父控制器</span><br><span class="line">// 添加UIPopoverPresentationControllerDelegate，让本页的相关函数控制该Popover的行为</span><br><span class="line">class ViewController: UIViewController, UIPopoverPresentationControllerDelegate &#123;</span><br><span class="line">    override func prepare(for segue: UIStoryboardSegue, sender: Any?) &#123;</span><br><span class="line">        // 设置delegate为该控制器</span><br><span class="line">        segue.destination.popoverPresentationController?.delegate = self</span><br><span class="line"></span><br><span class="line">        // 设置大小</span><br><span class="line">        segue.destination.preferredContentSize = CGSize(width: 150, height: 200)</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    // 使iPhone显示Popover效果</span><br><span class="line">    func adaptivePresentationStyle(for controller: UIPresentationController, traitCollection: UITraitCollection) -&gt; UIModalPresentationStyle &#123;</span><br><span class="line">        return .none</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="通过纯代码"><a href="#通过纯代码" class="headerlink" title="通过纯代码"></a>通过纯代码</h3><p>以按钮点击事件触发Popover显示为例，触发代码如下。在iPhone上显示iPad的Popover效果需要的代码操作与用Storyboard的实现相同。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">@IBAction func buttonPressed(_ sender: Any) &#123;</span><br><span class="line">    // TableViewController为需要显示的Popover的控制器的identifier</span><br><span class="line">    if let controller = storyboard?.instantiateViewController(withIdentifier: &quot;TableViewController&quot;) &#123;</span><br><span class="line">        // 设置显示效果为Popover</span><br><span class="line">        controller.modalPresentationStyle = .popover</span><br><span class="line"></span><br><span class="line">        // 指定箭头指向的位置</span><br><span class="line">        controller.popoverPresentationController?.barButtonItem = navigationItem.rightBarButtonItem</span><br><span class="line">        // 也可指定为指向特定的View</span><br><span class="line">        controller.popoverPresentationController?.sourceView = eyeSwitch</span><br><span class="line">        // 指定为特定View后，可通过以下代码设置箭头在View中的具体位置（不设置时默认指向左上方）</span><br><span class="line">        // 以下代码将位置改为View的右下方</span><br><span class="line">        controller.popoverPresentationController?.sourceRect = CGRect(origin: .zero, size: eyeSwitch.frame.size)</span><br><span class="line"></span><br><span class="line">        // 显示Popover</span><br><span class="line">        present(controller, animated: true, completion: nil)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="功能实现"><a href="#功能实现" class="headerlink" title="功能实现"></a>功能实现</h1><h2 id="分页"><a href="#分页" class="headerlink" title="分页"></a>分页</h2><p>准备好处理完成的NSAttributedString，提前调整好字体、颜色、格式等信息。然后通过以下代码实现。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"># 创建NSLayoutManager</span><br><span class="line">let layoutManager = NSLayoutManager()</span><br><span class="line"></span><br><span class="line"># 如果没有给特定部分文字区域设置单独的布局，可设置此项为false以提高性能</span><br><span class="line">layoutManager.allowsNonContiguousLayout = false</span><br><span class="line"></span><br><span class="line"># 使用之前准备好的NSAttributedString进行初始化NSTextStorage</span><br><span class="line">let textStorage = NSTextStorage(attributedString: string)</span><br><span class="line">textStorage.addLayoutManager(layoutManager)</span><br><span class="line"></span><br><span class="line"># 设定文字显示区域参数</span><br><span class="line">let viewSize: CGSize = CGSize(width: textAreaWidth, height:  textAreaHeight)</span><br><span class="line"></span><br><span class="line"># 设定textView的内间距</span><br><span class="line">let textInsets = UIEdgeInsets.zero</span><br><span class="line">let textViewFrame = CGRect(x: 0, y: 0, width: viewSize.width, height: viewSize.height)</span><br><span class="line"></span><br><span class="line"># 开始分页</span><br><span class="line">var glyphRange: Int = 0</span><br><span class="line">var numberOfGlyphs: Int = 0</span><br><span class="line"></span><br><span class="line">var ranges: [NSRange] = []</span><br><span class="line">repeat &#123;</span><br><span class="line">    let textContainer = NSTextContainer(size: viewSize)</span><br><span class="line">    layoutManager.addTextContainer(textContainer)</span><br><span class="line">    </span><br><span class="line">    # 不断创建textView让NSLayoutManager进行内容分页</span><br><span class="line">    let textView = UITextView(frame: textViewFrame, textContainer: textContainer)</span><br><span class="line">    textView.isEditable = false</span><br><span class="line">    textView.isSelectable = false</span><br><span class="line">    textView.textContainerInset = textInsets</span><br><span class="line">    textView.showsVerticalScrollIndicator = false</span><br><span class="line">    textView.showsHorizontalScrollIndicator = false</span><br><span class="line">    textView.isScrollEnabled = false</span><br><span class="line">    textView.bounces = false</span><br><span class="line">    textView.bouncesZoom = false</span><br><span class="line">    </span><br><span class="line">    # 获取当前分页内容所在位置</span><br><span class="line">    let range = layoutManager.glyphRange(for: textContainer)</span><br><span class="line">    ranges.append(range)</span><br><span class="line">    </span><br><span class="line">    # 判定是否分页完成</span><br><span class="line">    glyphRange = NSMaxRange(range)</span><br><span class="line">    numberOfGlyphs = layoutManager.numberOfGlyphs</span><br><span class="line">&#125; while glyphRange &lt; numberOfGlyphs - 1</span><br></pre></td></tr></table></figure>

<h2 id="分词-x2F-分句"><a href="#分词-x2F-分句" class="headerlink" title="分词&#x2F;分句"></a>分词&#x2F;分句</h2><p>为String添加Extension，将需要分词&#x2F;分句的内容设为String类型后调用其tokenize()方法即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">extension String &#123;</span><br><span class="line">    func tokenize() -&gt; [String] &#123;</span><br><span class="line">        let word = self</span><br><span class="line"></span><br><span class="line">        # kCFStringTokenizerUnitWord更改为kCFStringTokenizerUnitSentence即为分句</span><br><span class="line">        let tokenize = CFStringTokenizerCreate(kCFAllocatorDefault, word as CFString!, CFRangeMake(0, word.characters.count), kCFStringTokenizerUnitWord, CFLocaleCopyCurrent())</span><br><span class="line">        CFStringTokenizerAdvanceToNextToken(tokenize)</span><br><span class="line">        var range = CFStringTokenizerGetCurrentTokenRange(tokenize)</span><br><span class="line">        var keyWords : [String] = []</span><br><span class="line">        while range.length &gt; 0 &#123;</span><br><span class="line">            let wRange = word.index(word.startIndex, offsetBy: range.location)..&lt;word.index(word.startIndex, offsetBy: range.location + range.length)</span><br><span class="line">            let keyWord = word.substring(with:wRange)</span><br><span class="line">            keyWords.append(keyWord)</span><br><span class="line">            CFStringTokenizerAdvanceToNextToken(tokenize)</span><br><span class="line">            range = CFStringTokenizerGetCurrentTokenRange(tokenize)</span><br><span class="line">        &#125;</span><br><span class="line">        return keyWords</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Unity相关"><a href="#Unity相关" class="headerlink" title="Unity相关"></a>Unity相关</h1><p>Unity工程文件可以打包为Xcode工程文件，但其语言为Objective-C。</p>
<h2 id="嵌入到Swift工程"><a href="#嵌入到Swift工程" class="headerlink" title="嵌入到Swift工程"></a>嵌入到Swift工程</h2><h3 id="新版教程"><a href="#新版教程" class="headerlink" title="新版教程"></a>新版教程</h3><p>适用于Unity 2020及以上版本。官方示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/Unity-Technologies/uaal-example/blob/master/docs/ios.md</span><br></pre></td></tr></table></figure>

<p>准备好需要嵌入的Swift工程，注意新建工程时需要将Interface设为Storyboard，Life Cycle设为UIKit App Delegate。</p>
<p>打开Unity工程，点击File-Build Settings，将Platforms设为iOS，右侧设置中Run in Xcode as选择Release，选项全部取消勾选，然后导出工程文件。</p>
<p>将以上两个工程放置到同一目录，示例如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">└── APP</span><br><span class="line">    ├── Interface</span><br><span class="line">    │   ├── ...</span><br><span class="line">    │   └── Interface.xcodeproj</span><br><span class="line">    └── Unity</span><br><span class="line">        ├── ...</span><br><span class="line">        └── Unity-iPhone.xcodeproj</span><br></pre></td></tr></table></figure>

<p>打开Xcode并点击File-New-Workspace，存放位置为上述的目录，此处为APP。完成后在左侧点击右键并选择<code>Add Files to ...</code>，选择所有的工程文件，此处为Interface.xcodeproj和Unity-iPhone.xcodeproj。</p>
<p>添加完成后左侧点击Interface工程，选择TARGETS下的APP，在General-Frameworks, Libraries, and Embedded Content下点击<code>+</code>号，选择Unity-iPhone下的UnityFramework.framework。若没有该文件，需要先点击Unity-iPhone工程，设置好签名后运行一次代码，使该Framework得以生成。</p>
<p>然后点击Unity-iPhone下的Data文件夹，在右侧的Target Membership勾选UnityFramework。然后打开Interface工程下的Info.plist，删除<code>Application Scene Manifest</code>一项。</p>
<p>在Interface工程下新建Unity.swift文件，继承自UIResponder。该类用于控制Unity的启动与关闭，代码如下。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br></pre></td><td class="code"><pre><span class="line">import Foundation</span><br><span class="line">import UnityFramework</span><br><span class="line"></span><br><span class="line">class Unity: UIResponder, UIApplicationDelegate &#123;</span><br><span class="line"></span><br><span class="line">    static let shared = Unity()</span><br><span class="line"></span><br><span class="line">    private let dataBundleId: String = &quot;com.unity3d.framework&quot;</span><br><span class="line">    private let frameworkPath: String = &quot;/Frameworks/UnityFramework.framework&quot;</span><br><span class="line"></span><br><span class="line">    private var ufw : UnityFramework?</span><br><span class="line">    private var hostMainWindow : UIWindow?</span><br><span class="line"></span><br><span class="line">    private var isInitialized: Bool &#123;</span><br><span class="line">        ufw?.appController() != nil</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func show() &#123;</span><br><span class="line">        if isInitialized &#123;</span><br><span class="line">            showWindow()</span><br><span class="line">        &#125; else &#123;</span><br><span class="line">            initWindow()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    func setHostMainWindow(_ hostMainWindow: UIWindow?) &#123;</span><br><span class="line">        self.hostMainWindow = hostMainWindow</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private func initWindow() &#123;</span><br><span class="line">        if isInitialized &#123;</span><br><span class="line">            showWindow()</span><br><span class="line">            return</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        guard let ufw = loadUnityFramework() else &#123;</span><br><span class="line">            print(&quot;ERROR: Was not able to load Unity&quot;)</span><br><span class="line">            return unloadWindow()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        self.ufw = ufw</span><br><span class="line">        ufw.setDataBundleId(dataBundleId)</span><br><span class="line">        ufw.register(self)</span><br><span class="line">        ufw.runEmbedded(</span><br><span class="line">            withArgc: CommandLine.argc,</span><br><span class="line">            argv: CommandLine.unsafeArgv,</span><br><span class="line">            appLaunchOpts: nil</span><br><span class="line">        )</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private func showWindow() &#123;</span><br><span class="line">        if isInitialized &#123;</span><br><span class="line">            ufw?.showUnityWindow()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private func unloadWindow() &#123;</span><br><span class="line">        if isInitialized &#123;</span><br><span class="line">            ufw?.unloadApplication()</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private func loadUnityFramework() -&gt; UnityFramework? &#123;</span><br><span class="line">        let bundlePath: String = Bundle.main.bundlePath + frameworkPath</span><br><span class="line"></span><br><span class="line">        let bundle = Bundle(path: bundlePath)</span><br><span class="line">        if bundle?.isLoaded == false &#123;</span><br><span class="line">            bundle?.load()</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        let ufw = bundle?.principalClass?.getInstance()</span><br><span class="line">        if ufw?.appController() == nil &#123;</span><br><span class="line">            let machineHeader = UnsafeMutablePointer&lt;MachHeader&gt;.allocate(capacity: 1)</span><br><span class="line">            machineHeader.pointee = _mh_execute_header</span><br><span class="line"></span><br><span class="line">            ufw?.setExecuteHeader(machineHeader)</span><br><span class="line">        &#125;</span><br><span class="line">        return ufw</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">extension Unity: UnityFrameworkListener &#123;</span><br><span class="line"></span><br><span class="line">    func unityDidUnload(_ notification: Notification!) &#123;</span><br><span class="line">        ufw?.unregisterFrameworkListener(self)</span><br><span class="line">        ufw = nil</span><br><span class="line">        hostMainWindow?.makeKeyAndVisible()</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>然后打开AppDelegate.swift，删除所有与场景相关的代码，并添加以下内容，以指定关闭Unity后应当返回的窗口。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">import UIKit</span><br><span class="line"></span><br><span class="line">@main</span><br><span class="line">class AppDelegate: UIResponder, UIApplicationDelegate &#123;</span><br><span class="line"></span><br><span class="line">    var window: UIWindow?</span><br><span class="line"></span><br><span class="line">    func application(_ application: UIApplication, didFinishLaunchingWithOptions launchOptions: [UIApplication.LaunchOptionsKey: Any]?) -&gt; Bool &#123;</span><br><span class="line"></span><br><span class="line">        Unity.shared.setHostMainWindow(window)</span><br><span class="line"></span><br><span class="line">        return true</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>在需要调用Unity模块的地方调用以下代码即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Unity.shared.show()</span><br></pre></td></tr></table></figure>

<p>若需要退出Unity，需要在Unity新建一个按钮，点击按钮时执行退出操作并返回到iOS App中。新建一个Button后新建一个名为QuitBehavior.cs的脚本并绑定到该Button，脚本代码如下，事件为OnButtonPressed。完成后重新导出Xcode工程文件并重复上述步骤即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">using System.Collections;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using UnityEngine;</span><br><span class="line"></span><br><span class="line">public class QuitBehavior : MonoBehaviour</span><br><span class="line">&#123;</span><br><span class="line">    public void OnButtonPressed()</span><br><span class="line">    &#123;</span><br><span class="line">        Application.Unload();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="常见问题-1"><a href="#常见问题-1" class="headerlink" title="常见问题"></a>常见问题</h3><h4 id="加载Vuforia框架时输出台显示dataset-xxx-could-not-be-loaded-and-cannot-be-activated"><a href="#加载Vuforia框架时输出台显示dataset-xxx-could-not-be-loaded-and-cannot-be-activated" class="headerlink" title="加载Vuforia框架时输出台显示dataset xxx could not be loaded and cannot be activated"></a>加载Vuforia框架时输出台显示dataset xxx could not be loaded and cannot be activated</h4><p>数据集没有加载到原Swift工程，在此处为Interface工程。</p>
<p>数据集位置在Unity-iPhone工程的Data&#x2F;Raw&#x2F;Vuforia中。点击Unity-iPhone工程，点击TARGETS下的App，在Build Phases-Copy Bundle Resources下删除Vuforia文件夹并重新添加，注意不要勾选Copy items if needed，选择create folder references方式。</p>
<p>点击左侧新出现的Vuforia文件夹，在右侧勾选UnityFramework。点击Interface工程下TARGETS的App，在Build Phases-Copy Bundle Resources添加Unity-iPhone工程的Vuforia，同样不要勾选Copy items if needed，选择create folder references方式。完成后重新运行即可。</p>
<h4 id="加载Unity时输出台显示dyld-Library-not-loaded-rpath-x2F-ARFoundationDriver-framework-x2F-ARFoundationDriver…Reason-image-not-found"><a href="#加载Unity时输出台显示dyld-Library-not-loaded-rpath-x2F-ARFoundationDriver-framework-x2F-ARFoundationDriver…Reason-image-not-found" class="headerlink" title="加载Unity时输出台显示dyld: Library not loaded: @rpath&#x2F;ARFoundationDriver.framework&#x2F;ARFoundationDriver…Reason: image not found"></a>加载Unity时输出台显示dyld: Library not loaded: @rpath&#x2F;ARFoundationDriver.framework&#x2F;ARFoundationDriver…Reason: image not found</h4><p>点击Interface工程，选择Build Phases，点击左侧<code>+</code>号并选择New Copy Files Phase，然后在下面添加的Copy Files中，将Destination选为Frameworks，然后点击<code>+</code>号，添加所需要的Frameworks，此处为ARFoundationDriver.framework。</p>
<h3 id="旧版教程"><a href="#旧版教程" class="headerlink" title="旧版教程"></a>旧版教程</h3><p>适用于Unity 2017&#x2F;2018。</p>
<p>准备好需要嵌入的Swift工程。打开Unity工程，在Scripts&#x2F;Editor下新建一个文件，名为XcodePostBuild.cs，内容如下。注意需要修改XcodeProjectRoot和XcodeProjectName，可使用相对路径，至xcodeproj所在目录为止。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br><span class="line">257</span><br><span class="line">258</span><br><span class="line">259</span><br><span class="line">260</span><br><span class="line">261</span><br><span class="line">262</span><br><span class="line">263</span><br><span class="line">264</span><br><span class="line">265</span><br><span class="line">266</span><br><span class="line">267</span><br><span class="line">268</span><br><span class="line">269</span><br><span class="line">270</span><br><span class="line">271</span><br><span class="line">272</span><br><span class="line">273</span><br><span class="line">274</span><br><span class="line">275</span><br><span class="line">276</span><br><span class="line">277</span><br><span class="line">278</span><br><span class="line">279</span><br><span class="line">280</span><br><span class="line">281</span><br><span class="line">282</span><br><span class="line">283</span><br><span class="line">284</span><br><span class="line">285</span><br><span class="line">286</span><br><span class="line">287</span><br><span class="line">288</span><br><span class="line">289</span><br><span class="line">290</span><br><span class="line">291</span><br><span class="line">292</span><br><span class="line">293</span><br><span class="line">294</span><br><span class="line">295</span><br><span class="line">296</span><br><span class="line">297</span><br><span class="line">298</span><br><span class="line">299</span><br><span class="line">300</span><br><span class="line">301</span><br><span class="line">302</span><br><span class="line">303</span><br><span class="line">304</span><br><span class="line">305</span><br><span class="line">306</span><br><span class="line">307</span><br><span class="line">308</span><br><span class="line">309</span><br><span class="line">310</span><br><span class="line">311</span><br><span class="line">312</span><br><span class="line">313</span><br><span class="line">314</span><br><span class="line">315</span><br><span class="line">316</span><br><span class="line">317</span><br><span class="line">318</span><br><span class="line">319</span><br><span class="line">320</span><br><span class="line">321</span><br><span class="line">322</span><br><span class="line">323</span><br><span class="line">324</span><br><span class="line">325</span><br><span class="line">326</span><br><span class="line">327</span><br><span class="line">328</span><br><span class="line">329</span><br><span class="line">330</span><br><span class="line">331</span><br><span class="line">332</span><br><span class="line">333</span><br><span class="line">334</span><br><span class="line">335</span><br><span class="line">336</span><br><span class="line">337</span><br><span class="line">338</span><br><span class="line">339</span><br><span class="line">340</span><br><span class="line">341</span><br><span class="line">342</span><br><span class="line">343</span><br><span class="line">344</span><br><span class="line">345</span><br><span class="line">346</span><br><span class="line">347</span><br><span class="line">348</span><br><span class="line">349</span><br><span class="line">350</span><br><span class="line">351</span><br><span class="line">352</span><br><span class="line">353</span><br><span class="line">354</span><br><span class="line">355</span><br><span class="line">356</span><br><span class="line">357</span><br><span class="line">358</span><br><span class="line">359</span><br><span class="line">360</span><br><span class="line">361</span><br><span class="line">362</span><br><span class="line">363</span><br><span class="line">364</span><br><span class="line">365</span><br><span class="line">366</span><br><span class="line">367</span><br><span class="line">368</span><br><span class="line">369</span><br><span class="line">370</span><br><span class="line">371</span><br><span class="line">372</span><br><span class="line">373</span><br><span class="line">374</span><br><span class="line">375</span><br><span class="line">376</span><br><span class="line">377</span><br><span class="line">378</span><br><span class="line">379</span><br><span class="line">380</span><br><span class="line">381</span><br><span class="line">382</span><br><span class="line">383</span><br><span class="line">384</span><br><span class="line">385</span><br><span class="line">386</span><br><span class="line">387</span><br><span class="line">388</span><br><span class="line">389</span><br><span class="line">390</span><br><span class="line">391</span><br><span class="line">392</span><br><span class="line">393</span><br><span class="line">394</span><br><span class="line">395</span><br><span class="line">396</span><br><span class="line">397</span><br><span class="line">398</span><br><span class="line">399</span><br><span class="line">400</span><br><span class="line">401</span><br><span class="line">402</span><br><span class="line">403</span><br><span class="line">404</span><br><span class="line">405</span><br><span class="line">406</span><br><span class="line">407</span><br><span class="line">408</span><br><span class="line">409</span><br><span class="line">410</span><br><span class="line">411</span><br><span class="line">412</span><br><span class="line">413</span><br><span class="line">414</span><br><span class="line">415</span><br><span class="line">416</span><br><span class="line">417</span><br><span class="line">418</span><br><span class="line">419</span><br><span class="line">420</span><br><span class="line">421</span><br><span class="line">422</span><br><span class="line">423</span><br><span class="line">424</span><br><span class="line">425</span><br><span class="line">426</span><br><span class="line">427</span><br><span class="line">428</span><br><span class="line">429</span><br><span class="line">430</span><br><span class="line">431</span><br><span class="line">432</span><br><span class="line">433</span><br><span class="line">434</span><br><span class="line">435</span><br><span class="line">436</span><br><span class="line">437</span><br><span class="line">438</span><br><span class="line">439</span><br><span class="line">440</span><br><span class="line">441</span><br><span class="line">442</span><br><span class="line">443</span><br><span class="line">444</span><br><span class="line">445</span><br><span class="line">446</span><br><span class="line">447</span><br><span class="line">448</span><br><span class="line">449</span><br><span class="line">450</span><br><span class="line">451</span><br><span class="line">452</span><br><span class="line">453</span><br><span class="line">454</span><br><span class="line">455</span><br><span class="line">456</span><br><span class="line">457</span><br><span class="line">458</span><br><span class="line">459</span><br><span class="line">460</span><br><span class="line">461</span><br><span class="line">462</span><br><span class="line">463</span><br><span class="line">464</span><br><span class="line">465</span><br><span class="line">466</span><br><span class="line">467</span><br><span class="line">468</span><br><span class="line">469</span><br><span class="line">470</span><br><span class="line">471</span><br><span class="line">472</span><br><span class="line">473</span><br><span class="line">474</span><br><span class="line">475</span><br><span class="line">476</span><br><span class="line">477</span><br><span class="line">478</span><br><span class="line">479</span><br><span class="line">480</span><br><span class="line">481</span><br><span class="line">482</span><br><span class="line">483</span><br><span class="line">484</span><br><span class="line">485</span><br><span class="line">486</span><br><span class="line">487</span><br><span class="line">488</span><br><span class="line">489</span><br><span class="line">490</span><br><span class="line">491</span><br><span class="line">492</span><br><span class="line">493</span><br><span class="line">494</span><br><span class="line">495</span><br><span class="line">496</span><br><span class="line">497</span><br><span class="line">498</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">MIT License</span><br><span class="line"></span><br><span class="line">Copyright (c) 2017 Jiulong Wang</span><br><span class="line"></span><br><span class="line">Permission is hereby granted, free of charge, to any person obtaining a copy</span><br><span class="line">of this software and associated documentation files (the &quot;Software&quot;), to deal</span><br><span class="line">in the Software without restriction, including without limitation the rights</span><br><span class="line">to use, copy, modify, merge, publish, distribute, sublicense, and/or sell</span><br><span class="line">copies of the Software, and to permit persons to whom the Software is</span><br><span class="line">furnished to do so, subject to the following conditions:</span><br><span class="line"></span><br><span class="line">The above copyright notice and this permission notice shall be included in all</span><br><span class="line">copies or substantial portions of the Software.</span><br><span class="line"></span><br><span class="line">THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</span><br><span class="line">IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,</span><br><span class="line">FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE</span><br><span class="line">AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER</span><br><span class="line">LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,</span><br><span class="line">OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE</span><br><span class="line">SOFTWARE.</span><br><span class="line">*/</span><br><span class="line"></span><br><span class="line">#if UNITY_IOS</span><br><span class="line"></span><br><span class="line">using System;</span><br><span class="line">using System.Linq;</span><br><span class="line">using System.Collections.Generic;</span><br><span class="line">using System.IO;</span><br><span class="line">using System.Text;</span><br><span class="line"></span><br><span class="line">using UnityEngine;</span><br><span class="line">using UnityEditor;</span><br><span class="line">using UnityEditor.Callbacks;</span><br><span class="line">using UnityEditor.iOS.Xcode;</span><br><span class="line"></span><br><span class="line">/// &lt;summary&gt;</span><br><span class="line">/// Adding this post build script to Unity project enables Unity iOS build output to be embedded</span><br><span class="line">/// into existing Xcode Swift project.</span><br><span class="line">///</span><br><span class="line">/// However, since this script touches Unity iOS build output, you will not be able to use Unity</span><br><span class="line">/// iOS build directly in Xcode. As a result, it is recommended to put Unity iOS build output into</span><br><span class="line">/// a temporary directory that you generally do not touch, such as &#x27;/tmp&#x27;.</span><br><span class="line">///</span><br><span class="line">/// In order for this to work, necessary changes to the target Xcode Swift project are needed.</span><br><span class="line">/// Especially the &#x27;AppDelegate.swift&#x27; should be modified to properly initialize Unity.</span><br><span class="line">/// See https://github.com/jiulongw/swift-unity for details.</span><br><span class="line">/// &lt;/summary&gt;</span><br><span class="line">public static class XcodePostBuild</span><br><span class="line">&#123;</span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Path to the root directory of Xcode project.</span><br><span class="line">    /// This should point to the directory of &#x27;$&#123;XcodeProjectName&#125;.xcodeproj&#x27;.</span><br><span class="line">    /// It is recommended to use relative path here.</span><br><span class="line">    /// Current directory is the root directory of this Unity project, i.e. the directory of &#x27;Assets&#x27; folder.</span><br><span class="line">    /// Sample value: &quot;../xcode&quot;</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private const string XcodeProjectRoot = &lt;PROJECT PATH&gt;;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Name of the Xcode project.</span><br><span class="line">    /// This script looks for &#x27;$&#123;XcodeProjectName&#125; + &quot;.xcodeproj&quot;&#x27; under &#x27;$&#123;XcodeProjectRoot&#125;&#x27;.</span><br><span class="line">    /// Sample value: &quot;DemoApp&quot;</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private const string XcodeProjectName = &lt;PROJECT NAME&gt;;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Directories, relative to the root directory of the Xcode project, to put generated Unity iOS build output.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private const string ClassesProjectPath = XcodeProjectName + &quot;/Unity/Classes&quot;;</span><br><span class="line">    private const string LibrariesProjectPath = XcodeProjectName + &quot;/Unity/Libraries&quot;;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Path, relative to the root directory of the Xcode project, to put information about generated Unity output.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private const string ExportsConfigProjectPath = XcodeProjectName + &quot;/Unity/Exports.xcconfig&quot;;</span><br><span class="line"></span><br><span class="line">    private const string PbxFilePath = XcodeProjectName + &quot;.xcodeproj/project.pbxproj&quot;;</span><br><span class="line"></span><br><span class="line">    private const string BackupExtension = &quot;.bak&quot;;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// The identifier added to touched file to avoid double edits when building to existing directory without</span><br><span class="line">    /// replace existing content.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private const string TouchedMarker = &quot;https://github.com/jiulongw/swift-unity#v1&quot;;</span><br><span class="line"></span><br><span class="line">    [PostProcessBuild]</span><br><span class="line">    public static void OnPostBuild(BuildTarget target, string pathToBuiltProject)</span><br><span class="line">    &#123;</span><br><span class="line">        if (target != BuildTarget.iOS)</span><br><span class="line">        &#123;</span><br><span class="line">            return;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        PatchUnityNativeCode(pathToBuiltProject);</span><br><span class="line"></span><br><span class="line">        UpdateUnityIOSExports(pathToBuiltProject);</span><br><span class="line"></span><br><span class="line">        UpdateUnityProjectFiles(pathToBuiltProject);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Writes current Unity version and output path to &#x27;Exports.xcconfig&#x27; file.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void UpdateUnityIOSExports(string pathToBuiltProject)</span><br><span class="line">    &#123;</span><br><span class="line">        var config = new StringBuilder();</span><br><span class="line">        config.AppendFormat(&quot;UNITY_RUNTIME_VERSION = &#123;0&#125;;&quot;, Application.unityVersion);</span><br><span class="line">        config.AppendLine();</span><br><span class="line">        config.AppendFormat(&quot;UNITY_IOS_EXPORT_PATH = &#123;0&#125;;&quot;, pathToBuiltProject);</span><br><span class="line">        config.AppendLine();</span><br><span class="line"></span><br><span class="line">        var configPath = Path.Combine(XcodeProjectRoot, ExportsConfigProjectPath);</span><br><span class="line">        var configDir = Path.GetDirectoryName(configPath);</span><br><span class="line">        if (!Directory.Exists(configDir))</span><br><span class="line">        &#123;</span><br><span class="line">            Directory.CreateDirectory(configDir);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        File.WriteAllText(configPath, config.ToString());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Enumerates Unity output files and add necessary files into Xcode project file.</span><br><span class="line">    /// It only add a reference entry into project.pbx file, without actually copy it.</span><br><span class="line">    /// Xcode pre-build script will copy files into correct location.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void UpdateUnityProjectFiles(string pathToBuiltProject)</span><br><span class="line">    &#123;</span><br><span class="line">        var pbx = new PBXProject();</span><br><span class="line">        var pbxPath = Path.Combine(XcodeProjectRoot, PbxFilePath);</span><br><span class="line">        pbx.ReadFromFile(pbxPath);</span><br><span class="line"></span><br><span class="line">        ProcessUnityDirectory(</span><br><span class="line">            pbx,</span><br><span class="line">            Path.Combine(pathToBuiltProject, &quot;Classes&quot;),</span><br><span class="line">            Path.Combine(XcodeProjectRoot, ClassesProjectPath),</span><br><span class="line">            ClassesProjectPath);</span><br><span class="line"></span><br><span class="line">        ProcessUnityDirectory(</span><br><span class="line">            pbx,</span><br><span class="line">            Path.Combine(pathToBuiltProject, &quot;Libraries&quot;),</span><br><span class="line">            Path.Combine(XcodeProjectRoot, LibrariesProjectPath),</span><br><span class="line">            LibrariesProjectPath);</span><br><span class="line"></span><br><span class="line">        pbx.WriteToFile(pbxPath);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Update pbx project file by adding src files and removing extra files that</span><br><span class="line">    /// exists in dest but not in src any more.</span><br><span class="line">    ///</span><br><span class="line">    /// This method only updates the pbx project file. It does not copy or delete</span><br><span class="line">    /// files in Swift Xcode project. The Swift Xcode project will do copy and delete</span><br><span class="line">    /// during build, and it should copy files if contents are different, regardless</span><br><span class="line">    /// of the file time.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    /// &lt;param name=&quot;pbx&quot;&gt;The pbx project.&lt;/param&gt;</span><br><span class="line">    /// &lt;param name=&quot;src&quot;&gt;The directory where Unity project is built.&lt;/param&gt;</span><br><span class="line">    /// &lt;param name=&quot;dest&quot;&gt;The directory of the Swift Xcode project where the</span><br><span class="line">    /// Unity project is embedded into.&lt;/param&gt;</span><br><span class="line">    /// &lt;param name=&quot;projectPathPrefix&quot;&gt;The prefix of project path in Swift Xcode</span><br><span class="line">    /// project for Unity code files. E.g. &quot;DempApp/Unity/Classes&quot; for all files</span><br><span class="line">    /// under Classes folder from Unity iOS build output.&lt;/param&gt;</span><br><span class="line">    private static void ProcessUnityDirectory(PBXProject pbx, string src, string dest, string projectPathPrefix)</span><br><span class="line">    &#123;</span><br><span class="line">        var targetGuid = pbx.TargetGuidByName(XcodeProjectName);</span><br><span class="line">        if (string.IsNullOrEmpty(targetGuid)) &#123;</span><br><span class="line">            throw new Exception(string.Format(&quot;TargetGuid could not be found for &#x27;&#123;0&#125;&#x27;&quot;, XcodeProjectName));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // newFiles: array of file names in build output that do not exist in project.pbx manifest.</span><br><span class="line">        // extraFiles: array of file names in project.pbx manifest that do not exist in build output.</span><br><span class="line">        // Build output files that already exist in project.pbx manifest will be skipped to minimize</span><br><span class="line">        // changes to project.pbx file.</span><br><span class="line">        string[] newFiles, extraFiles;</span><br><span class="line">        CompareDirectories(src, dest, out newFiles, out extraFiles);</span><br><span class="line"></span><br><span class="line">        foreach (var f in newFiles)</span><br><span class="line">        &#123;</span><br><span class="line">            if (ShouldExcludeFile(f))</span><br><span class="line">            &#123;</span><br><span class="line">                continue;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            var projPath = Path.Combine(projectPathPrefix, f);</span><br><span class="line">            if (!pbx.ContainsFileByProjectPath(projPath))</span><br><span class="line">            &#123;</span><br><span class="line">                var guid = pbx.AddFile(projPath, projPath);</span><br><span class="line">                pbx.AddFileToBuild(targetGuid, guid);</span><br><span class="line"></span><br><span class="line">                Debug.LogFormat(&quot;Added file to pbx: &#x27;&#123;0&#125;&#x27;&quot;, projPath);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        foreach (var f in extraFiles)</span><br><span class="line">        &#123;</span><br><span class="line">            var projPath = Path.Combine(projectPathPrefix, f);</span><br><span class="line">            if (pbx.ContainsFileByProjectPath(projPath))</span><br><span class="line">            &#123;</span><br><span class="line">                var guid = pbx.FindFileGuidByProjectPath(projPath);</span><br><span class="line">                pbx.RemoveFile(guid);</span><br><span class="line"></span><br><span class="line">                Debug.LogFormat(&quot;Removed file from pbx: &#x27;&#123;0&#125;&#x27;&quot;, projPath);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Compares the directories. Returns files that exists in src and</span><br><span class="line">    /// extra files that exists in dest but not in src any more. </span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void CompareDirectories(string src, string dest, out string[] srcFiles, out string[] extraFiles)</span><br><span class="line">    &#123;</span><br><span class="line">        srcFiles = GetFilesRelativePath(src);</span><br><span class="line"></span><br><span class="line">        var destFiles = GetFilesRelativePath(dest);</span><br><span class="line">        var extraFilesSet = new HashSet&lt;string&gt;(destFiles);</span><br><span class="line"></span><br><span class="line">        extraFilesSet.ExceptWith(srcFiles);</span><br><span class="line">        extraFiles = extraFilesSet.ToArray();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static string[] GetFilesRelativePath(string directory)</span><br><span class="line">    &#123;</span><br><span class="line">        var results = new List&lt;string&gt;();</span><br><span class="line"></span><br><span class="line">        if (Directory.Exists(directory))</span><br><span class="line">        &#123;</span><br><span class="line">            foreach (var path in Directory.GetFiles(directory, &quot;*&quot;, SearchOption.AllDirectories))</span><br><span class="line">            &#123;</span><br><span class="line">                var relative = path.Substring(directory.Length).TrimStart(&#x27;/&#x27;);</span><br><span class="line">                results.Add(relative);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return results.ToArray();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static bool ShouldExcludeFile(string fileName)</span><br><span class="line">    &#123;</span><br><span class="line">        if (fileName.EndsWith(&quot;.bak&quot;, StringComparison.OrdinalIgnoreCase))</span><br><span class="line">        &#123;</span><br><span class="line">            return true;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        return false;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Make necessary changes to Unity build output that enables it to be embedded into existing Xcode project.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void PatchUnityNativeCode(string pathToBuiltProject)</span><br><span class="line">    &#123;</span><br><span class="line">        EditMainMM(Path.Combine(pathToBuiltProject, &quot;Classes/main.mm&quot;));</span><br><span class="line">        EditUnityAppControllerH(Path.Combine(pathToBuiltProject, &quot;Classes/UnityAppController.h&quot;));</span><br><span class="line">        EditUnityAppControllerMM(Path.Combine(pathToBuiltProject, &quot;Classes/UnityAppController.mm&quot;));</span><br><span class="line"></span><br><span class="line">        if (Application.unityVersion == &quot;2017.1.1f1&quot;)</span><br><span class="line">        &#123;</span><br><span class="line">            EditMetalHelperMM(Path.Combine(pathToBuiltProject, &quot;Classes/Unity/MetalHelper.mm&quot;));</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        // TODO: Parse unity version number and do range comparison.</span><br><span class="line">        if (Application.unityVersion.StartsWith(&quot;2017.3.0f&quot;)</span><br><span class="line">                || Application.unityVersion.StartsWith(&quot;2017.3.1f&quot;)</span><br><span class="line">                || Application.unityVersion.StartsWith(&quot;2017.4.1f&quot;)</span><br><span class="line">                || Application.unityVersion.StartsWith(&quot;2017.4.2f&quot;))</span><br><span class="line">        &#123;</span><br><span class="line">            EditSplashScreenMM(Path.Combine(pathToBuiltProject, &quot;Classes/UI/SplashScreen.mm&quot;));</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Edit &#x27;main.mm&#x27;: removes &#x27;main&#x27; entry that would conflict with the Xcode project it embeds into.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void EditMainMM(string path)</span><br><span class="line">    &#123;</span><br><span class="line">        EditCodeFile(path, line =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            if (line.TrimStart().StartsWith(&quot;int main&quot;, StringComparison.Ordinal))</span><br><span class="line">            &#123;</span><br><span class="line">                return line.Replace(&quot;int main&quot;, &quot;int old_main&quot;);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return line;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Edit &#x27;UnityAppController.h&#x27;: returns &#x27;UnityAppController&#x27; from &#x27;AppDelegate&#x27; class.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void EditUnityAppControllerH(string path)</span><br><span class="line">    &#123;</span><br><span class="line">        var inScope = false;</span><br><span class="line">        var markerDetected = false;</span><br><span class="line">        var markerAdded = false;</span><br><span class="line"></span><br><span class="line">        EditCodeFile(path, line =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            markerDetected |= line.Contains(TouchedMarker);</span><br><span class="line">            inScope |= line.Contains(&quot;inline UnityAppController&quot;);</span><br><span class="line"></span><br><span class="line">            if (inScope &amp;&amp; !markerDetected)</span><br><span class="line">            &#123;</span><br><span class="line">                if (line.Trim() == &quot;&#125;&quot;)</span><br><span class="line">                &#123;</span><br><span class="line">                    inScope = false;</span><br><span class="line"></span><br><span class="line">                    return new string[]</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;// &#125;&quot;,</span><br><span class="line">                        &quot;&quot;,</span><br><span class="line">                        &quot;NS_INLINE UnityAppController* GetAppController()&quot;,</span><br><span class="line">                        &quot;&#123;&quot;,</span><br><span class="line">                        &quot;    NSObject&lt;UIApplicationDelegate&gt;* delegate = [UIApplication sharedApplication].delegate;&quot;,</span><br><span class="line">                        @&quot;    UnityAppController* currentUnityController = (UnityAppController*)[delegate valueForKey: @&quot;&quot;currentUnityController&quot;&quot;];&quot;,</span><br><span class="line">                        &quot;    return currentUnityController;&quot;,</span><br><span class="line">                        &quot;&#125;&quot;,</span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (!markerAdded)</span><br><span class="line">                &#123;</span><br><span class="line">                    markerAdded = true;</span><br><span class="line">                    return new string[]</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;// Modified by &quot; + TouchedMarker,</span><br><span class="line">                        &quot;// &quot; + line,</span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                return new string[] &#123; &quot;// &quot; + line &#125;;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return new string[] &#123; line &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Edit &#x27;UnityAppController.mm&#x27;: triggers &#x27;UnityReady&#x27; notification after Unity is actually started.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void EditUnityAppControllerMM(string path)</span><br><span class="line">    &#123;</span><br><span class="line">        var inScope = false;</span><br><span class="line">        var markerDetected = false;</span><br><span class="line"></span><br><span class="line">        EditCodeFile(path, line =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            inScope |= line.Contains(&quot;- (void)startUnity:&quot;);</span><br><span class="line">            markerDetected |= inScope &amp;&amp; line.Contains(TouchedMarker);</span><br><span class="line"></span><br><span class="line">            if (inScope &amp;&amp; line.Trim() == &quot;&#125;&quot;)</span><br><span class="line">            &#123;</span><br><span class="line">                inScope = false;</span><br><span class="line"></span><br><span class="line">                if (markerDetected)</span><br><span class="line">                &#123;</span><br><span class="line">                    return new string[] &#123; line &#125;;</span><br><span class="line">                &#125;</span><br><span class="line">                else</span><br><span class="line">                &#123;</span><br><span class="line">                    return new string[]</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;    // Modified by &quot; + TouchedMarker,</span><br><span class="line">                        &quot;    // Post a notification so that Swift can load unity view once started.&quot;,</span><br><span class="line">                        @&quot;    [[NSNotificationCenter defaultCenter] postNotificationName: @&quot;&quot;UnityReady&quot;&quot; object:self];&quot;,</span><br><span class="line">                        &quot;&#125;&quot;,</span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return new string[] &#123; line &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Edit &#x27;MetalHelper.mm&#x27;: fixes a bug (only in 2017.1.1f1) that causes crash.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void EditMetalHelperMM(string path)</span><br><span class="line">    &#123;</span><br><span class="line">        var markerDetected = false;</span><br><span class="line"></span><br><span class="line">        EditCodeFile(path, line =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            markerDetected |= line.Contains(TouchedMarker);</span><br><span class="line"></span><br><span class="line">            if (!markerDetected &amp;&amp; line.Trim() == &quot;surface-&gt;stencilRB = [surface-&gt;device newTextureWithDescriptor: stencilTexDesc];&quot;)</span><br><span class="line">            &#123;</span><br><span class="line">                return new string[]</span><br><span class="line">                &#123;</span><br><span class="line">                    &quot;&quot;,</span><br><span class="line">                    &quot;    // Modified by &quot; + TouchedMarker,</span><br><span class="line">                    &quot;    // Default stencilTexDesc.usage has flag 1. In runtime it will cause assertion failure:&quot;,</span><br><span class="line">                    &quot;    // validateRenderPassDescriptor:589: failed assertion `Texture at stencilAttachment has usage (0x01) which doesn&#x27;t specify MTLTextureUsageRenderTarget (0x04)&#x27;&quot;,</span><br><span class="line">                    &quot;    // Adding MTLTextureUsageRenderTarget seems to fix this issue.&quot;,</span><br><span class="line">                    &quot;    stencilTexDesc.usage |= MTLTextureUsageRenderTarget;&quot;,</span><br><span class="line">                    line,</span><br><span class="line">                &#125;;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return new string[] &#123; line &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    /// &lt;summary&gt;</span><br><span class="line">    /// Edit &#x27;SplashScreen.mm&#x27;: Unity introduces its own &#x27;LaunchScreen.storyboard&#x27; since 2017.3.0f3.</span><br><span class="line">    /// Disable it here and use Swift project&#x27;s launch screen instead.</span><br><span class="line">    /// &lt;/summary&gt;</span><br><span class="line">    private static void EditSplashScreenMM(string path) &#123;</span><br><span class="line">        var markerDetected = false;</span><br><span class="line">        var markerAdded = false;</span><br><span class="line">        var inScope = false;</span><br><span class="line">        var level = 0;</span><br><span class="line"></span><br><span class="line">        EditCodeFile(path, line =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            inScope |= line.Trim() == &quot;void ShowSplashScreen(UIWindow* window)&quot;;</span><br><span class="line">            markerDetected |= line.Contains(TouchedMarker);</span><br><span class="line"></span><br><span class="line">            if (inScope &amp;&amp; !markerDetected)</span><br><span class="line">            &#123;</span><br><span class="line">                if (line.Trim() == &quot;&#123;&quot;)</span><br><span class="line">                &#123;</span><br><span class="line">                    level++;</span><br><span class="line">                &#125;</span><br><span class="line">                else if (line.Trim() == &quot;&#125;&quot;)</span><br><span class="line">                &#123;</span><br><span class="line">                    level--;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (line.Trim() == &quot;&#125;&quot; &amp;&amp; level == 0)</span><br><span class="line">                &#123;</span><br><span class="line">                    inScope = false;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (level &gt; 0 &amp;&amp; line.Trim().StartsWith(&quot;bool hasStoryboard&quot;))</span><br><span class="line">                &#123;</span><br><span class="line">                    return new string[]</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;    // &quot; + line,</span><br><span class="line">                        &quot;    bool hasStoryboard = false;&quot;,</span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                if (!markerAdded)</span><br><span class="line">                &#123;</span><br><span class="line">                    markerAdded = true;</span><br><span class="line">                    return new string[]</span><br><span class="line">                    &#123;</span><br><span class="line">                        &quot;// Modified by &quot; + TouchedMarker,</span><br><span class="line">                        line,</span><br><span class="line">                    &#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            return new string[] &#123; line &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void EditCodeFile(string path, Func&lt;string, string&gt; lineHandler)</span><br><span class="line">    &#123;</span><br><span class="line">        EditCodeFile(path, line =&gt;</span><br><span class="line">        &#123;</span><br><span class="line">            return new string[] &#123; lineHandler(line) &#125;;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    private static void EditCodeFile(string path, Func&lt;string, IEnumerable&lt;string&gt;&gt; lineHandler)</span><br><span class="line">    &#123;</span><br><span class="line">        var bakPath = path + &quot;.bak&quot;;</span><br><span class="line">        if (File.Exists(bakPath))</span><br><span class="line">        &#123;</span><br><span class="line">            File.Delete(bakPath);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        File.Move(path, bakPath);</span><br><span class="line"></span><br><span class="line">        using (var reader = File.OpenText(bakPath))</span><br><span class="line">        using (var stream = File.Create(path))</span><br><span class="line">        using (var writer = new StreamWriter(stream))</span><br><span class="line">        &#123;</span><br><span class="line">            string line;</span><br><span class="line">            while ((line = reader.ReadLine()) != null)</span><br><span class="line">            &#123;</span><br><span class="line">                var outputs = lineHandler(line);</span><br><span class="line">                foreach (var o in outputs)</span><br><span class="line">                &#123;</span><br><span class="line">                    writer.WriteLine(o);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">#endif</span><br></pre></td></tr></table></figure>

<p>导出Xcode工程文件，在嵌入的Swift工程下会自动生成Unity文件夹，该文件夹内容由以上脚本生成。</p>
<p>下载以下仓库，将demo下的unity文件夹复制到项目文件夹中，与xcodeproj工程文件同级，与上面的文件夹内容合并。将导出的工程文件的Classes、Libraries和Data文件夹也复制到项目文件夹中，与xcodeproj工程文件同级，与上面的文件夹内容合并。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/jiulongw/swift-unity</span><br></pre></td></tr></table></figure>

<p>用Xcode打开工程，将Unity文件夹下的Classes和Libraries文件夹拖动到左侧文件树，选择Copy items if needed和Create groups。然后将Data文件夹拖动到左侧文件树，选择Create folder references。</p>
<p>点击工程文件，在左侧PROJECT下选择工程，在右侧General选项卡的Configurations下选择Unity配置文件，注意Debug和Release都应当选择。</p>
<p>然后用以下仓库中的AppDelegate.swift、Main.storyboard和ViewController.swift替换掉原工程的对应文件，具体方法为先以Move to trash的方式删除原工程的文件，再通过Copy items if needed和Create groups的方式拖动加入以上文件。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/jiulongw/swift-unity/tree/master/demo/xcode/DemoApp</span><br></pre></td></tr></table></figure>

<p>为防止错误，可删除LaunchScreen.storyboard，并在工程文件属性General选项卡的Launch Screen File下选择Main.storyboard。注意删除时应当以Remove Reference的方式。完成后即可运行。</p>
<h1 id="常见问题-2"><a href="#常见问题-2" class="headerlink" title="常见问题"></a>常见问题</h1><h2 id="Modifications-to-the-gt-layout-engine-must-not-be-performed-from-a-background-thread-after-it-has-been-accessed-from-the-main-thread"><a href="#Modifications-to-the-gt-layout-engine-must-not-be-performed-from-a-background-thread-after-it-has-been-accessed-from-the-main-thread" class="headerlink" title="Modifications to the &gt; layout engine must not be performed from a background thread after it has been accessed from the main thread"></a>Modifications to the &gt; layout engine must not be performed from a background thread after it has been accessed from the main thread</h2><p>修改视图内容的代码放到了后台线程导致该错误。修改为如下即可。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">DispatchQueue.main.async &#123;</span><br><span class="line">    # 原出错代码</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="参考教程"><a href="#参考教程" class="headerlink" title="参考教程"></a>参考教程</h1><h2 id="iOS-Vision-Framework-文字识别"><a href="#iOS-Vision-Framework-文字识别" class="headerlink" title="iOS - Vision Framework 文字识别"></a>iOS - Vision Framework 文字识别</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/4cea25704191</span><br></pre></td></tr></table></figure>

<h2 id="Xcode折叠函数设置-及快捷键"><a href="#Xcode折叠函数设置-及快捷键" class="headerlink" title="Xcode折叠函数设置 及快捷键"></a>Xcode折叠函数设置 及快捷键</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/liufangbaishi2014/article/details/51602208</span><br></pre></td></tr></table></figure>

<h2 id="笔记：通过storyboard来创建UICollectionView"><a href="#笔记：通过storyboard来创建UICollectionView" class="headerlink" title="笔记：通过storyboard来创建UICollectionView"></a>笔记：通过storyboard来创建UICollectionView</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/shenjie_xsj/article/details/79679760</span><br></pre></td></tr></table></figure>

<h2 id="Swift-5-UICollectionView中cell的对齐方法-重写flowlayout"><a href="#Swift-5-UICollectionView中cell的对齐方法-重写flowlayout" class="headerlink" title="Swift 5 UICollectionView中cell的对齐方法(重写flowlayout)"></a>Swift 5 UICollectionView中cell的对齐方法(重写flowlayout)</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/e1d8b51fc2b9</span><br></pre></td></tr></table></figure>

<h2 id="iOS中UICollectionView设置cell大小以及间距"><a href="#iOS中UICollectionView设置cell大小以及间距" class="headerlink" title="iOS中UICollectionView设置cell大小以及间距"></a>iOS中UICollectionView设置cell大小以及间距</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.liuandy.cn/ios/2017/12/07/1982.html#.YLzEZJMzYYF</span><br></pre></td></tr></table></figure>

<h2 id="swift：如何在单元格中的按钮被点击时获取indexpath-row？"><a href="#swift：如何在单元格中的按钮被点击时获取indexpath-row？" class="headerlink" title="swift：如何在单元格中的按钮被点击时获取indexpath.row？"></a>swift：如何在单元格中的按钮被点击时获取indexpath.row？</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.itranslater.com/qa/details/2135067127244653568</span><br></pre></td></tr></table></figure>

<h2 id="iOS-AppDelegate方法，监听进程在后台、被杀死事件"><a href="#iOS-AppDelegate方法，监听进程在后台、被杀死事件" class="headerlink" title="iOS AppDelegate方法，监听进程在后台、被杀死事件"></a>iOS AppDelegate方法，监听进程在后台、被杀死事件</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://cloud.tencent.com/developer/article/1174777</span><br></pre></td></tr></table></figure>

<h2 id="Swift-–-获取点击的坐标位置"><a href="#Swift-–-获取点击的坐标位置" class="headerlink" title="Swift – 获取点击的坐标位置"></a>Swift – 获取点击的坐标位置</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/21de7f5d6591</span><br></pre></td></tr></table></figure>

<h2 id="Modifications-to-the-gt-layout-engine-must-not-be-performed-from-a-background-thread-after-it-has-been-accessed-from-the-main-thread-1"><a href="#Modifications-to-the-gt-layout-engine-must-not-be-performed-from-a-background-thread-after-it-has-been-accessed-from-the-main-thread-1" class="headerlink" title="Modifications to the &gt; layout engine must not be performed from a background thread after it has been accessed from the main thread"></a>Modifications to the &gt; layout engine must not be performed from a background thread after it has been accessed from the main thread</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://stackoverflow.com/questions/58087536/modifications-to-the-layout-engine-must-not-be-performed-from-a-background-thr</span><br></pre></td></tr></table></figure>

<h2 id="Push-to-ViewController-without-back-button"><a href="#Push-to-ViewController-without-back-button" class="headerlink" title="Push to ViewController without back button"></a>Push to ViewController without back button</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://stackoverflow.com/questions/22301647/push-to-viewcontroller-without-back-button/22301820</span><br></pre></td></tr></table></figure>

<h2 id="ios-如何从uiviewcontainer控制器中获取父控制器"><a href="#ios-如何从uiviewcontainer控制器中获取父控制器" class="headerlink" title="ios - 如何从uiviewcontainer控制器中获取父控制器"></a>ios - 如何从uiviewcontainer控制器中获取父控制器</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://kb.kaifa99.com/ios/post_6230237</span><br></pre></td></tr></table></figure>

<h2 id="How-to-use-UIColorPickerViewController-in-Swift"><a href="#How-to-use-UIColorPickerViewController-in-Swift" class="headerlink" title="How to use UIColorPickerViewController in Swift?"></a>How to use UIColorPickerViewController in Swift?</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.swiftpal.io/articles/how-to-use-uicolorpickerviewcontroller-in-swift</span><br></pre></td></tr></table></figure>

<h2 id="为UIImageView添加响应点击事件（Swift）"><a href="#为UIImageView添加响应点击事件（Swift）" class="headerlink" title="为UIImageView添加响应点击事件（Swift）"></a>为UIImageView添加响应点击事件（Swift）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/feosun/article/details/77942049</span><br></pre></td></tr></table></figure>

<h2 id="ios-子视图获取父视图的视图控制器的方法（oc-和-swift）"><a href="#ios-子视图获取父视图的视图控制器的方法（oc-和-swift）" class="headerlink" title="ios 子视图获取父视图的视图控制器的方法（oc 和 swift）"></a>ios 子视图获取父视图的视图控制器的方法（oc 和 swift）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/qq_30963589/article/details/82967301</span><br></pre></td></tr></table></figure>

<h2 id="如何以编程方式为UIButton添加系统图标？"><a href="#如何以编程方式为UIButton添加系统图标？" class="headerlink" title="如何以编程方式为UIButton添加系统图标？"></a>如何以编程方式为UIButton添加系统图标？</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.thinbug.com/q/37772411</span><br></pre></td></tr></table></figure>

<h2 id="Swift（十）UIView"><a href="#Swift（十）UIView" class="headerlink" title="Swift（十）UIView"></a>Swift（十）UIView</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/ff7ffc8129a6</span><br></pre></td></tr></table></figure>

<h2 id="如何优雅的做一个小说阅读功能"><a href="#如何优雅的做一个小说阅读功能" class="headerlink" title="如何优雅的做一个小说阅读功能"></a>如何优雅的做一个小说阅读功能</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://syfh.github.io/2020/07/06/%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%81%9A%E4%B8%80%E4%B8%AA%E5%B0%8F%E8%AF%B4%E9%98%85%E8%AF%BB%E5%8A%9F%E8%83%BD/</span><br></pre></td></tr></table></figure>

<h2 id="Swift-3-分词"><a href="#Swift-3-分词" class="headerlink" title="Swift 3 分词"></a>Swift 3 分词</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://hicc.me/swift-3-tokenize/</span><br></pre></td></tr></table></figure>

<h2 id="Swift-给一段话分句，或将一句话关键词分组"><a href="#Swift-给一段话分句，或将一句话关键词分组" class="headerlink" title="Swift 给一段话分句，或将一句话关键词分组"></a>Swift 给一段话分句，或将一句话关键词分组</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/ef05fc1371b2</span><br></pre></td></tr></table></figure>

<h2 id="Three-Ways-to-Enumerate-the-Words-In-a-String-Using-Swift"><a href="#Three-Ways-to-Enumerate-the-Words-In-a-String-Using-Swift" class="headerlink" title="Three Ways to Enumerate the Words In a String Using Swift"></a>Three Ways to Enumerate the Words In a String Using Swift</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://medium.com/@sorenlind/three-ways-to-enumerate-the-words-in-a-string-using-swift-7da5504f0062</span><br></pre></td></tr></table></figure>

<h2 id="swift-使用Swift将NSAttributedString转换为NSString"><a href="#swift-使用Swift将NSAttributedString转换为NSString" class="headerlink" title="swift - 使用Swift将NSAttributedString转换为NSString"></a>swift - 使用Swift将NSAttributedString转换为NSString</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.coder.work/article/251231</span><br></pre></td></tr></table></figure>

<h2 id="iOS：利用代码UIBarButtonItem如何响应事件？"><a href="#iOS：利用代码UIBarButtonItem如何响应事件？" class="headerlink" title="iOS：利用代码UIBarButtonItem如何响应事件？"></a>iOS：利用代码UIBarButtonItem如何响应事件？</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/dchma20242/article/details/101445681</span><br></pre></td></tr></table></figure>

<h2 id="How-to-let-users-choose-a-font-with-UIFontPickerViewController"><a href="#How-to-let-users-choose-a-font-with-UIFontPickerViewController" class="headerlink" title="How to let users choose a font with UIFontPickerViewController"></a>How to let users choose a font with UIFontPickerViewController</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.hackingwithswift.com/example-code/uikit/how-to-let-users-choose-a-font-with-uifontpickerviewcontroller</span><br></pre></td></tr></table></figure>

<h2 id="SwiftUI-UIFontPickerViewController-基础教程"><a href="#SwiftUI-UIFontPickerViewController-基础教程" class="headerlink" title="SwiftUI UIFontPickerViewController 基础教程"></a>SwiftUI UIFontPickerViewController 基础教程</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.codenong.com/js0c37dafc3eca/</span><br></pre></td></tr></table></figure>

<h2 id="Swift-—-為你的-APP-添加自定義字體"><a href="#Swift-—-為你的-APP-添加自定義字體" class="headerlink" title="Swift — 為你的 APP 添加自定義字體"></a>Swift — 為你的 APP 添加自定義字體</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://medium.com/jeremy-xue-s-blog/swift-%E7%82%BA%E4%BD%A0%E7%9A%84-app-%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E7%BE%A9%E5%AD%97%E9%AB%94-1063a7fd30a4</span><br></pre></td></tr></table></figure>

<h2 id="如何在Swift中从数组中删除元素"><a href="#如何在Swift中从数组中删除元素" class="headerlink" title="如何在Swift中从数组中删除元素"></a>如何在Swift中从数组中删除元素</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://qastack.cn/programming/24051633/how-to-remove-an-element-from-an-array-in-swift</span><br></pre></td></tr></table></figure>

<h2 id="iOS-关于LaunchScreen不显示图片的问题"><a href="#iOS-关于LaunchScreen不显示图片的问题" class="headerlink" title="iOS 关于LaunchScreen不显示图片的问题"></a>iOS 关于LaunchScreen不显示图片的问题</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/RollingPin/article/details/103817911</span><br></pre></td></tr></table></figure>

<h2 id="Swift-LaunchScreen-storyboard设置启动页！UILaunchImages已被iOS弃用，请使用LaunchScreen-storyboard。-山青咏芝-博客园"><a href="#Swift-LaunchScreen-storyboard设置启动页！UILaunchImages已被iOS弃用，请使用LaunchScreen-storyboard。-山青咏芝-博客园" class="headerlink" title="[Swift]LaunchScreen.storyboard设置启动页！UILaunchImages已被iOS弃用，请使用LaunchScreen.storyboard。 - 山青咏芝 - 博客园"></a>[Swift]LaunchScreen.storyboard设置启动页！UILaunchImages已被iOS弃用，请使用LaunchScreen.storyboard。 - 山青咏芝 - 博客园</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.cnblogs.com/strengthen/p/10636993.html</span><br></pre></td></tr></table></figure>

<h2 id="具有完全不同布局的通用應用程序"><a href="#具有完全不同布局的通用應用程序" class="headerlink" title="具有完全不同布局的通用應用程序"></a>具有完全不同布局的通用應用程序</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://zh.stackoom.com/question/1qFDT/%E5%85%B7%E6%9C%89%E5%AE%8C%E5%85%A8%E4%B8%8D%E5%90%8C%E5%B8%83%E5%B1%80%E7%9A%84%E9%80%9A%E7%94%A8%E6%87%89%E7%94%A8%E7%A8%8B%E5%BA%8F</span><br></pre></td></tr></table></figure>

<h2 id="快速添加圆角和描边"><a href="#快速添加圆角和描边" class="headerlink" title="快速添加圆角和描边"></a>快速添加圆角和描边</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://vinefiner.github.io/2016/12/01/%E5%BF%AB%E9%80%9F%E6%B7%BB%E5%8A%A0%E5%9C%86%E8%A7%92%E5%92%8C%E6%8F%8F%E8%BE%B9/</span><br></pre></td></tr></table></figure>

<h2 id="iOS-文本转语音-TTS-详解：Swift"><a href="#iOS-文本转语音-TTS-详解：Swift" class="headerlink" title="iOS 文本转语音(TTS)详解：Swift"></a>iOS 文本转语音(TTS)详解：Swift</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.geek-share.com/detail/2794338024.html</span><br></pre></td></tr></table></figure>

<h2 id="Swift-视图阴影篇"><a href="#Swift-视图阴影篇" class="headerlink" title="Swift-视图阴影篇"></a>Swift-视图阴影篇</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/c47c52e9a8e3</span><br></pre></td></tr></table></figure>

<h2 id="collectionViewCell添加阴影"><a href="#collectionViewCell添加阴影" class="headerlink" title="collectionViewCell添加阴影"></a>collectionViewCell添加阴影</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/74894eb7ec3d</span><br></pre></td></tr></table></figure>

<h2 id="在-iPhone-amp-iPad-上顯示-popover-彈出視窗"><a href="#在-iPhone-amp-iPad-上顯示-popover-彈出視窗" class="headerlink" title="在 iPhone &amp; iPad 上顯示 popover 彈出視窗"></a>在 iPhone &amp; iPad 上顯示 popover 彈出視窗</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E5%95%8F%E9%A1%8C%E8%A7%A3%E7%AD%94%E9%9B%86/%E5%9C%A8-iphone-ipad-%E4%B8%8A%E9%A1%AF%E7%A4%BA-popover-%E5%BD%88%E5%87%BA%E8%A6%96%E7%AA%97-ac196732e557</span><br></pre></td></tr></table></figure>

<h2 id="ykying-x2F-UnityInSwift"><a href="#ykying-x2F-UnityInSwift" class="headerlink" title="ykying&#x2F;UnityInSwift"></a>ykying&#x2F;UnityInSwift</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/ykying/UnityInSwift</span><br></pre></td></tr></table></figure>

<h2 id="Integrating-Unity-into-native-iOS-applications"><a href="#Integrating-Unity-into-native-iOS-applications" class="headerlink" title="Integrating Unity into native iOS applications"></a>Integrating Unity into native iOS applications</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://docs.unity3d.com/Manual/UnityasaLibrary-iOS.html</span><br></pre></td></tr></table></figure>

<h2 id="Reason-image-not-found"><a href="#Reason-image-not-found" class="headerlink" title="Reason: image not found"></a>Reason: image not found</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/cadd1dc95cf5</span><br></pre></td></tr></table></figure>

<h2 id="How-to-embed-a-Unity-game-into-an-iOS-native-Swift-App"><a href="#How-to-embed-a-Unity-game-into-an-iOS-native-Swift-App" class="headerlink" title="How to embed a Unity game into an iOS native Swift App"></a>How to embed a Unity game into an iOS native Swift App</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://medium.com/@IronEqual/how-to-embed-a-unity-game-into-an-ios-native-swift-app-772a0b65c82</span><br></pre></td></tr></table></figure>

<h2 id="swift-在-Swift-中仅颜色下划线"><a href="#swift-在-Swift-中仅颜色下划线" class="headerlink" title="swift - 在 Swift 中仅颜色下划线"></a>swift - 在 Swift 中仅颜色下划线</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.coder.work/article/7052075</span><br></pre></td></tr></table></figure>

<h2 id="Swift-4-2-自定义相机"><a href="#Swift-4-2-自定义相机" class="headerlink" title="Swift 4.2 自定义相机"></a>Swift 4.2 自定义相机</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/4de39664adfa</span><br></pre></td></tr></table></figure>

<h2 id="ios-镜像-翻转-相机预览层"><a href="#ios-镜像-翻转-相机预览层" class="headerlink" title="ios - 镜像(翻转)相机预览层"></a>ios - 镜像(翻转)相机预览层</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.coder.work/article/443646</span><br></pre></td></tr></table></figure>

<h2 id="swift-获取子视图在父视图的坐标"><a href="#swift-获取子视图在父视图的坐标" class="headerlink" title="swift 获取子视图在父视图的坐标"></a>swift 获取子视图在父视图的坐标</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/wm9028/article/details/81301064</span><br></pre></td></tr></table></figure>

<h2 id="Swift-触摸事件（点击，移动，抬起等）说明及用例"><a href="#Swift-触摸事件（点击，移动，抬起等）说明及用例" class="headerlink" title="Swift - 触摸事件（点击，移动，抬起等）说明及用例"></a>Swift - 触摸事件（点击，移动，抬起等）说明及用例</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.hangge.com/blog/cache/detail_674.html</span><br></pre></td></tr></table></figure>

<h2 id="iOS开发系列–触摸事件、手势识别、摇晃事件、耳机线控"><a href="#iOS开发系列–触摸事件、手势识别、摇晃事件、耳机线控" class="headerlink" title="iOS开发系列–触摸事件、手势识别、摇晃事件、耳机线控"></a>iOS开发系列–触摸事件、手势识别、摇晃事件、耳机线控</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.cnblogs.com/kenshincui/p/3950646.html</span><br><span class="line">https://www.cnblogs.com/xjf125/p/4862386.html</span><br></pre></td></tr></table></figure>


<h2 id="在UIView中添加点击事件oc及swift"><a href="#在UIView中添加点击事件oc及swift" class="headerlink" title="在UIView中添加点击事件oc及swift"></a>在UIView中添加点击事件oc及swift</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/timtian008/article/details/51857852</span><br></pre></td></tr></table></figure>

<h2 id="CoderJTao-x2F-JTShapedButton"><a href="#CoderJTao-x2F-JTShapedButton" class="headerlink" title="CoderJTao&#x2F;JTShapedButton"></a>CoderJTao&#x2F;JTShapedButton</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/CoderJTao/JTShapedButton</span><br></pre></td></tr></table></figure>

<h2 id="How-to-play-a-local-video-with-Swift"><a href="#How-to-play-a-local-video-with-Swift" class="headerlink" title="How to play a local video with Swift?"></a>How to play a local video with Swift?</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://stackoverflow.com/questions/25348877/how-to-play-a-local-video-with-swift</span><br></pre></td></tr></table></figure>

<h2 id="Swift-基本语法03-“if-let”和”guard-let”"><a href="#Swift-基本语法03-“if-let”和”guard-let”" class="headerlink" title="Swift 基本语法03-“if let”和”guard let”"></a>Swift 基本语法03-“if let”和”guard let”</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/e1fe08c5db1a</span><br></pre></td></tr></table></figure>

<h2 id="解析-View-Controller-生命週期：使用-viewDidLayoutSubviews-的時機"><a href="#解析-View-Controller-生命週期：使用-viewDidLayoutSubviews-的時機" class="headerlink" title="解析 View Controller 生命週期：使用 viewDidLayoutSubviews 的時機"></a>解析 View Controller 生命週期：使用 viewDidLayoutSubviews 的時機</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.appcoda.com.tw/view-controller-lifecycle/</span><br></pre></td></tr></table></figure>

<h2 id="『簡易說明Xcode』顯示下一個畫面方法（由程式觸發的方式-—-push）"><a href="#『簡易說明Xcode』顯示下一個畫面方法（由程式觸發的方式-—-push）" class="headerlink" title="『簡易說明Xcode』顯示下一個畫面方法（由程式觸發的方式 — push）"></a>『簡易說明Xcode』顯示下一個畫面方法（由程式觸發的方式 — push）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://medium.com/%E5%BD%BC%E5%BE%97%E6%BD%98%E7%9A%84-swift-ios-app-%E9%96%8B%E7%99%BC%E6%95%99%E5%AE%A4/%E7%B0%A1%E6%98%93%E8%AA%AA%E6%98%8Excode%E4%B8%AD%E7%9A%84%E9%A1%AF%E7%A4%BA%E4%B8%8B%E4%B8%80%E5%80%8B%E7%95%AB%E9%9D%A2%E6%96%B9%E6%B3%95-%E7%94%B1%E7%A8%8B%E5%BC%8F%E8%A7%B8%E7%99%BC%E7%9A%84%E6%96%B9%E5%BC%8F-push-e0da619641f7</span><br></pre></td></tr></table></figure>

<h2 id="iOS-如何优雅的隐藏主页面的导航栏，而只展示详细页面的导航栏（UINavigationBar）"><a href="#iOS-如何优雅的隐藏主页面的导航栏，而只展示详细页面的导航栏（UINavigationBar）" class="headerlink" title="iOS-如何优雅的隐藏主页面的导航栏，而只展示详细页面的导航栏（UINavigationBar）"></a>iOS-如何优雅的隐藏主页面的导航栏，而只展示详细页面的导航栏（UINavigationBar）</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://juejin.cn/post/6844903955051315208</span><br></pre></td></tr></table></figure>

<h2 id="【Swift】Swift入門-UIPageViewControllerを使ってみる"><a href="#【Swift】Swift入門-UIPageViewControllerを使ってみる" class="headerlink" title="【Swift】Swift入門 ~ UIPageViewControllerを使ってみる ~"></a>【Swift】Swift入門 ~ UIPageViewControllerを使ってみる ~</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://swallow-incubate.com/archives/blog/20200313/#basic1</span><br></pre></td></tr></table></figure>

<h2 id="Swift-页视图控制器（UIPageViewController）的使用"><a href="#Swift-页视图控制器（UIPageViewController）的使用" class="headerlink" title="Swift - 页视图控制器（UIPageViewController）的使用"></a>Swift - 页视图控制器（UIPageViewController）的使用</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">https://www.hangge.com/blog/cache/detail_1282.html</span><br><span class="line">https://www.hangge.com/blog/cache/detail_1283.html</span><br></pre></td></tr></table></figure>

<h2 id="Increase-the-size-of-the-indicator-in-UIPageViewController’s-UIPageControl"><a href="#Increase-the-size-of-the-indicator-in-UIPageViewController’s-UIPageControl" class="headerlink" title="Increase the size of the indicator in UIPageViewController’s UIPageControl"></a>Increase the size of the indicator in UIPageViewController’s UIPageControl</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://stackoverflow.com/questions/42432731/increase-the-size-of-the-indicator-in-uipageviewcontrollers-uipagecontrol</span><br></pre></td></tr></table></figure>

<h2 id="动画UIButton放大和缩小点击"><a href="#动画UIButton放大和缩小点击" class="headerlink" title="动画UIButton放大和缩小点击"></a>动画UIButton放大和缩小点击</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">http://cn.voidcc.com/question/p-ejgrgomn-pd.html</span><br></pre></td></tr></table></figure>

<h2 id="IOS-UIButton详解-amp-Button缩放旋转位移实例"><a href="#IOS-UIButton详解-amp-Button缩放旋转位移实例" class="headerlink" title="IOS UIButton详解 &amp; Button缩放旋转位移实例"></a>IOS UIButton详解 &amp; Button缩放旋转位移实例</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://my.oschina.net/wolx/blog/359398</span><br></pre></td></tr></table></figure>

<h2 id="subView的添加与移除"><a href="#subView的添加与移除" class="headerlink" title="subView的添加与移除"></a>subView的添加与移除</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://blog.csdn.net/zhuiyi316/article/details/8308858</span><br></pre></td></tr></table></figure>

<h2 id="franobarrio-x2F-animation-transition-viewcontroller-easy"><a href="#franobarrio-x2F-animation-transition-viewcontroller-easy" class="headerlink" title="franobarrio&#x2F;animation-transition-viewcontroller-easy"></a>franobarrio&#x2F;animation-transition-viewcontroller-easy</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://github.com/franobarrio/animation-transition-viewcontroller-easy</span><br></pre></td></tr></table></figure>

<h2 id="ViewController-轉場初階指南：簡單打造酷炫的轉場動畫"><a href="#ViewController-轉場初階指南：簡單打造酷炫的轉場動畫" class="headerlink" title="ViewController 轉場初階指南：簡單打造酷炫的轉場動畫"></a>ViewController 轉場初階指南：簡單打造酷炫的轉場動畫</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.appcoda.com.tw/viewcontroller-transition-easy/</span><br></pre></td></tr></table></figure>

<h2 id="How-do-I-cross-dissolve-when-pushing-views-on-a-UINavigationController-in-iOS-7"><a href="#How-do-I-cross-dissolve-when-pushing-views-on-a-UINavigationController-in-iOS-7" class="headerlink" title="How do I cross dissolve when pushing views on a UINavigationController in iOS 7?"></a>How do I cross dissolve when pushing views on a UINavigationController in iOS 7?</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://stackoverflow.com/questions/23530538/how-do-i-cross-dissolve-when-pushing-views-on-a-uinavigationcontroller-in-ios-7</span><br></pre></td></tr></table></figure>

<h2 id="CGAffineTransform"><a href="#CGAffineTransform" class="headerlink" title="CGAffineTransform"></a>CGAffineTransform</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">https://www.jianshu.com/p/1a2475af4378</span><br></pre></td></tr></table></figure>

    </div>

    
    
    

      <footer class="post-footer">

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/blog/posts/Knowledge-And-Exercise-About-Computer-Network.html" rel="prev" title="计算机网络相关知识与习题">
      <i class="fa fa-chevron-left"></i> 计算机网络相关知识与习题
    </a></div>
      <div class="post-nav-item">
    <a href="/blog/posts/Some-Operations-About-Network.html" rel="next" title="一些网络的操作">
      一些网络的操作 <i class="fa fa-chevron-right"></i>
    </a></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#%E8%B5%84%E6%96%99"><span class="nav-text">资料</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E6%9C%AC%E7%9F%A5%E8%AF%86"><span class="nav-text">基本知识</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B8%B8%E9%87%8F"><span class="nav-text">常量</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#if-let"><span class="nav-text">if let</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#guard-let"><span class="nav-text">guard let</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Extension"><span class="nav-text">Extension</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F"><span class="nav-text">页面生命周期</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#viewDidLoad"><span class="nav-text">viewDidLoad</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#viewDidAppear"><span class="nav-text">viewDidAppear</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#viewDidLayoutSubviews"><span class="nav-text">viewDidLayoutSubviews</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Xcode"><span class="nav-text">Xcode</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%A0%81%E6%8A%98%E5%8F%A0"><span class="nav-text">设置代码折叠</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6"><span class="nav-text">组件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Collection-View"><span class="nav-text">Collection View</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="nav-text">使用方法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%83%E5%B1%80%E8%AE%BE%E7%BD%AE"><span class="nav-text">布局设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6"><span class="nav-text">点击事件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0"><span class="nav-text">添加</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E7%82%B9%E5%87%BB%E7%9A%84%E4%BD%8D%E7%BD%AE"><span class="nav-text">获取点击的位置</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UIColorPickerViewController"><span class="nav-text">UIColorPickerViewController</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-1"><span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UIFontPickerViewController"><span class="nav-text">UIFontPickerViewController</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95-2"><span class="nav-text">使用方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UIImageView"><span class="nav-text">UIImageView</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6"><span class="nav-text">添加点击事件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Button"><span class="nav-text">Button</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E6%8C%89%E9%92%AE%E4%B8%BA%E7%B3%BB%E7%BB%9F%E5%9B%BE%E6%A0%87"><span class="nav-text">设置按钮为系统图标</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UIView"><span class="nav-text">UIView</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6-1"><span class="nav-text">添加点击事件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7"><span class="nav-text">属性</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%8F%92%E5%85%A5-x2F-%E5%88%A0%E9%99%A4%E4%B8%8E%E7%A7%BB%E5%8A%A8"><span class="nav-text">插入&#x2F;删除与移动</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UIBarButtonItem"><span class="nav-text">UIBarButtonItem</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%91%E5%AE%9A%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6"><span class="nav-text">绑定点击事件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UITextView"><span class="nav-text">UITextView</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A3%80%E6%B5%8B%E6%89%80%E7%82%B9%E5%87%BB%E7%9A%84%E6%96%87%E6%9C%AC%E5%86%85%E5%AE%B9"><span class="nav-text">检测所点击的文本内容</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Activity-Indicator"><span class="nav-text">Activity Indicator</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AVPlayer"><span class="nav-text">AVPlayer</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96"><span class="nav-text">初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%92%AD%E6%94%BE"><span class="nav-text">播放</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%9A%82%E5%81%9C"><span class="nav-text">暂停</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%81%9C%E6%AD%A2"><span class="nav-text">停止</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#UIPageViewController"><span class="nav-text">UIPageViewController</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%94%BE%E7%BD%AE"><span class="nav-text">放置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E7%8B%AC%E7%AB%8B%E4%BD%BF%E7%94%A8"><span class="nav-text">独立使用</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%B5%8C%E5%85%A5%E5%88%B0%E9%A1%B5%E9%9D%A2"><span class="nav-text">嵌入到页面</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96-1"><span class="nav-text">初始化</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%BD%93%E5%89%8D%E9%A1%B5%E6%98%BE%E7%A4%BA"><span class="nav-text">添加当前页显示</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE"><span class="nav-text">样式设置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E6%BB%91%E5%8A%A8%E6%A0%B7%E5%BC%8F"><span class="nav-text">修改滑动样式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AEUIPageControl%E5%A4%A7%E5%B0%8F"><span class="nav-text">设置UIPageControl大小</span></a></li></ol></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E6%A1%86%E6%9E%B6"><span class="nav-text">框架</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8D%E8%A7%84%E5%88%99%E6%8C%89%E9%92%AE"><span class="nav-text">不规则按钮</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%B1%BB%E5%AE%9A%E4%B9%89"><span class="nav-text">类定义</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BD%BF%E7%94%A8"><span class="nav-text">使用</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#OCR%E8%AF%86%E5%88%AB"><span class="nav-text">OCR识别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E8%AF%86%E5%88%AB%E8%AF%AD%E8%A8%80"><span class="nav-text">修改识别语言</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%89%8B%E9%83%A8%E8%AF%86%E5%88%AB"><span class="nav-text">手部识别</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%8B%E7%A8%8B"><span class="nav-text">例程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98"><span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E9%95%9C%E5%A4%B4%E6%96%B9%E5%90%91%E9%9A%8F%E8%AE%BE%E5%A4%87%E6%97%8B%E8%BD%AC%E8%80%8C%E5%8F%98%E5%8C%96"><span class="nav-text">镜头方向随设备旋转而变化</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E6%9C%AC%E8%BD%AC%E8%AF%AD%E9%9F%B3"><span class="nav-text">文本转语音</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%B1%BB%E5%9E%8B"><span class="nav-text">类型</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#NSMutableAttributedString"><span class="nav-text">NSMutableAttributedString</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE-1"><span class="nav-text">样式设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%A0%B7%E5%BC%8F%E8%BF%BD%E5%8A%A0"><span class="nav-text">样式追加</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AC%E6%8D%A2%E4%B8%BAString"><span class="nav-text">转换为String</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%95%B0%E7%BB%84"><span class="nav-text">数组</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA"><span class="nav-text">创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="nav-text">删除元素</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E9%A1%B5%E9%9D%A2%E4%B8%8E%E5%8A%A8%E4%BD%9C%E6%8E%A7%E5%88%B6"><span class="nav-text">页面与动作控制</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AD%90%E8%A7%86%E5%9B%BE%E6%B7%BB%E5%8A%A0%E5%92%8C%E7%A7%BB%E9%99%A4"><span class="nav-text">子视图添加和移除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E8%BF%9B%E7%A8%8B%E4%BA%8B%E4%BB%B6"><span class="nav-text">监听进程事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E8%A7%A6%E6%91%B8%E4%BA%8B%E4%BB%B6"><span class="nav-text">监听触摸事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8View%E4%B8%AD%E8%8E%B7%E5%8F%96%E7%82%B9%E5%87%BB%E5%9D%90%E6%A0%87"><span class="nav-text">在View中获取点击坐标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E9%9A%90%E8%97%8F%E8%BF%94%E5%9B%9E%E9%94%AE"><span class="nav-text">隐藏返回键</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8E%E8%B7%B3%E8%BD%AC%E4%B8%AD%E8%8E%B7%E5%8F%96%E7%88%B6-x2F-%E5%AD%90%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text">从跳转中获取父&#x2F;子控制器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BB%8E%E8%A7%86%E5%9B%BE%E8%8E%B7%E5%8F%96%E7%88%B6%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text">从视图获取父控制器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%8E%B7%E5%8F%96%E5%AD%90%E8%A7%86%E5%9B%BE%E5%9C%A8%E7%88%B6%E8%A7%86%E5%9B%BE%E4%B8%AD%E7%9A%84%E5%9D%90%E6%A0%87"><span class="nav-text">获取子视图在父视图中的坐标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%8D%E5%8F%AF%E9%80%80%E5%9B%9E%E7%9A%84%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="nav-text">不可退回的页面跳转</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE"><span class="nav-text">设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%B7%A1%E5%87%BA%E5%88%87%E6%8D%A2"><span class="nav-text">淡出切换</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8F%AF%E9%80%80%E5%9B%9E%E7%9A%84%E9%A1%B5%E9%9D%A2%E8%B7%B3%E8%BD%AC"><span class="nav-text">可退回的页面跳转</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8E%9F%E7%90%86"><span class="nav-text">原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%88%9D%E5%A7%8B%E5%8C%96%E4%B8%8E%E8%B7%B3%E8%BD%AC%E8%AE%BE%E7%BD%AE"><span class="nav-text">初始化与跳转设置</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%9A%90%E8%97%8F%E5%AF%BC%E8%88%AA%E6%A0%8F"><span class="nav-text">隐藏导航栏</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AC%E5%9C%BA%E6%A0%B7%E5%BC%8F"><span class="nav-text">转场样式</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E6%B7%A1%E5%87%BA%E8%BD%AC%E5%9C%BA"><span class="nav-text">淡出转场</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%BD%AC%E5%9C%BA%E5%8A%A8%E7%94%BB"><span class="nav-text">转场动画</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%95%8C%E9%9D%A2%E4%B8%8E%E5%A4%96%E8%A7%82%E8%AE%BE%E7%BD%AE"><span class="nav-text">界面与外观设置</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E4%B9%89%E5%AD%97%E4%BD%93"><span class="nav-text">添加自定义字体</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%90%AF%E5%8A%A8%E9%A1%B5%E7%9B%B8%E5%85%B3"><span class="nav-text">启动页相关</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%90%AF%E5%8A%A8%E9%A1%B5"><span class="nav-text">设置启动页</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BF%AE%E6%94%B9%E5%90%AF%E5%8A%A8%E9%A1%B5%E7%95%8C%E9%9D%A2"><span class="nav-text">修改启动页界面</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%BE%E7%BD%AE%E5%90%AF%E5%8A%A8%E9%A1%B5%E5%81%9C%E7%95%99%E6%97%B6%E9%97%B4"><span class="nav-text">设置启动页停留时间</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%9C%A8%E4%B8%8D%E5%90%8C%E8%AE%BE%E5%A4%87%E8%AE%BE%E7%BD%AE%E4%B8%8D%E5%90%8C%E5%B8%83%E5%B1%80"><span class="nav-text">在不同设备设置不同布局</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E5%9C%86%E8%A7%92-x2F-%E6%8F%8F%E8%BE%B9"><span class="nav-text">添加圆角&#x2F;描边</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B7%BB%E5%8A%A0%E9%98%B4%E5%BD%B1"><span class="nav-text">添加阴影</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%8E%A7%E4%BB%B6%E5%8F%98%E6%8D%A2%E4%B8%8E%E5%8A%A8%E7%94%BB"><span class="nav-text">控件变换与动画</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8F%98%E6%8D%A2"><span class="nav-text">变换</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A8%E7%94%BB"><span class="nav-text">动画</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Popover"><span class="nav-text">Popover</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87segue"><span class="nav-text">通过segue</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E7%BA%AF%E4%BB%A3%E7%A0%81"><span class="nav-text">通过纯代码</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8A%9F%E8%83%BD%E5%AE%9E%E7%8E%B0"><span class="nav-text">功能实现</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E9%A1%B5"><span class="nav-text">分页</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%86%E8%AF%8D-x2F-%E5%88%86%E5%8F%A5"><span class="nav-text">分词&#x2F;分句</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Unity%E7%9B%B8%E5%85%B3"><span class="nav-text">Unity相关</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%B5%8C%E5%85%A5%E5%88%B0Swift%E5%B7%A5%E7%A8%8B"><span class="nav-text">嵌入到Swift工程</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%96%B0%E7%89%88%E6%95%99%E7%A8%8B"><span class="nav-text">新版教程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-1"><span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BDVuforia%E6%A1%86%E6%9E%B6%E6%97%B6%E8%BE%93%E5%87%BA%E5%8F%B0%E6%98%BE%E7%A4%BAdataset-xxx-could-not-be-loaded-and-cannot-be-activated"><span class="nav-text">加载Vuforia框架时输出台显示dataset xxx could not be loaded and cannot be activated</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BDUnity%E6%97%B6%E8%BE%93%E5%87%BA%E5%8F%B0%E6%98%BE%E7%A4%BAdyld-Library-not-loaded-rpath-x2F-ARFoundationDriver-framework-x2F-ARFoundationDriver%E2%80%A6Reason-image-not-found"><span class="nav-text">加载Unity时输出台显示dyld: Library not loaded: @rpath&#x2F;ARFoundationDriver.framework&#x2F;ARFoundationDriver…Reason: image not found</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%97%A7%E7%89%88%E6%95%99%E7%A8%8B"><span class="nav-text">旧版教程</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%B8%B8%E8%A7%81%E9%97%AE%E9%A2%98-2"><span class="nav-text">常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Modifications-to-the-gt-layout-engine-must-not-be-performed-from-a-background-thread-after-it-has-been-accessed-from-the-main-thread"><span class="nav-text">Modifications to the &gt; layout engine must not be performed from a background thread after it has been accessed from the main thread</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%8F%82%E8%80%83%E6%95%99%E7%A8%8B"><span class="nav-text">参考教程</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS-Vision-Framework-%E6%96%87%E5%AD%97%E8%AF%86%E5%88%AB"><span class="nav-text">iOS - Vision Framework 文字识别</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Xcode%E6%8A%98%E5%8F%A0%E5%87%BD%E6%95%B0%E8%AE%BE%E7%BD%AE-%E5%8F%8A%E5%BF%AB%E6%8D%B7%E9%94%AE"><span class="nav-text">Xcode折叠函数设置 及快捷键</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%AC%94%E8%AE%B0%EF%BC%9A%E9%80%9A%E8%BF%87storyboard%E6%9D%A5%E5%88%9B%E5%BB%BAUICollectionView"><span class="nav-text">笔记：通过storyboard来创建UICollectionView</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-5-UICollectionView%E4%B8%ADcell%E7%9A%84%E5%AF%B9%E9%BD%90%E6%96%B9%E6%B3%95-%E9%87%8D%E5%86%99flowlayout"><span class="nav-text">Swift 5 UICollectionView中cell的对齐方法(重写flowlayout)</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS%E4%B8%ADUICollectionView%E8%AE%BE%E7%BD%AEcell%E5%A4%A7%E5%B0%8F%E4%BB%A5%E5%8F%8A%E9%97%B4%E8%B7%9D"><span class="nav-text">iOS中UICollectionView设置cell大小以及间距</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#swift%EF%BC%9A%E5%A6%82%E4%BD%95%E5%9C%A8%E5%8D%95%E5%85%83%E6%A0%BC%E4%B8%AD%E7%9A%84%E6%8C%89%E9%92%AE%E8%A2%AB%E7%82%B9%E5%87%BB%E6%97%B6%E8%8E%B7%E5%8F%96indexpath-row%EF%BC%9F"><span class="nav-text">swift：如何在单元格中的按钮被点击时获取indexpath.row？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS-AppDelegate%E6%96%B9%E6%B3%95%EF%BC%8C%E7%9B%91%E5%90%AC%E8%BF%9B%E7%A8%8B%E5%9C%A8%E5%90%8E%E5%8F%B0%E3%80%81%E8%A2%AB%E6%9D%80%E6%AD%BB%E4%BA%8B%E4%BB%B6"><span class="nav-text">iOS AppDelegate方法，监听进程在后台、被杀死事件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-%E2%80%93-%E8%8E%B7%E5%8F%96%E7%82%B9%E5%87%BB%E7%9A%84%E5%9D%90%E6%A0%87%E4%BD%8D%E7%BD%AE"><span class="nav-text">Swift – 获取点击的坐标位置</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Modifications-to-the-gt-layout-engine-must-not-be-performed-from-a-background-thread-after-it-has-been-accessed-from-the-main-thread-1"><span class="nav-text">Modifications to the &gt; layout engine must not be performed from a background thread after it has been accessed from the main thread</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Push-to-ViewController-without-back-button"><span class="nav-text">Push to ViewController without back button</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ios-%E5%A6%82%E4%BD%95%E4%BB%8Euiviewcontainer%E6%8E%A7%E5%88%B6%E5%99%A8%E4%B8%AD%E8%8E%B7%E5%8F%96%E7%88%B6%E6%8E%A7%E5%88%B6%E5%99%A8"><span class="nav-text">ios - 如何从uiviewcontainer控制器中获取父控制器</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-use-UIColorPickerViewController-in-Swift"><span class="nav-text">How to use UIColorPickerViewController in Swift?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%B8%BAUIImageView%E6%B7%BB%E5%8A%A0%E5%93%8D%E5%BA%94%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6%EF%BC%88Swift%EF%BC%89"><span class="nav-text">为UIImageView添加响应点击事件（Swift）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ios-%E5%AD%90%E8%A7%86%E5%9B%BE%E8%8E%B7%E5%8F%96%E7%88%B6%E8%A7%86%E5%9B%BE%E7%9A%84%E8%A7%86%E5%9B%BE%E6%8E%A7%E5%88%B6%E5%99%A8%E7%9A%84%E6%96%B9%E6%B3%95%EF%BC%88oc-%E5%92%8C-swift%EF%BC%89"><span class="nav-text">ios 子视图获取父视图的视图控制器的方法（oc 和 swift）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E4%BB%A5%E7%BC%96%E7%A8%8B%E6%96%B9%E5%BC%8F%E4%B8%BAUIButton%E6%B7%BB%E5%8A%A0%E7%B3%BB%E7%BB%9F%E5%9B%BE%E6%A0%87%EF%BC%9F"><span class="nav-text">如何以编程方式为UIButton添加系统图标？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift%EF%BC%88%E5%8D%81%EF%BC%89UIView"><span class="nav-text">Swift（十）UIView</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E5%81%9A%E4%B8%80%E4%B8%AA%E5%B0%8F%E8%AF%B4%E9%98%85%E8%AF%BB%E5%8A%9F%E8%83%BD"><span class="nav-text">如何优雅的做一个小说阅读功能</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-3-%E5%88%86%E8%AF%8D"><span class="nav-text">Swift 3 分词</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-%E7%BB%99%E4%B8%80%E6%AE%B5%E8%AF%9D%E5%88%86%E5%8F%A5%EF%BC%8C%E6%88%96%E5%B0%86%E4%B8%80%E5%8F%A5%E8%AF%9D%E5%85%B3%E9%94%AE%E8%AF%8D%E5%88%86%E7%BB%84"><span class="nav-text">Swift 给一段话分句，或将一句话关键词分组</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Three-Ways-to-Enumerate-the-Words-In-a-String-Using-Swift"><span class="nav-text">Three Ways to Enumerate the Words In a String Using Swift</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#swift-%E4%BD%BF%E7%94%A8Swift%E5%B0%86NSAttributedString%E8%BD%AC%E6%8D%A2%E4%B8%BANSString"><span class="nav-text">swift - 使用Swift将NSAttributedString转换为NSString</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS%EF%BC%9A%E5%88%A9%E7%94%A8%E4%BB%A3%E7%A0%81UIBarButtonItem%E5%A6%82%E4%BD%95%E5%93%8D%E5%BA%94%E4%BA%8B%E4%BB%B6%EF%BC%9F"><span class="nav-text">iOS：利用代码UIBarButtonItem如何响应事件？</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-let-users-choose-a-font-with-UIFontPickerViewController"><span class="nav-text">How to let users choose a font with UIFontPickerViewController</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#SwiftUI-UIFontPickerViewController-%E5%9F%BA%E7%A1%80%E6%95%99%E7%A8%8B"><span class="nav-text">SwiftUI UIFontPickerViewController 基础教程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-%E2%80%94-%E7%82%BA%E4%BD%A0%E7%9A%84-APP-%E6%B7%BB%E5%8A%A0%E8%87%AA%E5%AE%9A%E7%BE%A9%E5%AD%97%E9%AB%94"><span class="nav-text">Swift — 為你的 APP 添加自定義字體</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E5%9C%A8Swift%E4%B8%AD%E4%BB%8E%E6%95%B0%E7%BB%84%E4%B8%AD%E5%88%A0%E9%99%A4%E5%85%83%E7%B4%A0"><span class="nav-text">如何在Swift中从数组中删除元素</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS-%E5%85%B3%E4%BA%8ELaunchScreen%E4%B8%8D%E6%98%BE%E7%A4%BA%E5%9B%BE%E7%89%87%E7%9A%84%E9%97%AE%E9%A2%98"><span class="nav-text">iOS 关于LaunchScreen不显示图片的问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-LaunchScreen-storyboard%E8%AE%BE%E7%BD%AE%E5%90%AF%E5%8A%A8%E9%A1%B5%EF%BC%81UILaunchImages%E5%B7%B2%E8%A2%ABiOS%E5%BC%83%E7%94%A8%EF%BC%8C%E8%AF%B7%E4%BD%BF%E7%94%A8LaunchScreen-storyboard%E3%80%82-%E5%B1%B1%E9%9D%92%E5%92%8F%E8%8A%9D-%E5%8D%9A%E5%AE%A2%E5%9B%AD"><span class="nav-text">[Swift]LaunchScreen.storyboard设置启动页！UILaunchImages已被iOS弃用，请使用LaunchScreen.storyboard。 - 山青咏芝 - 博客园</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%85%B7%E6%9C%89%E5%AE%8C%E5%85%A8%E4%B8%8D%E5%90%8C%E5%B8%83%E5%B1%80%E7%9A%84%E9%80%9A%E7%94%A8%E6%87%89%E7%94%A8%E7%A8%8B%E5%BA%8F"><span class="nav-text">具有完全不同布局的通用應用程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%BF%AB%E9%80%9F%E6%B7%BB%E5%8A%A0%E5%9C%86%E8%A7%92%E5%92%8C%E6%8F%8F%E8%BE%B9"><span class="nav-text">快速添加圆角和描边</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS-%E6%96%87%E6%9C%AC%E8%BD%AC%E8%AF%AD%E9%9F%B3-TTS-%E8%AF%A6%E8%A7%A3%EF%BC%9ASwift"><span class="nav-text">iOS 文本转语音(TTS)详解：Swift</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-%E8%A7%86%E5%9B%BE%E9%98%B4%E5%BD%B1%E7%AF%87"><span class="nav-text">Swift-视图阴影篇</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#collectionViewCell%E6%B7%BB%E5%8A%A0%E9%98%B4%E5%BD%B1"><span class="nav-text">collectionViewCell添加阴影</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8-iPhone-amp-iPad-%E4%B8%8A%E9%A1%AF%E7%A4%BA-popover-%E5%BD%88%E5%87%BA%E8%A6%96%E7%AA%97"><span class="nav-text">在 iPhone &amp; iPad 上顯示 popover 彈出視窗</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ykying-x2F-UnityInSwift"><span class="nav-text">ykying&#x2F;UnityInSwift</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Integrating-Unity-into-native-iOS-applications"><span class="nav-text">Integrating Unity into native iOS applications</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Reason-image-not-found"><span class="nav-text">Reason: image not found</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-embed-a-Unity-game-into-an-iOS-native-Swift-App"><span class="nav-text">How to embed a Unity game into an iOS native Swift App</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#swift-%E5%9C%A8-Swift-%E4%B8%AD%E4%BB%85%E9%A2%9C%E8%89%B2%E4%B8%8B%E5%88%92%E7%BA%BF"><span class="nav-text">swift - 在 Swift 中仅颜色下划线</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-4-2-%E8%87%AA%E5%AE%9A%E4%B9%89%E7%9B%B8%E6%9C%BA"><span class="nav-text">Swift 4.2 自定义相机</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ios-%E9%95%9C%E5%83%8F-%E7%BF%BB%E8%BD%AC-%E7%9B%B8%E6%9C%BA%E9%A2%84%E8%A7%88%E5%B1%82"><span class="nav-text">ios - 镜像(翻转)相机预览层</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#swift-%E8%8E%B7%E5%8F%96%E5%AD%90%E8%A7%86%E5%9B%BE%E5%9C%A8%E7%88%B6%E8%A7%86%E5%9B%BE%E7%9A%84%E5%9D%90%E6%A0%87"><span class="nav-text">swift 获取子视图在父视图的坐标</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-%E8%A7%A6%E6%91%B8%E4%BA%8B%E4%BB%B6%EF%BC%88%E7%82%B9%E5%87%BB%EF%BC%8C%E7%A7%BB%E5%8A%A8%EF%BC%8C%E6%8A%AC%E8%B5%B7%E7%AD%89%EF%BC%89%E8%AF%B4%E6%98%8E%E5%8F%8A%E7%94%A8%E4%BE%8B"><span class="nav-text">Swift - 触摸事件（点击，移动，抬起等）说明及用例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS%E5%BC%80%E5%8F%91%E7%B3%BB%E5%88%97%E2%80%93%E8%A7%A6%E6%91%B8%E4%BA%8B%E4%BB%B6%E3%80%81%E6%89%8B%E5%8A%BF%E8%AF%86%E5%88%AB%E3%80%81%E6%91%87%E6%99%83%E4%BA%8B%E4%BB%B6%E3%80%81%E8%80%B3%E6%9C%BA%E7%BA%BF%E6%8E%A7"><span class="nav-text">iOS开发系列–触摸事件、手势识别、摇晃事件、耳机线控</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9C%A8UIView%E4%B8%AD%E6%B7%BB%E5%8A%A0%E7%82%B9%E5%87%BB%E4%BA%8B%E4%BB%B6oc%E5%8F%8Aswift"><span class="nav-text">在UIView中添加点击事件oc及swift</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CoderJTao-x2F-JTShapedButton"><span class="nav-text">CoderJTao&#x2F;JTShapedButton</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-to-play-a-local-video-with-Swift"><span class="nav-text">How to play a local video with Swift?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-%E5%9F%BA%E6%9C%AC%E8%AF%AD%E6%B3%9503-%E2%80%9Cif-let%E2%80%9D%E5%92%8C%E2%80%9Dguard-let%E2%80%9D"><span class="nav-text">Swift 基本语法03-“if let”和”guard let”</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%A7%A3%E6%9E%90-View-Controller-%E7%94%9F%E5%91%BD%E9%80%B1%E6%9C%9F%EF%BC%9A%E4%BD%BF%E7%94%A8-viewDidLayoutSubviews-%E7%9A%84%E6%99%82%E6%A9%9F"><span class="nav-text">解析 View Controller 生命週期：使用 viewDidLayoutSubviews 的時機</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%8E%E7%B0%A1%E6%98%93%E8%AA%AA%E6%98%8EXcode%E3%80%8F%E9%A1%AF%E7%A4%BA%E4%B8%8B%E4%B8%80%E5%80%8B%E7%95%AB%E9%9D%A2%E6%96%B9%E6%B3%95%EF%BC%88%E7%94%B1%E7%A8%8B%E5%BC%8F%E8%A7%B8%E7%99%BC%E7%9A%84%E6%96%B9%E5%BC%8F-%E2%80%94-push%EF%BC%89"><span class="nav-text">『簡易說明Xcode』顯示下一個畫面方法（由程式觸發的方式 — push）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#iOS-%E5%A6%82%E4%BD%95%E4%BC%98%E9%9B%85%E7%9A%84%E9%9A%90%E8%97%8F%E4%B8%BB%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%AF%BC%E8%88%AA%E6%A0%8F%EF%BC%8C%E8%80%8C%E5%8F%AA%E5%B1%95%E7%A4%BA%E8%AF%A6%E7%BB%86%E9%A1%B5%E9%9D%A2%E7%9A%84%E5%AF%BC%E8%88%AA%E6%A0%8F%EF%BC%88UINavigationBar%EF%BC%89"><span class="nav-text">iOS-如何优雅的隐藏主页面的导航栏，而只展示详细页面的导航栏（UINavigationBar）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E3%80%90Swift%E3%80%91Swift%E5%85%A5%E9%96%80-UIPageViewController%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E3%81%BF%E3%82%8B"><span class="nav-text">【Swift】Swift入門 ~ UIPageViewControllerを使ってみる ~</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Swift-%E9%A1%B5%E8%A7%86%E5%9B%BE%E6%8E%A7%E5%88%B6%E5%99%A8%EF%BC%88UIPageViewController%EF%BC%89%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-text">Swift - 页视图控制器（UIPageViewController）的使用</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Increase-the-size-of-the-indicator-in-UIPageViewController%E2%80%99s-UIPageControl"><span class="nav-text">Increase the size of the indicator in UIPageViewController’s UIPageControl</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%8A%A8%E7%94%BBUIButton%E6%94%BE%E5%A4%A7%E5%92%8C%E7%BC%A9%E5%B0%8F%E7%82%B9%E5%87%BB"><span class="nav-text">动画UIButton放大和缩小点击</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#IOS-UIButton%E8%AF%A6%E8%A7%A3-amp-Button%E7%BC%A9%E6%94%BE%E6%97%8B%E8%BD%AC%E4%BD%8D%E7%A7%BB%E5%AE%9E%E4%BE%8B"><span class="nav-text">IOS UIButton详解 &amp; Button缩放旋转位移实例</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#subView%E7%9A%84%E6%B7%BB%E5%8A%A0%E4%B8%8E%E7%A7%BB%E9%99%A4"><span class="nav-text">subView的添加与移除</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#franobarrio-x2F-animation-transition-viewcontroller-easy"><span class="nav-text">franobarrio&#x2F;animation-transition-viewcontroller-easy</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ViewController-%E8%BD%89%E5%A0%B4%E5%88%9D%E9%9A%8E%E6%8C%87%E5%8D%97%EF%BC%9A%E7%B0%A1%E5%96%AE%E6%89%93%E9%80%A0%E9%85%B7%E7%82%AB%E7%9A%84%E8%BD%89%E5%A0%B4%E5%8B%95%E7%95%AB"><span class="nav-text">ViewController 轉場初階指南：簡單打造酷炫的轉場動畫</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#How-do-I-cross-dissolve-when-pushing-views-on-a-UINavigationController-in-iOS-7"><span class="nav-text">How do I cross dissolve when pushing views on a UINavigationController in iOS 7?</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#CGAffineTransform"><span class="nav-text">CGAffineTransform</span></a></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="Payton"
      src="/blog/images/avatar.gif">
  <p class="site-author-name" itemprop="name">Payton</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/blog/archives/">
        
          <span class="site-state-item-count">68</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/blog/categories/">
          
        <span class="site-state-item-count">12</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
  </nav>
</div>



      </div>
        <div class="back-to-top motion-element">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2025</span>
  <span class="with-love">
    <i class="fa fa-comments"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Payton</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-chart-area"></i>
    </span>
    <span title="站点总字数">2m</span>
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    <span title="站点阅读时长">30:28</span>
</div>

        








      </div>
    </footer>
  </div>

  
  <script src="/blog/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/pangu@4/dist/browser/pangu.min.js"></script>
  <script src="/blog/lib/velocity/velocity.min.js"></script>
  <script src="/blog/lib/velocity/velocity.ui.min.js"></script>

<script src="/blog/js/utils.js"></script>

<script src="/blog/js/motion.js"></script>


<script src="/blog/js/schemes/pisces.js"></script>


<script src="/blog/js/next-boot.js"></script>




  




  
<script src="/blog/js/local-search.js"></script>













  

  
      

<script>
  if (typeof MathJax === 'undefined') {
    window.MathJax = {
      loader: {
        source: {
          '[tex]/amsCd': '[tex]/amscd',
          '[tex]/AMScd': '[tex]/amscd'
        }
      },
      tex: {
        inlineMath: {'[+]': [['$', '$']]},
        tags: 'ams'
      },
      options: {
        renderActions: {
          findScript: [10, doc => {
            document.querySelectorAll('script[type^="math/tex"]').forEach(node => {
              const display = !!node.type.match(/; *mode=display/);
              const math = new doc.options.MathItem(node.textContent, doc.inputJax[0], display);
              const text = document.createTextNode('');
              node.parentNode.replaceChild(text, node);
              math.start = {node: text, delim: '', n: 0};
              math.end = {node: text, delim: '', n: 0};
              doc.math.push(math);
            });
          }, '', false],
          insertedScript: [200, () => {
            document.querySelectorAll('mjx-container').forEach(node => {
              let target = node.parentNode;
              if (target.nodeName.toLowerCase() === 'li') {
                target.parentNode.classList.add('has-jax');
              }
            });
          }, '', false]
        }
      }
    };
    (function () {
      var script = document.createElement('script');
      script.src = '//cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js';
      script.defer = true;
      document.head.appendChild(script);
    })();
  } else {
    MathJax.startup.document.state(0);
    MathJax.texReset();
    MathJax.typeset();
  }
</script>

    

  

</body>
</html>
